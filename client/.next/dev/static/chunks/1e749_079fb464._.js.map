{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/dist/compiled/react/cjs/react-jsx-dev-runtime.development.js"],"sourcesContent":["/**\n * @license React\n * react-jsx-dev-runtime.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function getComponentNameFromType(type) {\n      if (null == type) return null;\n      if (\"function\" === typeof type)\n        return type.$$typeof === REACT_CLIENT_REFERENCE\n          ? null\n          : type.displayName || type.name || null;\n      if (\"string\" === typeof type) return type;\n      switch (type) {\n        case REACT_FRAGMENT_TYPE:\n          return \"Fragment\";\n        case REACT_PROFILER_TYPE:\n          return \"Profiler\";\n        case REACT_STRICT_MODE_TYPE:\n          return \"StrictMode\";\n        case REACT_SUSPENSE_TYPE:\n          return \"Suspense\";\n        case REACT_SUSPENSE_LIST_TYPE:\n          return \"SuspenseList\";\n        case REACT_ACTIVITY_TYPE:\n          return \"Activity\";\n        case REACT_VIEW_TRANSITION_TYPE:\n          return \"ViewTransition\";\n      }\n      if (\"object\" === typeof type)\n        switch (\n          (\"number\" === typeof type.tag &&\n            console.error(\n              \"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"\n            ),\n          type.$$typeof)\n        ) {\n          case REACT_PORTAL_TYPE:\n            return \"Portal\";\n          case REACT_CONTEXT_TYPE:\n            return type.displayName || \"Context\";\n          case REACT_CONSUMER_TYPE:\n            return (type._context.displayName || \"Context\") + \".Consumer\";\n          case REACT_FORWARD_REF_TYPE:\n            var innerType = type.render;\n            type = type.displayName;\n            type ||\n              ((type = innerType.displayName || innerType.name || \"\"),\n              (type = \"\" !== type ? \"ForwardRef(\" + type + \")\" : \"ForwardRef\"));\n            return type;\n          case REACT_MEMO_TYPE:\n            return (\n              (innerType = type.displayName || null),\n              null !== innerType\n                ? innerType\n                : getComponentNameFromType(type.type) || \"Memo\"\n            );\n          case REACT_LAZY_TYPE:\n            innerType = type._payload;\n            type = type._init;\n            try {\n              return getComponentNameFromType(type(innerType));\n            } catch (x) {}\n        }\n      return null;\n    }\n    function testStringCoercion(value) {\n      return \"\" + value;\n    }\n    function checkKeyStringCoercion(value) {\n      try {\n        testStringCoercion(value);\n        var JSCompiler_inline_result = !1;\n      } catch (e) {\n        JSCompiler_inline_result = !0;\n      }\n      if (JSCompiler_inline_result) {\n        JSCompiler_inline_result = console;\n        var JSCompiler_temp_const = JSCompiler_inline_result.error;\n        var JSCompiler_inline_result$jscomp$0 =\n          (\"function\" === typeof Symbol &&\n            Symbol.toStringTag &&\n            value[Symbol.toStringTag]) ||\n          value.constructor.name ||\n          \"Object\";\n        JSCompiler_temp_const.call(\n          JSCompiler_inline_result,\n          \"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.\",\n          JSCompiler_inline_result$jscomp$0\n        );\n        return testStringCoercion(value);\n      }\n    }\n    function getTaskName(type) {\n      if (type === REACT_FRAGMENT_TYPE) return \"<>\";\n      if (\n        \"object\" === typeof type &&\n        null !== type &&\n        type.$$typeof === REACT_LAZY_TYPE\n      )\n        return \"<...>\";\n      try {\n        var name = getComponentNameFromType(type);\n        return name ? \"<\" + name + \">\" : \"<...>\";\n      } catch (x) {\n        return \"<...>\";\n      }\n    }\n    function getOwner() {\n      var dispatcher = ReactSharedInternals.A;\n      return null === dispatcher ? null : dispatcher.getOwner();\n    }\n    function UnknownOwner() {\n      return Error(\"react-stack-top-frame\");\n    }\n    function hasValidKey(config) {\n      if (hasOwnProperty.call(config, \"key\")) {\n        var getter = Object.getOwnPropertyDescriptor(config, \"key\").get;\n        if (getter && getter.isReactWarning) return !1;\n      }\n      return void 0 !== config.key;\n    }\n    function defineKeyPropWarningGetter(props, displayName) {\n      function warnAboutAccessingKey() {\n        specialPropKeyWarningShown ||\n          ((specialPropKeyWarningShown = !0),\n          console.error(\n            \"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)\",\n            displayName\n          ));\n      }\n      warnAboutAccessingKey.isReactWarning = !0;\n      Object.defineProperty(props, \"key\", {\n        get: warnAboutAccessingKey,\n        configurable: !0\n      });\n    }\n    function elementRefGetterWithDeprecationWarning() {\n      var componentName = getComponentNameFromType(this.type);\n      didWarnAboutElementRef[componentName] ||\n        ((didWarnAboutElementRef[componentName] = !0),\n        console.error(\n          \"Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.\"\n        ));\n      componentName = this.props.ref;\n      return void 0 !== componentName ? componentName : null;\n    }\n    function ReactElement(type, key, props, owner, debugStack, debugTask) {\n      var refProp = props.ref;\n      type = {\n        $$typeof: REACT_ELEMENT_TYPE,\n        type: type,\n        key: key,\n        props: props,\n        _owner: owner\n      };\n      null !== (void 0 !== refProp ? refProp : null)\n        ? Object.defineProperty(type, \"ref\", {\n            enumerable: !1,\n            get: elementRefGetterWithDeprecationWarning\n          })\n        : Object.defineProperty(type, \"ref\", { enumerable: !1, value: null });\n      type._store = {};\n      Object.defineProperty(type._store, \"validated\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: 0\n      });\n      Object.defineProperty(type, \"_debugInfo\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: null\n      });\n      Object.defineProperty(type, \"_debugStack\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugStack\n      });\n      Object.defineProperty(type, \"_debugTask\", {\n        configurable: !1,\n        enumerable: !1,\n        writable: !0,\n        value: debugTask\n      });\n      Object.freeze && (Object.freeze(type.props), Object.freeze(type));\n      return type;\n    }\n    function jsxDEVImpl(\n      type,\n      config,\n      maybeKey,\n      isStaticChildren,\n      debugStack,\n      debugTask\n    ) {\n      var children = config.children;\n      if (void 0 !== children)\n        if (isStaticChildren)\n          if (isArrayImpl(children)) {\n            for (\n              isStaticChildren = 0;\n              isStaticChildren < children.length;\n              isStaticChildren++\n            )\n              validateChildKeys(children[isStaticChildren]);\n            Object.freeze && Object.freeze(children);\n          } else\n            console.error(\n              \"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\"\n            );\n        else validateChildKeys(children);\n      if (hasOwnProperty.call(config, \"key\")) {\n        children = getComponentNameFromType(type);\n        var keys = Object.keys(config).filter(function (k) {\n          return \"key\" !== k;\n        });\n        isStaticChildren =\n          0 < keys.length\n            ? \"{key: someKey, \" + keys.join(\": ..., \") + \": ...}\"\n            : \"{key: someKey}\";\n        didWarnAboutKeySpread[children + isStaticChildren] ||\n          ((keys =\n            0 < keys.length ? \"{\" + keys.join(\": ..., \") + \": ...}\" : \"{}\"),\n          console.error(\n            'A props object containing a \"key\" prop is being spread into JSX:\\n  let props = %s;\\n  <%s {...props} />\\nReact keys must be passed directly to JSX without using spread:\\n  let props = %s;\\n  <%s key={someKey} {...props} />',\n            isStaticChildren,\n            children,\n            keys,\n            children\n          ),\n          (didWarnAboutKeySpread[children + isStaticChildren] = !0));\n      }\n      children = null;\n      void 0 !== maybeKey &&\n        (checkKeyStringCoercion(maybeKey), (children = \"\" + maybeKey));\n      hasValidKey(config) &&\n        (checkKeyStringCoercion(config.key), (children = \"\" + config.key));\n      if (\"key\" in config) {\n        maybeKey = {};\n        for (var propName in config)\n          \"key\" !== propName && (maybeKey[propName] = config[propName]);\n      } else maybeKey = config;\n      children &&\n        defineKeyPropWarningGetter(\n          maybeKey,\n          \"function\" === typeof type\n            ? type.displayName || type.name || \"Unknown\"\n            : type\n        );\n      return ReactElement(\n        type,\n        children,\n        maybeKey,\n        getOwner(),\n        debugStack,\n        debugTask\n      );\n    }\n    function validateChildKeys(node) {\n      isValidElement(node)\n        ? node._store && (node._store.validated = 1)\n        : \"object\" === typeof node &&\n          null !== node &&\n          node.$$typeof === REACT_LAZY_TYPE &&\n          (\"fulfilled\" === node._payload.status\n            ? isValidElement(node._payload.value) &&\n              node._payload.value._store &&\n              (node._payload.value._store.validated = 1)\n            : node._store && (node._store.validated = 1));\n    }\n    function isValidElement(object) {\n      return (\n        \"object\" === typeof object &&\n        null !== object &&\n        object.$$typeof === REACT_ELEMENT_TYPE\n      );\n    }\n    var React = require(\"next/dist/compiled/react\"),\n      REACT_ELEMENT_TYPE = Symbol.for(\"react.transitional.element\"),\n      REACT_PORTAL_TYPE = Symbol.for(\"react.portal\"),\n      REACT_FRAGMENT_TYPE = Symbol.for(\"react.fragment\"),\n      REACT_STRICT_MODE_TYPE = Symbol.for(\"react.strict_mode\"),\n      REACT_PROFILER_TYPE = Symbol.for(\"react.profiler\"),\n      REACT_CONSUMER_TYPE = Symbol.for(\"react.consumer\"),\n      REACT_CONTEXT_TYPE = Symbol.for(\"react.context\"),\n      REACT_FORWARD_REF_TYPE = Symbol.for(\"react.forward_ref\"),\n      REACT_SUSPENSE_TYPE = Symbol.for(\"react.suspense\"),\n      REACT_SUSPENSE_LIST_TYPE = Symbol.for(\"react.suspense_list\"),\n      REACT_MEMO_TYPE = Symbol.for(\"react.memo\"),\n      REACT_LAZY_TYPE = Symbol.for(\"react.lazy\"),\n      REACT_ACTIVITY_TYPE = Symbol.for(\"react.activity\"),\n      REACT_VIEW_TRANSITION_TYPE = Symbol.for(\"react.view_transition\"),\n      REACT_CLIENT_REFERENCE = Symbol.for(\"react.client.reference\"),\n      ReactSharedInternals =\n        React.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,\n      hasOwnProperty = Object.prototype.hasOwnProperty,\n      isArrayImpl = Array.isArray,\n      createTask = console.createTask\n        ? console.createTask\n        : function () {\n            return null;\n          };\n    React = {\n      react_stack_bottom_frame: function (callStackForError) {\n        return callStackForError();\n      }\n    };\n    var specialPropKeyWarningShown;\n    var didWarnAboutElementRef = {};\n    var unknownOwnerDebugStack = React.react_stack_bottom_frame.bind(\n      React,\n      UnknownOwner\n    )();\n    var unknownOwnerDebugTask = createTask(getTaskName(UnknownOwner));\n    var didWarnAboutKeySpread = {};\n    exports.Fragment = REACT_FRAGMENT_TYPE;\n    exports.jsxDEV = function (type, config, maybeKey, isStaticChildren) {\n      var trackActualOwner =\n        1e4 > ReactSharedInternals.recentlyCreatedOwnerStacks++;\n      if (trackActualOwner) {\n        var previousStackTraceLimit = Error.stackTraceLimit;\n        Error.stackTraceLimit = 10;\n        var debugStackDEV = Error(\"react-stack-top-frame\");\n        Error.stackTraceLimit = previousStackTraceLimit;\n      } else debugStackDEV = unknownOwnerDebugStack;\n      return jsxDEVImpl(\n        type,\n        config,\n        maybeKey,\n        isStaticChildren,\n        debugStackDEV,\n        trackActualOwner ? createTask(getTaskName(type)) : unknownOwnerDebugTask\n      );\n    };\n  })();\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 220, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/dist/compiled/react/jsx-dev-runtime.js"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-dev-runtime.production.js');\n} else {\n  module.exports = require('./cjs/react-jsx-dev-runtime.development.js');\n}\n"],"names":[],"mappings":"AAEI;AAFJ;AAEA;;KAEO;IACL,OAAO,OAAO;AAChB","ignoreList":[0]}},
    {"offset": {"line": 230, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/image-blur-svg.ts"],"sourcesContent":["/**\n * A shared function, used on both client and server, to generate a SVG blur placeholder.\n */\nexport function getImageBlurSvg({\n  widthInt,\n  heightInt,\n  blurWidth,\n  blurHeight,\n  blurDataURL,\n  objectFit,\n}: {\n  widthInt?: number\n  heightInt?: number\n  blurWidth?: number\n  blurHeight?: number\n  blurDataURL: string\n  objectFit?: string\n}): string {\n  const std = 20\n  const svgWidth = blurWidth ? blurWidth * 40 : widthInt\n  const svgHeight = blurHeight ? blurHeight * 40 : heightInt\n\n  const viewBox =\n    svgWidth && svgHeight ? `viewBox='0 0 ${svgWidth} ${svgHeight}'` : ''\n  const preserveAspectRatio = viewBox\n    ? 'none'\n    : objectFit === 'contain'\n      ? 'xMidYMid'\n      : objectFit === 'cover'\n        ? 'xMidYMid slice'\n        : 'none'\n\n  return `%3Csvg xmlns='http://www.w3.org/2000/svg' ${viewBox}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='${std}'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='${std}'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${preserveAspectRatio}' style='filter: url(%23b);' href='${blurDataURL}'/%3E%3C/svg%3E`\n}\n"],"names":["getImageBlurSvg","widthInt","heightInt","blurWidth","blurHeight","blurDataURL","objectFit","std","svgWidth","svgHeight","viewBox","preserveAspectRatio"],"mappings":"AAAA;;CAEC;;;+BACeA,mBAAAA;;;eAAAA;;;AAAT,SAASA,gBAAgB,EAC9BC,QAAQ,EACRC,SAAS,EACTC,SAAS,EACTC,UAAU,EACVC,WAAW,EACXC,SAAS,EAQV;IACC,MAAMC,MAAM;IACZ,MAAMC,WAAWL,YAAYA,YAAY,KAAKF;IAC9C,MAAMQ,YAAYL,aAAaA,aAAa,KAAKF;IAEjD,MAAMQ,UACJF,YAAYC,YAAY,CAAC,aAAa,EAAED,SAAS,CAAC,EAAEC,UAAU,CAAC,CAAC,GAAG;IACrE,MAAME,sBAAsBD,UACxB,SACAJ,cAAc,YACZ,aACAA,cAAc,UACZ,mBACA;IAER,OAAO,CAAC,0CAA0C,EAAEI,QAAQ,yFAAyF,EAAEH,IAAI,+PAA+P,EAAEA,IAAI,2FAA2F,EAAEI,oBAAoB,mCAAmC,EAAEN,YAAY,eAAe,CAAC;AACplB","ignoreList":[0]}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/image-config.ts"],"sourcesContent":["export const VALID_LOADERS = [\n  'default',\n  'imgix',\n  'cloudinary',\n  'akamai',\n  'custom',\n] as const\n\nexport type LoaderValue = (typeof VALID_LOADERS)[number]\n\nexport type ImageLoaderProps = {\n  src: string\n  width: number\n  quality?: number\n}\n\nexport type ImageLoaderPropsWithConfig = ImageLoaderProps & {\n  config: Readonly<ImageConfig>\n}\n\nexport type LocalPattern = {\n  /**\n   * Can be literal or wildcard.\n   * Single `*` matches a single path segment.\n   * Double `**` matches any number of path segments.\n   */\n  pathname?: string\n\n  /**\n   * Can be literal query string such as `?v=1` or\n   * empty string meaning no query string.\n   */\n  search?: string\n}\n\nexport type RemotePattern = {\n  /**\n   * Must be `http` or `https`.\n   */\n  protocol?: 'http' | 'https'\n\n  /**\n   * Can be literal or wildcard.\n   * Single `*` matches a single subdomain.\n   * Double `**` matches any number of subdomains.\n   */\n  hostname: string\n\n  /**\n   * Can be literal port such as `8080` or empty string\n   * meaning no port.\n   */\n  port?: string\n\n  /**\n   * Can be literal or wildcard.\n   * Single `*` matches a single path segment.\n   * Double `**` matches any number of path segments.\n   */\n  pathname?: string\n\n  /**\n   * Can be literal query string such as `?v=1` or\n   * empty string meaning no query string.\n   */\n  search?: string\n}\n\ntype ImageFormat = 'image/avif' | 'image/webp'\n\n/**\n * Image configurations\n *\n * @see [Image configuration options](https://nextjs.org/docs/api-reference/next/image#configuration-options)\n */\nexport type ImageConfigComplete = {\n  /** @see [Device sizes documentation](https://nextjs.org/docs/api-reference/next/image#device-sizes) */\n  deviceSizes: number[]\n\n  /** @see [Image sizing documentation](https://nextjs.org/docs/app/building-your-application/optimizing/images#image-sizing) */\n  imageSizes: number[]\n\n  /** @see [Image loaders configuration](https://nextjs.org/docs/api-reference/next/legacy/image#loader) */\n  loader: LoaderValue\n\n  /** @see [Image loader configuration](https://nextjs.org/docs/app/api-reference/components/image#path) */\n  path: string\n\n  /** @see [Image loader configuration](https://nextjs.org/docs/api-reference/next/image#loader-configuration) */\n  loaderFile: string\n\n  /**\n   * @deprecated Use `remotePatterns` instead.\n   */\n  domains: string[]\n\n  /** @see [Disable static image import configuration](https://nextjs.org/docs/api-reference/next/image#disable-static-imports) */\n  disableStaticImages: boolean\n\n  /** @see [Cache behavior](https://nextjs.org/docs/api-reference/next/image#caching-behavior) */\n  minimumCacheTTL: number\n\n  /** @see [Acceptable formats](https://nextjs.org/docs/api-reference/next/image#acceptable-formats) */\n  formats: ImageFormat[]\n\n  /** @see [Maximum Redirects](https://nextjs.org/docs/api-reference/next/image#maximumredirects) */\n  maximumRedirects: number\n\n  /** @see [Maximum Response Body](https://nextjs.org/docs/api-reference/next/image#maximumresponsebody) */\n  maximumResponseBody: number\n\n  /** @see [Dangerously Allow Local IP](https://nextjs.org/docs/api-reference/next/image#dangerously-allow-local-ip) */\n  dangerouslyAllowLocalIP: boolean\n\n  /** @see [Dangerously Allow SVG](https://nextjs.org/docs/api-reference/next/image#dangerously-allow-svg) */\n  dangerouslyAllowSVG: boolean\n\n  /** @see [Content Security Policy](https://nextjs.org/docs/api-reference/next/image#contentsecuritypolicy) */\n  contentSecurityPolicy: string\n\n  /** @see [Content Disposition Type](https://nextjs.org/docs/api-reference/next/image#contentdispositiontype) */\n  contentDispositionType: 'inline' | 'attachment'\n\n  /** @see [Remote Patterns](https://nextjs.org/docs/api-reference/next/image#remotepatterns) */\n  remotePatterns: Array<URL | RemotePattern>\n\n  /** @see [Local Patterns](https://nextjs.org/docs/api-reference/next/image#localPatterns) */\n  localPatterns: LocalPattern[] | undefined\n\n  /** @see [Qualities](https://nextjs.org/docs/api-reference/next/image#qualities) */\n  qualities: number[] | undefined\n\n  /** @see [Unoptimized](https://nextjs.org/docs/api-reference/next/image#unoptimized) */\n  unoptimized: boolean\n}\n\nexport type ImageConfig = Partial<ImageConfigComplete>\n\nexport const imageConfigDefault: ImageConfigComplete = {\n  deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],\n  imageSizes: [32, 48, 64, 96, 128, 256, 384],\n  path: '/_next/image',\n  loader: 'default',\n  loaderFile: '',\n  /**\n   * @deprecated Use `remotePatterns` instead to protect your application from malicious users.\n   */\n  domains: [],\n  disableStaticImages: false,\n  minimumCacheTTL: 14400, // 4 hours\n  formats: ['image/webp'],\n  maximumRedirects: 3,\n  maximumResponseBody: 50_000_000, // 50 MB\n  dangerouslyAllowLocalIP: false,\n  dangerouslyAllowSVG: false,\n  contentSecurityPolicy: `script-src 'none'; frame-src 'none'; sandbox;`,\n  contentDispositionType: 'attachment',\n  localPatterns: undefined, // default: allow all local images\n  remotePatterns: [], // default: allow no remote images\n  qualities: [75],\n  unoptimized: false,\n}\n"],"names":["VALID_LOADERS","imageConfigDefault","deviceSizes","imageSizes","path","loader","loaderFile","domains","disableStaticImages","minimumCacheTTL","formats","maximumRedirects","maximumResponseBody","dangerouslyAllowLocalIP","dangerouslyAllowSVG","contentSecurityPolicy","contentDispositionType","localPatterns","undefined","remotePatterns","qualities","unoptimized"],"mappings":";;;;;;;;;;;;;;IAAaA,aAAa,EAAA;eAAbA;;IA0IAC,kBAAkB,EAAA;eAAlBA;;;AA1IN,MAAMD,gBAAgB;IAC3B;IACA;IACA;IACA;IACA;CACD;AAoIM,MAAMC,qBAA0C;IACrDC,aAAa;QAAC;QAAK;QAAK;QAAK;QAAM;QAAM;QAAM;QAAM;KAAK;IAC1DC,YAAY;QAAC;QAAI;QAAI;QAAI;QAAI;QAAK;QAAK;KAAI;IAC3CC,MAAM;IACNC,QAAQ;IACRC,YAAY;IACZ;;GAEC,GACDC,SAAS,EAAE;IACXC,qBAAqB;IACrBC,iBAAiB;IACjBC,SAAS;QAAC;KAAa;IACvBC,kBAAkB;IAClBC,qBAAqB;IACrBC,yBAAyB;IACzBC,qBAAqB;IACrBC,uBAAuB,CAAC,6CAA6C,CAAC;IACtEC,wBAAwB;IACxBC,eAAeC;IACfC,gBAAgB,EAAE;IAClBC,WAAW;QAAC;KAAG;IACfC,aAAa;AACf","ignoreList":[0]}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/get-img-props.ts"],"sourcesContent":["import { warnOnce } from './utils/warn-once'\nimport { getDeploymentId } from './deployment-id'\nimport { getImageBlurSvg } from './image-blur-svg'\nimport { imageConfigDefault } from './image-config'\nimport type {\n  ImageConfigComplete,\n  ImageLoaderProps,\n  ImageLoaderPropsWithConfig,\n} from './image-config'\n\nimport type { CSSProperties, JSX } from 'react'\n\nexport interface StaticImageData {\n  src: string\n  height: number\n  width: number\n  blurDataURL?: string\n  blurWidth?: number\n  blurHeight?: number\n}\n\nexport interface StaticRequire {\n  default: StaticImageData\n}\n\nexport type StaticImport = StaticRequire | StaticImageData\n\nexport type ImageProps = Omit<\n  JSX.IntrinsicElements['img'],\n  'src' | 'srcSet' | 'ref' | 'alt' | 'width' | 'height' | 'loading'\n> & {\n  src: string | StaticImport\n  alt: string\n  width?: number | `${number}`\n  height?: number | `${number}`\n  fill?: boolean\n  loader?: ImageLoader\n  quality?: number | `${number}`\n  preload?: boolean\n  /**\n   * @deprecated Use `preload` prop instead.\n   * See https://nextjs.org/docs/app/api-reference/components/image#preload\n   */\n  priority?: boolean\n  loading?: LoadingValue\n  placeholder?: PlaceholderValue\n  blurDataURL?: string\n  unoptimized?: boolean\n  overrideSrc?: string\n  /**\n   * @deprecated Use `onLoad` instead.\n   * @see https://nextjs.org/docs/app/api-reference/components/image#onload\n   */\n  onLoadingComplete?: OnLoadingComplete\n  /**\n   * @deprecated Use `fill` prop instead of `layout=\"fill\"` or change import to `next/legacy/image`.\n   * @see https://nextjs.org/docs/api-reference/next/legacy/image\n   */\n  layout?: string\n  /**\n   * @deprecated Use `style` prop instead.\n   */\n  objectFit?: string\n  /**\n   * @deprecated Use `style` prop instead.\n   */\n  objectPosition?: string\n  /**\n   * @deprecated This prop does not do anything.\n   */\n  lazyBoundary?: string\n  /**\n   * @deprecated This prop does not do anything.\n   */\n  lazyRoot?: string\n}\n\nexport type ImgProps = Omit<ImageProps, 'src' | 'loader'> & {\n  loading: LoadingValue\n  width: number | undefined\n  height: number | undefined\n  style: NonNullable<JSX.IntrinsicElements['img']['style']>\n  sizes: string | undefined\n  srcSet: string | undefined\n  src: string\n}\n\nconst VALID_LOADING_VALUES = ['lazy', 'eager', undefined] as const\n\n// Object-fit values that are not valid background-size values\nconst INVALID_BACKGROUND_SIZE_VALUES = [\n  '-moz-initial',\n  'fill',\n  'none',\n  'scale-down',\n  undefined,\n]\ntype LoadingValue = (typeof VALID_LOADING_VALUES)[number]\ntype ImageConfig = ImageConfigComplete & {\n  allSizes: number[]\n  output?: 'standalone' | 'export'\n}\n\nexport type ImageLoader = (p: ImageLoaderProps) => string\n\n// Do not export - this is an internal type only\n// because `next.config.js` is only meant for the\n// built-in loaders, not for a custom loader() prop.\ntype ImageLoaderWithConfig = (p: ImageLoaderPropsWithConfig) => string\n\nexport type PlaceholderValue = 'blur' | 'empty' | `data:image/${string}`\nexport type OnLoad = React.ReactEventHandler<HTMLImageElement> | undefined\nexport type OnLoadingComplete = (img: HTMLImageElement) => void\n\nexport type PlaceholderStyle = Partial<\n  Pick<\n    CSSProperties,\n    | 'backgroundSize'\n    | 'backgroundPosition'\n    | 'backgroundRepeat'\n    | 'backgroundImage'\n  >\n>\n\nfunction isStaticRequire(\n  src: StaticRequire | StaticImageData\n): src is StaticRequire {\n  return (src as StaticRequire).default !== undefined\n}\n\nfunction isStaticImageData(\n  src: StaticRequire | StaticImageData\n): src is StaticImageData {\n  return (src as StaticImageData).src !== undefined\n}\n\nfunction isStaticImport(src: string | StaticImport): src is StaticImport {\n  return (\n    !!src &&\n    typeof src === 'object' &&\n    (isStaticRequire(src as StaticImport) ||\n      isStaticImageData(src as StaticImport))\n  )\n}\n\nconst allImgs = new Map<\n  string,\n  { src: string; loading: LoadingValue; placeholder: PlaceholderValue }\n>()\nlet perfObserver: PerformanceObserver | undefined\n\nfunction getInt(x: unknown): number | undefined {\n  if (typeof x === 'undefined') {\n    return x\n  }\n  if (typeof x === 'number') {\n    return Number.isFinite(x) ? x : NaN\n  }\n  if (typeof x === 'string' && /^[0-9]+$/.test(x)) {\n    return parseInt(x, 10)\n  }\n  return NaN\n}\n\nfunction getWidths(\n  { deviceSizes, allSizes }: ImageConfig,\n  width: number | undefined,\n  sizes: string | undefined\n): { widths: number[]; kind: 'w' | 'x' } {\n  if (sizes) {\n    // Find all the \"vw\" percent sizes used in the sizes prop\n    const viewportWidthRe = /(^|\\s)(1?\\d?\\d)vw/g\n    const percentSizes = []\n    for (let match; (match = viewportWidthRe.exec(sizes)); match) {\n      percentSizes.push(parseInt(match[2]))\n    }\n    if (percentSizes.length) {\n      const smallestRatio = Math.min(...percentSizes) * 0.01\n      return {\n        widths: allSizes.filter((s) => s >= deviceSizes[0] * smallestRatio),\n        kind: 'w',\n      }\n    }\n    return { widths: allSizes, kind: 'w' }\n  }\n  if (typeof width !== 'number') {\n    return { widths: deviceSizes, kind: 'w' }\n  }\n\n  const widths = [\n    ...new Set(\n      // > This means that most OLED screens that say they are 3x resolution,\n      // > are actually 3x in the green color, but only 1.5x in the red and\n      // > blue colors. Showing a 3x resolution image in the app vs a 2x\n      // > resolution image will be visually the same, though the 3x image\n      // > takes significantly more data. Even true 3x resolution screens are\n      // > wasteful as the human eye cannot see that level of detail without\n      // > something like a magnifying glass.\n      // https://blog.twitter.com/engineering/en_us/topics/infrastructure/2019/capping-image-fidelity-on-ultra-high-resolution-devices.html\n      [width, width * 2 /*, width * 3*/].map(\n        (w) => allSizes.find((p) => p >= w) || allSizes[allSizes.length - 1]\n      )\n    ),\n  ]\n  return { widths, kind: 'x' }\n}\n\ntype GenImgAttrsData = {\n  config: ImageConfig\n  src: string\n  unoptimized: boolean\n  loader: ImageLoaderWithConfig\n  width?: number\n  quality?: number\n  sizes?: string\n}\n\ntype GenImgAttrsResult = {\n  src: string\n  srcSet: string | undefined\n  sizes: string | undefined\n}\n\nfunction generateImgAttrs({\n  config,\n  src,\n  unoptimized,\n  width,\n  quality,\n  sizes,\n  loader,\n}: GenImgAttrsData): GenImgAttrsResult {\n  if (unoptimized) {\n    const deploymentId = getDeploymentId()\n    if (src.startsWith('/') && !src.startsWith('//') && deploymentId) {\n      const sep = src.includes('?') ? '&' : '?'\n      src = `${src}${sep}dpl=${deploymentId}`\n    }\n    return { src, srcSet: undefined, sizes: undefined }\n  }\n\n  const { widths, kind } = getWidths(config, width, sizes)\n  const last = widths.length - 1\n\n  return {\n    sizes: !sizes && kind === 'w' ? '100vw' : sizes,\n    srcSet: widths\n      .map(\n        (w, i) =>\n          `${loader({ config, src, quality, width: w })} ${\n            kind === 'w' ? w : i + 1\n          }${kind}`\n      )\n      .join(', '),\n\n    // It's intended to keep `src` the last attribute because React updates\n    // attributes in order. If we keep `src` the first one, Safari will\n    // immediately start to fetch `src`, before `sizes` and `srcSet` are even\n    // updated by React. That causes multiple unnecessary requests if `srcSet`\n    // and `sizes` are defined.\n    // This bug cannot be reproduced in Chrome or Firefox.\n    src: loader({ config, src, quality, width: widths[last] }),\n  }\n}\n\n/**\n * A shared function, used on both client and server, to generate the props for <img>.\n */\nexport function getImgProps(\n  {\n    src,\n    sizes,\n    unoptimized = false,\n    priority = false,\n    preload = false,\n    loading,\n    className,\n    quality,\n    width,\n    height,\n    fill = false,\n    style,\n    overrideSrc,\n    onLoad,\n    onLoadingComplete,\n    placeholder = 'empty',\n    blurDataURL,\n    fetchPriority,\n    decoding = 'async',\n    layout,\n    objectFit,\n    objectPosition,\n    lazyBoundary,\n    lazyRoot,\n    ...rest\n  }: ImageProps,\n  _state: {\n    defaultLoader: ImageLoaderWithConfig\n    imgConf: ImageConfigComplete\n    showAltText?: boolean\n    blurComplete?: boolean\n  }\n): {\n  props: ImgProps\n  meta: {\n    unoptimized: boolean\n    preload: boolean\n    placeholder: NonNullable<ImageProps['placeholder']>\n    fill: boolean\n  }\n} {\n  const { imgConf, showAltText, blurComplete, defaultLoader } = _state\n  let config: ImageConfig\n  let c = imgConf || imageConfigDefault\n  if ('allSizes' in c) {\n    config = c as ImageConfig\n  } else {\n    const allSizes = [...c.deviceSizes, ...c.imageSizes].sort((a, b) => a - b)\n    const deviceSizes = c.deviceSizes.sort((a, b) => a - b)\n    const qualities = c.qualities?.sort((a, b) => a - b)\n    config = { ...c, allSizes, deviceSizes, qualities }\n  }\n\n  if (typeof defaultLoader === 'undefined') {\n    throw new Error(\n      'images.loaderFile detected but the file is missing default export.\\nRead more: https://nextjs.org/docs/messages/invalid-images-config'\n    )\n  }\n  let loader: ImageLoaderWithConfig = rest.loader || defaultLoader\n\n  // Remove property so it's not spread on <img> element\n  delete rest.loader\n  delete (rest as any).srcSet\n\n  // This special value indicates that the user\n  // didn't define a \"loader\" prop or \"loader\" config.\n  const isDefaultLoader = '__next_img_default' in loader\n\n  if (isDefaultLoader) {\n    if (config.loader === 'custom') {\n      throw new Error(\n        `Image with src \"${src}\" is missing \"loader\" prop.` +\n          `\\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader`\n      )\n    }\n  } else {\n    // The user defined a \"loader\" prop or config.\n    // Since the config object is internal only, we\n    // must not pass it to the user-defined \"loader\".\n    const customImageLoader = loader as ImageLoader\n    loader = (obj) => {\n      const { config: _, ...opts } = obj\n      return customImageLoader(opts)\n    }\n  }\n\n  if (layout) {\n    if (layout === 'fill') {\n      fill = true\n    }\n    const layoutToStyle: Record<string, Record<string, string> | undefined> = {\n      intrinsic: { maxWidth: '100%', height: 'auto' },\n      responsive: { width: '100%', height: 'auto' },\n    }\n    const layoutToSizes: Record<string, string | undefined> = {\n      responsive: '100vw',\n      fill: '100vw',\n    }\n    const layoutStyle = layoutToStyle[layout]\n    if (layoutStyle) {\n      style = { ...style, ...layoutStyle }\n    }\n    const layoutSizes = layoutToSizes[layout]\n    if (layoutSizes && !sizes) {\n      sizes = layoutSizes\n    }\n  }\n\n  let staticSrc = ''\n  let widthInt = getInt(width)\n  let heightInt = getInt(height)\n  let blurWidth: number | undefined\n  let blurHeight: number | undefined\n  if (isStaticImport(src)) {\n    const staticImageData = isStaticRequire(src) ? src.default : src\n\n    if (!staticImageData.src) {\n      throw new Error(\n        `An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(\n          staticImageData\n        )}`\n      )\n    }\n    if (!staticImageData.height || !staticImageData.width) {\n      throw new Error(\n        `An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(\n          staticImageData\n        )}`\n      )\n    }\n\n    blurWidth = staticImageData.blurWidth\n    blurHeight = staticImageData.blurHeight\n    blurDataURL = blurDataURL || staticImageData.blurDataURL\n    staticSrc = staticImageData.src\n\n    if (!fill) {\n      if (!widthInt && !heightInt) {\n        widthInt = staticImageData.width\n        heightInt = staticImageData.height\n      } else if (widthInt && !heightInt) {\n        const ratio = widthInt / staticImageData.width\n        heightInt = Math.round(staticImageData.height * ratio)\n      } else if (!widthInt && heightInt) {\n        const ratio = heightInt / staticImageData.height\n        widthInt = Math.round(staticImageData.width * ratio)\n      }\n    }\n  }\n  src = typeof src === 'string' ? src : staticSrc\n\n  let isLazy =\n    !priority &&\n    !preload &&\n    (loading === 'lazy' || typeof loading === 'undefined')\n  if (!src || src.startsWith('data:') || src.startsWith('blob:')) {\n    // https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/Data_URIs\n    unoptimized = true\n    isLazy = false\n  }\n  if (config.unoptimized) {\n    unoptimized = true\n  }\n  if (\n    isDefaultLoader &&\n    !config.dangerouslyAllowSVG &&\n    src.split('?', 1)[0].endsWith('.svg')\n  ) {\n    // Special case to make svg serve as-is to avoid proxying\n    // through the built-in Image Optimization API.\n    unoptimized = true\n  }\n\n  const qualityInt = getInt(quality)\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (config.output === 'export' && isDefaultLoader && !unoptimized) {\n      throw new Error(\n        `Image Optimization using the default loader is not compatible with \\`{ output: 'export' }\\`.\n  Possible solutions:\n    - Remove \\`{ output: 'export' }\\` and run \"next start\" to run server mode including the Image Optimization API.\n    - Configure \\`{ images: { unoptimized: true } }\\` in \\`next.config.js\\` to disable the Image Optimization API.\n  Read more: https://nextjs.org/docs/messages/export-image-api`\n      )\n    }\n    if (!src) {\n      // React doesn't show the stack trace and there's\n      // no `src` to help identify which image, so we\n      // instead console.error(ref) during mount.\n      unoptimized = true\n    } else {\n      if (fill) {\n        if (width) {\n          throw new Error(\n            `Image with src \"${src}\" has both \"width\" and \"fill\" properties. Only one should be used.`\n          )\n        }\n        if (height) {\n          throw new Error(\n            `Image with src \"${src}\" has both \"height\" and \"fill\" properties. Only one should be used.`\n          )\n        }\n        if (style?.position && style.position !== 'absolute') {\n          throw new Error(\n            `Image with src \"${src}\" has both \"fill\" and \"style.position\" properties. Images with \"fill\" always use position absolute - it cannot be modified.`\n          )\n        }\n        if (style?.width && style.width !== '100%') {\n          throw new Error(\n            `Image with src \"${src}\" has both \"fill\" and \"style.width\" properties. Images with \"fill\" always use width 100% - it cannot be modified.`\n          )\n        }\n        if (style?.height && style.height !== '100%') {\n          throw new Error(\n            `Image with src \"${src}\" has both \"fill\" and \"style.height\" properties. Images with \"fill\" always use height 100% - it cannot be modified.`\n          )\n        }\n      } else {\n        if (typeof widthInt === 'undefined') {\n          throw new Error(\n            `Image with src \"${src}\" is missing required \"width\" property.`\n          )\n        } else if (isNaN(widthInt)) {\n          throw new Error(\n            `Image with src \"${src}\" has invalid \"width\" property. Expected a numeric value in pixels but received \"${width}\".`\n          )\n        }\n        if (typeof heightInt === 'undefined') {\n          throw new Error(\n            `Image with src \"${src}\" is missing required \"height\" property.`\n          )\n        } else if (isNaN(heightInt)) {\n          throw new Error(\n            `Image with src \"${src}\" has invalid \"height\" property. Expected a numeric value in pixels but received \"${height}\".`\n          )\n        }\n        // eslint-disable-next-line no-control-regex\n        if (/^[\\x00-\\x20]/.test(src)) {\n          throw new Error(\n            `Image with src \"${src}\" cannot start with a space or control character. Use src.trimStart() to remove it or encodeURIComponent(src) to keep it.`\n          )\n        }\n        // eslint-disable-next-line no-control-regex\n        if (/[\\x00-\\x20]$/.test(src)) {\n          throw new Error(\n            `Image with src \"${src}\" cannot end with a space or control character. Use src.trimEnd() to remove it or encodeURIComponent(src) to keep it.`\n          )\n        }\n      }\n    }\n    if (!VALID_LOADING_VALUES.includes(loading)) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"loading\" property. Provided \"${loading}\" should be one of ${VALID_LOADING_VALUES.map(\n          String\n        ).join(',')}.`\n      )\n    }\n    if (priority && loading === 'lazy') {\n      throw new Error(\n        `Image with src \"${src}\" has both \"priority\" and \"loading='lazy'\" properties. Only one should be used.`\n      )\n    }\n    if (preload && loading === 'lazy') {\n      throw new Error(\n        `Image with src \"${src}\" has both \"preload\" and \"loading='lazy'\" properties. Only one should be used.`\n      )\n    }\n    if (preload && priority) {\n      throw new Error(\n        `Image with src \"${src}\" has both \"preload\" and \"priority\" properties. Only \"preload\" should be used.`\n      )\n    }\n    if (\n      placeholder !== 'empty' &&\n      placeholder !== 'blur' &&\n      !placeholder.startsWith('data:image/')\n    ) {\n      throw new Error(\n        `Image with src \"${src}\" has invalid \"placeholder\" property \"${placeholder}\".`\n      )\n    }\n    if (placeholder !== 'empty') {\n      if (widthInt && heightInt && widthInt * heightInt < 1600) {\n        warnOnce(\n          `Image with src \"${src}\" is smaller than 40x40. Consider removing the \"placeholder\" property to improve performance.`\n        )\n      }\n    }\n    if (\n      qualityInt &&\n      config.qualities &&\n      !config.qualities.includes(qualityInt)\n    ) {\n      warnOnce(\n        `Image with src \"${src}\" is using quality \"${qualityInt}\" which is not configured in images.qualities [${config.qualities.join(', ')}]. Please update your config to [${[...config.qualities, qualityInt].sort().join(', ')}].` +\n          `\\nRead more: https://nextjs.org/docs/messages/next-image-unconfigured-qualities`\n      )\n    }\n    if (placeholder === 'blur' && !blurDataURL) {\n      const VALID_BLUR_EXT = ['jpeg', 'png', 'webp', 'avif'] // should match next-image-loader\n\n      throw new Error(\n        `Image with src \"${src}\" has \"placeholder='blur'\" property but is missing the \"blurDataURL\" property.\n        Possible solutions:\n          - Add a \"blurDataURL\" property, the contents should be a small Data URL to represent the image\n          - Change the \"src\" property to a static import with one of the supported file types: ${VALID_BLUR_EXT.join(\n            ','\n          )} (animated images not supported)\n          - Remove the \"placeholder\" property, effectively no blur effect\n        Read more: https://nextjs.org/docs/messages/placeholder-blur-data-url`\n      )\n    }\n    if ('ref' in rest) {\n      warnOnce(\n        `Image with src \"${src}\" is using unsupported \"ref\" property. Consider using the \"onLoad\" property instead.`\n      )\n    }\n\n    if (!unoptimized && !isDefaultLoader) {\n      const urlStr = loader({\n        config,\n        src,\n        width: widthInt || 400,\n        quality: qualityInt || 75,\n      })\n      let url: URL | undefined\n      try {\n        url = new URL(urlStr)\n      } catch (err) {}\n      if (urlStr === src || (url && url.pathname === src && !url.search)) {\n        warnOnce(\n          `Image with src \"${src}\" has a \"loader\" property that does not implement width. Please implement it or use the \"unoptimized\" property instead.` +\n            `\\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader-width`\n        )\n      }\n    }\n\n    if (onLoadingComplete) {\n      warnOnce(\n        `Image with src \"${src}\" is using deprecated \"onLoadingComplete\" property. Please use the \"onLoad\" property instead.`\n      )\n    }\n\n    for (const [legacyKey, legacyValue] of Object.entries({\n      layout,\n      objectFit,\n      objectPosition,\n      lazyBoundary,\n      lazyRoot,\n    })) {\n      if (legacyValue) {\n        warnOnce(\n          `Image with src \"${src}\" has legacy prop \"${legacyKey}\". Did you forget to run the codemod?` +\n            `\\nRead more: https://nextjs.org/docs/messages/next-image-upgrade-to-13`\n        )\n      }\n    }\n\n    if (\n      typeof window !== 'undefined' &&\n      !perfObserver &&\n      window.PerformanceObserver\n    ) {\n      perfObserver = new PerformanceObserver((entryList) => {\n        for (const entry of entryList.getEntries()) {\n          // @ts-ignore - missing \"LargestContentfulPaint\" class with \"element\" prop\n          const imgSrc = entry?.element?.src || ''\n          const lcpImage = allImgs.get(imgSrc)\n          if (\n            lcpImage &&\n            lcpImage.loading === 'lazy' &&\n            lcpImage.placeholder === 'empty' &&\n            !lcpImage.src.startsWith('data:') &&\n            !lcpImage.src.startsWith('blob:')\n          ) {\n            // https://web.dev/lcp/#measure-lcp-in-javascript\n            warnOnce(\n              `Image with src \"${lcpImage.src}\" was detected as the Largest Contentful Paint (LCP). Please add the \\`loading=\"eager\"\\` property if this image is above the fold.` +\n                `\\nRead more: https://nextjs.org/docs/app/api-reference/components/image#loading`\n            )\n          }\n        }\n      })\n      try {\n        perfObserver.observe({\n          type: 'largest-contentful-paint',\n          buffered: true,\n        })\n      } catch (err) {\n        // Log error but don't crash the app\n        console.error(err)\n      }\n    }\n  }\n  const imgStyle = Object.assign(\n    fill\n      ? {\n          position: 'absolute',\n          height: '100%',\n          width: '100%',\n          left: 0,\n          top: 0,\n          right: 0,\n          bottom: 0,\n          objectFit,\n          objectPosition,\n        }\n      : {},\n    showAltText ? {} : { color: 'transparent' },\n    style\n  )\n\n  const backgroundImage =\n    !blurComplete && placeholder !== 'empty'\n      ? placeholder === 'blur'\n        ? `url(\"data:image/svg+xml;charset=utf-8,${getImageBlurSvg({\n            widthInt,\n            heightInt,\n            blurWidth,\n            blurHeight,\n            blurDataURL: blurDataURL || '', // assume not undefined\n            objectFit: imgStyle.objectFit,\n          })}\")`\n        : `url(\"${placeholder}\")` // assume `data:image/`\n      : null\n\n  const backgroundSize = !INVALID_BACKGROUND_SIZE_VALUES.includes(\n    imgStyle.objectFit\n  )\n    ? imgStyle.objectFit\n    : imgStyle.objectFit === 'fill'\n      ? '100% 100%' // the background-size equivalent of `fill`\n      : 'cover'\n\n  let placeholderStyle: PlaceholderStyle = backgroundImage\n    ? {\n        backgroundSize,\n        backgroundPosition: imgStyle.objectPosition || '50% 50%',\n        backgroundRepeat: 'no-repeat',\n        backgroundImage,\n      }\n    : {}\n\n  if (process.env.NODE_ENV === 'development') {\n    if (\n      placeholderStyle.backgroundImage &&\n      placeholder === 'blur' &&\n      blurDataURL?.startsWith('/')\n    ) {\n      // During `next dev`, we don't want to generate blur placeholders with webpack\n      // because it can delay starting the dev server. Instead, `next-image-loader.js`\n      // will inline a special url to lazily generate the blur placeholder at request time.\n      placeholderStyle.backgroundImage = `url(\"${blurDataURL}\")`\n    }\n  }\n\n  const imgAttributes = generateImgAttrs({\n    config,\n    src,\n    unoptimized,\n    width: widthInt,\n    quality: qualityInt,\n    sizes,\n    loader,\n  })\n\n  const loadingFinal = isLazy ? 'lazy' : loading\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof window !== 'undefined') {\n      let fullUrl: URL\n      try {\n        fullUrl = new URL(imgAttributes.src)\n      } catch (e) {\n        fullUrl = new URL(imgAttributes.src, window.location.href)\n      }\n      allImgs.set(fullUrl.href, { src, loading: loadingFinal, placeholder })\n    }\n  }\n\n  const props: ImgProps = {\n    ...rest,\n    loading: loadingFinal,\n    fetchPriority,\n    width: widthInt,\n    height: heightInt,\n    decoding,\n    className,\n    style: { ...imgStyle, ...placeholderStyle },\n    sizes: imgAttributes.sizes,\n    srcSet: imgAttributes.srcSet,\n    src: overrideSrc || imgAttributes.src,\n  }\n  const meta = { unoptimized, preload: preload || priority, placeholder, fill }\n  return { props, meta }\n}\n"],"names":["getImgProps","VALID_LOADING_VALUES","undefined","INVALID_BACKGROUND_SIZE_VALUES","isStaticRequire","src","default","isStaticImageData","isStaticImport","allImgs","Map","perfObserver","getInt","x","Number","isFinite","NaN","test","parseInt","getWidths","deviceSizes","allSizes","width","sizes","viewportWidthRe","percentSizes","match","exec","push","length","smallestRatio","Math","min","widths","filter","s","kind","Set","map","w","find","p","generateImgAttrs","config","unoptimized","quality","loader","deploymentId","getDeploymentId","startsWith","sep","includes","srcSet","last","i","join","priority","preload","loading","className","height","fill","style","overrideSrc","onLoad","onLoadingComplete","placeholder","blurDataURL","fetchPriority","decoding","layout","objectFit","objectPosition","lazyBoundary","lazyRoot","rest","_state","imgConf","showAltText","blurComplete","defaultLoader","c","imageConfigDefault","imageSizes","sort","a","b","qualities","Error","isDefaultLoader","customImageLoader","obj","_","opts","layoutToStyle","intrinsic","maxWidth","responsive","layoutToSizes","layoutStyle","layoutSizes","staticSrc","widthInt","heightInt","blurWidth","blurHeight","staticImageData","JSON","stringify","ratio","round","isLazy","dangerouslyAllowSVG","split","endsWith","qualityInt","process","env","NODE_ENV","output","position","isNaN","String","warnOnce","VALID_BLUR_EXT","urlStr","url","URL","err","pathname","search","legacyKey","legacyValue","Object","entries","window","PerformanceObserver","entryList","entry","getEntries","imgSrc","element","lcpImage","get","observe","type","buffered","console","error","imgStyle","assign","left","top","right","bottom","color","backgroundImage","getImageBlurSvg","backgroundSize","placeholderStyle","backgroundPosition","backgroundRepeat","imgAttributes","loadingFinal","fullUrl","e","location","href","set","props","meta"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/side-effect.tsx"],"sourcesContent":["import type React from 'react'\nimport { Children, useEffect, useLayoutEffect, type JSX } from 'react'\n\ntype State = JSX.Element[] | undefined\n\nexport type SideEffectProps = {\n  reduceComponentsToState: (components: Array<React.ReactElement<any>>) => State\n  handleStateChange?: (state: State) => void\n  headManager: any\n  children: React.ReactNode\n}\n\nconst isServer = typeof window === 'undefined'\nconst useClientOnlyLayoutEffect = isServer ? () => {} : useLayoutEffect\nconst useClientOnlyEffect = isServer ? () => {} : useEffect\n\nexport default function SideEffect(props: SideEffectProps) {\n  const { headManager, reduceComponentsToState } = props\n\n  function emitChange() {\n    if (headManager && headManager.mountedInstances) {\n      const headElements = Children.toArray(\n        Array.from(headManager.mountedInstances as Set<React.ReactNode>).filter(\n          Boolean\n        )\n      ) as React.ReactElement[]\n      headManager.updateHead(reduceComponentsToState(headElements))\n    }\n  }\n\n  if (isServer) {\n    headManager?.mountedInstances?.add(props.children)\n    emitChange()\n  }\n\n  useClientOnlyLayoutEffect(() => {\n    headManager?.mountedInstances?.add(props.children)\n    return () => {\n      headManager?.mountedInstances?.delete(props.children)\n    }\n  })\n\n  // We need to call `updateHead` method whenever the `SideEffect` is trigger in all\n  // life-cycles: mount, update, unmount. However, if there are multiple `SideEffect`s\n  // being rendered, we only trigger the method from the last one.\n  // This is ensured by keeping the last unflushed `updateHead` in the `_pendingUpdate`\n  // singleton in the layout effect pass, and actually trigger it in the effect pass.\n  useClientOnlyLayoutEffect(() => {\n    if (headManager) {\n      headManager._pendingUpdate = emitChange\n    }\n    return () => {\n      if (headManager) {\n        headManager._pendingUpdate = emitChange\n      }\n    }\n  })\n\n  useClientOnlyEffect(() => {\n    if (headManager && headManager._pendingUpdate) {\n      headManager._pendingUpdate()\n      headManager._pendingUpdate = null\n    }\n    return () => {\n      if (headManager && headManager._pendingUpdate) {\n        headManager._pendingUpdate()\n        headManager._pendingUpdate = null\n      }\n    }\n  })\n\n  return null\n}\n"],"names":["SideEffect","isServer","window","useClientOnlyLayoutEffect","useLayoutEffect","useClientOnlyEffect","useEffect","props","headManager","reduceComponentsToState","emitChange","mountedInstances","headElements","Children","toArray","Array","from","filter","Boolean","updateHead","add","children","delete","_pendingUpdate"],"mappings":";;;+BAgBA,WAAA;;;eAAwBA;;;uBAfuC;AAW/D,MAAMC,WAAW,OAAOC,WAAW;AACnC,MAAMC,4BAA4BF,WAAW,KAAO,IAAIG,OAAAA,eAAe;AACvE,MAAMC,sBAAsBJ,WAAW,KAAO,IAAIK,OAAAA,SAAS;AAE5C,SAASN,WAAWO,KAAsB;IACvD,MAAM,EAAEC,WAAW,EAAEC,uBAAuB,EAAE,GAAGF;IAEjD,SAASG;QACP,IAAIF,eAAeA,YAAYG,gBAAgB,EAAE;YAC/C,MAAMC,eAAeC,OAAAA,QAAQ,CAACC,OAAO,CACnCC,MAAMC,IAAI,CAACR,YAAYG,gBAAgB,EAA0BM,MAAM,CACrEC;YAGJV,YAAYW,UAAU,CAACV,wBAAwBG;QACjD;IACF;IAEA,IAAIX,UAAU;QACZO,aAAaG,kBAAkBS,IAAIb,MAAMc,QAAQ;QACjDX;IACF;IAEAP;gDAA0B;YACxBK,aAAaG,kBAAkBS,IAAIb,MAAMc,QAAQ;YACjD;wDAAO;oBACLb,aAAaG,kBAAkBW,OAAOf,MAAMc,QAAQ;gBACtD;;QACF;;IAEA,kFAAkF;IAClF,oFAAoF;IACpF,gEAAgE;IAChE,qFAAqF;IACrF,mFAAmF;IACnFlB;gDAA0B;YACxB,IAAIK,aAAa;gBACfA,YAAYe,cAAc,GAAGb;YAC/B;YACA;wDAAO;oBACL,IAAIF,aAAa;wBACfA,YAAYe,cAAc,GAAGb;oBAC/B;gBACF;;QACF;;IAEAL;0CAAoB;YAClB,IAAIG,eAAeA,YAAYe,cAAc,EAAE;gBAC7Cf,YAAYe,cAAc;gBAC1Bf,YAAYe,cAAc,GAAG;YAC/B;YACA;kDAAO;oBACL,IAAIf,eAAeA,YAAYe,cAAc,EAAE;wBAC7Cf,YAAYe,cAAc;wBAC1Bf,YAAYe,cAAc,GAAG;oBAC/B;gBACF;;QACF;;IAEA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 991, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/head.tsx"],"sourcesContent":["'use client'\n\nimport React, { useContext, type JSX } from 'react'\nimport Effect from './side-effect'\nimport { HeadManagerContext } from './head-manager-context.shared-runtime'\nimport { warnOnce } from './utils/warn-once'\n\nexport function defaultHead(): JSX.Element[] {\n  const head = [\n    <meta charSet=\"utf-8\" key=\"charset\" />,\n    <meta name=\"viewport\" content=\"width=device-width\" key=\"viewport\" />,\n  ]\n  return head\n}\n\nfunction onlyReactElement(\n  list: Array<React.ReactElement<any>>,\n  child: React.ReactElement | number | string\n): Array<React.ReactElement<any>> {\n  // React children can be \"string\" or \"number\" in this case we ignore them for backwards compat\n  if (typeof child === 'string' || typeof child === 'number') {\n    return list\n  }\n  // Adds support for React.Fragment\n  if (child.type === React.Fragment) {\n    return list.concat(\n      // @ts-expect-error @types/react does not remove fragments but this could also return ReactPortal[]\n      React.Children.toArray(child.props.children).reduce(\n        // @ts-expect-error @types/react does not remove fragments but this could also return ReactPortal[]\n        (\n          fragmentList: Array<React.ReactElement<any>>,\n          fragmentChild: React.ReactElement | number | string\n        ): Array<React.ReactElement<any>> => {\n          if (\n            typeof fragmentChild === 'string' ||\n            typeof fragmentChild === 'number'\n          ) {\n            return fragmentList\n          }\n          return fragmentList.concat(fragmentChild)\n        },\n        []\n      )\n    )\n  }\n  return list.concat(child)\n}\n\nconst METATYPES = ['name', 'httpEquiv', 'charSet', 'itemProp']\n\n/*\n returns a function for filtering head child elements\n which shouldn't be duplicated, like <title/>\n Also adds support for deduplicated `key` properties\n*/\nfunction unique() {\n  const keys = new Set()\n  const tags = new Set()\n  const metaTypes = new Set()\n  const metaCategories: { [metatype: string]: Set<string> } = {}\n\n  return (h: React.ReactElement<any>) => {\n    let isUnique = true\n    let hasKey = false\n\n    if (h.key && typeof h.key !== 'number' && h.key.indexOf('$') > 0) {\n      hasKey = true\n      const key = h.key.slice(h.key.indexOf('$') + 1)\n      if (keys.has(key)) {\n        isUnique = false\n      } else {\n        keys.add(key)\n      }\n    }\n\n    // eslint-disable-next-line default-case\n    switch (h.type) {\n      case 'title':\n      case 'base':\n        if (tags.has(h.type)) {\n          isUnique = false\n        } else {\n          tags.add(h.type)\n        }\n        break\n      case 'meta':\n        for (let i = 0, len = METATYPES.length; i < len; i++) {\n          const metatype = METATYPES[i]\n          if (!h.props.hasOwnProperty(metatype)) continue\n\n          if (metatype === 'charSet') {\n            if (metaTypes.has(metatype)) {\n              isUnique = false\n            } else {\n              metaTypes.add(metatype)\n            }\n          } else {\n            const category = h.props[metatype]\n            const categories = metaCategories[metatype] || new Set()\n            if ((metatype !== 'name' || !hasKey) && categories.has(category)) {\n              isUnique = false\n            } else {\n              categories.add(category)\n              metaCategories[metatype] = categories\n            }\n          }\n        }\n        break\n    }\n\n    return isUnique\n  }\n}\n\n/**\n *\n * @param headChildrenElements List of children of <Head>\n */\nfunction reduceComponents(\n  headChildrenElements: Array<React.ReactElement<any>>\n) {\n  return headChildrenElements\n    .reduce(onlyReactElement, [])\n    .reverse()\n    .concat(defaultHead().reverse())\n    .filter(unique())\n    .reverse()\n    .map((c: React.ReactElement<any>, i: number) => {\n      const key = c.key || i\n      if (process.env.NODE_ENV === 'development') {\n        // omit JSON-LD structured data snippets from the warning\n        if (c.type === 'script' && c.props['type'] !== 'application/ld+json') {\n          const srcMessage = c.props['src']\n            ? `<script> tag with src=\"${c.props['src']}\"`\n            : `inline <script>`\n          warnOnce(\n            `Do not add <script> tags using next/head (see ${srcMessage}). Use next/script instead. \\nSee more info here: https://nextjs.org/docs/messages/no-script-tags-in-head-component`\n          )\n        } else if (c.type === 'link' && c.props['rel'] === 'stylesheet') {\n          warnOnce(\n            `Do not add stylesheets using next/head (see <link rel=\"stylesheet\"> tag with href=\"${c.props['href']}\"). Use Document instead. \\nSee more info here: https://nextjs.org/docs/messages/no-stylesheets-in-head-component`\n          )\n        }\n      }\n      return React.cloneElement(c, { key })\n    })\n}\n\n/**\n * This component injects elements to `<head>` of your page.\n * To avoid duplicated `tags` in `<head>` you can use the `key` property, which will make sure every tag is only rendered once.\n */\nfunction Head({ children }: { children: React.ReactNode }) {\n  const headManager = useContext(HeadManagerContext)\n  return (\n    <Effect\n      reduceComponentsToState={reduceComponents}\n      headManager={headManager}\n    >\n      {children}\n    </Effect>\n  )\n}\n\nexport default Head\n"],"names":["defaultHead","head","meta","charSet","name","content","onlyReactElement","list","child","type","React","Fragment","concat","Children","toArray","props","children","reduce","fragmentList","fragmentChild","METATYPES","unique","keys","Set","tags","metaTypes","metaCategories","h","isUnique","hasKey","key","indexOf","slice","has","add","i","len","length","metatype","hasOwnProperty","category","categories","reduceComponents","headChildrenElements","reverse","filter","map","c","process","env","NODE_ENV","srcMessage","warnOnce","cloneElement","Head","headManager","useContext","HeadManagerContext","Effect","reduceComponentsToState"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1156, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/image-config-context.shared-runtime.ts"],"sourcesContent":["import React from 'react'\nimport type { ImageConfigComplete } from './image-config'\nimport { imageConfigDefault } from './image-config'\n\nexport const ImageConfigContext =\n  React.createContext<ImageConfigComplete>(imageConfigDefault)\n\nif (process.env.NODE_ENV !== 'production') {\n  ImageConfigContext.displayName = 'ImageConfigContext'\n}\n"],"names":["ImageConfigContext","React","createContext","imageConfigDefault","process","env","NODE_ENV","displayName"],"mappings":"AAOII,QAAQC,GAAG,CAACC,QAAQ,KAAK;;;;;+BAHhBN,sBAAAA;;;eAAAA;;;;gEAJK;6BAEiB;AAE5B,MAAMA,qBACXC,OAAAA,OAAK,CAACC,aAAa,CAAsBC,aAAAA,kBAAkB;AAE7D,wCAA2C;IACzCH,mBAAmBO,WAAW,GAAG;AACnC","ignoreList":[0]}},
    {"offset": {"line": 1178, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/router-context.shared-runtime.ts"],"sourcesContent":["import React from 'react'\nimport type { NextRouter } from './router/router'\n\nexport const RouterContext = React.createContext<NextRouter | null>(null)\n\nif (process.env.NODE_ENV !== 'production') {\n  RouterContext.displayName = 'RouterContext'\n}\n"],"names":["RouterContext","React","createContext","process","env","NODE_ENV","displayName"],"mappings":"AAKIG,QAAQC,GAAG,CAACC,QAAQ,KAAK;;;;;+BAFhBL,iBAAAA;;;eAAAA;;;;gEAHK;AAGX,MAAMA,gBAAgBC,OAAAA,OAAK,CAACC,aAAa,CAAoB;AAEpE,wCAA2C;IACzCF,cAAcM,WAAW,GAAG;AAC9B","ignoreList":[0]}},
    {"offset": {"line": 1199, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/find-closest-quality.ts"],"sourcesContent":["import type { NextConfig } from '../../server/config-shared'\n\n/**\n * Find the closest matching `quality` in the list of `config.qualities`\n * @param quality the quality prop passed to the image component\n * @param config the \"images\" configuration from next.config.js\n * @returns the closest matching quality value\n */\nexport function findClosestQuality(\n  quality: number | undefined,\n  config: NextConfig['images'] | undefined\n): number {\n  const q = quality || 75\n  if (!config?.qualities?.length) {\n    return q\n  }\n  return config.qualities.reduce(\n    (prev, cur) => (Math.abs(cur - q) < Math.abs(prev - q) ? cur : prev),\n    0\n  )\n}\n"],"names":["findClosestQuality","quality","config","q","qualities","length","reduce","prev","cur","Math","abs"],"mappings":";;;+BAQgBA,sBAAAA;;;eAAAA;;;AAAT,SAASA,mBACdC,OAA2B,EAC3BC,MAAwC;IAExC,MAAMC,IAAIF,WAAW;IACrB,IAAI,CAACC,QAAQE,WAAWC,QAAQ;QAC9B,OAAOF;IACT;IACA,OAAOD,OAAOE,SAAS,CAACE,MAAM,CAC5B,CAACC,MAAMC,MAASC,KAAKC,GAAG,CAACF,MAAML,KAAKM,KAAKC,GAAG,CAACH,OAAOJ,KAAKK,MAAMD,MAC/D;AAEJ","ignoreList":[0]}},
    {"offset": {"line": 1218, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/dist/compiled/picomatch/index.js"],"sourcesContent":["(()=>{\"use strict\";var t={170:(t,e,u)=>{const n=u(510);const isWindows=()=>{if(typeof navigator!==\"undefined\"&&navigator.platform){const t=navigator.platform.toLowerCase();return t===\"win32\"||t===\"windows\"}if(typeof process!==\"undefined\"&&process.platform){return process.platform===\"win32\"}return false};function picomatch(t,e,u=false){if(e&&(e.windows===null||e.windows===undefined)){e={...e,windows:isWindows()}}return n(t,e,u)}Object.assign(picomatch,n);t.exports=picomatch},154:t=>{const e=\"\\\\\\\\/\";const u=`[^${e}]`;const n=\"\\\\.\";const o=\"\\\\+\";const s=\"\\\\?\";const r=\"\\\\/\";const a=\"(?=.)\";const i=\"[^/]\";const c=`(?:${r}|$)`;const p=`(?:^|${r})`;const l=`${n}{1,2}${c}`;const f=`(?!${n})`;const A=`(?!${p}${l})`;const _=`(?!${n}{0,1}${c})`;const R=`(?!${l})`;const E=`[^.${r}]`;const h=`${i}*?`;const g=\"/\";const b={DOT_LITERAL:n,PLUS_LITERAL:o,QMARK_LITERAL:s,SLASH_LITERAL:r,ONE_CHAR:a,QMARK:i,END_ANCHOR:c,DOTS_SLASH:l,NO_DOT:f,NO_DOTS:A,NO_DOT_SLASH:_,NO_DOTS_SLASH:R,QMARK_NO_DOT:E,STAR:h,START_ANCHOR:p,SEP:g};const C={...b,SLASH_LITERAL:`[${e}]`,QMARK:u,STAR:`${u}*?`,DOTS_SLASH:`${n}{1,2}(?:[${e}]|$)`,NO_DOT:`(?!${n})`,NO_DOTS:`(?!(?:^|[${e}])${n}{1,2}(?:[${e}]|$))`,NO_DOT_SLASH:`(?!${n}{0,1}(?:[${e}]|$))`,NO_DOTS_SLASH:`(?!${n}{1,2}(?:[${e}]|$))`,QMARK_NO_DOT:`[^.${e}]`,START_ANCHOR:`(?:^|[${e}])`,END_ANCHOR:`(?:[${e}]|$)`,SEP:\"\\\\\"};const y={alnum:\"a-zA-Z0-9\",alpha:\"a-zA-Z\",ascii:\"\\\\x00-\\\\x7F\",blank:\" \\\\t\",cntrl:\"\\\\x00-\\\\x1F\\\\x7F\",digit:\"0-9\",graph:\"\\\\x21-\\\\x7E\",lower:\"a-z\",print:\"\\\\x20-\\\\x7E \",punct:\"\\\\-!\\\"#$%&'()\\\\*+,./:;<=>?@[\\\\]^_`{|}~\",space:\" \\\\t\\\\r\\\\n\\\\v\\\\f\",upper:\"A-Z\",word:\"A-Za-z0-9_\",xdigit:\"A-Fa-f0-9\"};t.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:y,REGEX_BACKSLASH:/\\\\(?![*+?^${}(|)[\\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\\].,$*+?^{}()|\\\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\\\?)((\\W)(\\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\\[.*?[^\\\\]\\]|\\\\(?=.))/g,REPLACEMENTS:{\"***\":\"*\",\"**/**\":\"**\",\"**/**/**\":\"**\"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,extglobChars(t){return{\"!\":{type:\"negate\",open:\"(?:(?!(?:\",close:`))${t.STAR})`},\"?\":{type:\"qmark\",open:\"(?:\",close:\")?\"},\"+\":{type:\"plus\",open:\"(?:\",close:\")+\"},\"*\":{type:\"star\",open:\"(?:\",close:\")*\"},\"@\":{type:\"at\",open:\"(?:\",close:\")\"}}},globChars(t){return t===true?C:b}}},697:(t,e,u)=>{const n=u(154);const o=u(96);const{MAX_LENGTH:s,POSIX_REGEX_SOURCE:r,REGEX_NON_SPECIAL_CHARS:a,REGEX_SPECIAL_CHARS_BACKREF:i,REPLACEMENTS:c}=n;const expandRange=(t,e)=>{if(typeof e.expandRange===\"function\"){return e.expandRange(...t,e)}t.sort();const u=`[${t.join(\"-\")}]`;try{new RegExp(u)}catch(e){return t.map((t=>o.escapeRegex(t))).join(\"..\")}return u};const syntaxError=(t,e)=>`Missing ${t}: \"${e}\" - use \"\\\\\\\\${e}\" to match literal characters`;const parse=(t,e)=>{if(typeof t!==\"string\"){throw new TypeError(\"Expected a string\")}t=c[t]||t;const u={...e};const p=typeof u.maxLength===\"number\"?Math.min(s,u.maxLength):s;let l=t.length;if(l>p){throw new SyntaxError(`Input length: ${l}, exceeds maximum allowed length: ${p}`)}const f={type:\"bos\",value:\"\",output:u.prepend||\"\"};const A=[f];const _=u.capture?\"\":\"?:\";const R=n.globChars(u.windows);const E=n.extglobChars(R);const{DOT_LITERAL:h,PLUS_LITERAL:g,SLASH_LITERAL:b,ONE_CHAR:C,DOTS_SLASH:y,NO_DOT:$,NO_DOT_SLASH:x,NO_DOTS_SLASH:S,QMARK:H,QMARK_NO_DOT:v,STAR:d,START_ANCHOR:L}=R;const globstar=t=>`(${_}(?:(?!${L}${t.dot?y:h}).)*?)`;const T=u.dot?\"\":$;const O=u.dot?H:v;let k=u.bash===true?globstar(u):d;if(u.capture){k=`(${k})`}if(typeof u.noext===\"boolean\"){u.noextglob=u.noext}const m={input:t,index:-1,start:0,dot:u.dot===true,consumed:\"\",output:\"\",prefix:\"\",backtrack:false,negated:false,brackets:0,braces:0,parens:0,quotes:0,globstar:false,tokens:A};t=o.removePrefix(t,m);l=t.length;const w=[];const N=[];const I=[];let B=f;let G;const eos=()=>m.index===l-1;const D=m.peek=(e=1)=>t[m.index+e];const M=m.advance=()=>t[++m.index]||\"\";const remaining=()=>t.slice(m.index+1);const consume=(t=\"\",e=0)=>{m.consumed+=t;m.index+=e};const append=t=>{m.output+=t.output!=null?t.output:t.value;consume(t.value)};const negate=()=>{let t=1;while(D()===\"!\"&&(D(2)!==\"(\"||D(3)===\"?\")){M();m.start++;t++}if(t%2===0){return false}m.negated=true;m.start++;return true};const increment=t=>{m[t]++;I.push(t)};const decrement=t=>{m[t]--;I.pop()};const push=t=>{if(B.type===\"globstar\"){const e=m.braces>0&&(t.type===\"comma\"||t.type===\"brace\");const u=t.extglob===true||w.length&&(t.type===\"pipe\"||t.type===\"paren\");if(t.type!==\"slash\"&&t.type!==\"paren\"&&!e&&!u){m.output=m.output.slice(0,-B.output.length);B.type=\"star\";B.value=\"*\";B.output=k;m.output+=B.output}}if(w.length&&t.type!==\"paren\"){w[w.length-1].inner+=t.value}if(t.value||t.output)append(t);if(B&&B.type===\"text\"&&t.type===\"text\"){B.output=(B.output||B.value)+t.value;B.value+=t.value;return}t.prev=B;A.push(t);B=t};const extglobOpen=(t,e)=>{const n={...E[e],conditions:1,inner:\"\"};n.prev=B;n.parens=m.parens;n.output=m.output;const o=(u.capture?\"(\":\"\")+n.open;increment(\"parens\");push({type:t,value:e,output:m.output?\"\":C});push({type:\"paren\",extglob:true,value:M(),output:o});w.push(n)};const extglobClose=t=>{let n=t.close+(u.capture?\")\":\"\");let o;if(t.type===\"negate\"){let s=k;if(t.inner&&t.inner.length>1&&t.inner.includes(\"/\")){s=globstar(u)}if(s!==k||eos()||/^\\)+$/.test(remaining())){n=t.close=`)$))${s}`}if(t.inner.includes(\"*\")&&(o=remaining())&&/^\\.[^\\\\/.]+$/.test(o)){const u=parse(o,{...e,fastpaths:false}).output;n=t.close=`)${u})${s})`}if(t.prev.type===\"bos\"){m.negatedExtglob=true}}push({type:\"paren\",extglob:true,value:G,output:n});decrement(\"parens\")};if(u.fastpaths!==false&&!/(^[*!]|[/()[\\]{}\"])/.test(t)){let n=false;let s=t.replace(i,((t,e,u,o,s,r)=>{if(o===\"\\\\\"){n=true;return t}if(o===\"?\"){if(e){return e+o+(s?H.repeat(s.length):\"\")}if(r===0){return O+(s?H.repeat(s.length):\"\")}return H.repeat(u.length)}if(o===\".\"){return h.repeat(u.length)}if(o===\"*\"){if(e){return e+o+(s?k:\"\")}return k}return e?t:`\\\\${t}`}));if(n===true){if(u.unescape===true){s=s.replace(/\\\\/g,\"\")}else{s=s.replace(/\\\\+/g,(t=>t.length%2===0?\"\\\\\\\\\":t?\"\\\\\":\"\"))}}if(s===t&&u.contains===true){m.output=t;return m}m.output=o.wrapOutput(s,m,e);return m}while(!eos()){G=M();if(G===\"\\0\"){continue}if(G===\"\\\\\"){const t=D();if(t===\"/\"&&u.bash!==true){continue}if(t===\".\"||t===\";\"){continue}if(!t){G+=\"\\\\\";push({type:\"text\",value:G});continue}const e=/^\\\\+/.exec(remaining());let n=0;if(e&&e[0].length>2){n=e[0].length;m.index+=n;if(n%2!==0){G+=\"\\\\\"}}if(u.unescape===true){G=M()}else{G+=M()}if(m.brackets===0){push({type:\"text\",value:G});continue}}if(m.brackets>0&&(G!==\"]\"||B.value===\"[\"||B.value===\"[^\")){if(u.posix!==false&&G===\":\"){const t=B.value.slice(1);if(t.includes(\"[\")){B.posix=true;if(t.includes(\":\")){const t=B.value.lastIndexOf(\"[\");const e=B.value.slice(0,t);const u=B.value.slice(t+2);const n=r[u];if(n){B.value=e+n;m.backtrack=true;M();if(!f.output&&A.indexOf(B)===1){f.output=C}continue}}}}if(G===\"[\"&&D()!==\":\"||G===\"-\"&&D()===\"]\"){G=`\\\\${G}`}if(G===\"]\"&&(B.value===\"[\"||B.value===\"[^\")){G=`\\\\${G}`}if(u.posix===true&&G===\"!\"&&B.value===\"[\"){G=\"^\"}B.value+=G;append({value:G});continue}if(m.quotes===1&&G!=='\"'){G=o.escapeRegex(G);B.value+=G;append({value:G});continue}if(G==='\"'){m.quotes=m.quotes===1?0:1;if(u.keepQuotes===true){push({type:\"text\",value:G})}continue}if(G===\"(\"){increment(\"parens\");push({type:\"paren\",value:G});continue}if(G===\")\"){if(m.parens===0&&u.strictBrackets===true){throw new SyntaxError(syntaxError(\"opening\",\"(\"))}const t=w[w.length-1];if(t&&m.parens===t.parens+1){extglobClose(w.pop());continue}push({type:\"paren\",value:G,output:m.parens?\")\":\"\\\\)\"});decrement(\"parens\");continue}if(G===\"[\"){if(u.nobracket===true||!remaining().includes(\"]\")){if(u.nobracket!==true&&u.strictBrackets===true){throw new SyntaxError(syntaxError(\"closing\",\"]\"))}G=`\\\\${G}`}else{increment(\"brackets\")}push({type:\"bracket\",value:G});continue}if(G===\"]\"){if(u.nobracket===true||B&&B.type===\"bracket\"&&B.value.length===1){push({type:\"text\",value:G,output:`\\\\${G}`});continue}if(m.brackets===0){if(u.strictBrackets===true){throw new SyntaxError(syntaxError(\"opening\",\"[\"))}push({type:\"text\",value:G,output:`\\\\${G}`});continue}decrement(\"brackets\");const t=B.value.slice(1);if(B.posix!==true&&t[0]===\"^\"&&!t.includes(\"/\")){G=`/${G}`}B.value+=G;append({value:G});if(u.literalBrackets===false||o.hasRegexChars(t)){continue}const e=o.escapeRegex(B.value);m.output=m.output.slice(0,-B.value.length);if(u.literalBrackets===true){m.output+=e;B.value=e;continue}B.value=`(${_}${e}|${B.value})`;m.output+=B.value;continue}if(G===\"{\"&&u.nobrace!==true){increment(\"braces\");const t={type:\"brace\",value:G,output:\"(\",outputIndex:m.output.length,tokensIndex:m.tokens.length};N.push(t);push(t);continue}if(G===\"}\"){const t=N[N.length-1];if(u.nobrace===true||!t){push({type:\"text\",value:G,output:G});continue}let e=\")\";if(t.dots===true){const t=A.slice();const n=[];for(let e=t.length-1;e>=0;e--){A.pop();if(t[e].type===\"brace\"){break}if(t[e].type!==\"dots\"){n.unshift(t[e].value)}}e=expandRange(n,u);m.backtrack=true}if(t.comma!==true&&t.dots!==true){const u=m.output.slice(0,t.outputIndex);const n=m.tokens.slice(t.tokensIndex);t.value=t.output=\"\\\\{\";G=e=\"\\\\}\";m.output=u;for(const t of n){m.output+=t.output||t.value}}push({type:\"brace\",value:G,output:e});decrement(\"braces\");N.pop();continue}if(G===\"|\"){if(w.length>0){w[w.length-1].conditions++}push({type:\"text\",value:G});continue}if(G===\",\"){let t=G;const e=N[N.length-1];if(e&&I[I.length-1]===\"braces\"){e.comma=true;t=\"|\"}push({type:\"comma\",value:G,output:t});continue}if(G===\"/\"){if(B.type===\"dot\"&&m.index===m.start+1){m.start=m.index+1;m.consumed=\"\";m.output=\"\";A.pop();B=f;continue}push({type:\"slash\",value:G,output:b});continue}if(G===\".\"){if(m.braces>0&&B.type===\"dot\"){if(B.value===\".\")B.output=h;const t=N[N.length-1];B.type=\"dots\";B.output+=G;B.value+=G;t.dots=true;continue}if(m.braces+m.parens===0&&B.type!==\"bos\"&&B.type!==\"slash\"){push({type:\"text\",value:G,output:h});continue}push({type:\"dot\",value:G,output:h});continue}if(G===\"?\"){const t=B&&B.value===\"(\";if(!t&&u.noextglob!==true&&D()===\"(\"&&D(2)!==\"?\"){extglobOpen(\"qmark\",G);continue}if(B&&B.type===\"paren\"){const t=D();let e=G;if(B.value===\"(\"&&!/[!=<:]/.test(t)||t===\"<\"&&!/<([!=]|\\w+>)/.test(remaining())){e=`\\\\${G}`}push({type:\"text\",value:G,output:e});continue}if(u.dot!==true&&(B.type===\"slash\"||B.type===\"bos\")){push({type:\"qmark\",value:G,output:v});continue}push({type:\"qmark\",value:G,output:H});continue}if(G===\"!\"){if(u.noextglob!==true&&D()===\"(\"){if(D(2)!==\"?\"||!/[!=<:]/.test(D(3))){extglobOpen(\"negate\",G);continue}}if(u.nonegate!==true&&m.index===0){negate();continue}}if(G===\"+\"){if(u.noextglob!==true&&D()===\"(\"&&D(2)!==\"?\"){extglobOpen(\"plus\",G);continue}if(B&&B.value===\"(\"||u.regex===false){push({type:\"plus\",value:G,output:g});continue}if(B&&(B.type===\"bracket\"||B.type===\"paren\"||B.type===\"brace\")||m.parens>0){push({type:\"plus\",value:G});continue}push({type:\"plus\",value:g});continue}if(G===\"@\"){if(u.noextglob!==true&&D()===\"(\"&&D(2)!==\"?\"){push({type:\"at\",extglob:true,value:G,output:\"\"});continue}push({type:\"text\",value:G});continue}if(G!==\"*\"){if(G===\"$\"||G===\"^\"){G=`\\\\${G}`}const t=a.exec(remaining());if(t){G+=t[0];m.index+=t[0].length}push({type:\"text\",value:G});continue}if(B&&(B.type===\"globstar\"||B.star===true)){B.type=\"star\";B.star=true;B.value+=G;B.output=k;m.backtrack=true;m.globstar=true;consume(G);continue}let e=remaining();if(u.noextglob!==true&&/^\\([^?]/.test(e)){extglobOpen(\"star\",G);continue}if(B.type===\"star\"){if(u.noglobstar===true){consume(G);continue}const n=B.prev;const o=n.prev;const s=n.type===\"slash\"||n.type===\"bos\";const r=o&&(o.type===\"star\"||o.type===\"globstar\");if(u.bash===true&&(!s||e[0]&&e[0]!==\"/\")){push({type:\"star\",value:G,output:\"\"});continue}const a=m.braces>0&&(n.type===\"comma\"||n.type===\"brace\");const i=w.length&&(n.type===\"pipe\"||n.type===\"paren\");if(!s&&n.type!==\"paren\"&&!a&&!i){push({type:\"star\",value:G,output:\"\"});continue}while(e.slice(0,3)===\"/**\"){const u=t[m.index+4];if(u&&u!==\"/\"){break}e=e.slice(3);consume(\"/**\",3)}if(n.type===\"bos\"&&eos()){B.type=\"globstar\";B.value+=G;B.output=globstar(u);m.output=B.output;m.globstar=true;consume(G);continue}if(n.type===\"slash\"&&n.prev.type!==\"bos\"&&!r&&eos()){m.output=m.output.slice(0,-(n.output+B.output).length);n.output=`(?:${n.output}`;B.type=\"globstar\";B.output=globstar(u)+(u.strictSlashes?\")\":\"|$)\");B.value+=G;m.globstar=true;m.output+=n.output+B.output;consume(G);continue}if(n.type===\"slash\"&&n.prev.type!==\"bos\"&&e[0]===\"/\"){const t=e[1]!==void 0?\"|$\":\"\";m.output=m.output.slice(0,-(n.output+B.output).length);n.output=`(?:${n.output}`;B.type=\"globstar\";B.output=`${globstar(u)}${b}|${b}${t})`;B.value+=G;m.output+=n.output+B.output;m.globstar=true;consume(G+M());push({type:\"slash\",value:\"/\",output:\"\"});continue}if(n.type===\"bos\"&&e[0]===\"/\"){B.type=\"globstar\";B.value+=G;B.output=`(?:^|${b}|${globstar(u)}${b})`;m.output=B.output;m.globstar=true;consume(G+M());push({type:\"slash\",value:\"/\",output:\"\"});continue}m.output=m.output.slice(0,-B.output.length);B.type=\"globstar\";B.output=globstar(u);B.value+=G;m.output+=B.output;m.globstar=true;consume(G);continue}const n={type:\"star\",value:G,output:k};if(u.bash===true){n.output=\".*?\";if(B.type===\"bos\"||B.type===\"slash\"){n.output=T+n.output}push(n);continue}if(B&&(B.type===\"bracket\"||B.type===\"paren\")&&u.regex===true){n.output=G;push(n);continue}if(m.index===m.start||B.type===\"slash\"||B.type===\"dot\"){if(B.type===\"dot\"){m.output+=x;B.output+=x}else if(u.dot===true){m.output+=S;B.output+=S}else{m.output+=T;B.output+=T}if(D()!==\"*\"){m.output+=C;B.output+=C}}push(n)}while(m.brackets>0){if(u.strictBrackets===true)throw new SyntaxError(syntaxError(\"closing\",\"]\"));m.output=o.escapeLast(m.output,\"[\");decrement(\"brackets\")}while(m.parens>0){if(u.strictBrackets===true)throw new SyntaxError(syntaxError(\"closing\",\")\"));m.output=o.escapeLast(m.output,\"(\");decrement(\"parens\")}while(m.braces>0){if(u.strictBrackets===true)throw new SyntaxError(syntaxError(\"closing\",\"}\"));m.output=o.escapeLast(m.output,\"{\");decrement(\"braces\")}if(u.strictSlashes!==true&&(B.type===\"star\"||B.type===\"bracket\")){push({type:\"maybe_slash\",value:\"\",output:`${b}?`})}if(m.backtrack===true){m.output=\"\";for(const t of m.tokens){m.output+=t.output!=null?t.output:t.value;if(t.suffix){m.output+=t.suffix}}}return m};parse.fastpaths=(t,e)=>{const u={...e};const r=typeof u.maxLength===\"number\"?Math.min(s,u.maxLength):s;const a=t.length;if(a>r){throw new SyntaxError(`Input length: ${a}, exceeds maximum allowed length: ${r}`)}t=c[t]||t;const{DOT_LITERAL:i,SLASH_LITERAL:p,ONE_CHAR:l,DOTS_SLASH:f,NO_DOT:A,NO_DOTS:_,NO_DOTS_SLASH:R,STAR:E,START_ANCHOR:h}=n.globChars(u.windows);const g=u.dot?_:A;const b=u.dot?R:A;const C=u.capture?\"\":\"?:\";const y={negated:false,prefix:\"\"};let $=u.bash===true?\".*?\":E;if(u.capture){$=`(${$})`}const globstar=t=>{if(t.noglobstar===true)return $;return`(${C}(?:(?!${h}${t.dot?f:i}).)*?)`};const create=t=>{switch(t){case\"*\":return`${g}${l}${$}`;case\".*\":return`${i}${l}${$}`;case\"*.*\":return`${g}${$}${i}${l}${$}`;case\"*/*\":return`${g}${$}${p}${l}${b}${$}`;case\"**\":return g+globstar(u);case\"**/*\":return`(?:${g}${globstar(u)}${p})?${b}${l}${$}`;case\"**/*.*\":return`(?:${g}${globstar(u)}${p})?${b}${$}${i}${l}${$}`;case\"**/.*\":return`(?:${g}${globstar(u)}${p})?${i}${l}${$}`;default:{const e=/^(.*?)\\.(\\w+)$/.exec(t);if(!e)return;const u=create(e[1]);if(!u)return;return u+i+e[2]}}};const x=o.removePrefix(t,y);let S=create(x);if(S&&u.strictSlashes!==true){S+=`${p}?`}return S};t.exports=parse},510:(t,e,u)=>{const n=u(716);const o=u(697);const s=u(96);const r=u(154);const isObject=t=>t&&typeof t===\"object\"&&!Array.isArray(t);const picomatch=(t,e,u=false)=>{if(Array.isArray(t)){const n=t.map((t=>picomatch(t,e,u)));const arrayMatcher=t=>{for(const e of n){const u=e(t);if(u)return u}return false};return arrayMatcher}const n=isObject(t)&&t.tokens&&t.input;if(t===\"\"||typeof t!==\"string\"&&!n){throw new TypeError(\"Expected pattern to be a non-empty string\")}const o=e||{};const s=o.windows;const r=n?picomatch.compileRe(t,e):picomatch.makeRe(t,e,false,true);const a=r.state;delete r.state;let isIgnored=()=>false;if(o.ignore){const t={...e,ignore:null,onMatch:null,onResult:null};isIgnored=picomatch(o.ignore,t,u)}const matcher=(u,n=false)=>{const{isMatch:i,match:c,output:p}=picomatch.test(u,r,e,{glob:t,posix:s});const l={glob:t,state:a,regex:r,posix:s,input:u,output:p,match:c,isMatch:i};if(typeof o.onResult===\"function\"){o.onResult(l)}if(i===false){l.isMatch=false;return n?l:false}if(isIgnored(u)){if(typeof o.onIgnore===\"function\"){o.onIgnore(l)}l.isMatch=false;return n?l:false}if(typeof o.onMatch===\"function\"){o.onMatch(l)}return n?l:true};if(u){matcher.state=a}return matcher};picomatch.test=(t,e,u,{glob:n,posix:o}={})=>{if(typeof t!==\"string\"){throw new TypeError(\"Expected input to be a string\")}if(t===\"\"){return{isMatch:false,output:\"\"}}const r=u||{};const a=r.format||(o?s.toPosixSlashes:null);let i=t===n;let c=i&&a?a(t):t;if(i===false){c=a?a(t):t;i=c===n}if(i===false||r.capture===true){if(r.matchBase===true||r.basename===true){i=picomatch.matchBase(t,e,u,o)}else{i=e.exec(c)}}return{isMatch:Boolean(i),match:i,output:c}};picomatch.matchBase=(t,e,u)=>{const n=e instanceof RegExp?e:picomatch.makeRe(e,u);return n.test(s.basename(t))};picomatch.isMatch=(t,e,u)=>picomatch(e,u)(t);picomatch.parse=(t,e)=>{if(Array.isArray(t))return t.map((t=>picomatch.parse(t,e)));return o(t,{...e,fastpaths:false})};picomatch.scan=(t,e)=>n(t,e);picomatch.compileRe=(t,e,u=false,n=false)=>{if(u===true){return t.output}const o=e||{};const s=o.contains?\"\":\"^\";const r=o.contains?\"\":\"$\";let a=`${s}(?:${t.output})${r}`;if(t&&t.negated===true){a=`^(?!${a}).*$`}const i=picomatch.toRegex(a,e);if(n===true){i.state=t}return i};picomatch.makeRe=(t,e={},u=false,n=false)=>{if(!t||typeof t!==\"string\"){throw new TypeError(\"Expected a non-empty string\")}let s={negated:false,fastpaths:true};if(e.fastpaths!==false&&(t[0]===\".\"||t[0]===\"*\")){s.output=o.fastpaths(t,e)}if(!s.output){s=o(t,e)}return picomatch.compileRe(s,e,u,n)};picomatch.toRegex=(t,e)=>{try{const u=e||{};return new RegExp(t,u.flags||(u.nocase?\"i\":\"\"))}catch(t){if(e&&e.debug===true)throw t;return/$^/}};picomatch.constants=r;t.exports=picomatch},716:(t,e,u)=>{const n=u(96);const{CHAR_ASTERISK:o,CHAR_AT:s,CHAR_BACKWARD_SLASH:r,CHAR_COMMA:a,CHAR_DOT:i,CHAR_EXCLAMATION_MARK:c,CHAR_FORWARD_SLASH:p,CHAR_LEFT_CURLY_BRACE:l,CHAR_LEFT_PARENTHESES:f,CHAR_LEFT_SQUARE_BRACKET:A,CHAR_PLUS:_,CHAR_QUESTION_MARK:R,CHAR_RIGHT_CURLY_BRACE:E,CHAR_RIGHT_PARENTHESES:h,CHAR_RIGHT_SQUARE_BRACKET:g}=u(154);const isPathSeparator=t=>t===p||t===r;const depth=t=>{if(t.isPrefix!==true){t.depth=t.isGlobstar?Infinity:1}};const scan=(t,e)=>{const u=e||{};const b=t.length-1;const C=u.parts===true||u.scanToEnd===true;const y=[];const $=[];const x=[];let S=t;let H=-1;let v=0;let d=0;let L=false;let T=false;let O=false;let k=false;let m=false;let w=false;let N=false;let I=false;let B=false;let G=false;let D=0;let M;let P;let K={value:\"\",depth:0,isGlob:false};const eos=()=>H>=b;const peek=()=>S.charCodeAt(H+1);const advance=()=>{M=P;return S.charCodeAt(++H)};while(H<b){P=advance();let t;if(P===r){N=K.backslashes=true;P=advance();if(P===l){w=true}continue}if(w===true||P===l){D++;while(eos()!==true&&(P=advance())){if(P===r){N=K.backslashes=true;advance();continue}if(P===l){D++;continue}if(w!==true&&P===i&&(P=advance())===i){L=K.isBrace=true;O=K.isGlob=true;G=true;if(C===true){continue}break}if(w!==true&&P===a){L=K.isBrace=true;O=K.isGlob=true;G=true;if(C===true){continue}break}if(P===E){D--;if(D===0){w=false;L=K.isBrace=true;G=true;break}}}if(C===true){continue}break}if(P===p){y.push(H);$.push(K);K={value:\"\",depth:0,isGlob:false};if(G===true)continue;if(M===i&&H===v+1){v+=2;continue}d=H+1;continue}if(u.noext!==true){const t=P===_||P===s||P===o||P===R||P===c;if(t===true&&peek()===f){O=K.isGlob=true;k=K.isExtglob=true;G=true;if(P===c&&H===v){B=true}if(C===true){while(eos()!==true&&(P=advance())){if(P===r){N=K.backslashes=true;P=advance();continue}if(P===h){O=K.isGlob=true;G=true;break}}continue}break}}if(P===o){if(M===o)m=K.isGlobstar=true;O=K.isGlob=true;G=true;if(C===true){continue}break}if(P===R){O=K.isGlob=true;G=true;if(C===true){continue}break}if(P===A){while(eos()!==true&&(t=advance())){if(t===r){N=K.backslashes=true;advance();continue}if(t===g){T=K.isBracket=true;O=K.isGlob=true;G=true;break}}if(C===true){continue}break}if(u.nonegate!==true&&P===c&&H===v){I=K.negated=true;v++;continue}if(u.noparen!==true&&P===f){O=K.isGlob=true;if(C===true){while(eos()!==true&&(P=advance())){if(P===f){N=K.backslashes=true;P=advance();continue}if(P===h){G=true;break}}continue}break}if(O===true){G=true;if(C===true){continue}break}}if(u.noext===true){k=false;O=false}let U=S;let X=\"\";let F=\"\";if(v>0){X=S.slice(0,v);S=S.slice(v);d-=v}if(U&&O===true&&d>0){U=S.slice(0,d);F=S.slice(d)}else if(O===true){U=\"\";F=S}else{U=S}if(U&&U!==\"\"&&U!==\"/\"&&U!==S){if(isPathSeparator(U.charCodeAt(U.length-1))){U=U.slice(0,-1)}}if(u.unescape===true){if(F)F=n.removeBackslashes(F);if(U&&N===true){U=n.removeBackslashes(U)}}const Q={prefix:X,input:t,start:v,base:U,glob:F,isBrace:L,isBracket:T,isGlob:O,isExtglob:k,isGlobstar:m,negated:I,negatedExtglob:B};if(u.tokens===true){Q.maxDepth=0;if(!isPathSeparator(P)){$.push(K)}Q.tokens=$}if(u.parts===true||u.tokens===true){let e;for(let n=0;n<y.length;n++){const o=e?e+1:v;const s=y[n];const r=t.slice(o,s);if(u.tokens){if(n===0&&v!==0){$[n].isPrefix=true;$[n].value=X}else{$[n].value=r}depth($[n]);Q.maxDepth+=$[n].depth}if(n!==0||r!==\"\"){x.push(r)}e=s}if(e&&e+1<t.length){const n=t.slice(e+1);x.push(n);if(u.tokens){$[$.length-1].value=n;depth($[$.length-1]);Q.maxDepth+=$[$.length-1].depth}}Q.slashes=y;Q.parts=x}return Q};t.exports=scan},96:(t,e,u)=>{const{REGEX_BACKSLASH:n,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:r}=u(154);e.isObject=t=>t!==null&&typeof t===\"object\"&&!Array.isArray(t);e.hasRegexChars=t=>s.test(t);e.isRegexChar=t=>t.length===1&&e.hasRegexChars(t);e.escapeRegex=t=>t.replace(r,\"\\\\$1\");e.toPosixSlashes=t=>t.replace(n,\"/\");e.removeBackslashes=t=>t.replace(o,(t=>t===\"\\\\\"?\"\":t));e.escapeLast=(t,u,n)=>{const o=t.lastIndexOf(u,n);if(o===-1)return t;if(t[o-1]===\"\\\\\")return e.escapeLast(t,u,o-1);return`${t.slice(0,o)}\\\\${t.slice(o)}`};e.removePrefix=(t,e={})=>{let u=t;if(u.startsWith(\"./\")){u=u.slice(2);e.prefix=\"./\"}return u};e.wrapOutput=(t,e={},u={})=>{const n=u.contains?\"\":\"^\";const o=u.contains?\"\":\"$\";let s=`${n}(?:${t})${o}`;if(e.negated===true){s=`(?:^(?!${s}).*$)`}return s};e.basename=(t,{windows:e}={})=>{const u=t.split(e?/[\\\\/]/:\"/\");const n=u[u.length-1];if(n===\"\"){return u[u.length-2]}return n}}};var e={};function __nccwpck_require__(u){var n=e[u];if(n!==undefined){return n.exports}var o=e[u]={exports:{}};var s=true;try{t[u](o,o.exports,__nccwpck_require__);s=false}finally{if(s)delete e[u]}return o.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var u=__nccwpck_require__(170);module.exports=u})();"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2817, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/match-local-pattern.ts"],"sourcesContent":["import type { LocalPattern } from './image-config'\nimport { makeRe } from 'next/dist/compiled/picomatch'\n\n// Modifying this function should also modify writeImagesManifest()\nexport function matchLocalPattern(pattern: LocalPattern, url: URL): boolean {\n  if (pattern.search !== undefined) {\n    if (pattern.search !== url.search) {\n      return false\n    }\n  }\n\n  if (!makeRe(pattern.pathname ?? '**', { dot: true }).test(url.pathname)) {\n    return false\n  }\n\n  return true\n}\n\nexport function hasLocalMatch(\n  localPatterns: LocalPattern[] | undefined,\n  urlPathAndQuery: string\n): boolean {\n  if (!localPatterns) {\n    // if the user didn't define \"localPatterns\", we allow all local images\n    return true\n  }\n  const url = new URL(urlPathAndQuery, 'http://n')\n  return localPatterns.some((p) => matchLocalPattern(p, url))\n}\n"],"names":["hasLocalMatch","matchLocalPattern","pattern","url","search","undefined","makeRe","pathname","dot","test","localPatterns","urlPathAndQuery","URL","some","p"],"mappings":";;;;;;;;;;;;;;IAkBgBA,aAAa,EAAA;eAAbA;;IAdAC,iBAAiB,EAAA;eAAjBA;;;2BAHO;AAGhB,SAASA,kBAAkBC,OAAqB,EAAEC,GAAQ;IAC/D,IAAID,QAAQE,MAAM,KAAKC,WAAW;QAChC,IAAIH,QAAQE,MAAM,KAAKD,IAAIC,MAAM,EAAE;YACjC,OAAO;QACT;IACF;IAEA,IAAI,CAACE,CAAAA,GAAAA,WAAAA,MAAM,EAACJ,QAAQK,QAAQ,IAAI,MAAM;QAAEC,KAAK;IAAK,GAAGC,IAAI,CAACN,IAAII,QAAQ,GAAG;QACvE,OAAO;IACT;IAEA,OAAO;AACT;AAEO,SAASP,cACdU,aAAyC,EACzCC,eAAuB;IAEvB,IAAI,CAACD,eAAe;QAClB,uEAAuE;QACvE,OAAO;IACT;IACA,MAAMP,MAAM,IAAIS,IAAID,iBAAiB;IACrC,OAAOD,cAAcG,IAAI,CAAC,CAACC,IAAMb,kBAAkBa,GAAGX;AACxD","ignoreList":[0]}},
    {"offset": {"line": 2864, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/match-remote-pattern.ts"],"sourcesContent":["import type { RemotePattern } from './image-config'\nimport { makeRe } from 'next/dist/compiled/picomatch'\n\n// Modifying this function should also modify writeImagesManifest()\nexport function matchRemotePattern(\n  pattern: RemotePattern | URL,\n  url: URL\n): boolean {\n  if (pattern.protocol !== undefined) {\n    if (pattern.protocol.replace(/:$/, '') !== url.protocol.replace(/:$/, '')) {\n      return false\n    }\n  }\n  if (pattern.port !== undefined) {\n    if (pattern.port !== url.port) {\n      return false\n    }\n  }\n\n  if (pattern.hostname === undefined) {\n    throw new Error(\n      `Pattern should define hostname but found\\n${JSON.stringify(pattern)}`\n    )\n  } else {\n    if (!makeRe(pattern.hostname).test(url.hostname)) {\n      return false\n    }\n  }\n\n  if (pattern.search !== undefined) {\n    if (pattern.search !== url.search) {\n      return false\n    }\n  }\n\n  // Should be the same as writeImagesManifest()\n  if (!makeRe(pattern.pathname ?? '**', { dot: true }).test(url.pathname)) {\n    return false\n  }\n\n  return true\n}\n\nexport function hasRemoteMatch(\n  domains: string[],\n  remotePatterns: Array<RemotePattern | URL>,\n  url: URL\n): boolean {\n  return (\n    domains.some((domain) => url.hostname === domain) ||\n    remotePatterns.some((p) => matchRemotePattern(p, url))\n  )\n}\n"],"names":["hasRemoteMatch","matchRemotePattern","pattern","url","protocol","undefined","replace","port","hostname","Error","JSON","stringify","makeRe","test","search","pathname","dot","domains","remotePatterns","some","domain","p"],"mappings":";;;;;;;;;;;;;;IA2CgBA,cAAc,EAAA;eAAdA;;IAvCAC,kBAAkB,EAAA;eAAlBA;;;2BAHO;AAGhB,SAASA,mBACdC,OAA4B,EAC5BC,GAAQ;IAER,IAAID,QAAQE,QAAQ,KAAKC,WAAW;QAClC,IAAIH,QAAQE,QAAQ,CAACE,OAAO,CAAC,MAAM,QAAQH,IAAIC,QAAQ,CAACE,OAAO,CAAC,MAAM,KAAK;YACzE,OAAO;QACT;IACF;IACA,IAAIJ,QAAQK,IAAI,KAAKF,WAAW;QAC9B,IAAIH,QAAQK,IAAI,KAAKJ,IAAII,IAAI,EAAE;YAC7B,OAAO;QACT;IACF;IAEA,IAAIL,QAAQM,QAAQ,KAAKH,WAAW;QAClC,MAAM,OAAA,cAEL,CAFK,IAAII,MACR,CAAC,0CAA0C,EAAEC,KAAKC,SAAS,CAACT,UAAU,GADlE,qBAAA;mBAAA;wBAAA;0BAAA;QAEN;IACF,OAAO;QACL,IAAI,CAACU,CAAAA,GAAAA,WAAAA,MAAM,EAACV,QAAQM,QAAQ,EAAEK,IAAI,CAACV,IAAIK,QAAQ,GAAG;YAChD,OAAO;QACT;IACF;IAEA,IAAIN,QAAQY,MAAM,KAAKT,WAAW;QAChC,IAAIH,QAAQY,MAAM,KAAKX,IAAIW,MAAM,EAAE;YACjC,OAAO;QACT;IACF;IAEA,8CAA8C;IAC9C,IAAI,CAACF,CAAAA,GAAAA,WAAAA,MAAM,EAACV,QAAQa,QAAQ,IAAI,MAAM;QAAEC,KAAK;IAAK,GAAGH,IAAI,CAACV,IAAIY,QAAQ,GAAG;QACvE,OAAO;IACT;IAEA,OAAO;AACT;AAEO,SAASf,eACdiB,OAAiB,EACjBC,cAA0C,EAC1Cf,GAAQ;IAER,OACEc,QAAQE,IAAI,CAAC,CAACC,SAAWjB,IAAIK,QAAQ,KAAKY,WAC1CF,eAAeC,IAAI,CAAC,CAACE,IAAMpB,mBAAmBoB,GAAGlB;AAErD","ignoreList":[0]}},
    {"offset": {"line": 2928, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/image-loader.ts"],"sourcesContent":["import type { ImageLoaderPropsWithConfig } from './image-config'\nimport { findClosestQuality } from './find-closest-quality'\nimport { getDeploymentId } from './deployment-id'\n\nfunction defaultLoader({\n  config,\n  src,\n  width,\n  quality,\n}: ImageLoaderPropsWithConfig): string {\n  if (\n    src.startsWith('/') &&\n    src.includes('?') &&\n    config.localPatterns?.length === 1 &&\n    config.localPatterns[0].pathname === '**' &&\n    config.localPatterns[0].search === ''\n  ) {\n    throw new Error(\n      `Image with src \"${src}\" is using a query string which is not configured in images.localPatterns.` +\n        `\\nRead more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`\n    )\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    const missingValues = []\n\n    // these should always be provided but make sure they are\n    if (!src) missingValues.push('src')\n    if (!width) missingValues.push('width')\n\n    if (missingValues.length > 0) {\n      throw new Error(\n        `Next Image Optimization requires ${missingValues.join(\n          ', '\n        )} to be provided. Make sure you pass them as props to the \\`next/image\\` component. Received: ${JSON.stringify(\n          { src, width, quality }\n        )}`\n      )\n    }\n\n    if (src.startsWith('//')) {\n      throw new Error(\n        `Failed to parse src \"${src}\" on \\`next/image\\`, protocol-relative URL (//) must be changed to an absolute URL (http:// or https://)`\n      )\n    }\n\n    if (src.startsWith('/') && config.localPatterns) {\n      if (\n        process.env.NODE_ENV !== 'test' &&\n        // micromatch isn't compatible with edge runtime\n        process.env.NEXT_RUNTIME !== 'edge'\n      ) {\n        // We use dynamic require because this should only error in development\n        const { hasLocalMatch } =\n          require('./match-local-pattern') as typeof import('./match-local-pattern')\n        if (!hasLocalMatch(config.localPatterns, src)) {\n          throw new Error(\n            `Invalid src prop (${src}) on \\`next/image\\` does not match \\`images.localPatterns\\` configured in your \\`next.config.js\\`\\n` +\n              `See more info: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`\n          )\n        }\n      }\n    }\n\n    if (!src.startsWith('/') && (config.domains || config.remotePatterns)) {\n      let parsedSrc: URL\n      try {\n        parsedSrc = new URL(src)\n      } catch (err) {\n        console.error(err)\n        throw new Error(\n          `Failed to parse src \"${src}\" on \\`next/image\\`, if using relative image it must start with a leading slash \"/\" or be an absolute URL (http:// or https://)`\n        )\n      }\n\n      if (\n        process.env.NODE_ENV !== 'test' &&\n        // micromatch isn't compatible with edge runtime\n        process.env.NEXT_RUNTIME !== 'edge'\n      ) {\n        // We use dynamic require because this should only error in development\n        const { hasRemoteMatch } =\n          require('./match-remote-pattern') as typeof import('./match-remote-pattern')\n        if (\n          !hasRemoteMatch(config.domains!, config.remotePatterns!, parsedSrc)\n        ) {\n          throw new Error(\n            `Invalid src prop (${src}) on \\`next/image\\`, hostname \"${parsedSrc.hostname}\" is not configured under images in your \\`next.config.js\\`\\n` +\n              `See more info: https://nextjs.org/docs/messages/next-image-unconfigured-host`\n          )\n        }\n      }\n    }\n  }\n\n  const q = findClosestQuality(quality, config)\n\n  let deploymentId = getDeploymentId()\n  return `${config.path}?url=${encodeURIComponent(src)}&w=${width}&q=${q}${\n    src.startsWith('/') && deploymentId ? `&dpl=${deploymentId}` : ''\n  }`\n}\n\n// We use this to determine if the import is the default loader\n// or a custom loader defined by the user in next.config.js\ndefaultLoader.__next_img_default = true\n\nexport default defaultLoader\n"],"names":["defaultLoader","config","src","width","quality","startsWith","includes","localPatterns","length","pathname","search","Error","process","env","NODE_ENV","missingValues","push","join","JSON","stringify","NEXT_RUNTIME","hasLocalMatch","require","domains","remotePatterns","parsedSrc","URL","err","console","error","hasRemoteMatch","hostname","q","findClosestQuality","deploymentId","getDeploymentId","path","encodeURIComponent","__next_img_default"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3022, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/client/use-merged-ref.ts"],"sourcesContent":["import { useCallback, useRef, type Ref } from 'react'\n\n// This is a compatibility hook to support React 18 and 19 refs.\n// In 19, a cleanup function from refs may be returned.\n// In 18, returning a cleanup function creates a warning.\n// Since we take userspace refs, we don't know ahead of time if a cleanup function will be returned.\n// This implements cleanup functions with the old behavior in 18.\n// We know refs are always called alternating with `null` and then `T`.\n// So a call with `null` means we need to call the previous cleanup functions.\nexport function useMergedRef<TElement>(\n  refA: Ref<TElement>,\n  refB: Ref<TElement>\n): Ref<TElement> {\n  const cleanupA = useRef<(() => void) | null>(null)\n  const cleanupB = useRef<(() => void) | null>(null)\n\n  // NOTE: In theory, we could skip the wrapping if only one of the refs is non-null.\n  // (this happens often if the user doesn't pass a ref to Link/Form/Image)\n  // But this can cause us to leak a cleanup-ref into user code (previously via `<Link legacyBehavior>`),\n  // and the user might pass that ref into ref-merging library that doesn't support cleanup refs\n  // (because it hasn't been updated for React 19)\n  // which can then cause things to blow up, because a cleanup-returning ref gets called with `null`.\n  // So in practice, it's safer to be defensive and always wrap the ref, even on React 19.\n  return useCallback(\n    (current: TElement | null): void => {\n      if (current === null) {\n        const cleanupFnA = cleanupA.current\n        if (cleanupFnA) {\n          cleanupA.current = null\n          cleanupFnA()\n        }\n        const cleanupFnB = cleanupB.current\n        if (cleanupFnB) {\n          cleanupB.current = null\n          cleanupFnB()\n        }\n      } else {\n        if (refA) {\n          cleanupA.current = applyRef(refA, current)\n        }\n        if (refB) {\n          cleanupB.current = applyRef(refB, current)\n        }\n      }\n    },\n    [refA, refB]\n  )\n}\n\nfunction applyRef<TElement>(\n  refA: NonNullable<Ref<TElement>>,\n  current: TElement\n) {\n  if (typeof refA === 'function') {\n    const cleanup = refA(current)\n    if (typeof cleanup === 'function') {\n      return cleanup\n    } else {\n      return () => refA(null)\n    }\n  } else {\n    refA.current = current\n    return () => {\n      refA.current = null\n    }\n  }\n}\n"],"names":["useMergedRef","refA","refB","cleanupA","useRef","cleanupB","useCallback","current","cleanupFnA","cleanupFnB","applyRef","cleanup"],"mappings":";;;+BASgBA,gBAAAA;;;eAAAA;;;uBAT8B;AASvC,SAASA,aACdC,IAAmB,EACnBC,IAAmB;IAEnB,MAAMC,WAAWC,CAAAA,GAAAA,OAAAA,MAAM,EAAsB;IAC7C,MAAMC,WAAWD,CAAAA,GAAAA,OAAAA,MAAM,EAAsB;IAE7C,mFAAmF;IACnF,yEAAyE;IACzE,uGAAuG;IACvG,8FAA8F;IAC9F,gDAAgD;IAChD,mGAAmG;IACnG,wFAAwF;IACxF,OAAOE,CAAAA,GAAAA,OAAAA,WAAW,EAChB,CAACC;QACC,IAAIA,YAAY,MAAM;YACpB,MAAMC,aAAaL,SAASI,OAAO;YACnC,IAAIC,YAAY;gBACdL,SAASI,OAAO,GAAG;gBACnBC;YACF;YACA,MAAMC,aAAaJ,SAASE,OAAO;YACnC,IAAIE,YAAY;gBACdJ,SAASE,OAAO,GAAG;gBACnBE;YACF;QACF,OAAO;YACL,IAAIR,MAAM;gBACRE,SAASI,OAAO,GAAGG,SAAST,MAAMM;YACpC;YACA,IAAIL,MAAM;gBACRG,SAASE,OAAO,GAAGG,SAASR,MAAMK;YACpC;QACF;IACF,GACA;QAACN;QAAMC;KAAK;AAEhB;AAEA,SAASQ,SACPT,IAAgC,EAChCM,OAAiB;IAEjB,IAAI,OAAON,SAAS,YAAY;QAC9B,MAAMU,UAAUV,KAAKM;QACrB,IAAI,OAAOI,YAAY,YAAY;YACjC,OAAOA;QACT,OAAO;YACL,OAAO,IAAMV,KAAK;QACpB;IACF,OAAO;QACLA,KAAKM,OAAO,GAAGA;QACf,OAAO;YACLN,KAAKM,OAAO,GAAG;QACjB;IACF;AACF","ignoreList":[0]}},
    {"offset": {"line": 3093, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/client/image-component.tsx"],"sourcesContent":["'use client'\n\nimport React, {\n  useRef,\n  useEffect,\n  useCallback,\n  useContext,\n  useMemo,\n  useState,\n  forwardRef,\n  use,\n} from 'react'\nimport ReactDOM from 'react-dom'\nimport Head from '../shared/lib/head'\nimport { getImgProps } from '../shared/lib/get-img-props'\nimport type {\n  ImageProps,\n  ImgProps,\n  OnLoad,\n  OnLoadingComplete,\n  PlaceholderValue,\n} from '../shared/lib/get-img-props'\nimport type {\n  ImageConfigComplete,\n  ImageLoaderProps,\n} from '../shared/lib/image-config'\nimport { imageConfigDefault } from '../shared/lib/image-config'\nimport { ImageConfigContext } from '../shared/lib/image-config-context.shared-runtime'\nimport { warnOnce } from '../shared/lib/utils/warn-once'\nimport { RouterContext } from '../shared/lib/router-context.shared-runtime'\n\n// This is replaced by webpack alias\nimport defaultLoader from 'next/dist/shared/lib/image-loader'\nimport { useMergedRef } from './use-merged-ref'\n\n// This is replaced by webpack define plugin\nconst configEnv = process.env.__NEXT_IMAGE_OPTS as any as ImageConfigComplete\n\nif (typeof window === 'undefined') {\n  ;(globalThis as any).__NEXT_IMAGE_IMPORTED = true\n}\n\nexport type { ImageLoaderProps }\nexport type ImageLoader = (p: ImageLoaderProps) => string\n\ntype ImgElementWithDataProp = HTMLImageElement & {\n  'data-loaded-src': string | undefined\n}\n\ntype ImageElementProps = ImgProps & {\n  unoptimized: boolean\n  placeholder: PlaceholderValue\n  onLoadRef: React.MutableRefObject<OnLoad | undefined>\n  onLoadingCompleteRef: React.MutableRefObject<OnLoadingComplete | undefined>\n  setBlurComplete: (b: boolean) => void\n  setShowAltText: (b: boolean) => void\n  sizesInput: string | undefined\n}\n\n// See https://stackoverflow.com/q/39777833/266535 for why we use this ref\n// handler instead of the img's onLoad attribute.\nfunction handleLoading(\n  img: ImgElementWithDataProp,\n  placeholder: PlaceholderValue,\n  onLoadRef: React.MutableRefObject<OnLoad | undefined>,\n  onLoadingCompleteRef: React.MutableRefObject<OnLoadingComplete | undefined>,\n  setBlurComplete: (b: boolean) => void,\n  unoptimized: boolean,\n  sizesInput: string | undefined\n) {\n  const src = img?.src\n  if (!img || img['data-loaded-src'] === src) {\n    return\n  }\n  img['data-loaded-src'] = src\n  const p = 'decode' in img ? img.decode() : Promise.resolve()\n  p.catch(() => {}).then(() => {\n    if (!img.parentElement || !img.isConnected) {\n      // Exit early in case of race condition:\n      // - onload() is called\n      // - decode() is called but incomplete\n      // - unmount is called\n      // - decode() completes\n      return\n    }\n    if (placeholder !== 'empty') {\n      setBlurComplete(true)\n    }\n    if (onLoadRef?.current) {\n      // Since we don't have the SyntheticEvent here,\n      // we must create one with the same shape.\n      // See https://reactjs.org/docs/events.html\n      const event = new Event('load')\n      Object.defineProperty(event, 'target', { writable: false, value: img })\n      let prevented = false\n      let stopped = false\n      onLoadRef.current({\n        ...event,\n        nativeEvent: event,\n        currentTarget: img,\n        target: img,\n        isDefaultPrevented: () => prevented,\n        isPropagationStopped: () => stopped,\n        persist: () => {},\n        preventDefault: () => {\n          prevented = true\n          event.preventDefault()\n        },\n        stopPropagation: () => {\n          stopped = true\n          event.stopPropagation()\n        },\n      })\n    }\n    if (onLoadingCompleteRef?.current) {\n      onLoadingCompleteRef.current(img)\n    }\n    if (process.env.NODE_ENV !== 'production') {\n      const origSrc = new URL(src, 'http://n').searchParams.get('url') || src\n      if (img.getAttribute('data-nimg') === 'fill') {\n        if (!unoptimized && (!sizesInput || sizesInput === '100vw')) {\n          let widthViewportRatio =\n            img.getBoundingClientRect().width / window.innerWidth\n          if (widthViewportRatio < 0.6) {\n            if (sizesInput === '100vw') {\n              warnOnce(\n                `Image with src \"${origSrc}\" has \"fill\" prop and \"sizes\" prop of \"100vw\", but image is not rendered at full viewport width. Please adjust \"sizes\" to improve page performance. Read more: https://nextjs.org/docs/api-reference/next/image#sizes`\n              )\n            } else {\n              warnOnce(\n                `Image with src \"${origSrc}\" has \"fill\" but is missing \"sizes\" prop. Please add it to improve page performance. Read more: https://nextjs.org/docs/api-reference/next/image#sizes`\n              )\n            }\n          }\n        }\n        if (img.parentElement) {\n          const { position } = window.getComputedStyle(img.parentElement)\n          const valid = ['absolute', 'fixed', 'relative']\n          if (!valid.includes(position)) {\n            warnOnce(\n              `Image with src \"${origSrc}\" has \"fill\" and parent element with invalid \"position\". Provided \"${position}\" should be one of ${valid\n                .map(String)\n                .join(',')}.`\n            )\n          }\n        }\n        if (img.height === 0) {\n          warnOnce(\n            `Image with src \"${origSrc}\" has \"fill\" and a height value of 0. This is likely because the parent element of the image has not been styled to have a set height.`\n          )\n        }\n      }\n\n      const heightModified =\n        img.height.toString() !== img.getAttribute('height')\n      const widthModified = img.width.toString() !== img.getAttribute('width')\n      if (\n        (heightModified && !widthModified) ||\n        (!heightModified && widthModified)\n      ) {\n        warnOnce(\n          `Image with src \"${origSrc}\" has either width or height modified, but not the other. If you use CSS to change the size of your image, also include the styles 'width: \"auto\"' or 'height: \"auto\"' to maintain the aspect ratio.`\n        )\n      }\n    }\n  })\n}\n\nfunction getDynamicProps(\n  fetchPriority?: string\n): Record<string, string | undefined> {\n  if (Boolean(use)) {\n    // In React 19.0.0 or newer, we must use camelCase\n    // prop to avoid \"Warning: Invalid DOM property\".\n    // See https://github.com/facebook/react/pull/25927\n    return { fetchPriority }\n  }\n  // In React 18.2.0 or older, we must use lowercase prop\n  // to avoid \"Warning: Invalid DOM property\".\n  return { fetchpriority: fetchPriority }\n}\n\nconst ImageElement = forwardRef<HTMLImageElement | null, ImageElementProps>(\n  (\n    {\n      src,\n      srcSet,\n      sizes,\n      height,\n      width,\n      decoding,\n      className,\n      style,\n      fetchPriority,\n      placeholder,\n      loading,\n      unoptimized,\n      fill,\n      onLoadRef,\n      onLoadingCompleteRef,\n      setBlurComplete,\n      setShowAltText,\n      sizesInput,\n      onLoad,\n      onError,\n      ...rest\n    },\n    forwardedRef\n  ) => {\n    const ownRef = useCallback(\n      (img: ImgElementWithDataProp | null) => {\n        if (!img) {\n          return\n        }\n        if (onError) {\n          // If the image has an error before react hydrates, then the error is lost.\n          // The workaround is to wait until the image is mounted which is after hydration,\n          // then we set the src again to trigger the error handler (if there was an error).\n          // eslint-disable-next-line no-self-assign\n          img.src = img.src\n        }\n        if (process.env.NODE_ENV !== 'production') {\n          if (!src) {\n            console.error(`Image is missing required \"src\" property:`, img)\n          }\n          if (img.getAttribute('alt') === null) {\n            console.error(\n              `Image is missing required \"alt\" property. Please add Alternative Text to describe the image for screen readers and search engines.`\n            )\n          }\n        }\n        if (img.complete) {\n          handleLoading(\n            img,\n            placeholder,\n            onLoadRef,\n            onLoadingCompleteRef,\n            setBlurComplete,\n            unoptimized,\n            sizesInput\n          )\n        }\n      },\n      [\n        src,\n        placeholder,\n        onLoadRef,\n        onLoadingCompleteRef,\n        setBlurComplete,\n        onError,\n        unoptimized,\n        sizesInput,\n      ]\n    )\n\n    const ref = useMergedRef(forwardedRef, ownRef)\n\n    return (\n      <img\n        {...rest}\n        {...getDynamicProps(fetchPriority)}\n        // It's intended to keep `loading` before `src` because React updates\n        // props in order which causes Safari/Firefox to not lazy load properly.\n        // See https://github.com/facebook/react/issues/25883\n        loading={loading}\n        width={width}\n        height={height}\n        decoding={decoding}\n        data-nimg={fill ? 'fill' : '1'}\n        className={className}\n        style={style}\n        // It's intended to keep `src` the last attribute because React updates\n        // attributes in order. If we keep `src` the first one, Safari will\n        // immediately start to fetch `src`, before `sizes` and `srcSet` are even\n        // updated by React. That causes multiple unnecessary requests if `srcSet`\n        // and `sizes` are defined.\n        // This bug cannot be reproduced in Chrome or Firefox.\n        sizes={sizes}\n        srcSet={srcSet}\n        src={src}\n        ref={ref}\n        onLoad={(event) => {\n          const img = event.currentTarget as ImgElementWithDataProp\n          handleLoading(\n            img,\n            placeholder,\n            onLoadRef,\n            onLoadingCompleteRef,\n            setBlurComplete,\n            unoptimized,\n            sizesInput\n          )\n        }}\n        onError={(event) => {\n          // if the real image fails to load, this will ensure \"alt\" is visible\n          setShowAltText(true)\n          if (placeholder !== 'empty') {\n            // If the real image fails to load, this will still remove the placeholder.\n            setBlurComplete(true)\n          }\n          if (onError) {\n            onError(event)\n          }\n        }}\n      />\n    )\n  }\n)\n\nfunction ImagePreload({\n  isAppRouter,\n  imgAttributes,\n}: {\n  isAppRouter: boolean\n  imgAttributes: ImgProps\n}) {\n  const opts: ReactDOM.PreloadOptions = {\n    as: 'image',\n    imageSrcSet: imgAttributes.srcSet,\n    imageSizes: imgAttributes.sizes,\n    crossOrigin: imgAttributes.crossOrigin,\n    referrerPolicy: imgAttributes.referrerPolicy,\n    ...getDynamicProps(imgAttributes.fetchPriority),\n  }\n\n  if (isAppRouter && ReactDOM.preload) {\n    ReactDOM.preload(imgAttributes.src, opts)\n    return null\n  }\n\n  return (\n    <Head>\n      <link\n        key={\n          '__nimg-' +\n          imgAttributes.src +\n          imgAttributes.srcSet +\n          imgAttributes.sizes\n        }\n        rel=\"preload\"\n        // Note how we omit the `href` attribute, as it would only be relevant\n        // for browsers that do not support `imagesrcset`, and in those cases\n        // it would cause the incorrect image to be preloaded.\n        //\n        // https://html.spec.whatwg.org/multipage/semantics.html#attr-link-imagesrcset\n        href={imgAttributes.srcSet ? undefined : imgAttributes.src}\n        {...opts}\n      />\n    </Head>\n  )\n}\n\n/**\n * The `Image` component is used to optimize images.\n *\n * Read more: [Next.js docs: `Image`](https://nextjs.org/docs/app/api-reference/components/image)\n */\nexport const Image = forwardRef<HTMLImageElement | null, ImageProps>(\n  (props, forwardedRef) => {\n    const pagesRouter = useContext(RouterContext)\n    // We're in the app directory if there is no pages router.\n    const isAppRouter = !pagesRouter\n\n    const configContext = useContext(ImageConfigContext)\n    const config = useMemo(() => {\n      const c = configEnv || configContext || imageConfigDefault\n\n      const allSizes = [...c.deviceSizes, ...c.imageSizes].sort((a, b) => a - b)\n      const deviceSizes = c.deviceSizes.sort((a, b) => a - b)\n      const qualities = c.qualities?.sort((a, b) => a - b)\n      return {\n        ...c,\n        allSizes,\n        deviceSizes,\n        qualities,\n        // During the SSR, configEnv (__NEXT_IMAGE_OPTS) does not include\n        // security sensitive configs like `localPatterns`, which is needed\n        // during the server render to ensure it's validated. Therefore use\n        // configContext, which holds the config from the server for validation.\n        localPatterns:\n          typeof window === 'undefined'\n            ? configContext?.localPatterns\n            : c.localPatterns,\n      }\n    }, [configContext])\n\n    const { onLoad, onLoadingComplete } = props\n    const onLoadRef = useRef(onLoad)\n\n    useEffect(() => {\n      onLoadRef.current = onLoad\n    }, [onLoad])\n\n    const onLoadingCompleteRef = useRef(onLoadingComplete)\n\n    useEffect(() => {\n      onLoadingCompleteRef.current = onLoadingComplete\n    }, [onLoadingComplete])\n\n    const [blurComplete, setBlurComplete] = useState(false)\n    const [showAltText, setShowAltText] = useState(false)\n    const { props: imgAttributes, meta: imgMeta } = getImgProps(props, {\n      defaultLoader,\n      imgConf: config,\n      blurComplete,\n      showAltText,\n    })\n\n    return (\n      <>\n        {\n          <ImageElement\n            {...imgAttributes}\n            unoptimized={imgMeta.unoptimized}\n            placeholder={imgMeta.placeholder}\n            fill={imgMeta.fill}\n            onLoadRef={onLoadRef}\n            onLoadingCompleteRef={onLoadingCompleteRef}\n            setBlurComplete={setBlurComplete}\n            setShowAltText={setShowAltText}\n            sizesInput={props.sizes}\n            ref={forwardedRef}\n          />\n        }\n        {imgMeta.preload ? (\n          <ImagePreload\n            isAppRouter={isAppRouter}\n            imgAttributes={imgAttributes}\n          />\n        ) : null}\n      </>\n    )\n  }\n)\n"],"names":["Image","configEnv","process","env","__NEXT_IMAGE_OPTS","window","globalThis","__NEXT_IMAGE_IMPORTED","handleLoading","img","placeholder","onLoadRef","onLoadingCompleteRef","setBlurComplete","unoptimized","sizesInput","src","p","decode","Promise","resolve","catch","then","parentElement","isConnected","current","event","Event","Object","defineProperty","writable","value","prevented","stopped","nativeEvent","currentTarget","target","isDefaultPrevented","isPropagationStopped","persist","preventDefault","stopPropagation","NODE_ENV","origSrc","URL","searchParams","get","getAttribute","widthViewportRatio","getBoundingClientRect","width","innerWidth","warnOnce","position","getComputedStyle","valid","includes","map","String","join","height","heightModified","toString","widthModified","getDynamicProps","fetchPriority","Boolean","use","fetchpriority","ImageElement","forwardRef","srcSet","sizes","decoding","className","style","loading","fill","setShowAltText","onLoad","onError","rest","forwardedRef","ownRef","useCallback","console","error","complete","ref","useMergedRef","data-nimg","ImagePreload","isAppRouter","imgAttributes","opts","as","imageSrcSet","imageSizes","crossOrigin","referrerPolicy","ReactDOM","preload","Head","link","rel","href","undefined","props","pagesRouter","useContext","RouterContext","configContext","ImageConfigContext","config","useMemo","c","imageConfigDefault","allSizes","deviceSizes","sort","a","b","qualities","localPatterns","onLoadingComplete","useRef","useEffect","blurComplete","useState","showAltText","meta","imgMeta","getImgProps","defaultLoader","imgConf"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3443, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/src/shared/lib/image-external.tsx"],"sourcesContent":["import type { ImageConfigComplete, ImageLoaderProps } from './image-config'\nimport type { ImageProps, ImageLoader, StaticImageData } from './get-img-props'\n\nimport { getImgProps } from './get-img-props'\nimport { Image } from '../../client/image-component'\n\n// This is replaced by webpack alias\nimport defaultLoader from 'next/dist/shared/lib/image-loader'\n\n/**\n * For more advanced use cases, you can call `getImageProps()`\n * to get the props that would be passed to the underlying `<img>` element,\n * and instead pass to them to another component, style, canvas, etc.\n *\n * Read more: [Next.js docs: `getImageProps`](https://nextjs.org/docs/app/api-reference/components/image#getimageprops)\n */\nexport function getImageProps(imgProps: ImageProps) {\n  const { props } = getImgProps(imgProps, {\n    defaultLoader,\n    // This is replaced by webpack define plugin\n    imgConf: process.env.__NEXT_IMAGE_OPTS as any as ImageConfigComplete,\n  })\n  // Normally we don't care about undefined props because we pass to JSX,\n  // but this exported function could be used by the end user for anything\n  // so we delete undefined props to clean it up a little.\n  for (const [key, value] of Object.entries(props)) {\n    if (value === undefined) {\n      delete props[key as keyof typeof props]\n    }\n  }\n  return { props }\n}\n\nexport default Image\n\nexport type { ImageProps, ImageLoaderProps, ImageLoader, StaticImageData }\n"],"names":["getImageProps","imgProps","props","getImgProps","defaultLoader","imgConf","process","env","__NEXT_IMAGE_OPTS","key","value","Object","entries","undefined","Image"],"mappings":"AAoBaM,QAAQC,GAAG,CAACC,iBAAiB;;;;;;;;;;;;;;;;IAa1C,OAAoB,EAAA;eAApB;;IAjBgBR,aAAa,EAAA;eAAbA;;;;6BAbY;gCACN;sEAGI;AASnB,SAASA,cAAcC,QAAoB;IAChD,MAAM,EAAEC,KAAK,EAAE,GAAGC,CAAAA,GAAAA,aAAAA,WAAW,EAACF,UAAU;QACtCG,eAAAA,aAAAA,OAAa;QACb,4CAA4C;QAC5CC,OAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IACF;IACA,uEAAuE;IACvE,wEAAwE;IACxE,wDAAwD;IACxD,KAAK,MAAM,CAACI,KAAKC,MAAM,IAAIC,OAAOC,OAAO,CAACV,OAAQ;QAChD,IAAIQ,UAAUG,WAAW;YACvB,OAAOX,KAAK,CAACO,IAA0B;QACzC;IACF;IACA,OAAO;QAAEP;IAAM;AACjB;MAEA,WAAeY,gBAAAA,KAAK","ignoreList":[0]}},
    {"offset": {"line": 3527, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/next/image.js"],"sourcesContent":["module.exports = require('./dist/shared/lib/image-external')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0]}},
    {"offset": {"line": 3532, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js"],"sourcesContent":["/**\n * @license React\n * use-sync-external-store-shim.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function is(x, y) {\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n    }\n    function useSyncExternalStore$2(subscribe, getSnapshot) {\n      didWarnOld18Alpha ||\n        void 0 === React.startTransition ||\n        ((didWarnOld18Alpha = !0),\n        console.error(\n          \"You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release.\"\n        ));\n      var value = getSnapshot();\n      if (!didWarnUncachedGetSnapshot) {\n        var cachedValue = getSnapshot();\n        objectIs(value, cachedValue) ||\n          (console.error(\n            \"The result of getSnapshot should be cached to avoid an infinite loop\"\n          ),\n          (didWarnUncachedGetSnapshot = !0));\n      }\n      cachedValue = useState({\n        inst: { value: value, getSnapshot: getSnapshot }\n      });\n      var inst = cachedValue[0].inst,\n        forceUpdate = cachedValue[1];\n      useLayoutEffect(\n        function () {\n          inst.value = value;\n          inst.getSnapshot = getSnapshot;\n          checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n        },\n        [subscribe, value, getSnapshot]\n      );\n      useEffect(\n        function () {\n          checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n          return subscribe(function () {\n            checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n          });\n        },\n        [subscribe]\n      );\n      useDebugValue(value);\n      return value;\n    }\n    function checkIfSnapshotChanged(inst) {\n      var latestGetSnapshot = inst.getSnapshot;\n      inst = inst.value;\n      try {\n        var nextValue = latestGetSnapshot();\n        return !objectIs(inst, nextValue);\n      } catch (error) {\n        return !0;\n      }\n    }\n    function useSyncExternalStore$1(subscribe, getSnapshot) {\n      return getSnapshot();\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\n      useState = React.useState,\n      useEffect = React.useEffect,\n      useLayoutEffect = React.useLayoutEffect,\n      useDebugValue = React.useDebugValue,\n      didWarnOld18Alpha = !1,\n      didWarnUncachedGetSnapshot = !1,\n      shim =\n        \"undefined\" === typeof window ||\n        \"undefined\" === typeof window.document ||\n        \"undefined\" === typeof window.document.createElement\n          ? useSyncExternalStore$1\n          : useSyncExternalStore$2;\n    exports.useSyncExternalStore =\n      void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n"],"names":[],"mappings":"AAWiB;AAXjB;;;;;;;;CAQC,GAED;AACA,oEACE,AAAC;IACC,SAAS,GAAG,CAAC,EAAE,CAAC;QACd,OAAO,AAAC,MAAM,KAAK,CAAC,MAAM,KAAK,IAAI,MAAM,IAAI,CAAC,KAAO,MAAM,KAAK,MAAM;IACxE;IACA,SAAS,uBAAuB,SAAS,EAAE,WAAW;QACpD,qBACE,KAAK,MAAM,MAAM,eAAe,IAChC,CAAC,AAAC,oBAAoB,CAAC,GACvB,QAAQ,KAAK,CACX,iMACD;QACH,IAAI,QAAQ;QACZ,IAAI,CAAC,4BAA4B;YAC/B,IAAI,cAAc;YAClB,SAAS,OAAO,gBACd,CAAC,QAAQ,KAAK,CACZ,yEAED,6BAA6B,CAAC,CAAE;QACrC;QACA,cAAc,SAAS;YACrB,MAAM;gBAAE,OAAO;gBAAO,aAAa;YAAY;QACjD;QACA,IAAI,OAAO,WAAW,CAAC,EAAE,CAAC,IAAI,EAC5B,cAAc,WAAW,CAAC,EAAE;QAC9B;sDACE;gBACE,KAAK,KAAK,GAAG;gBACb,KAAK,WAAW,GAAG;gBACnB,uBAAuB,SAAS,YAAY;oBAAE,MAAM;gBAAK;YAC3D;qDACA;YAAC;YAAW;YAAO;SAAY;QAEjC;gDACE;gBACE,uBAAuB,SAAS,YAAY;oBAAE,MAAM;gBAAK;gBACzD,OAAO;wDAAU;wBACf,uBAAuB,SAAS,YAAY;4BAAE,MAAM;wBAAK;oBAC3D;;YACF;+CACA;YAAC;SAAU;QAEb,cAAc;QACd,OAAO;IACT;IACA,SAAS,uBAAuB,IAAI;QAClC,IAAI,oBAAoB,KAAK,WAAW;QACxC,OAAO,KAAK,KAAK;QACjB,IAAI;YACF,IAAI,YAAY;YAChB,OAAO,CAAC,SAAS,MAAM;QACzB,EAAE,OAAO,OAAO;YACd,OAAO,CAAC;QACV;IACF;IACA,SAAS,uBAAuB,SAAS,EAAE,WAAW;QACpD,OAAO;IACT;IACA,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,2BAA2B,IACnE,+BAA+B,2BAA2B,CAAC;IAC7D,IAAI,8HACF,WAAW,eAAe,OAAO,OAAO,EAAE,GAAG,OAAO,EAAE,GAAG,IACzD,WAAW,MAAM,QAAQ,EACzB,YAAY,MAAM,SAAS,EAC3B,kBAAkB,MAAM,eAAe,EACvC,gBAAgB,MAAM,aAAa,EACnC,oBAAoB,CAAC,GACrB,6BAA6B,CAAC,GAC9B,OACE,gBAAgB,OAAO,UACvB,gBAAgB,OAAO,OAAO,QAAQ,IACtC,gBAAgB,OAAO,OAAO,QAAQ,CAAC,aAAa,GAChD,yBACA;IACR,QAAQ,oBAAoB,GAC1B,KAAK,MAAM,MAAM,oBAAoB,GAAG,MAAM,oBAAoB,GAAG;IACvE,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,0BAA0B,IAClE,+BAA+B,0BAA0B,CAAC;AAC9D","ignoreList":[0]}},
    {"offset": {"line": 3614, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/use-sync-external-store/shim/index.js"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n"],"names":[],"mappings":"AAEI;AAFJ;AAEA;;KAEO;IACL,OAAO,OAAO;AAChB","ignoreList":[0]}},
    {"offset": {"line": 3625, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/createChainableState.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/CommandManager.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/index.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/blur.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/clearContent.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/clearNodes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/command.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/createParagraphNear.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/cut.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/deleteCurrentNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getNodeType.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/deleteNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/deleteRange.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/deleteSelection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/enter.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/exitCode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/extendMarkRange.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isRegExp.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/objectIncludes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getMarkRange.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getMarkType.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/first.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isTextSelection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/resolveFocusPosition.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/minMax.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isAndroid.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isiOS.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isSafari.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/focus.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/forEach.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/insertContent.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/insertContentAt.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/createNodeFromContent.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/elementFromString.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/selectionToInsertionEnd.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/join.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/joinItemBackward.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/joinItemForward.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/joinTextblockBackward.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/joinTextblockForward.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isMacOS.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/keyboardShortcut.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/lift.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isNodeActive.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/liftEmptyBlock.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/liftListItem.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/newlineInCode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getSchemaTypeNameByName.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/deleteProps.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/resetAttributes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/scrollIntoView.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/selectAll.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/selectNodeBackward.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/selectNodeForward.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/selectParentNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/selectTextblockEnd.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/selectTextblockStart.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/createDocument.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/setContent.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getMarkAttributes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/combineTransactionSteps.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/defaultBlockAt.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/findChildren.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/findChildrenInRange.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/findParentNodeClosestToPos.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/findParentNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getExtensionField.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/flattenExtensions.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/generateHTML.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getHTMLFromFragment.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getSchemaByResolvedExtensions.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isFunction.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/callOrReturn.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isEmptyObject.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/splitExtensions.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getAttributesFromExtensions.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/mergeAttributes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getRenderedAttributes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/fromString.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/injectExtensionAttributesToParseRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/findDuplicates.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/sortExtensions.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/resolveExtensions.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getSchema.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/generateJSON.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/generateText.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getTextBetween.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getText.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getTextSerializersFromSchema.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getNodeAttributes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getAttributes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/removeDuplicates.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getChangedRanges.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getDebugJSON.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getMarksBetween.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getNodeAtPosition.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getSchemaTypeByName.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getSplittedAttributes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/getTextContentFromNodes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isMarkActive.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isActive.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isAtEndOfNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isAtStartOfNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isExtensionRulesEnabled.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isList.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isNodeEmpty.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/isNodeSelection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/MappablePosition.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/posToDOMRect.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/helpers/rewriteUnknownContent.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/setMark.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/setMeta.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/setNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/setNodeSelection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/setTextDirection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/setTextSelection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/sinkListItem.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/splitBlock.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/splitListItem.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/toggleList.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/toggleMark.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/toggleNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/toggleWrap.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/undoInputRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/unsetAllMarks.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/unsetMark.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/unsetTextDirection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/updateAttributes.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/wrapIn.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/commands/wrapInList.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/Editor.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/EventEmitter.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/ExtensionManager.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/InputRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isPlainObject.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/mergeDeep.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/Extendable.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/Mark.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/PasteRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isNumber.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/index.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/clipboardTextSerializer.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/Extension.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/commands.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/delete.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/drop.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/editable.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/focusEvents.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/keymap.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/paste.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/tabindex.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/extensions/textDirection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/NodePos.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/style.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/createStyleTag.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/inputRules/markInputRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/inputRules/nodeInputRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/inputRules/textblockTypeInputRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/inputRules/textInputRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/inputRules/wrappingInputRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/jsx-runtime.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/lib/ResizableNodeView.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/canInsertNode.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/escapeForRegEx.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isFirefox.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/isString.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/markdown/index.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/markdown/attributeUtils.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/markdown/createAtomBlockMarkdownSpec.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/markdown/createBlockMarkdownSpec.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/markdown/createInlineMarkdownSpec.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/markdown/parseIndentedBlocks.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/utilities/markdown/renderNestedMarkdownContent.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/MarkView.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/Node.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/NodeView.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/pasteRules/markPasteRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/pasteRules/nodePasteRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/pasteRules/textPasteRule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/core/src/Tracker.ts"],"sourcesContent":["import type { EditorState, Transaction } from '@tiptap/pm/state'\n\n/**\n * Takes a Transaction & Editor State and turns it into a chainable state object\n * @param config The transaction and state to create the chainable state from\n * @returns A chainable Editor state object\n */\nexport function createChainableState(config: { transaction: Transaction; state: EditorState }): EditorState {\n  const { state, transaction } = config\n  let { selection } = transaction\n  let { doc } = transaction\n  let { storedMarks } = transaction\n\n  return {\n    ...state,\n    apply: state.apply.bind(state),\n    applyTransaction: state.applyTransaction.bind(state),\n    plugins: state.plugins,\n    schema: state.schema,\n    reconfigure: state.reconfigure.bind(state),\n    toJSON: state.toJSON.bind(state),\n    get storedMarks() {\n      return storedMarks\n    },\n    get selection() {\n      return selection\n    },\n    get doc() {\n      return doc\n    },\n    get tr() {\n      selection = transaction.selection\n      doc = transaction.doc\n      storedMarks = transaction.storedMarks\n\n      return transaction\n    },\n  }\n}\n","import type { EditorState, Transaction } from '@tiptap/pm/state'\n\nimport type { Editor } from './Editor.js'\nimport { createChainableState } from './helpers/createChainableState.js'\nimport type { AnyCommands, CanCommands, ChainedCommands, CommandProps, SingleCommands } from './types.js'\n\nexport class CommandManager {\n  editor: Editor\n\n  rawCommands: AnyCommands\n\n  customState?: EditorState\n\n  constructor(props: { editor: Editor; state?: EditorState }) {\n    this.editor = props.editor\n    this.rawCommands = this.editor.extensionManager.commands\n    this.customState = props.state\n  }\n\n  get hasCustomState(): boolean {\n    return !!this.customState\n  }\n\n  get state(): EditorState {\n    return this.customState || this.editor.state\n  }\n\n  get commands(): SingleCommands {\n    const { rawCommands, editor, state } = this\n    const { view } = editor\n    const { tr } = state\n    const props = this.buildProps(tr)\n\n    return Object.fromEntries(\n      Object.entries(rawCommands).map(([name, command]) => {\n        const method = (...args: any[]) => {\n          const callback = command(...args)(props)\n\n          if (!tr.getMeta('preventDispatch') && !this.hasCustomState) {\n            view.dispatch(tr)\n          }\n\n          return callback\n        }\n\n        return [name, method]\n      }),\n    ) as unknown as SingleCommands\n  }\n\n  get chain(): () => ChainedCommands {\n    return () => this.createChain()\n  }\n\n  get can(): () => CanCommands {\n    return () => this.createCan()\n  }\n\n  public createChain(startTr?: Transaction, shouldDispatch = true): ChainedCommands {\n    const { rawCommands, editor, state } = this\n    const { view } = editor\n    const callbacks: boolean[] = []\n    const hasStartTransaction = !!startTr\n    const tr = startTr || state.tr\n\n    const run = () => {\n      if (!hasStartTransaction && shouldDispatch && !tr.getMeta('preventDispatch') && !this.hasCustomState) {\n        view.dispatch(tr)\n      }\n\n      return callbacks.every(callback => callback === true)\n    }\n\n    const chain = {\n      ...Object.fromEntries(\n        Object.entries(rawCommands).map(([name, command]) => {\n          const chainedCommand = (...args: never[]) => {\n            const props = this.buildProps(tr, shouldDispatch)\n            const callback = command(...args)(props)\n\n            callbacks.push(callback)\n\n            return chain\n          }\n\n          return [name, chainedCommand]\n        }),\n      ),\n      run,\n    } as unknown as ChainedCommands\n\n    return chain\n  }\n\n  public createCan(startTr?: Transaction): CanCommands {\n    const { rawCommands, state } = this\n    const dispatch = false\n    const tr = startTr || state.tr\n    const props = this.buildProps(tr, dispatch)\n    const formattedCommands = Object.fromEntries(\n      Object.entries(rawCommands).map(([name, command]) => {\n        return [name, (...args: never[]) => command(...args)({ ...props, dispatch: undefined })]\n      }),\n    ) as unknown as SingleCommands\n\n    return {\n      ...formattedCommands,\n      chain: () => this.createChain(tr, dispatch),\n    } as CanCommands\n  }\n\n  public buildProps(tr: Transaction, shouldDispatch = true): CommandProps {\n    const { rawCommands, editor, state } = this\n    const { view } = editor\n\n    const props: CommandProps = {\n      tr,\n      editor,\n      view,\n      state: createChainableState({\n        state,\n        transaction: tr,\n      }),\n      dispatch: shouldDispatch ? () => undefined : undefined,\n      chain: () => this.createChain(tr, shouldDispatch),\n      can: () => this.createCan(tr),\n      get commands() {\n        return Object.fromEntries(\n          Object.entries(rawCommands).map(([name, command]) => {\n            return [name, (...args: never[]) => command(...args)(props)]\n          }),\n        ) as unknown as SingleCommands\n      },\n    }\n\n    return props\n  }\n}\n","export * from './blur.js'\nexport * from './clearContent.js'\nexport * from './clearNodes.js'\nexport * from './command.js'\nexport * from './createParagraphNear.js'\nexport * from './cut.js'\nexport * from './deleteCurrentNode.js'\nexport * from './deleteNode.js'\nexport * from './deleteRange.js'\nexport * from './deleteSelection.js'\nexport * from './enter.js'\nexport * from './exitCode.js'\nexport * from './extendMarkRange.js'\nexport * from './first.js'\nexport * from './focus.js'\nexport * from './forEach.js'\nexport * from './insertContent.js'\nexport * from './insertContentAt.js'\nexport * from './join.js'\nexport * from './joinItemBackward.js'\nexport * from './joinItemForward.js'\nexport * from './joinTextblockBackward.js'\nexport * from './joinTextblockForward.js'\nexport * from './keyboardShortcut.js'\nexport * from './lift.js'\nexport * from './liftEmptyBlock.js'\nexport * from './liftListItem.js'\nexport * from './newlineInCode.js'\nexport * from './resetAttributes.js'\nexport * from './scrollIntoView.js'\nexport * from './selectAll.js'\nexport * from './selectNodeBackward.js'\nexport * from './selectNodeForward.js'\nexport * from './selectParentNode.js'\nexport * from './selectTextblockEnd.js'\nexport * from './selectTextblockStart.js'\nexport * from './setContent.js'\nexport * from './setMark.js'\nexport * from './setMeta.js'\nexport * from './setNode.js'\nexport * from './setNodeSelection.js'\nexport * from './setTextDirection.js'\nexport * from './setTextSelection.js'\nexport * from './sinkListItem.js'\nexport * from './splitBlock.js'\nexport * from './splitListItem.js'\nexport * from './toggleList.js'\nexport * from './toggleMark.js'\nexport * from './toggleNode.js'\nexport * from './toggleWrap.js'\nexport * from './undoInputRule.js'\nexport * from './unsetAllMarks.js'\nexport * from './unsetMark.js'\nexport * from './unsetTextDirection.js'\nexport * from './updateAttributes.js'\nexport * from './wrapIn.js'\nexport * from './wrapInList.js'\n","import type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    blur: {\n      /**\n       * Removes focus from the editor.\n       * @example editor.commands.blur()\n       */\n      blur: () => ReturnType\n    }\n  }\n}\n\nexport const blur: RawCommands['blur'] =\n  () =>\n  ({ editor, view }) => {\n    requestAnimationFrame(() => {\n      if (!editor.isDestroyed) {\n        ;(view.dom as HTMLElement).blur()\n\n        // Browsers should remove the caret on blur but safari does not.\n        // See: https://github.com/ueberdosis/tiptap/issues/2405\n        window?.getSelection()?.removeAllRanges()\n      }\n    })\n\n    return true\n  }\n","import type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    clearContent: {\n      /**\n       * Clear the whole document.\n       * @example editor.commands.clearContent()\n       */\n      clearContent: (\n        /**\n         * Whether to emit an update event.\n         * @default true\n         */\n        emitUpdate?: boolean,\n      ) => ReturnType\n    }\n  }\n}\n\nexport const clearContent: RawCommands['clearContent'] =\n  (emitUpdate = true) =>\n  ({ commands }) => {\n    return commands.setContent('', { emitUpdate })\n  }\n","import { liftTarget } from '@tiptap/pm/transform'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    clearNodes: {\n      /**\n       * Normalize nodes to a simple paragraph.\n       * @example editor.commands.clearNodes()\n       */\n      clearNodes: () => ReturnType\n    }\n  }\n}\n\nexport const clearNodes: RawCommands['clearNodes'] =\n  () =>\n  ({ state, tr, dispatch }) => {\n    const { selection } = tr\n    const { ranges } = selection\n\n    if (!dispatch) {\n      return true\n    }\n\n    ranges.forEach(({ $from, $to }) => {\n      state.doc.nodesBetween($from.pos, $to.pos, (node, pos) => {\n        if (node.type.isText) {\n          return\n        }\n\n        const { doc, mapping } = tr\n        const $mappedFrom = doc.resolve(mapping.map(pos))\n        const $mappedTo = doc.resolve(mapping.map(pos + node.nodeSize))\n        const nodeRange = $mappedFrom.blockRange($mappedTo)\n\n        if (!nodeRange) {\n          return\n        }\n\n        const targetLiftDepth = liftTarget(nodeRange)\n\n        if (node.type.isTextblock) {\n          const { defaultType } = $mappedFrom.parent.contentMatchAt($mappedFrom.index())\n\n          tr.setNodeMarkup(nodeRange.start, defaultType)\n        }\n\n        if (targetLiftDepth || targetLiftDepth === 0) {\n          tr.lift(nodeRange, targetLiftDepth)\n        }\n      })\n    })\n\n    return true\n  }\n","import type { Command, RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    command: {\n      /**\n       * Define a command inline.\n       * @param fn The command function.\n       * @example\n       * editor.commands.command(({ tr, state }) => {\n       *   ...\n       *   return true\n       * })\n       */\n      command: (fn: (props: Parameters<Command>[0]) => boolean) => ReturnType\n    }\n  }\n}\n\nexport const command: RawCommands['command'] = fn => props => {\n  return fn(props)\n}\n","import { createParagraphNear as originalCreateParagraphNear } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    createParagraphNear: {\n      /**\n       * Create a paragraph nearby.\n       * @example editor.commands.createParagraphNear()\n       */\n      createParagraphNear: () => ReturnType\n    }\n  }\n}\n\nexport const createParagraphNear: RawCommands['createParagraphNear'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalCreateParagraphNear(state, dispatch)\n  }\n","import { TextSelection } from '@tiptap/pm/state'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    cut: {\n      /**\n       * Cuts content from a range and inserts it at a given position.\n       * @param range The range to cut.\n       * @param range.from The start position of the range.\n       * @param range.to The end position of the range.\n       * @param targetPos The position to insert the content at.\n       * @example editor.commands.cut({ from: 1, to: 3 }, 5)\n       */\n      cut: ({ from, to }: { from: number; to: number }, targetPos: number) => ReturnType\n    }\n  }\n}\n\nexport const cut: RawCommands['cut'] =\n  (originRange, targetPos) =>\n  ({ editor, tr }) => {\n    const { state } = editor\n\n    const contentSlice = state.doc.slice(originRange.from, originRange.to)\n\n    tr.deleteRange(originRange.from, originRange.to)\n    const newPos = tr.mapping.map(targetPos)\n\n    tr.insert(newPos, contentSlice.content)\n\n    tr.setSelection(new TextSelection(tr.doc.resolve(Math.max(newPos - 1, 0))))\n\n    return true\n  }\n","import type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    deleteCurrentNode: {\n      /**\n       * Delete the node that currently has the selection anchor.\n       * @example editor.commands.deleteCurrentNode()\n       */\n      deleteCurrentNode: () => ReturnType\n    }\n  }\n}\n\nexport const deleteCurrentNode: RawCommands['deleteCurrentNode'] =\n  () =>\n  ({ tr, dispatch }) => {\n    const { selection } = tr\n    const currentNode = selection.$anchor.node()\n\n    // if there is content inside the current node, break out of this command\n    if (currentNode.content.size > 0) {\n      return false\n    }\n\n    const $pos = tr.selection.$anchor\n\n    for (let depth = $pos.depth; depth > 0; depth -= 1) {\n      const node = $pos.node(depth)\n\n      if (node.type === currentNode.type) {\n        if (dispatch) {\n          const from = $pos.before(depth)\n          const to = $pos.after(depth)\n\n          tr.delete(from, to).scrollIntoView()\n        }\n\n        return true\n      }\n    }\n\n    return false\n  }\n","import type { NodeType, Schema } from '@tiptap/pm/model'\n\nexport function getNodeType(nameOrType: string | NodeType, schema: Schema): NodeType {\n  if (typeof nameOrType === 'string') {\n    if (!schema.nodes[nameOrType]) {\n      throw Error(`There is no node type named '${nameOrType}'. Maybe you forgot to add the extension?`)\n    }\n\n    return schema.nodes[nameOrType]\n  }\n\n  return nameOrType\n}\n","import type { NodeType } from '@tiptap/pm/model'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    deleteNode: {\n      /**\n       * Delete a node with a given type or name.\n       * @param typeOrName The type or name of the node.\n       * @example editor.commands.deleteNode('paragraph')\n       */\n      deleteNode: (typeOrName: string | NodeType) => ReturnType\n    }\n  }\n}\n\nexport const deleteNode: RawCommands['deleteNode'] =\n  typeOrName =>\n  ({ tr, state, dispatch }) => {\n    const type = getNodeType(typeOrName, state.schema)\n    const $pos = tr.selection.$anchor\n\n    for (let depth = $pos.depth; depth > 0; depth -= 1) {\n      const node = $pos.node(depth)\n\n      if (node.type === type) {\n        if (dispatch) {\n          const from = $pos.before(depth)\n          const to = $pos.after(depth)\n\n          tr.delete(from, to).scrollIntoView()\n        }\n\n        return true\n      }\n    }\n\n    return false\n  }\n","import type { Range, RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    deleteRange: {\n      /**\n       * Delete a given range.\n       * @param range The range to delete.\n       * @example editor.commands.deleteRange({ from: 1, to: 3 })\n       */\n      deleteRange: (range: Range) => ReturnType\n    }\n  }\n}\n\nexport const deleteRange: RawCommands['deleteRange'] =\n  range =>\n  ({ tr, dispatch }) => {\n    const { from, to } = range\n\n    if (dispatch) {\n      tr.delete(from, to)\n    }\n\n    return true\n  }\n","import { deleteSelection as originalDeleteSelection } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    deleteSelection: {\n      /**\n       * Delete the selection, if there is one.\n       * @example editor.commands.deleteSelection()\n       */\n      deleteSelection: () => ReturnType\n    }\n  }\n}\n\nexport const deleteSelection: RawCommands['deleteSelection'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalDeleteSelection(state, dispatch)\n  }\n","import type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    enter: {\n      /**\n       * Trigger enter.\n       * @example editor.commands.enter()\n       */\n      enter: () => ReturnType\n    }\n  }\n}\n\nexport const enter: RawCommands['enter'] =\n  () =>\n  ({ commands }) => {\n    return commands.keyboardShortcut('Enter')\n  }\n","import { exitCode as originalExitCode } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    exitCode: {\n      /**\n       * Exit from a code block.\n       * @example editor.commands.exitCode()\n       */\n      exitCode: () => ReturnType\n    }\n  }\n}\n\nexport const exitCode: RawCommands['exitCode'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalExitCode(state, dispatch)\n  }\n","import type { MarkType } from '@tiptap/pm/model'\nimport { TextSelection } from '@tiptap/pm/state'\n\nimport { getMarkRange } from '../helpers/getMarkRange.js'\nimport { getMarkType } from '../helpers/getMarkType.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    extendMarkRange: {\n      /**\n       * Extends the text selection to the current mark by type or name.\n       * @param typeOrName The type or name of the mark.\n       * @param attributes The attributes of the mark.\n       * @example editor.commands.extendMarkRange('bold')\n       * @example editor.commands.extendMarkRange('mention', { userId: \"1\" })\n       */\n      extendMarkRange: (\n        /**\n         * The type or name of the mark.\n         */\n        typeOrName: string | MarkType,\n\n        /**\n         * The attributes of the mark.\n         */\n        attributes?: Record<string, any>,\n      ) => ReturnType\n    }\n  }\n}\n\nexport const extendMarkRange: RawCommands['extendMarkRange'] =\n  (typeOrName, attributes = {}) =>\n  ({ tr, state, dispatch }) => {\n    const type = getMarkType(typeOrName, state.schema)\n    const { doc, selection } = tr\n    const { $from, from, to } = selection\n\n    if (dispatch) {\n      const range = getMarkRange($from, type, attributes)\n\n      if (range && range.from <= from && range.to >= to) {\n        const newSelection = TextSelection.create(doc, range.from, range.to)\n\n        tr.setSelection(newSelection)\n      }\n    }\n\n    return true\n  }\n","export function isRegExp(value: any): value is RegExp {\n  return Object.prototype.toString.call(value) === '[object RegExp]'\n}\n","import { isRegExp } from './isRegExp.js'\n\n/**\n * Check if object1 includes object2\n * @param object1 Object\n * @param object2 Object\n */\nexport function objectIncludes(\n  object1: Record<string, any>,\n  object2: Record<string, any>,\n  options: { strict: boolean } = { strict: true },\n): boolean {\n  const keys = Object.keys(object2)\n\n  if (!keys.length) {\n    return true\n  }\n\n  return keys.every(key => {\n    if (options.strict) {\n      return object2[key] === object1[key]\n    }\n\n    if (isRegExp(object2[key])) {\n      return object2[key].test(object1[key])\n    }\n\n    return object2[key] === object1[key]\n  })\n}\n","import type { Mark as ProseMirrorMark, MarkType, ResolvedPos } from '@tiptap/pm/model'\n\nimport type { Range } from '../types.js'\nimport { objectIncludes } from '../utilities/objectIncludes.js'\n\nfunction findMarkInSet(\n  marks: ProseMirrorMark[],\n  type: MarkType,\n  attributes: Record<string, any> = {},\n): ProseMirrorMark | undefined {\n  return marks.find(item => {\n    return (\n      item.type === type &&\n      objectIncludes(\n        // Only check equality for the attributes that are provided\n        Object.fromEntries(Object.keys(attributes).map(k => [k, item.attrs[k]])),\n        attributes,\n      )\n    )\n  })\n}\n\nfunction isMarkInSet(marks: ProseMirrorMark[], type: MarkType, attributes: Record<string, any> = {}): boolean {\n  return !!findMarkInSet(marks, type, attributes)\n}\n\n/**\n * Get the range of a mark at a resolved position.\n */\nexport function getMarkRange(\n  /**\n   * The position to get the mark range for.\n   */\n  $pos: ResolvedPos,\n  /**\n   * The mark type to get the range for.\n   */\n  type: MarkType,\n  /**\n   * The attributes to match against.\n   * If not provided, only the first mark at the position will be matched.\n   */\n  attributes?: Record<string, any>,\n): Range | void {\n  if (!$pos || !type) {\n    return\n  }\n  let start = $pos.parent.childAfter($pos.parentOffset)\n\n  // If the cursor is at the start of a text node that does not have the mark, look backward\n  if (!start.node || !start.node.marks.some(mark => mark.type === type)) {\n    start = $pos.parent.childBefore($pos.parentOffset)\n  }\n\n  // If there is no text node with the mark even backward, return undefined\n  if (!start.node || !start.node.marks.some(mark => mark.type === type)) {\n    return\n  }\n\n  // Default to only matching against the first mark's attributes\n  attributes = attributes || start.node.marks[0]?.attrs\n\n  // We now know that the cursor is either at the start, middle or end of a text node with the specified mark\n  // so we can look it up on the targeted mark\n  const mark = findMarkInSet([...start.node.marks], type, attributes)\n\n  if (!mark) {\n    return\n  }\n\n  let startIndex = start.index\n  let startPos = $pos.start() + start.offset\n  let endIndex = startIndex + 1\n  let endPos = startPos + start.node.nodeSize\n\n  while (startIndex > 0 && isMarkInSet([...$pos.parent.child(startIndex - 1).marks], type, attributes)) {\n    startIndex -= 1\n    startPos -= $pos.parent.child(startIndex).nodeSize\n  }\n\n  while (endIndex < $pos.parent.childCount && isMarkInSet([...$pos.parent.child(endIndex).marks], type, attributes)) {\n    endPos += $pos.parent.child(endIndex).nodeSize\n    endIndex += 1\n  }\n\n  return {\n    from: startPos,\n    to: endPos,\n  }\n}\n","import type { MarkType, Schema } from '@tiptap/pm/model'\n\nexport function getMarkType(nameOrType: string | MarkType, schema: Schema): MarkType {\n  if (typeof nameOrType === 'string') {\n    if (!schema.marks[nameOrType]) {\n      throw Error(`There is no mark type named '${nameOrType}'. Maybe you forgot to add the extension?`)\n    }\n\n    return schema.marks[nameOrType]\n  }\n\n  return nameOrType\n}\n","import type { Command, CommandProps, RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    first: {\n      /**\n       * Runs one command after the other and stops at the first which returns true.\n       * @param commands The commands to run.\n       * @example editor.commands.first([command1, command2])\n       */\n      first: (commands: Command[] | ((props: CommandProps) => Command[])) => ReturnType\n    }\n  }\n}\n\nexport const first: RawCommands['first'] = commands => props => {\n  const items = typeof commands === 'function' ? commands(props) : commands\n\n  for (let i = 0; i < items.length; i += 1) {\n    if (items[i](props)) {\n      return true\n    }\n  }\n\n  return false\n}\n","import { TextSelection } from '@tiptap/pm/state'\n\nexport function isTextSelection(value: unknown): value is TextSelection {\n  return value instanceof TextSelection\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\nimport { Selection, TextSelection } from '@tiptap/pm/state'\n\nimport type { FocusPosition } from '../types.js'\nimport { minMax } from '../utilities/minMax.js'\n\nexport function resolveFocusPosition(doc: ProseMirrorNode, position: FocusPosition = null): Selection | null {\n  if (!position) {\n    return null\n  }\n\n  const selectionAtStart = Selection.atStart(doc)\n  const selectionAtEnd = Selection.atEnd(doc)\n\n  if (position === 'start' || position === true) {\n    return selectionAtStart\n  }\n\n  if (position === 'end') {\n    return selectionAtEnd\n  }\n\n  const minPos = selectionAtStart.from\n  const maxPos = selectionAtEnd.to\n\n  if (position === 'all') {\n    return TextSelection.create(doc, minMax(0, minPos, maxPos), minMax(doc.content.size, minPos, maxPos))\n  }\n\n  return TextSelection.create(doc, minMax(position, minPos, maxPos), minMax(position, minPos, maxPos))\n}\n","export function minMax(value = 0, min = 0, max = 0): number {\n  return Math.min(Math.max(value, min), max)\n}\n","export function isAndroid(): boolean {\n  return navigator.platform === 'Android' || /android/i.test(navigator.userAgent)\n}\n","export function isiOS(): boolean {\n  return (\n    ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod'].includes(navigator.platform) ||\n    // iPad on iOS 13 detection\n    (navigator.userAgent.includes('Mac') && 'ontouchend' in document)\n  )\n}\n","/**\n * Detects if the current browser is Safari (but not iOS Safari or Chrome).\n * @returns `true` if the browser is Safari, `false` otherwise.\n * @example\n * if (isSafari()) {\n *   // Safari-specific handling\n * }\n */\nexport function isSafari(): boolean {\n  return typeof navigator !== 'undefined' ? /^((?!chrome|android).)*safari/i.test(navigator.userAgent) : false\n}\n","import { isTextSelection } from '../helpers/isTextSelection.js'\nimport { resolveFocusPosition } from '../helpers/resolveFocusPosition.js'\nimport type { FocusPosition, RawCommands } from '../types.js'\nimport { isAndroid } from '../utilities/isAndroid.js'\nimport { isiOS } from '../utilities/isiOS.js'\nimport { isSafari } from '../utilities/isSafari.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    focus: {\n      /**\n       * Focus the editor at the given position.\n       * @param position The position to focus at.\n       * @param options.scrollIntoView Scroll the focused position into view after focusing\n       * @example editor.commands.focus()\n       * @example editor.commands.focus(32, { scrollIntoView: false })\n       */\n      focus: (\n        /**\n         * The position to focus at.\n         */\n        position?: FocusPosition,\n\n        /**\n         * Optional options\n         * @default { scrollIntoView: true }\n         */\n        options?: {\n          scrollIntoView?: boolean\n        },\n      ) => ReturnType\n    }\n  }\n}\n\nexport const focus: RawCommands['focus'] =\n  (position = null, options = {}) =>\n  ({ editor, view, tr, dispatch }) => {\n    options = {\n      scrollIntoView: true,\n      ...options,\n    }\n\n    const delayedFocus = () => {\n      // focus within `requestAnimationFrame` breaks focus on iOS and Android\n      // so we have to call this\n      if (isiOS() || isAndroid()) {\n        ;(view.dom as HTMLElement).focus()\n      }\n\n      // Safari requires preventScroll to avoid the browser scrolling to the\n      // top of the editor when focus is called before the selection is set.\n      // We exclude iOS and Android since they are already handled above.\n      // see: https://github.com/ueberdosis/tiptap/issues/7318\n      if (isSafari() && !isiOS() && !isAndroid()) {\n        ;(view.dom as HTMLElement).focus({ preventScroll: true })\n      }\n\n      // For React we have to focus asynchronously. Otherwise wild things happen.\n      // see: https://github.com/ueberdosis/tiptap/issues/1520\n      requestAnimationFrame(() => {\n        if (!editor.isDestroyed) {\n          view.focus()\n\n          if (options?.scrollIntoView) {\n            editor.commands.scrollIntoView()\n          }\n        }\n      })\n    }\n\n    try {\n      if ((view.hasFocus() && position === null) || position === false) {\n        return true\n      }\n    } catch {\n      // if view.hasFocus fails (view not mounted yet)\n      // we will return false because there's nothing to focus\n      return false\n    }\n\n    // we dont try to resolve a NodeSelection or CellSelection\n    if (dispatch && position === null && !isTextSelection(editor.state.selection)) {\n      delayedFocus()\n      return true\n    }\n\n    // pass through tr.doc instead of editor.state.doc\n    // since transactions could change the editors state before this command has been run\n    const selection = resolveFocusPosition(tr.doc, position) || editor.state.selection\n    const isSameSelection = editor.state.selection.eq(selection)\n\n    if (dispatch) {\n      if (!isSameSelection) {\n        tr.setSelection(selection)\n      }\n\n      // `tr.setSelection` resets the stored marks\n      // so well restore them if the selection is the same as before\n      if (isSameSelection && tr.storedMarks) {\n        tr.setStoredMarks(tr.storedMarks)\n      }\n\n      delayedFocus()\n    }\n\n    return true\n  }\n","import type { CommandProps, RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    forEach: {\n      /**\n       * Loop through an array of items.\n       */\n      forEach: <T>(\n        items: T[],\n        fn: (\n          item: T,\n          props: CommandProps & {\n            index: number\n          },\n        ) => boolean,\n      ) => ReturnType\n    }\n  }\n}\n\nexport const forEach: RawCommands['forEach'] = (items, fn) => props => {\n  return items.every((item, index) => fn(item, { ...props, index }))\n}\n","import type { Fragment, Node as ProseMirrorNode, ParseOptions } from '@tiptap/pm/model'\n\nimport type { Content, RawCommands } from '../types.js'\n\nexport interface InsertContentOptions {\n  /**\n   * Options for parsing the content.\n   */\n  parseOptions?: ParseOptions\n\n  /**\n   * Whether to update the selection after inserting the content.\n   */\n  updateSelection?: boolean\n  applyInputRules?: boolean\n  applyPasteRules?: boolean\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    insertContent: {\n      /**\n       * Insert a node or string of HTML at the current position.\n       * @example editor.commands.insertContent('<h1>Example</h1>')\n       * @example editor.commands.insertContent('<h1>Example</h1>', { updateSelection: false })\n       */\n      insertContent: (\n        /**\n         * The ProseMirror content to insert.\n         */\n        value: Content | ProseMirrorNode | Fragment,\n\n        /**\n         * Optional options\n         */\n        options?: InsertContentOptions,\n      ) => ReturnType\n    }\n  }\n}\n\nexport const insertContent: RawCommands['insertContent'] =\n  (value, options) =>\n  ({ tr, commands }) => {\n    return commands.insertContentAt({ from: tr.selection.from, to: tr.selection.to }, value, options)\n  }\n","import type { Node as ProseMirrorNode, ParseOptions } from '@tiptap/pm/model'\nimport { Fragment } from '@tiptap/pm/model'\n\nimport { createNodeFromContent } from '../helpers/createNodeFromContent.js'\nimport { selectionToInsertionEnd } from '../helpers/selectionToInsertionEnd.js'\nimport type { Content, Range, RawCommands } from '../types.js'\n\nexport interface InsertContentAtOptions {\n  /**\n   * Options for parsing the content.\n   */\n  parseOptions?: ParseOptions\n\n  /**\n   * Whether to update the selection after inserting the content.\n   */\n  updateSelection?: boolean\n\n  /**\n   * Whether to apply input rules after inserting the content.\n   */\n  applyInputRules?: boolean\n\n  /**\n   * Whether to apply paste rules after inserting the content.\n   */\n  applyPasteRules?: boolean\n\n  /**\n   * Whether to throw an error if the content is invalid.\n   */\n  errorOnInvalidContent?: boolean\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    insertContentAt: {\n      /**\n       * Insert a node or string of HTML at a specific position.\n       * @example editor.commands.insertContentAt(0, '<h1>Example</h1>')\n       */\n      insertContentAt: (\n        /**\n         * The position to insert the content at.\n         */\n        position: number | Range,\n\n        /**\n         * The ProseMirror content to insert.\n         */\n        value: Content | ProseMirrorNode | Fragment,\n\n        /**\n         * Optional options\n         */\n        options?: InsertContentAtOptions,\n      ) => ReturnType\n    }\n  }\n}\n\nconst isFragment = (nodeOrFragment: ProseMirrorNode | Fragment): nodeOrFragment is Fragment => {\n  return !('type' in nodeOrFragment)\n}\n\nexport const insertContentAt: RawCommands['insertContentAt'] =\n  (position, value, options) =>\n  ({ tr, dispatch, editor }) => {\n    if (dispatch) {\n      options = {\n        parseOptions: editor.options.parseOptions,\n        updateSelection: true,\n        applyInputRules: false,\n        applyPasteRules: false,\n        ...options,\n      }\n\n      let content: Fragment | ProseMirrorNode\n\n      const emitContentError = (error: Error) => {\n        editor.emit('contentError', {\n          editor,\n          error,\n          disableCollaboration: () => {\n            if (\n              'collaboration' in editor.storage &&\n              typeof editor.storage.collaboration === 'object' &&\n              editor.storage.collaboration\n            ) {\n              ;(editor.storage.collaboration as any).isDisabled = true\n            }\n          },\n        })\n      }\n\n      const parseOptions: ParseOptions = {\n        preserveWhitespace: 'full',\n        ...options.parseOptions,\n      }\n\n      // If `emitContentError` is enabled, we want to check the content for errors\n      // but ignore them (do not remove the invalid content from the document)\n      if (!options.errorOnInvalidContent && !editor.options.enableContentCheck && editor.options.emitContentError) {\n        try {\n          createNodeFromContent(value, editor.schema, {\n            parseOptions,\n            errorOnInvalidContent: true,\n          })\n        } catch (e) {\n          emitContentError(e as Error)\n        }\n      }\n\n      try {\n        content = createNodeFromContent(value, editor.schema, {\n          parseOptions,\n          errorOnInvalidContent: options.errorOnInvalidContent ?? editor.options.enableContentCheck,\n        })\n      } catch (e) {\n        emitContentError(e as Error)\n        return false\n      }\n\n      let { from, to } =\n        typeof position === 'number' ? { from: position, to: position } : { from: position.from, to: position.to }\n\n      let isOnlyTextContent = true\n      let isOnlyBlockContent = true\n      const nodes = isFragment(content) ? content : [content]\n\n      nodes.forEach(node => {\n        // check if added node is valid\n        node.check()\n\n        isOnlyTextContent = isOnlyTextContent ? node.isText && node.marks.length === 0 : false\n\n        isOnlyBlockContent = isOnlyBlockContent ? node.isBlock : false\n      })\n\n      // check if we can replace the wrapping node by\n      // the newly inserted content\n      // example:\n      // replace an empty paragraph by an inserted image\n      // instead of inserting the image below the paragraph\n      if (from === to && isOnlyBlockContent) {\n        const { parent } = tr.doc.resolve(from)\n        const isEmptyTextBlock = parent.isTextblock && !parent.type.spec.code && !parent.childCount\n\n        if (isEmptyTextBlock) {\n          from -= 1\n          to += 1\n        }\n      }\n\n      let newContent\n\n      // if there is only plain text we have to use `insertText`\n      // because this will keep the current marks\n      if (isOnlyTextContent) {\n        // if value is string, we can use it directly\n        // otherwise if it is an array, we have to join it\n        if (Array.isArray(value)) {\n          newContent = value.map(v => v.text || '').join('')\n        } else if (value instanceof Fragment) {\n          let text = ''\n\n          value.forEach(node => {\n            if (node.text) {\n              text += node.text\n            }\n          })\n\n          newContent = text\n        } else if (typeof value === 'object' && !!value && !!value.text) {\n          newContent = value.text\n        } else {\n          newContent = value as string\n        }\n\n        tr.insertText(newContent, from, to)\n      } else {\n        newContent = content\n\n        const $from = tr.doc.resolve(from)\n        const $fromNode = $from.node()\n        const fromSelectionAtStart = $from.parentOffset === 0\n        const isTextSelection = $fromNode.isText || $fromNode.isTextblock\n        const hasContent = $fromNode.content.size > 0\n\n        if (fromSelectionAtStart && isTextSelection && hasContent) {\n          from = Math.max(0, from - 1)\n        }\n\n        tr.replaceWith(from, to, newContent)\n      }\n\n      // set cursor at end of inserted content\n      if (options.updateSelection) {\n        selectionToInsertionEnd(tr, tr.steps.length - 1, -1)\n      }\n\n      if (options.applyInputRules) {\n        tr.setMeta('applyInputRules', { from, text: newContent })\n      }\n\n      if (options.applyPasteRules) {\n        tr.setMeta('applyPasteRules', { from, text: newContent })\n      }\n    }\n\n    return true\n  }\n","import type { ParseOptions } from '@tiptap/pm/model'\nimport { DOMParser, Fragment, Node as ProseMirrorNode, Schema } from '@tiptap/pm/model'\n\nimport type { Content } from '../types.js'\nimport { elementFromString } from '../utilities/elementFromString.js'\n\nexport type CreateNodeFromContentOptions = {\n  slice?: boolean\n  parseOptions?: ParseOptions\n  errorOnInvalidContent?: boolean\n}\n\n/**\n * Takes a JSON or HTML content and creates a Prosemirror node or fragment from it.\n * @param content The JSON or HTML content to create the node from\n * @param schema The Prosemirror schema to use for the node\n * @param options Options for the parser\n * @returns The created Prosemirror node or fragment\n */\nexport function createNodeFromContent(\n  content: Content | ProseMirrorNode | Fragment,\n  schema: Schema,\n  options?: CreateNodeFromContentOptions,\n): ProseMirrorNode | Fragment {\n  if (content instanceof ProseMirrorNode || content instanceof Fragment) {\n    return content\n  }\n  options = {\n    slice: true,\n    parseOptions: {},\n    ...options,\n  }\n\n  const isJSONContent = typeof content === 'object' && content !== null\n  const isTextContent = typeof content === 'string'\n\n  if (isJSONContent) {\n    try {\n      const isArrayContent = Array.isArray(content) && content.length > 0\n\n      // if the JSON Content is an array of nodes, create a fragment for each node\n      if (isArrayContent) {\n        return Fragment.fromArray(content.map(item => schema.nodeFromJSON(item)))\n      }\n\n      const node = schema.nodeFromJSON(content)\n\n      if (options.errorOnInvalidContent) {\n        node.check()\n      }\n\n      return node\n    } catch (error) {\n      if (options.errorOnInvalidContent) {\n        throw new Error('[tiptap error]: Invalid JSON content', { cause: error as Error })\n      }\n\n      console.warn('[tiptap warn]: Invalid content.', 'Passed value:', content, 'Error:', error)\n\n      return createNodeFromContent('', schema, options)\n    }\n  }\n\n  if (isTextContent) {\n    // Check for invalid content\n    if (options.errorOnInvalidContent) {\n      let hasInvalidContent = false\n      let invalidContent = ''\n\n      // A copy of the current schema with a catch-all node at the end\n      const contentCheckSchema = new Schema({\n        topNode: schema.spec.topNode,\n        marks: schema.spec.marks,\n        // Prosemirror's schemas are executed such that: the last to execute, matches last\n        // This means that we can add a catch-all node at the end of the schema to catch any content that we don't know how to handle\n        nodes: schema.spec.nodes.append({\n          __tiptap__private__unknown__catch__all__node: {\n            content: 'inline*',\n            group: 'block',\n            parseDOM: [\n              {\n                tag: '*',\n                getAttrs: e => {\n                  // If this is ever called, we know that the content has something that we don't know how to handle in the schema\n                  hasInvalidContent = true\n                  // Try to stringify the element for a more helpful error message\n                  invalidContent = typeof e === 'string' ? e : e.outerHTML\n                  return null\n                },\n              },\n            ],\n          },\n        }),\n      })\n\n      if (options.slice) {\n        DOMParser.fromSchema(contentCheckSchema).parseSlice(elementFromString(content), options.parseOptions)\n      } else {\n        DOMParser.fromSchema(contentCheckSchema).parse(elementFromString(content), options.parseOptions)\n      }\n\n      if (options.errorOnInvalidContent && hasInvalidContent) {\n        throw new Error('[tiptap error]: Invalid HTML content', {\n          cause: new Error(`Invalid element found: ${invalidContent}`),\n        })\n      }\n    }\n\n    const parser = DOMParser.fromSchema(schema)\n\n    if (options.slice) {\n      return parser.parseSlice(elementFromString(content), options.parseOptions).content\n    }\n\n    return parser.parse(elementFromString(content), options.parseOptions)\n  }\n\n  return createNodeFromContent('', schema, options)\n}\n","const removeWhitespaces = (node: HTMLElement) => {\n  const children = node.childNodes\n\n  for (let i = children.length - 1; i >= 0; i -= 1) {\n    const child = children[i]\n\n    if (child.nodeType === 3 && child.nodeValue && /^(\\n\\s\\s|\\n)$/.test(child.nodeValue)) {\n      node.removeChild(child)\n    } else if (child.nodeType === 1) {\n      removeWhitespaces(child as HTMLElement)\n    }\n  }\n\n  return node\n}\n\nexport function elementFromString(value: string): HTMLElement {\n  if (typeof window === 'undefined') {\n    throw new Error('[tiptap error]: there is no window object available, so this function cannot be used')\n  }\n  // add a wrapper to preserve leading and trailing whitespace\n  const wrappedValue = `<body>${value}</body>`\n\n  const html = new window.DOMParser().parseFromString(wrappedValue, 'text/html').body\n\n  return removeWhitespaces(html)\n}\n","import type { Transaction } from '@tiptap/pm/state'\nimport { Selection } from '@tiptap/pm/state'\nimport { ReplaceAroundStep, ReplaceStep } from '@tiptap/pm/transform'\n\n// source: https://github.com/ProseMirror/prosemirror-state/blob/master/src/selection.js#L466\nexport function selectionToInsertionEnd(tr: Transaction, startLen: number, bias: number) {\n  const last = tr.steps.length - 1\n\n  if (last < startLen) {\n    return\n  }\n\n  const step = tr.steps[last]\n\n  if (!(step instanceof ReplaceStep || step instanceof ReplaceAroundStep)) {\n    return\n  }\n\n  const map = tr.mapping.maps[last]\n  let end = 0\n\n  map.forEach((_from, _to, _newFrom, newTo) => {\n    if (end === 0) {\n      end = newTo\n    }\n  })\n\n  tr.setSelection(Selection.near(tr.doc.resolve(end), bias))\n}\n","import {\n  joinBackward as originalJoinBackward,\n  joinDown as originalJoinDown,\n  joinForward as originalJoinForward,\n  joinUp as originalJoinUp,\n} from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    joinUp: {\n      /**\n       * Join the selected block or, if there is a text selection, the closest ancestor block of the selection that can be joined, with the sibling above it.\n       * @example editor.commands.joinUp()\n       */\n      joinUp: () => ReturnType\n    }\n    joinDown: {\n      /**\n       * Join the selected block, or the closest ancestor of the selection that can be joined, with the sibling after it.\n       * @example editor.commands.joinDown()\n       */\n      joinDown: () => ReturnType\n    }\n    joinBackward: {\n      /**\n       * If the selection is empty and at the start of a textblock, try to reduce the distance between that block and the one before itif there's a block directly before it that can be joined, join them.\n       * If not, try to move the selected block closer to the next one in the document structure by lifting it out of its\n       * parent or moving it into a parent of the previous block. Will use the view for accurate (bidi-aware) start-of-textblock detection if given.\n       * @example editor.commands.joinBackward()\n       */\n      joinBackward: () => ReturnType\n    }\n    joinForward: {\n      /**\n       * If the selection is empty and the cursor is at the end of a textblock, try to reduce or remove the boundary between that block and the one after it,\n       * either by joining them or by moving the other block closer to this one in the tree structure.\n       * Will use the view for accurate start-of-textblock detection if given.\n       * @example editor.commands.joinForward()\n       */\n      joinForward: () => ReturnType\n    }\n  }\n}\n\nexport const joinUp: RawCommands['joinUp'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalJoinUp(state, dispatch)\n  }\n\nexport const joinDown: RawCommands['joinDown'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalJoinDown(state, dispatch)\n  }\n\nexport const joinBackward: RawCommands['joinBackward'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalJoinBackward(state, dispatch)\n  }\n\nexport const joinForward: RawCommands['joinForward'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalJoinForward(state, dispatch)\n  }\n","import { joinPoint } from '@tiptap/pm/transform'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    joinItemBackward: {\n      /**\n       * Join two items backward.\n       * @example editor.commands.joinItemBackward()\n       */\n      joinItemBackward: () => ReturnType\n    }\n  }\n}\n\nexport const joinItemBackward: RawCommands['joinItemBackward'] =\n  () =>\n  ({ state, dispatch, tr }) => {\n    try {\n      const point = joinPoint(state.doc, state.selection.$from.pos, -1)\n\n      if (point === null || point === undefined) {\n        return false\n      }\n\n      tr.join(point, 2)\n\n      if (dispatch) {\n        dispatch(tr)\n      }\n\n      return true\n    } catch {\n      return false\n    }\n  }\n","import { joinPoint } from '@tiptap/pm/transform'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    joinItemForward: {\n      /**\n       * Join two items Forwards.\n       * @example editor.commands.joinItemForward()\n       */\n      joinItemForward: () => ReturnType\n    }\n  }\n}\n\nexport const joinItemForward: RawCommands['joinItemForward'] =\n  () =>\n  ({ state, dispatch, tr }) => {\n    try {\n      const point = joinPoint(state.doc, state.selection.$from.pos, +1)\n\n      if (point === null || point === undefined) {\n        return false\n      }\n\n      tr.join(point, 2)\n\n      if (dispatch) {\n        dispatch(tr)\n      }\n\n      return true\n    } catch {\n      return false\n    }\n  }\n","import { joinTextblockBackward as originalCommand } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    joinTextblockBackward: {\n      /**\n       * A more limited form of joinBackward that only tries to join the current textblock to the one before it, if the cursor is at the start of a textblock.\n       */\n      joinTextblockBackward: () => ReturnType\n    }\n  }\n}\n\nexport const joinTextblockBackward: RawCommands['joinTextblockBackward'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalCommand(state, dispatch)\n  }\n","import { joinTextblockForward as originalCommand } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    joinTextblockForward: {\n      /**\n       * A more limited form of joinForward that only tries to join the current textblock to the one after it, if the cursor is at the end of a textblock.\n       */\n      joinTextblockForward: () => ReturnType\n    }\n  }\n}\n\nexport const joinTextblockForward: RawCommands['joinTextblockForward'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalCommand(state, dispatch)\n  }\n","export function isMacOS(): boolean {\n  return typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false\n}\n","import type { RawCommands } from '../types.js'\nimport { isiOS } from '../utilities/isiOS.js'\nimport { isMacOS } from '../utilities/isMacOS.js'\n\nfunction normalizeKeyName(name: string) {\n  const parts = name.split(/-(?!$)/)\n  let result = parts[parts.length - 1]\n\n  if (result === 'Space') {\n    result = ' '\n  }\n\n  let alt\n  let ctrl\n  let shift\n  let meta\n\n  for (let i = 0; i < parts.length - 1; i += 1) {\n    const mod = parts[i]\n\n    if (/^(cmd|meta|m)$/i.test(mod)) {\n      meta = true\n    } else if (/^a(lt)?$/i.test(mod)) {\n      alt = true\n    } else if (/^(c|ctrl|control)$/i.test(mod)) {\n      ctrl = true\n    } else if (/^s(hift)?$/i.test(mod)) {\n      shift = true\n    } else if (/^mod$/i.test(mod)) {\n      if (isiOS() || isMacOS()) {\n        meta = true\n      } else {\n        ctrl = true\n      }\n    } else {\n      throw new Error(`Unrecognized modifier name: ${mod}`)\n    }\n  }\n\n  if (alt) {\n    result = `Alt-${result}`\n  }\n\n  if (ctrl) {\n    result = `Ctrl-${result}`\n  }\n\n  if (meta) {\n    result = `Meta-${result}`\n  }\n\n  if (shift) {\n    result = `Shift-${result}`\n  }\n\n  return result\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    keyboardShortcut: {\n      /**\n       * Trigger a keyboard shortcut.\n       * @param name The name of the keyboard shortcut.\n       * @example editor.commands.keyboardShortcut('Mod-b')\n       */\n      keyboardShortcut: (name: string) => ReturnType\n    }\n  }\n}\n\nexport const keyboardShortcut: RawCommands['keyboardShortcut'] =\n  name =>\n  ({ editor, view, tr, dispatch }) => {\n    const keys = normalizeKeyName(name).split(/-(?!$)/)\n    const key = keys.find(item => !['Alt', 'Ctrl', 'Meta', 'Shift'].includes(item))\n    const event = new KeyboardEvent('keydown', {\n      key: key === 'Space' ? ' ' : key,\n      altKey: keys.includes('Alt'),\n      ctrlKey: keys.includes('Ctrl'),\n      metaKey: keys.includes('Meta'),\n      shiftKey: keys.includes('Shift'),\n      bubbles: true,\n      cancelable: true,\n    })\n\n    const capturedTransaction = editor.captureTransaction(() => {\n      view.someProp('handleKeyDown', f => f(view, event))\n    })\n\n    capturedTransaction?.steps.forEach(step => {\n      const newStep = step.map(tr.mapping)\n\n      if (newStep && dispatch) {\n        tr.maybeStep(newStep)\n      }\n    })\n\n    return true\n  }\n","import { lift as originalLift } from '@tiptap/pm/commands'\nimport type { NodeType } from '@tiptap/pm/model'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport { isNodeActive } from '../helpers/isNodeActive.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    lift: {\n      /**\n       * Removes an existing wrap if possible lifting the node out of it\n       * @param typeOrName The type or name of the node.\n       * @param attributes The attributes of the node.\n       * @example editor.commands.lift('paragraph')\n       * @example editor.commands.lift('heading', { level: 1 })\n       */\n      lift: (typeOrName: string | NodeType, attributes?: Record<string, any>) => ReturnType\n    }\n  }\n}\n\nexport const lift: RawCommands['lift'] =\n  (typeOrName, attributes = {}) =>\n  ({ state, dispatch }) => {\n    const type = getNodeType(typeOrName, state.schema)\n    const isActive = isNodeActive(state, type, attributes)\n\n    if (!isActive) {\n      return false\n    }\n\n    return originalLift(state, dispatch)\n  }\n","import type { NodeType } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\n\nimport type { NodeRange } from '../types.js'\nimport { objectIncludes } from '../utilities/objectIncludes.js'\nimport { getNodeType } from './getNodeType.js'\n\nexport function isNodeActive(\n  state: EditorState,\n  typeOrName: NodeType | string | null,\n  attributes: Record<string, any> = {},\n): boolean {\n  const { from, to, empty } = state.selection\n  const type = typeOrName ? getNodeType(typeOrName, state.schema) : null\n\n  const nodeRanges: NodeRange[] = []\n\n  state.doc.nodesBetween(from, to, (node, pos) => {\n    if (node.isText) {\n      return\n    }\n\n    const relativeFrom = Math.max(from, pos)\n    const relativeTo = Math.min(to, pos + node.nodeSize)\n\n    nodeRanges.push({\n      node,\n      from: relativeFrom,\n      to: relativeTo,\n    })\n  })\n\n  const selectionRange = to - from\n  const matchedNodeRanges = nodeRanges\n    .filter(nodeRange => {\n      if (!type) {\n        return true\n      }\n\n      return type.name === nodeRange.node.type.name\n    })\n    .filter(nodeRange => objectIncludes(nodeRange.node.attrs, attributes, { strict: false }))\n\n  if (empty) {\n    return !!matchedNodeRanges.length\n  }\n\n  const range = matchedNodeRanges.reduce((sum, nodeRange) => sum + nodeRange.to - nodeRange.from, 0)\n\n  return range >= selectionRange\n}\n","import { liftEmptyBlock as originalLiftEmptyBlock } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    liftEmptyBlock: {\n      /**\n       * If the cursor is in an empty textblock that can be lifted, lift the block.\n       * @example editor.commands.liftEmptyBlock()\n       */\n      liftEmptyBlock: () => ReturnType\n    }\n  }\n}\n\nexport const liftEmptyBlock: RawCommands['liftEmptyBlock'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalLiftEmptyBlock(state, dispatch)\n  }\n","import type { NodeType } from '@tiptap/pm/model'\nimport { liftListItem as originalLiftListItem } from '@tiptap/pm/schema-list'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    liftListItem: {\n      /**\n       * Create a command to lift the list item around the selection up into a wrapping list.\n       * @param typeOrName The type or name of the node.\n       * @example editor.commands.liftListItem('listItem')\n       */\n      liftListItem: (typeOrName: string | NodeType) => ReturnType\n    }\n  }\n}\n\nexport const liftListItem: RawCommands['liftListItem'] =\n  typeOrName =>\n  ({ state, dispatch }) => {\n    const type = getNodeType(typeOrName, state.schema)\n\n    return originalLiftListItem(type)(state, dispatch)\n  }\n","import { newlineInCode as originalNewlineInCode } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    newlineInCode: {\n      /**\n       * Add a newline character in code.\n       * @example editor.commands.newlineInCode()\n       */\n      newlineInCode: () => ReturnType\n    }\n  }\n}\n\nexport const newlineInCode: RawCommands['newlineInCode'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalNewlineInCode(state, dispatch)\n  }\n","import type { Schema } from '@tiptap/pm/model'\n\n/**\n * Get the type of a schema item by its name.\n * @param name The name of the schema item\n * @param schema The Prosemiror schema to search in\n * @returns The type of the schema item (`node` or `mark`), or null if it doesn't exist\n */\nexport function getSchemaTypeNameByName(name: string, schema: Schema): 'node' | 'mark' | null {\n  if (schema.nodes[name]) {\n    return 'node'\n  }\n\n  if (schema.marks[name]) {\n    return 'mark'\n  }\n\n  return null\n}\n","/**\n * Remove a property or an array of properties from an object\n * @param obj Object\n * @param key Key to remove\n */\nexport function deleteProps(obj: Record<string, any>, propOrProps: string | string[]): Record<string, any> {\n  const props = typeof propOrProps === 'string' ? [propOrProps] : propOrProps\n\n  return Object.keys(obj).reduce((newObj: Record<string, any>, prop) => {\n    if (!props.includes(prop)) {\n      newObj[prop] = obj[prop]\n    }\n\n    return newObj\n  }, {})\n}\n","import type { MarkType, NodeType } from '@tiptap/pm/model'\n\nimport { getMarkType } from '../helpers/getMarkType.js'\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport { getSchemaTypeNameByName } from '../helpers/getSchemaTypeNameByName.js'\nimport type { RawCommands } from '../types.js'\nimport { deleteProps } from '../utilities/deleteProps.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    resetAttributes: {\n      /**\n       * Resets some node attributes to the default value.\n       * @param typeOrName The type or name of the node.\n       * @param attributes The attributes of the node to reset.\n       * @example editor.commands.resetAttributes('heading', 'level')\n       */\n      resetAttributes: (typeOrName: string | NodeType | MarkType, attributes: string | string[]) => ReturnType\n    }\n  }\n}\n\nexport const resetAttributes: RawCommands['resetAttributes'] =\n  (typeOrName, attributes) =>\n  ({ tr, state, dispatch }) => {\n    let nodeType: NodeType | null = null\n    let markType: MarkType | null = null\n\n    const schemaType = getSchemaTypeNameByName(\n      typeof typeOrName === 'string' ? typeOrName : typeOrName.name,\n      state.schema,\n    )\n\n    if (!schemaType) {\n      return false\n    }\n\n    if (schemaType === 'node') {\n      nodeType = getNodeType(typeOrName as NodeType, state.schema)\n    }\n\n    if (schemaType === 'mark') {\n      markType = getMarkType(typeOrName as MarkType, state.schema)\n    }\n\n    let canReset = false\n\n    tr.selection.ranges.forEach(range => {\n      state.doc.nodesBetween(range.$from.pos, range.$to.pos, (node, pos) => {\n        if (nodeType && nodeType === node.type) {\n          canReset = true\n\n          if (dispatch) {\n            tr.setNodeMarkup(pos, undefined, deleteProps(node.attrs, attributes))\n          }\n        }\n\n        if (markType && node.marks.length) {\n          node.marks.forEach(mark => {\n            if (markType === mark.type) {\n              canReset = true\n\n              if (dispatch) {\n                tr.addMark(pos, pos + node.nodeSize, markType.create(deleteProps(mark.attrs, attributes)))\n              }\n            }\n          })\n        }\n      })\n    })\n\n    return canReset\n  }\n","import type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    scrollIntoView: {\n      /**\n       * Scroll the selection into view.\n       * @example editor.commands.scrollIntoView()\n       */\n      scrollIntoView: () => ReturnType\n    }\n  }\n}\n\nexport const scrollIntoView: RawCommands['scrollIntoView'] =\n  () =>\n  ({ tr, dispatch }) => {\n    if (dispatch) {\n      tr.scrollIntoView()\n    }\n\n    return true\n  }\n","import { AllSelection } from '@tiptap/pm/state'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    selectAll: {\n      /**\n       * Select the whole document.\n       * @example editor.commands.selectAll()\n       */\n      selectAll: () => ReturnType\n    }\n  }\n}\n\nexport const selectAll: RawCommands['selectAll'] =\n  () =>\n  ({ tr, dispatch }) => {\n    if (dispatch) {\n      const selection = new AllSelection(tr.doc)\n\n      tr.setSelection(selection)\n    }\n\n    return true\n  }\n","import { selectNodeBackward as originalSelectNodeBackward } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    selectNodeBackward: {\n      /**\n       * Select a node backward.\n       * @example editor.commands.selectNodeBackward()\n       */\n      selectNodeBackward: () => ReturnType\n    }\n  }\n}\n\nexport const selectNodeBackward: RawCommands['selectNodeBackward'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalSelectNodeBackward(state, dispatch)\n  }\n","import { selectNodeForward as originalSelectNodeForward } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    selectNodeForward: {\n      /**\n       * Select a node forward.\n       * @example editor.commands.selectNodeForward()\n       */\n      selectNodeForward: () => ReturnType\n    }\n  }\n}\n\nexport const selectNodeForward: RawCommands['selectNodeForward'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalSelectNodeForward(state, dispatch)\n  }\n","import { selectParentNode as originalSelectParentNode } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    selectParentNode: {\n      /**\n       * Select the parent node.\n       * @example editor.commands.selectParentNode()\n       */\n      selectParentNode: () => ReturnType\n    }\n  }\n}\n\nexport const selectParentNode: RawCommands['selectParentNode'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalSelectParentNode(state, dispatch)\n  }\n","// @ts-ignore\n// TODO: add types to @types/prosemirror-commands\nimport { selectTextblockEnd as originalSelectTextblockEnd } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    selectTextblockEnd: {\n      /**\n       * Moves the cursor to the end of current text block.\n       * @example editor.commands.selectTextblockEnd()\n       */\n      selectTextblockEnd: () => ReturnType\n    }\n  }\n}\n\nexport const selectTextblockEnd: RawCommands['selectTextblockEnd'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalSelectTextblockEnd(state, dispatch)\n  }\n","// @ts-ignore\n// TODO: add types to @types/prosemirror-commands\nimport { selectTextblockStart as originalSelectTextblockStart } from '@tiptap/pm/commands'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    selectTextblockStart: {\n      /**\n       * Moves the cursor to the start of current text block.\n       * @example editor.commands.selectTextblockStart()\n       */\n      selectTextblockStart: () => ReturnType\n    }\n  }\n}\n\nexport const selectTextblockStart: RawCommands['selectTextblockStart'] =\n  () =>\n  ({ state, dispatch }) => {\n    return originalSelectTextblockStart(state, dispatch)\n  }\n","import type { Fragment, Node as ProseMirrorNode, ParseOptions, Schema } from '@tiptap/pm/model'\n\nimport type { Content } from '../types.js'\nimport { createNodeFromContent } from './createNodeFromContent.js'\n\n/**\n * Create a new Prosemirror document node from content.\n * @param content The JSON or HTML content to create the document from\n * @param schema The Prosemirror schema to use for the document\n * @param parseOptions Options for the parser\n * @returns The created Prosemirror document node\n */\nexport function createDocument(\n  content: Content | ProseMirrorNode | Fragment,\n  schema: Schema,\n  parseOptions: ParseOptions = {},\n  options: { errorOnInvalidContent?: boolean } = {},\n): ProseMirrorNode {\n  return createNodeFromContent(content, schema, {\n    slice: false,\n    parseOptions,\n    errorOnInvalidContent: options.errorOnInvalidContent,\n  }) as ProseMirrorNode\n}\n","import type { Fragment, Node as ProseMirrorNode, ParseOptions } from '@tiptap/pm/model'\n\nimport { createDocument } from '../helpers/createDocument.js'\nimport type { Content, RawCommands } from '../types.js'\n\nexport interface SetContentOptions {\n  /**\n   * Options for parsing the content.\n   * @default {}\n   */\n  parseOptions?: ParseOptions\n\n  /**\n   * Whether to throw an error if the content is invalid.\n   */\n  errorOnInvalidContent?: boolean\n\n  /**\n   * Whether to emit an update event.\n   * @default true\n   */\n  emitUpdate?: boolean\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    setContent: {\n      /**\n       * Replace the whole document with new content.\n       * @param content The new content.\n       * @param emitUpdate Whether to emit an update event.\n       * @param parseOptions Options for parsing the content.\n       * @example editor.commands.setContent('<p>Example text</p>')\n       */\n      setContent: (\n        /**\n         * The new content.\n         */\n        content: Content | Fragment | ProseMirrorNode,\n\n        /**\n         * Options for `setContent`.\n         */\n        options?: SetContentOptions,\n      ) => ReturnType\n    }\n  }\n}\n\nexport const setContent: RawCommands['setContent'] =\n  (content, { errorOnInvalidContent, emitUpdate = true, parseOptions = {} } = {}) =>\n  ({ editor, tr, dispatch, commands }) => {\n    const { doc } = tr\n\n    // This is to keep backward compatibility with the previous behavior\n    // TODO remove this in the next major version\n    if (parseOptions.preserveWhitespace !== 'full') {\n      const document = createDocument(content, editor.schema, parseOptions, {\n        errorOnInvalidContent: errorOnInvalidContent ?? editor.options.enableContentCheck,\n      })\n\n      if (dispatch) {\n        tr.replaceWith(0, doc.content.size, document).setMeta('preventUpdate', !emitUpdate)\n      }\n      return true\n    }\n\n    if (dispatch) {\n      tr.setMeta('preventUpdate', !emitUpdate)\n    }\n\n    return commands.insertContentAt({ from: 0, to: doc.content.size }, content, {\n      parseOptions,\n      errorOnInvalidContent: errorOnInvalidContent ?? editor.options.enableContentCheck,\n    })\n  }\n","import type { Mark, MarkType } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\n\nimport { getMarkType } from './getMarkType.js'\n\nexport function getMarkAttributes(state: EditorState, typeOrName: string | MarkType): Record<string, any> {\n  const type = getMarkType(typeOrName, state.schema)\n  const { from, to, empty } = state.selection\n  const marks: Mark[] = []\n\n  if (empty) {\n    if (state.storedMarks) {\n      marks.push(...state.storedMarks)\n    }\n\n    marks.push(...state.selection.$head.marks())\n  } else {\n    state.doc.nodesBetween(from, to, node => {\n      marks.push(...node.marks)\n    })\n  }\n\n  const mark = marks.find(markItem => markItem.type.name === type.name)\n\n  if (!mark) {\n    return {}\n  }\n\n  return { ...mark.attrs }\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\nimport type { Transaction } from '@tiptap/pm/state'\nimport { Transform } from '@tiptap/pm/transform'\n\n/**\n * Returns a new `Transform` based on all steps of the passed transactions.\n * @param oldDoc The Prosemirror node to start from\n * @param transactions The transactions to combine\n * @returns A new `Transform` with all steps of the passed transactions\n */\nexport function combineTransactionSteps(oldDoc: ProseMirrorNode, transactions: Transaction[]): Transform {\n  const transform = new Transform(oldDoc)\n\n  transactions.forEach(transaction => {\n    transaction.steps.forEach(step => {\n      transform.step(step)\n    })\n  })\n\n  return transform\n}\n","import type { ContentMatch, NodeType } from '@tiptap/pm/model'\n\n/**\n * Gets the default block type at a given match\n * @param match The content match to get the default block type from\n * @returns The default block type or null\n */\nexport function defaultBlockAt(match: ContentMatch): NodeType | null {\n  for (let i = 0; i < match.edgeCount; i += 1) {\n    const { type } = match.edge(i)\n\n    if (type.isTextblock && !type.hasRequiredAttrs()) {\n      return type\n    }\n  }\n\n  return null\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\n\nimport type { NodeWithPos, Predicate } from '../types.js'\n\n/**\n * Find children inside a Prosemirror node that match a predicate.\n * @param node The Prosemirror node to search in\n * @param predicate The predicate to match\n * @returns An array of nodes with their positions\n */\nexport function findChildren(node: ProseMirrorNode, predicate: Predicate): NodeWithPos[] {\n  const nodesWithPos: NodeWithPos[] = []\n\n  node.descendants((child, pos) => {\n    if (predicate(child)) {\n      nodesWithPos.push({\n        node: child,\n        pos,\n      })\n    }\n  })\n\n  return nodesWithPos\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\n\nimport type { NodeWithPos, Predicate, Range } from '../types.js'\n\n/**\n * Same as `findChildren` but searches only within a `range`.\n * @param node The Prosemirror node to search in\n * @param range The range to search in\n * @param predicate The predicate to match\n * @returns An array of nodes with their positions\n */\nexport function findChildrenInRange(node: ProseMirrorNode, range: Range, predicate: Predicate): NodeWithPos[] {\n  const nodesWithPos: NodeWithPos[] = []\n\n  // if (range.from === range.to) {\n  //   const nodeAt = node.nodeAt(range.from)\n\n  //   if (nodeAt) {\n  //     nodesWithPos.push({\n  //       node: nodeAt,\n  //       pos: range.from,\n  //     })\n  //   }\n  // }\n\n  node.nodesBetween(range.from, range.to, (child, pos) => {\n    if (predicate(child)) {\n      nodesWithPos.push({\n        node: child,\n        pos,\n      })\n    }\n  })\n\n  return nodesWithPos\n}\n","import type { Node as ProseMirrorNode, ResolvedPos } from '@tiptap/pm/model'\n\nimport type { Predicate } from '../types.js'\n\n/**\n * Finds the closest parent node to a resolved position that matches a predicate.\n * @param $pos The resolved position to search from\n * @param predicate The predicate to match\n * @returns The closest parent node to the resolved position that matches the predicate\n * @example ```js\n * findParentNodeClosestToPos($from, node => node.type.name === 'paragraph')\n * ```\n */\nexport function findParentNodeClosestToPos(\n  $pos: ResolvedPos,\n  predicate: Predicate,\n):\n  | {\n      pos: number\n      start: number\n      depth: number\n      node: ProseMirrorNode\n    }\n  | undefined {\n  for (let i = $pos.depth; i > 0; i -= 1) {\n    const node = $pos.node(i)\n\n    if (predicate(node)) {\n      return {\n        pos: i > 0 ? $pos.before(i) : 0,\n        start: $pos.start(i),\n        depth: i,\n        node,\n      }\n    }\n  }\n}\n","import type { Selection } from '@tiptap/pm/state'\n\nimport type { Predicate } from '../types.js'\nimport { findParentNodeClosestToPos } from './findParentNodeClosestToPos.js'\n\n/**\n * Finds the closest parent node to the current selection that matches a predicate.\n * @param predicate The predicate to match\n * @returns A command that finds the closest parent node to the current selection that matches the predicate\n * @example ```js\n * findParentNode(node => node.type.name === 'paragraph')\n * ```\n */\nexport function findParentNode(\n  predicate: Predicate,\n): (selection: Selection) => ReturnType<typeof findParentNodeClosestToPos> {\n  return (selection: Selection) => findParentNodeClosestToPos(selection.$from, predicate)\n}\n","import type { ExtensionConfig } from '../Extension.js'\nimport type { MarkConfig } from '../Mark.js'\nimport type { NodeConfig } from '../Node.js'\nimport type { AnyExtension, MaybeThisParameterType, RemoveThis } from '../types.js'\n\n/**\n * Returns a field from an extension\n * @param extension The Tiptap extension\n * @param field The field, for example `renderHTML` or `priority`\n * @param context The context object that should be passed as `this` into the function\n * @returns The field value\n */\nexport function getExtensionField<T = any, E extends AnyExtension = any>(\n  extension: E,\n  field: keyof ExtensionConfig | keyof MarkConfig | keyof NodeConfig,\n  context?: Omit<MaybeThisParameterType<T>, 'parent'>,\n): RemoveThis<T> {\n  if (extension.config[field as keyof typeof extension.config] === undefined && extension.parent) {\n    return getExtensionField(extension.parent, field, context)\n  }\n\n  if (typeof extension.config[field as keyof typeof extension.config] === 'function') {\n    const value = (extension.config[field as keyof typeof extension.config] as any).bind({\n      ...context,\n      parent: extension.parent ? getExtensionField(extension.parent, field, context) : null,\n    })\n\n    return value\n  }\n\n  return extension.config[field as keyof typeof extension.config] as RemoveThis<T>\n}\n","import type { AnyConfig, Extensions } from '../types.js'\nimport { getExtensionField } from './getExtensionField.js'\n\n/**\n * Create a flattened array of extensions by traversing the `addExtensions` field.\n * @param extensions An array of Tiptap extensions\n * @returns A flattened array of Tiptap extensions\n */\nexport function flattenExtensions(extensions: Extensions): Extensions {\n  return (\n    extensions\n      .map(extension => {\n        const context = {\n          name: extension.name,\n          options: extension.options,\n          storage: extension.storage,\n        }\n\n        const addExtensions = getExtensionField<AnyConfig['addExtensions']>(extension, 'addExtensions', context)\n\n        if (addExtensions) {\n          return [extension, ...flattenExtensions(addExtensions())]\n        }\n\n        return extension\n      })\n      // `Infinity` will break TypeScript so we set a number that is probably high enough\n      .flat(10)\n  )\n}\n","import { Node } from '@tiptap/pm/model'\n\nimport type { Extensions, JSONContent } from '../types.js'\nimport { getHTMLFromFragment } from './getHTMLFromFragment.js'\nimport { getSchema } from './getSchema.js'\n\n/**\n * Generate HTML from a JSONContent\n * @param doc The JSONContent to generate HTML from\n * @param extensions The extensions to use for the schema\n * @returns The generated HTML\n */\nexport function generateHTML(doc: JSONContent, extensions: Extensions): string {\n  const schema = getSchema(extensions)\n  const contentNode = Node.fromJSON(schema, doc)\n\n  return getHTMLFromFragment(contentNode.content, schema)\n}\n","import type { Fragment, Schema } from '@tiptap/pm/model'\nimport { DOMSerializer } from '@tiptap/pm/model'\n\nexport function getHTMLFromFragment(fragment: Fragment, schema: Schema): string {\n  const documentFragment = DOMSerializer.fromSchema(schema).serializeFragment(fragment)\n\n  const temporaryDocument = document.implementation.createHTMLDocument()\n  const container = temporaryDocument.createElement('div')\n\n  container.appendChild(documentFragment)\n\n  return container.innerHTML\n}\n","import type { MarkSpec, NodeSpec, TagParseRule } from '@tiptap/pm/model'\nimport { Schema } from '@tiptap/pm/model'\n\nimport type { Editor, MarkConfig, NodeConfig } from '../index.js'\nimport type { AnyConfig, Extensions } from '../types.js'\nimport { callOrReturn } from '../utilities/callOrReturn.js'\nimport { isEmptyObject } from '../utilities/isEmptyObject.js'\nimport { getAttributesFromExtensions } from './getAttributesFromExtensions.js'\nimport { getExtensionField } from './getExtensionField.js'\nimport { getRenderedAttributes } from './getRenderedAttributes.js'\nimport { injectExtensionAttributesToParseRule } from './injectExtensionAttributesToParseRule.js'\nimport { splitExtensions } from './splitExtensions.js'\n\nfunction cleanUpSchemaItem<T>(data: T) {\n  return Object.fromEntries(\n    // @ts-ignore\n    Object.entries(data).filter(([key, value]) => {\n      if (key === 'attrs' && isEmptyObject(value as object | undefined)) {\n        return false\n      }\n\n      return value !== null && value !== undefined\n    }),\n  ) as T\n}\n\n/**\n * Builds an attribute spec tuple for ProseMirror schema from an extension attribute.\n * @param extensionAttribute The extension attribute to build the spec for\n * @returns A tuple of [attributeName, spec]\n */\nfunction buildAttributeSpec(\n  extensionAttribute: ReturnType<typeof getAttributesFromExtensions>[number],\n): [string, Record<string, any>] {\n  const spec: Record<string, any> = {}\n\n  // Only include 'default' if the attribute is not required and default is set on the attribute\n  if (!extensionAttribute?.attribute?.isRequired && 'default' in (extensionAttribute?.attribute || {})) {\n    spec.default = extensionAttribute.attribute.default\n  }\n\n  // Only include 'validate' if it's defined\n  if (extensionAttribute?.attribute?.validate !== undefined) {\n    spec.validate = extensionAttribute.attribute.validate\n  }\n\n  return [extensionAttribute.name, spec]\n}\n\n/**\n * Creates a new Prosemirror schema based on the given extensions.\n * @param extensions An array of Tiptap extensions\n * @param editor The editor instance\n * @returns A Prosemirror schema\n */\nexport function getSchemaByResolvedExtensions(extensions: Extensions, editor?: Editor): Schema {\n  const allAttributes = getAttributesFromExtensions(extensions)\n  const { nodeExtensions, markExtensions } = splitExtensions(extensions)\n  const topNode = nodeExtensions.find(extension => getExtensionField(extension, 'topNode'))?.name\n\n  const nodes = Object.fromEntries(\n    nodeExtensions.map(extension => {\n      const extensionAttributes = allAttributes.filter(attribute => attribute.type === extension.name)\n      const context = {\n        name: extension.name,\n        options: extension.options,\n        storage: extension.storage,\n        editor,\n      }\n\n      const extraNodeFields = extensions.reduce((fields, e) => {\n        const extendNodeSchema = getExtensionField<AnyConfig['extendNodeSchema']>(e, 'extendNodeSchema', context)\n\n        return {\n          ...fields,\n          ...(extendNodeSchema ? extendNodeSchema(extension) : {}),\n        }\n      }, {})\n\n      const schema: NodeSpec = cleanUpSchemaItem({\n        ...extraNodeFields,\n        content: callOrReturn(getExtensionField<NodeConfig['content']>(extension, 'content', context)),\n        marks: callOrReturn(getExtensionField<NodeConfig['marks']>(extension, 'marks', context)),\n        group: callOrReturn(getExtensionField<NodeConfig['group']>(extension, 'group', context)),\n        inline: callOrReturn(getExtensionField<NodeConfig['inline']>(extension, 'inline', context)),\n        atom: callOrReturn(getExtensionField<NodeConfig['atom']>(extension, 'atom', context)),\n        selectable: callOrReturn(getExtensionField<NodeConfig['selectable']>(extension, 'selectable', context)),\n        draggable: callOrReturn(getExtensionField<NodeConfig['draggable']>(extension, 'draggable', context)),\n        code: callOrReturn(getExtensionField<NodeConfig['code']>(extension, 'code', context)),\n        whitespace: callOrReturn(getExtensionField<NodeConfig['whitespace']>(extension, 'whitespace', context)),\n        linebreakReplacement: callOrReturn(\n          getExtensionField<NodeConfig['linebreakReplacement']>(extension, 'linebreakReplacement', context),\n        ),\n        defining: callOrReturn(getExtensionField<NodeConfig['defining']>(extension, 'defining', context)),\n        isolating: callOrReturn(getExtensionField<NodeConfig['isolating']>(extension, 'isolating', context)),\n        attrs: Object.fromEntries(extensionAttributes.map(buildAttributeSpec)),\n      })\n\n      const parseHTML = callOrReturn(getExtensionField<NodeConfig['parseHTML']>(extension, 'parseHTML', context))\n\n      if (parseHTML) {\n        schema.parseDOM = parseHTML.map(parseRule =>\n          injectExtensionAttributesToParseRule(parseRule, extensionAttributes),\n        ) as TagParseRule[]\n      }\n\n      const renderHTML = getExtensionField<NodeConfig['renderHTML']>(extension, 'renderHTML', context)\n\n      if (renderHTML) {\n        schema.toDOM = node =>\n          renderHTML({\n            node,\n            HTMLAttributes: getRenderedAttributes(node, extensionAttributes),\n          })\n      }\n\n      const renderText = getExtensionField<NodeConfig['renderText']>(extension, 'renderText', context)\n\n      if (renderText) {\n        schema.toText = renderText\n      }\n\n      return [extension.name, schema]\n    }),\n  )\n\n  const marks = Object.fromEntries(\n    markExtensions.map(extension => {\n      const extensionAttributes = allAttributes.filter(attribute => attribute.type === extension.name)\n      const context = {\n        name: extension.name,\n        options: extension.options,\n        storage: extension.storage,\n        editor,\n      }\n\n      const extraMarkFields = extensions.reduce((fields, e) => {\n        const extendMarkSchema = getExtensionField<AnyConfig['extendMarkSchema']>(e, 'extendMarkSchema', context)\n\n        return {\n          ...fields,\n          ...(extendMarkSchema ? extendMarkSchema(extension as any) : {}),\n        }\n      }, {})\n\n      const schema: MarkSpec = cleanUpSchemaItem({\n        ...extraMarkFields,\n        inclusive: callOrReturn(getExtensionField<MarkConfig['inclusive']>(extension, 'inclusive', context)),\n        excludes: callOrReturn(getExtensionField<MarkConfig['excludes']>(extension, 'excludes', context)),\n        group: callOrReturn(getExtensionField<MarkConfig['group']>(extension, 'group', context)),\n        spanning: callOrReturn(getExtensionField<MarkConfig['spanning']>(extension, 'spanning', context)),\n        code: callOrReturn(getExtensionField<MarkConfig['code']>(extension, 'code', context)),\n        attrs: Object.fromEntries(extensionAttributes.map(buildAttributeSpec)),\n      })\n\n      const parseHTML = callOrReturn(getExtensionField<MarkConfig['parseHTML']>(extension, 'parseHTML', context))\n\n      if (parseHTML) {\n        schema.parseDOM = parseHTML.map(parseRule =>\n          injectExtensionAttributesToParseRule(parseRule, extensionAttributes),\n        )\n      }\n\n      const renderHTML = getExtensionField<MarkConfig['renderHTML']>(extension, 'renderHTML', context)\n\n      if (renderHTML) {\n        schema.toDOM = mark =>\n          renderHTML({\n            mark,\n            HTMLAttributes: getRenderedAttributes(mark, extensionAttributes),\n          })\n      }\n\n      return [extension.name, schema]\n    }),\n  )\n\n  return new Schema({\n    topNode,\n    nodes,\n    marks,\n  })\n}\n","// eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\nexport function isFunction(value: any): value is Function {\n  return typeof value === 'function'\n}\n","import type { MaybeReturnType } from '../types.js'\nimport { isFunction } from './isFunction.js'\n\n/**\n * Optionally calls `value` as a function.\n * Otherwise it is returned directly.\n * @param value Function or any value.\n * @param context Optional context to bind to function.\n * @param props Optional props to pass to function.\n */\nexport function callOrReturn<T>(value: T, context: any = undefined, ...props: any[]): MaybeReturnType<T> {\n  if (isFunction(value)) {\n    if (context) {\n      return value.bind(context)(...props)\n    }\n\n    return value(...props)\n  }\n\n  return value as MaybeReturnType<T>\n}\n","export function isEmptyObject(value = {}): boolean {\n  return Object.keys(value).length === 0 && value.constructor === Object\n}\n","import type { Extension } from '../Extension.js'\nimport type { Mark } from '../Mark.js'\nimport type { Node } from '../Node.js'\nimport type { Extensions } from '../types.js'\n\nexport function splitExtensions(extensions: Extensions) {\n  const baseExtensions = extensions.filter(extension => extension.type === 'extension') as Extension[]\n  const nodeExtensions = extensions.filter(extension => extension.type === 'node') as Node[]\n  const markExtensions = extensions.filter(extension => extension.type === 'mark') as Mark[]\n\n  return {\n    baseExtensions,\n    nodeExtensions,\n    markExtensions,\n  }\n}\n","import type { MarkConfig, NodeConfig } from '../index.js'\nimport type { AnyConfig, Attribute, Attributes, ExtensionAttribute, Extensions } from '../types.js'\nimport { getExtensionField } from './getExtensionField.js'\nimport { splitExtensions } from './splitExtensions.js'\n\n/**\n * Get a list of all extension attributes defined in `addAttribute` and `addGlobalAttribute`.\n * @param extensions List of extensions\n */\nexport function getAttributesFromExtensions(extensions: Extensions): ExtensionAttribute[] {\n  const extensionAttributes: ExtensionAttribute[] = []\n  const { nodeExtensions, markExtensions } = splitExtensions(extensions)\n  const nodeAndMarkExtensions = [...nodeExtensions, ...markExtensions]\n  const defaultAttribute: Required<Omit<Attribute, 'validate'>> & Pick<Attribute, 'validate'> = {\n    default: null,\n    validate: undefined,\n    rendered: true,\n    renderHTML: null,\n    parseHTML: null,\n    keepOnSplit: true,\n    isRequired: false,\n  }\n\n  // Precompute lists of extension types for global attribute resolution\n  const nodeExtensionTypes = nodeExtensions.filter(ext => ext.name !== 'text').map(ext => ext.name)\n  const markExtensionTypes = markExtensions.map(ext => ext.name)\n  const allExtensionTypes = [...nodeExtensionTypes, ...markExtensionTypes]\n\n  extensions.forEach(extension => {\n    const context = {\n      name: extension.name,\n      options: extension.options,\n      storage: extension.storage,\n      extensions: nodeAndMarkExtensions,\n    }\n\n    const addGlobalAttributes = getExtensionField<AnyConfig['addGlobalAttributes']>(\n      extension,\n      'addGlobalAttributes',\n      context,\n    )\n\n    if (!addGlobalAttributes) {\n      return\n    }\n\n    const globalAttributes = addGlobalAttributes()\n\n    globalAttributes.forEach(globalAttribute => {\n      // Resolve the types based on the string shorthand or explicit array\n      let resolvedTypes: string[]\n      if (Array.isArray(globalAttribute.types)) {\n        resolvedTypes = globalAttribute.types\n      } else if (globalAttribute.types === '*') {\n        resolvedTypes = allExtensionTypes\n      } else if (globalAttribute.types === 'nodes') {\n        resolvedTypes = nodeExtensionTypes\n      } else if (globalAttribute.types === 'marks') {\n        resolvedTypes = markExtensionTypes\n      } else {\n        resolvedTypes = []\n      }\n\n      resolvedTypes.forEach(type => {\n        Object.entries(globalAttribute.attributes).forEach(([name, attribute]) => {\n          extensionAttributes.push({\n            type,\n            name,\n            attribute: {\n              ...defaultAttribute,\n              ...attribute,\n            },\n          })\n        })\n      })\n    })\n  })\n\n  nodeAndMarkExtensions.forEach(extension => {\n    const context = {\n      name: extension.name,\n      options: extension.options,\n      storage: extension.storage,\n    }\n\n    const addAttributes = getExtensionField<NodeConfig['addAttributes'] | MarkConfig['addAttributes']>(\n      extension,\n      'addAttributes',\n      context,\n    )\n\n    if (!addAttributes) {\n      return\n    }\n\n    // TODO: remove `as Attributes`\n    const attributes = addAttributes() as Attributes\n\n    Object.entries(attributes).forEach(([name, attribute]) => {\n      const mergedAttr = {\n        ...defaultAttribute,\n        ...attribute,\n      }\n\n      if (typeof mergedAttr?.default === 'function') {\n        mergedAttr.default = mergedAttr.default()\n      }\n\n      if (mergedAttr?.isRequired && mergedAttr?.default === undefined) {\n        delete mergedAttr.default\n      }\n\n      extensionAttributes.push({\n        type: extension.name,\n        name,\n        attribute: mergedAttr,\n      })\n    })\n  })\n\n  return extensionAttributes\n}\n","export function mergeAttributes(...objects: Record<string, any>[]): Record<string, any> {\n  return objects\n    .filter(item => !!item)\n    .reduce((items, item) => {\n      const mergedAttributes = { ...items }\n\n      Object.entries(item).forEach(([key, value]) => {\n        const exists = mergedAttributes[key]\n\n        if (!exists) {\n          mergedAttributes[key] = value\n\n          return\n        }\n\n        if (key === 'class') {\n          const valueClasses: string[] = value ? String(value).split(' ') : []\n          const existingClasses: string[] = mergedAttributes[key] ? mergedAttributes[key].split(' ') : []\n\n          const insertClasses = valueClasses.filter(valueClass => !existingClasses.includes(valueClass))\n\n          mergedAttributes[key] = [...existingClasses, ...insertClasses].join(' ')\n        } else if (key === 'style') {\n          const newStyles: string[] = value\n            ? value\n                .split(';')\n                .map((style: string) => style.trim())\n                .filter(Boolean)\n            : []\n          const existingStyles: string[] = mergedAttributes[key]\n            ? mergedAttributes[key]\n                .split(';')\n                .map((style: string) => style.trim())\n                .filter(Boolean)\n            : []\n\n          const styleMap = new Map<string, string>()\n\n          existingStyles.forEach(style => {\n            const [property, val] = style.split(':').map(part => part.trim())\n\n            styleMap.set(property, val)\n          })\n\n          newStyles.forEach(style => {\n            const [property, val] = style.split(':').map(part => part.trim())\n\n            styleMap.set(property, val)\n          })\n\n          mergedAttributes[key] = Array.from(styleMap.entries())\n            .map(([property, val]) => `${property}: ${val}`)\n            .join('; ')\n        } else {\n          mergedAttributes[key] = value\n        }\n      })\n\n      return mergedAttributes\n    }, {})\n}\n","import type { Mark, Node } from '@tiptap/pm/model'\n\nimport type { ExtensionAttribute } from '../types.js'\nimport { mergeAttributes } from '../utilities/mergeAttributes.js'\n\nexport function getRenderedAttributes(\n  nodeOrMark: Node | Mark,\n  extensionAttributes: ExtensionAttribute[],\n): Record<string, any> {\n  return extensionAttributes\n    .filter(attribute => attribute.type === nodeOrMark.type.name)\n    .filter(item => item.attribute.rendered)\n    .map(item => {\n      if (!item.attribute.renderHTML) {\n        return {\n          [item.name]: nodeOrMark.attrs[item.name],\n        }\n      }\n\n      return item.attribute.renderHTML(nodeOrMark.attrs) || {}\n    })\n    .reduce((attributes, attribute) => mergeAttributes(attributes, attribute), {})\n}\n","export function fromString(value: any): any {\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  if (value.match(/^[+-]?(?:\\d*\\.)?\\d+$/)) {\n    return Number(value)\n  }\n\n  if (value === 'true') {\n    return true\n  }\n\n  if (value === 'false') {\n    return false\n  }\n\n  return value\n}\n","import type { ParseRule } from '@tiptap/pm/model'\n\nimport type { ExtensionAttribute } from '../types.js'\nimport { fromString } from '../utilities/fromString.js'\n\n/**\n * This function merges extension attributes into parserule attributes (`attrs` or `getAttrs`).\n * Cancels when `getAttrs` returned `false`.\n * @param parseRule ProseMirror ParseRule\n * @param extensionAttributes List of attributes to inject\n */\nexport function injectExtensionAttributesToParseRule(\n  parseRule: ParseRule,\n  extensionAttributes: ExtensionAttribute[],\n): ParseRule {\n  if ('style' in parseRule) {\n    return parseRule\n  }\n\n  return {\n    ...parseRule,\n    getAttrs: (node: HTMLElement) => {\n      const oldAttributes = parseRule.getAttrs ? parseRule.getAttrs(node) : parseRule.attrs\n\n      if (oldAttributes === false) {\n        return false\n      }\n\n      const newAttributes = extensionAttributes.reduce((items, item) => {\n        const value = item.attribute.parseHTML\n          ? item.attribute.parseHTML(node)\n          : fromString(node.getAttribute(item.name))\n\n        if (value === null || value === undefined) {\n          return items\n        }\n\n        return {\n          ...items,\n          [item.name]: value,\n        }\n      }, {})\n\n      return { ...oldAttributes, ...newAttributes }\n    },\n  }\n}\n","/**\n * Find duplicates in an array.\n */\nexport function findDuplicates<T>(items: T[]): T[] {\n  const filtered = items.filter((el, index) => items.indexOf(el) !== index)\n\n  return Array.from(new Set(filtered))\n}\n","import type { AnyConfig, Extensions } from '../types.js'\nimport { getExtensionField } from './getExtensionField.js'\n\n/**\n * Sort extensions by priority.\n * @param extensions An array of Tiptap extensions\n * @returns A sorted array of Tiptap extensions by priority\n */\nexport function sortExtensions(extensions: Extensions): Extensions {\n  const defaultPriority = 100\n\n  return extensions.sort((a, b) => {\n    const priorityA = getExtensionField<AnyConfig['priority']>(a, 'priority') || defaultPriority\n    const priorityB = getExtensionField<AnyConfig['priority']>(b, 'priority') || defaultPriority\n\n    if (priorityA > priorityB) {\n      return -1\n    }\n\n    if (priorityA < priorityB) {\n      return 1\n    }\n\n    return 0\n  })\n}\n","import type { Extensions } from '../types.js'\nimport { findDuplicates } from '../utilities/findDuplicates.js'\nimport { flattenExtensions } from './flattenExtensions.js'\nimport { sortExtensions } from './sortExtensions.js'\n\n/**\n * Returns a flattened and sorted extension list while\n * also checking for duplicated extensions and warns the user.\n * @param extensions An array of Tiptap extensions\n * @returns An flattened and sorted array of Tiptap extensions\n */\nexport function resolveExtensions(extensions: Extensions): Extensions {\n  const resolvedExtensions = sortExtensions(flattenExtensions(extensions))\n  const duplicatedNames = findDuplicates(resolvedExtensions.map(extension => extension.name))\n\n  if (duplicatedNames.length) {\n    console.warn(\n      `[tiptap warn]: Duplicate extension names found: [${duplicatedNames\n        .map(item => `'${item}'`)\n        .join(', ')}]. This can lead to issues.`,\n    )\n  }\n\n  return resolvedExtensions\n}\n","import type { Schema } from '@tiptap/pm/model'\n\nimport type { Editor } from '../Editor.js'\nimport type { Extensions } from '../types.js'\nimport { getSchemaByResolvedExtensions } from './getSchemaByResolvedExtensions.js'\nimport { resolveExtensions } from './resolveExtensions.js'\n\nexport function getSchema(extensions: Extensions, editor?: Editor): Schema {\n  const resolvedExtensions = resolveExtensions(extensions)\n\n  return getSchemaByResolvedExtensions(resolvedExtensions, editor)\n}\n","import { DOMParser } from '@tiptap/pm/model'\n\nimport type { Extensions } from '../types.js'\nimport { elementFromString } from '../utilities/elementFromString.js'\nimport { getSchema } from './getSchema.js'\n\n/**\n * Generate JSONContent from HTML\n * @param html The HTML to generate JSONContent from\n * @param extensions The extensions to use for the schema\n * @returns The generated JSONContent\n */\nexport function generateJSON(html: string, extensions: Extensions): Record<string, any> {\n  const schema = getSchema(extensions)\n  const dom = elementFromString(html)\n\n  return DOMParser.fromSchema(schema).parse(dom).toJSON()\n}\n","import { Node } from '@tiptap/pm/model'\n\nimport type { Extensions, JSONContent, TextSerializer } from '../types.js'\nimport { getSchema } from './getSchema.js'\nimport { getText } from './getText.js'\nimport { getTextSerializersFromSchema } from './getTextSerializersFromSchema.js'\n\n/**\n * Generate raw text from a JSONContent\n * @param doc The JSONContent to generate text from\n * @param extensions The extensions to use for the schema\n * @param options Options for the text generation f.e. blockSeparator or textSerializers\n * @returns The generated text\n */\nexport function generateText(\n  doc: JSONContent,\n  extensions: Extensions,\n  options?: {\n    blockSeparator?: string\n    textSerializers?: Record<string, TextSerializer>\n  },\n): string {\n  const { blockSeparator = '\\n\\n', textSerializers = {} } = options || {}\n  const schema = getSchema(extensions)\n  const contentNode = Node.fromJSON(schema, doc)\n\n  return getText(contentNode, {\n    blockSeparator,\n    textSerializers: {\n      ...getTextSerializersFromSchema(schema),\n      ...textSerializers,\n    },\n  })\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\n\nimport type { Range, TextSerializer } from '../types.js'\n\n/**\n * Gets the text between two positions in a Prosemirror node\n * and serializes it using the given text serializers and block separator (see getText)\n * @param startNode The Prosemirror node to start from\n * @param range The range of the text to get\n * @param options Options for the text serializer & block separator\n * @returns The text between the two positions\n */\nexport function getTextBetween(\n  startNode: ProseMirrorNode,\n  range: Range,\n  options?: {\n    blockSeparator?: string\n    textSerializers?: Record<string, TextSerializer>\n  },\n): string {\n  const { from, to } = range\n  const { blockSeparator = '\\n\\n', textSerializers = {} } = options || {}\n  let text = ''\n\n  startNode.nodesBetween(from, to, (node, pos, parent, index) => {\n    if (node.isBlock && pos > from) {\n      text += blockSeparator\n    }\n\n    const textSerializer = textSerializers?.[node.type.name]\n\n    if (textSerializer) {\n      if (parent) {\n        text += textSerializer({\n          node,\n          pos,\n          parent,\n          index,\n          range,\n        })\n      }\n      // do not descend into child nodes when there exists a serializer\n      return false\n    }\n\n    if (node.isText) {\n      text += node?.text?.slice(Math.max(from, pos) - pos, to - pos) // eslint-disable-line\n    }\n  })\n\n  return text\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\n\nimport type { TextSerializer } from '../types.js'\nimport { getTextBetween } from './getTextBetween.js'\n\n/**\n * Gets the text of a Prosemirror node\n * @param node The Prosemirror node\n * @param options Options for the text serializer & block separator\n * @returns The text of the node\n * @example ```js\n * const text = getText(node, { blockSeparator: '\\n' })\n * ```\n */\nexport function getText(\n  node: ProseMirrorNode,\n  options?: {\n    blockSeparator?: string\n    textSerializers?: Record<string, TextSerializer>\n  },\n) {\n  const range = {\n    from: 0,\n    to: node.content.size,\n  }\n\n  return getTextBetween(node, range, options)\n}\n","import type { Schema } from '@tiptap/pm/model'\n\nimport type { TextSerializer } from '../types.js'\n\n/**\n * Find text serializers `toText` in a Prosemirror schema\n * @param schema The Prosemirror schema to search in\n * @returns A record of text serializers by node name\n */\nexport function getTextSerializersFromSchema(schema: Schema): Record<string, TextSerializer> {\n  return Object.fromEntries(\n    Object.entries(schema.nodes)\n      .filter(([, node]) => node.spec.toText)\n      .map(([name, node]) => [name, node.spec.toText]),\n  )\n}\n","import type { Node, NodeType } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\n\nimport { getNodeType } from './getNodeType.js'\n\nexport function getNodeAttributes(state: EditorState, typeOrName: string | NodeType): Record<string, any> {\n  const type = getNodeType(typeOrName, state.schema)\n  const { from, to } = state.selection\n  const nodes: Node[] = []\n\n  state.doc.nodesBetween(from, to, node => {\n    nodes.push(node)\n  })\n\n  const node = nodes.reverse().find(nodeItem => nodeItem.type.name === type.name)\n\n  if (!node) {\n    return {}\n  }\n\n  return { ...node.attrs }\n}\n","import type { MarkType, NodeType } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\n\nimport { getMarkAttributes } from './getMarkAttributes.js'\nimport { getNodeAttributes } from './getNodeAttributes.js'\nimport { getSchemaTypeNameByName } from './getSchemaTypeNameByName.js'\n\n/**\n * Get node or mark attributes by type or name on the current editor state\n * @param state The current editor state\n * @param typeOrName The node or mark type or name\n * @returns The attributes of the node or mark or an empty object\n */\nexport function getAttributes(state: EditorState, typeOrName: string | NodeType | MarkType): Record<string, any> {\n  const schemaType = getSchemaTypeNameByName(\n    typeof typeOrName === 'string' ? typeOrName : typeOrName.name,\n    state.schema,\n  )\n\n  if (schemaType === 'node') {\n    return getNodeAttributes(state, typeOrName as NodeType)\n  }\n\n  if (schemaType === 'mark') {\n    return getMarkAttributes(state, typeOrName as MarkType)\n  }\n\n  return {}\n}\n","/**\n * Removes duplicated values within an array.\n * Supports numbers, strings and objects.\n */\nexport function removeDuplicates<T>(array: T[], by = JSON.stringify): T[] {\n  const seen: Record<any, any> = {}\n\n  return array.filter(item => {\n    const key = by(item)\n\n    return Object.prototype.hasOwnProperty.call(seen, key) ? false : (seen[key] = true)\n  })\n}\n","import type { Step, Transform } from '@tiptap/pm/transform'\n\nimport type { Range } from '../types.js'\nimport { removeDuplicates } from '../utilities/removeDuplicates.js'\n\nexport type ChangedRange = {\n  oldRange: Range\n  newRange: Range\n}\n\n/**\n * Removes duplicated ranges and ranges that are\n * fully captured by other ranges.\n */\nfunction simplifyChangedRanges(changes: ChangedRange[]): ChangedRange[] {\n  const uniqueChanges = removeDuplicates(changes)\n\n  return uniqueChanges.length === 1\n    ? uniqueChanges\n    : uniqueChanges.filter((change, index) => {\n        const rest = uniqueChanges.filter((_, i) => i !== index)\n\n        return !rest.some(otherChange => {\n          return (\n            change.oldRange.from >= otherChange.oldRange.from &&\n            change.oldRange.to <= otherChange.oldRange.to &&\n            change.newRange.from >= otherChange.newRange.from &&\n            change.newRange.to <= otherChange.newRange.to\n          )\n        })\n      })\n}\n\n/**\n * Returns a list of changed ranges\n * based on the first and last state of all steps.\n */\nexport function getChangedRanges(transform: Transform): ChangedRange[] {\n  const { mapping, steps } = transform\n  const changes: ChangedRange[] = []\n\n  mapping.maps.forEach((stepMap, index) => {\n    const ranges: Range[] = []\n\n    // This accounts for step changes where no range was actually altered\n    // e.g. when setting a mark, node attribute, etc.\n    // @ts-ignore\n    if (!stepMap.ranges.length) {\n      const { from, to } = steps[index] as Step & {\n        from?: number\n        to?: number\n      }\n\n      if (from === undefined || to === undefined) {\n        return\n      }\n\n      ranges.push({ from, to })\n    } else {\n      stepMap.forEach((from, to) => {\n        ranges.push({ from, to })\n      })\n    }\n\n    ranges.forEach(({ from, to }) => {\n      const newStart = mapping.slice(index).map(from, -1)\n      const newEnd = mapping.slice(index).map(to)\n      const oldStart = mapping.invert().map(newStart, -1)\n      const oldEnd = mapping.invert().map(newEnd)\n\n      changes.push({\n        oldRange: {\n          from: oldStart,\n          to: oldEnd,\n        },\n        newRange: {\n          from: newStart,\n          to: newEnd,\n        },\n      })\n    })\n  })\n\n  return simplifyChangedRanges(changes)\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\n\nimport type { JSONContent } from '../types.js'\n\ninterface DebugJSONContent extends JSONContent {\n  from: number\n  to: number\n}\n\nexport function getDebugJSON(node: ProseMirrorNode, startOffset = 0): DebugJSONContent {\n  const isTopNode = node.type === node.type.schema.topNodeType\n  const increment = isTopNode ? 0 : 1\n  const from = startOffset\n  const to = from + node.nodeSize\n  const marks = node.marks.map(mark => {\n    const output: { type: string; attrs?: Record<string, any> } = {\n      type: mark.type.name,\n    }\n\n    if (Object.keys(mark.attrs).length) {\n      output.attrs = { ...mark.attrs }\n    }\n\n    return output\n  })\n  const attrs = { ...node.attrs }\n  const output: DebugJSONContent = {\n    type: node.type.name,\n    from,\n    to,\n  }\n\n  if (Object.keys(attrs).length) {\n    output.attrs = attrs\n  }\n\n  if (marks.length) {\n    output.marks = marks\n  }\n\n  if (node.content.childCount) {\n    output.content = []\n\n    node.forEach((child, offset) => {\n      output.content?.push(getDebugJSON(child, startOffset + offset + increment))\n    })\n  }\n\n  if (node.text) {\n    output.text = node.text\n  }\n\n  return output\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\n\nimport type { MarkRange } from '../types.js'\nimport { getMarkRange } from './getMarkRange.js'\n\nexport function getMarksBetween(from: number, to: number, doc: ProseMirrorNode): MarkRange[] {\n  const marks: MarkRange[] = []\n\n  // get all inclusive marks on empty selection\n  if (from === to) {\n    doc\n      .resolve(from)\n      .marks()\n      .forEach(mark => {\n        const $pos = doc.resolve(from)\n        const range = getMarkRange($pos, mark.type)\n\n        if (!range) {\n          return\n        }\n\n        marks.push({\n          mark,\n          ...range,\n        })\n      })\n  } else {\n    doc.nodesBetween(from, to, (node, pos) => {\n      if (!node || node?.nodeSize === undefined) {\n        return\n      }\n\n      marks.push(\n        ...node.marks.map(mark => ({\n          from: pos,\n          to: pos + node.nodeSize,\n          mark,\n        })),\n      )\n    })\n  }\n\n  return marks\n}\n","import type { Node, NodeType } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\n\n/**\n * Finds the first node of a given type or name in the current selection.\n * @param state The editor state.\n * @param typeOrName The node type or name.\n * @param pos The position to start searching from.\n * @param maxDepth The maximum depth to search.\n * @returns The node and the depth as an array.\n */\nexport const getNodeAtPosition = (state: EditorState, typeOrName: string | NodeType, pos: number, maxDepth = 20) => {\n  const $pos = state.doc.resolve(pos)\n\n  let currentDepth = maxDepth\n  let node: Node | null = null\n\n  while (currentDepth > 0 && node === null) {\n    const currentNode = $pos.node(currentDepth)\n\n    if (currentNode?.type.name === typeOrName) {\n      node = currentNode\n    } else {\n      currentDepth -= 1\n    }\n  }\n\n  return [node, currentDepth] as [Node | null, number]\n}\n","import type { MarkType, NodeType, Schema } from '@tiptap/pm/model'\n\n/**\n * Tries to get a node or mark type by its name.\n * @param name The name of the node or mark type\n * @param schema The Prosemiror schema to search in\n * @returns The node or mark type, or null if it doesn't exist\n */\nexport function getSchemaTypeByName(name: string, schema: Schema): NodeType | MarkType | null {\n  return schema.nodes[name] || schema.marks[name] || null\n}\n","import type { ExtensionAttribute } from '../types.js'\n\n/**\n * Return attributes of an extension that should be splitted by keepOnSplit flag\n * @param extensionAttributes Array of extension attributes\n * @param typeName The type of the extension\n * @param attributes The attributes of the extension\n * @returns The splitted attributes\n */\nexport function getSplittedAttributes(\n  extensionAttributes: ExtensionAttribute[],\n  typeName: string,\n  attributes: Record<string, any>,\n): Record<string, any> {\n  return Object.fromEntries(\n    Object.entries(attributes).filter(([name]) => {\n      const extensionAttribute = extensionAttributes.find(item => {\n        return item.type === typeName && item.name === name\n      })\n\n      if (!extensionAttribute) {\n        return false\n      }\n\n      return extensionAttribute.attribute.keepOnSplit\n    }),\n  )\n}\n","import type { ResolvedPos } from '@tiptap/pm/model'\n\n/**\n * Returns the text content of a resolved prosemirror position\n * @param $from The resolved position to get the text content from\n * @param maxMatch The maximum number of characters to match\n * @returns The text content\n */\nexport const getTextContentFromNodes = ($from: ResolvedPos, maxMatch = 500) => {\n  let textBefore = ''\n\n  const sliceEndPos = $from.parentOffset\n\n  $from.parent.nodesBetween(Math.max(0, sliceEndPos - maxMatch), sliceEndPos, (node, pos, parent, index) => {\n    const chunk =\n      node.type.spec.toText?.({\n        node,\n        pos,\n        parent,\n        index,\n      }) ||\n      node.textContent ||\n      '%leaf%'\n\n    textBefore += node.isAtom && !node.isText ? chunk : chunk.slice(0, Math.max(0, sliceEndPos - pos))\n  })\n\n  return textBefore\n}\n","import type { MarkType } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\n\nimport type { MarkRange } from '../types.js'\nimport { objectIncludes } from '../utilities/objectIncludes.js'\nimport { getMarkType } from './getMarkType.js'\n\nexport function isMarkActive(\n  state: EditorState,\n  typeOrName: MarkType | string | null,\n  attributes: Record<string, any> = {},\n): boolean {\n  const { empty, ranges } = state.selection\n  const type = typeOrName ? getMarkType(typeOrName, state.schema) : null\n\n  if (empty) {\n    return !!(state.storedMarks || state.selection.$from.marks())\n      .filter(mark => {\n        if (!type) {\n          return true\n        }\n\n        return type.name === mark.type.name\n      })\n      .find(mark => objectIncludes(mark.attrs, attributes, { strict: false }))\n  }\n\n  let selectionRange = 0\n  const markRanges: MarkRange[] = []\n\n  ranges.forEach(({ $from, $to }) => {\n    const from = $from.pos\n    const to = $to.pos\n\n    state.doc.nodesBetween(from, to, (node, pos) => {\n      // ignore selected text inside nodes whose schema disallows this mark type\n      if (type && node.inlineContent && !node.type.allowsMarkType(type)) {\n        return false\n      }\n\n      if (!node.isText && !node.marks.length) {\n        return\n      }\n\n      const relativeFrom = Math.max(from, pos)\n      const relativeTo = Math.min(to, pos + node.nodeSize)\n      const range = relativeTo - relativeFrom\n\n      selectionRange += range\n\n      markRanges.push(\n        ...node.marks.map(mark => ({\n          mark,\n          from: relativeFrom,\n          to: relativeTo,\n        })),\n      )\n    })\n  })\n\n  if (selectionRange === 0) {\n    return false\n  }\n\n  // calculate range of matched mark\n  const matchedRange = markRanges\n    .filter(markRange => {\n      if (!type) {\n        return true\n      }\n\n      return type.name === markRange.mark.type.name\n    })\n    .filter(markRange => objectIncludes(markRange.mark.attrs, attributes, { strict: false }))\n    .reduce((sum, markRange) => sum + markRange.to - markRange.from, 0)\n\n  // calculate range of marks that excludes the searched mark\n  // for example `code` doesnt allow any other marks\n  const excludedRange = markRanges\n    .filter(markRange => {\n      if (!type) {\n        return true\n      }\n\n      return markRange.mark.type !== type && markRange.mark.type.excludes(type)\n    })\n    .reduce((sum, markRange) => sum + markRange.to - markRange.from, 0)\n\n  // we only include the result of `excludedRange`\n  // if there is a match at all\n  const range = matchedRange > 0 ? matchedRange + excludedRange : matchedRange\n\n  return range >= selectionRange\n}\n","import type { EditorState } from '@tiptap/pm/state'\n\nimport { getSchemaTypeNameByName } from './getSchemaTypeNameByName.js'\nimport { isMarkActive } from './isMarkActive.js'\nimport { isNodeActive } from './isNodeActive.js'\n\nexport function isActive(state: EditorState, name: string | null, attributes: Record<string, any> = {}): boolean {\n  if (!name) {\n    return isNodeActive(state, null, attributes) || isMarkActive(state, null, attributes)\n  }\n\n  const schemaType = getSchemaTypeNameByName(name, state.schema)\n\n  if (schemaType === 'node') {\n    return isNodeActive(state, name, attributes)\n  }\n\n  if (schemaType === 'mark') {\n    return isMarkActive(state, name, attributes)\n  }\n\n  return false\n}\n","import type { EditorState } from '@tiptap/pm/state'\n\nimport { findParentNode } from './findParentNode.js'\n\nexport const isAtEndOfNode = (state: EditorState, nodeType?: string) => {\n  const { $from, $to, $anchor } = state.selection\n\n  if (nodeType) {\n    const parentNode = findParentNode(node => node.type.name === nodeType)(state.selection)\n\n    if (!parentNode) {\n      return false\n    }\n\n    const $parentPos = state.doc.resolve(parentNode.pos + 1)\n\n    if ($anchor.pos + 1 === $parentPos.end()) {\n      return true\n    }\n\n    return false\n  }\n\n  if ($to.parentOffset < $to.parent.nodeSize - 2 || $from.pos !== $to.pos) {\n    return false\n  }\n\n  return true\n}\n","import type { EditorState } from '@tiptap/pm/state'\n\nexport const isAtStartOfNode = (state: EditorState) => {\n  const { $from, $to } = state.selection\n\n  if ($from.parentOffset > 0 || $from.pos !== $to.pos) {\n    return false\n  }\n\n  return true\n}\n","import type { AnyExtension, EnableRules } from '../types.js'\n\nexport function isExtensionRulesEnabled(extension: AnyExtension, enabled: EnableRules): boolean {\n  if (Array.isArray(enabled)) {\n    return enabled.some(enabledExtension => {\n      const name = typeof enabledExtension === 'string' ? enabledExtension : enabledExtension.name\n\n      return name === extension.name\n    })\n  }\n\n  return enabled\n}\n","import { getExtensionField } from '../helpers/getExtensionField.js'\nimport type { NodeConfig } from '../index.js'\nimport type { Extensions } from '../types.js'\nimport { callOrReturn } from '../utilities/callOrReturn.js'\nimport { splitExtensions } from './splitExtensions.js'\n\nexport function isList(name: string, extensions: Extensions): boolean {\n  const { nodeExtensions } = splitExtensions(extensions)\n  const extension = nodeExtensions.find(item => item.name === name)\n\n  if (!extension) {\n    return false\n  }\n\n  const context = {\n    name: extension.name,\n    options: extension.options,\n    storage: extension.storage,\n  }\n  const group = callOrReturn(getExtensionField<NodeConfig['group']>(extension, 'group', context))\n\n  if (typeof group !== 'string') {\n    return false\n  }\n\n  return group.split(' ').includes('list')\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\n\n/**\n * Returns true if the given prosemirror node is empty.\n */\nexport function isNodeEmpty(\n  node: ProseMirrorNode,\n  {\n    checkChildren = true,\n    ignoreWhitespace = false,\n  }: {\n    /**\n     * When true (default), it will also check if all children are empty.\n     */\n    checkChildren?: boolean\n    /**\n     * When true, it will ignore whitespace when checking for emptiness.\n     */\n    ignoreWhitespace?: boolean\n  } = {},\n): boolean {\n  if (ignoreWhitespace) {\n    if (node.type.name === 'hardBreak') {\n      // Hard breaks are considered empty\n      return true\n    }\n    if (node.isText) {\n      return /^\\s*$/m.test(node.text ?? '')\n    }\n  }\n\n  if (node.isText) {\n    return !node.text\n  }\n\n  if (node.isAtom || node.isLeaf) {\n    return false\n  }\n\n  if (node.content.childCount === 0) {\n    return true\n  }\n\n  if (checkChildren) {\n    let isContentEmpty = true\n\n    node.content.forEach(childNode => {\n      if (isContentEmpty === false) {\n        // Exit early for perf\n        return\n      }\n\n      if (!isNodeEmpty(childNode, { ignoreWhitespace, checkChildren })) {\n        isContentEmpty = false\n      }\n    })\n\n    return isContentEmpty\n  }\n\n  return false\n}\n","import { NodeSelection } from '@tiptap/pm/state'\n\nexport function isNodeSelection(value: unknown): value is NodeSelection {\n  return value instanceof NodeSelection\n}\n","import type { Transaction } from '@tiptap/pm/state'\nimport type { MapResult } from '@tiptap/pm/transform'\n\n/**\n * A class that represents a mappable position in the editor. It can be extended\n * by other extensions to add additional position mapping capabilities.\n */\nexport class MappablePosition {\n  /**\n   * The absolute position in the editor.\n   */\n  public position: number\n\n  constructor(position: number) {\n    this.position = position\n  }\n\n  /**\n   * Creates a MappablePosition from a JSON object.\n   */\n  static fromJSON(json: any): MappablePosition {\n    return new MappablePosition(json.position)\n  }\n\n  /**\n   * Converts the MappablePosition to a JSON object.\n   */\n  toJSON(): any {\n    return {\n      position: this.position,\n    }\n  }\n}\n\n/**\n * The result of the getUpdatedPosition function.\n */\nexport interface GetUpdatedPositionResult {\n  position: MappablePosition\n  mapResult: MapResult | null\n}\n\n/**\n * Calculates the new position after applying a transaction.\n *\n * @returns The new mappable position and the map result.\n */\nexport function getUpdatedPosition(position: MappablePosition, transaction: Transaction): GetUpdatedPositionResult {\n  const mapResult = transaction.mapping.mapResult(position.position)\n  return {\n    position: new MappablePosition(mapResult.pos),\n    mapResult,\n  }\n}\n\n/**\n * Creates a MappablePosition from a position number. This is the default\n * implementation for Tiptap core. It can be overridden by other Tiptap\n * extensions.\n *\n * @param position The position (as a number) where the MappablePosition will be created.\n * @returns A new MappablePosition instance at the given position.\n */\nexport function createMappablePosition(position: number): MappablePosition {\n  return new MappablePosition(position)\n}\n","import type { EditorView } from '@tiptap/pm/view'\n\nimport { minMax } from '../utilities/minMax.js'\n\nexport function posToDOMRect(view: EditorView, from: number, to: number): DOMRect {\n  const minPos = 0\n  const maxPos = view.state.doc.content.size\n  const resolvedFrom = minMax(from, minPos, maxPos)\n  const resolvedEnd = minMax(to, minPos, maxPos)\n  const start = view.coordsAtPos(resolvedFrom)\n  const end = view.coordsAtPos(resolvedEnd, -1)\n  const top = Math.min(start.top, end.top)\n  const bottom = Math.max(start.bottom, end.bottom)\n  const left = Math.min(start.left, end.left)\n  const right = Math.max(start.right, end.right)\n  const width = right - left\n  const height = bottom - top\n  const x = left\n  const y = top\n  const data = {\n    top,\n    bottom,\n    left,\n    right,\n    width,\n    height,\n    x,\n    y,\n  }\n\n  return {\n    ...data,\n    toJSON: () => data,\n  }\n}\n","import type { Schema } from '@tiptap/pm/model'\n\nimport type { JSONContent } from '../types.js'\n\ntype RewriteUnknownContentOptions = {\n  /**\n   * If true, unknown nodes will be treated as paragraphs\n   * @default true\n   */\n  fallbackToParagraph?: boolean\n}\n\ntype RewrittenContent = {\n  /**\n   * The original JSON content that was rewritten\n   */\n  original: JSONContent\n  /**\n   * The name of the node or mark that was unsupported\n   */\n  unsupported: string\n}[]\n\n/**\n * The actual implementation of the rewriteUnknownContent function\n */\nfunction rewriteUnknownContentInner({\n  json,\n  validMarks,\n  validNodes,\n  options,\n  rewrittenContent = [],\n}: {\n  json: JSONContent\n  validMarks: Set<string>\n  validNodes: Set<string>\n  options?: RewriteUnknownContentOptions\n  rewrittenContent?: RewrittenContent\n}): {\n  /**\n   * The cleaned JSON content\n   */\n  json: JSONContent | null\n  /**\n   * The array of nodes and marks that were rewritten\n   */\n  rewrittenContent: RewrittenContent\n} {\n  if (json.marks && Array.isArray(json.marks)) {\n    json.marks = json.marks.filter(mark => {\n      const name = typeof mark === 'string' ? mark : mark.type\n\n      if (validMarks.has(name)) {\n        return true\n      }\n\n      rewrittenContent.push({\n        original: JSON.parse(JSON.stringify(mark)),\n        unsupported: name,\n      })\n      // Just ignore any unknown marks\n      return false\n    })\n  }\n\n  if (json.content && Array.isArray(json.content)) {\n    json.content = json.content\n      .map(\n        value =>\n          rewriteUnknownContentInner({\n            json: value,\n            validMarks,\n            validNodes,\n            options,\n            rewrittenContent,\n          }).json,\n      )\n      .filter(a => a !== null && a !== undefined)\n  }\n\n  if (json.type && !validNodes.has(json.type)) {\n    rewrittenContent.push({\n      original: JSON.parse(JSON.stringify(json)),\n      unsupported: json.type,\n    })\n\n    if (json.content && Array.isArray(json.content) && options?.fallbackToParagraph !== false) {\n      // Just treat it like a paragraph and hope for the best\n      json.type = 'paragraph'\n\n      return {\n        json,\n        rewrittenContent,\n      }\n    }\n\n    // or just omit it entirely\n    return {\n      json: null,\n      rewrittenContent,\n    }\n  }\n\n  return { json, rewrittenContent }\n}\n\n/**\n * Rewrite unknown nodes and marks within JSON content\n * Allowing for user within the editor\n */\nexport function rewriteUnknownContent(\n  /**\n   * The JSON content to clean of unknown nodes and marks\n   */\n  json: JSONContent,\n  /**\n   * The schema to use for validation\n   */\n  schema: Schema,\n  /**\n   * Options for the cleaning process\n   */\n  options?: RewriteUnknownContentOptions,\n): {\n  /**\n   * The cleaned JSON content\n   */\n  json: JSONContent | null\n  /**\n   * The array of nodes and marks that were rewritten\n   */\n  rewrittenContent: {\n    /**\n     * The original JSON content that was rewritten\n     */\n    original: JSONContent\n    /**\n     * The name of the node or mark that was unsupported\n     */\n    unsupported: string\n  }[]\n} {\n  return rewriteUnknownContentInner({\n    json,\n    validNodes: new Set(Object.keys(schema.nodes)),\n    validMarks: new Set(Object.keys(schema.marks)),\n    options,\n  })\n}\n","import type { MarkType, ResolvedPos } from '@tiptap/pm/model'\nimport type { EditorState, Transaction } from '@tiptap/pm/state'\n\nimport { getMarkAttributes } from '../helpers/getMarkAttributes.js'\nimport { getMarkType } from '../helpers/getMarkType.js'\nimport { isTextSelection } from '../helpers/index.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    setMark: {\n      /**\n       * Add a mark with new attributes.\n       * @param typeOrName The mark type or name.\n       * @example editor.commands.setMark('bold', { level: 1 })\n       */\n      setMark: (typeOrName: string | MarkType, attributes?: Record<string, any>) => ReturnType\n    }\n  }\n}\n\nfunction canSetMark(state: EditorState, tr: Transaction, newMarkType: MarkType) {\n  const { selection } = tr\n  let cursor: ResolvedPos | null = null\n\n  if (isTextSelection(selection)) {\n    cursor = selection.$cursor\n  }\n\n  if (cursor) {\n    const currentMarks = state.storedMarks ?? cursor.marks()\n    const parentAllowsMarkType = cursor.parent.type.allowsMarkType(newMarkType)\n\n    // There can be no current marks that exclude the new mark, and the parent must allow this mark type\n    return (\n      parentAllowsMarkType &&\n      (!!newMarkType.isInSet(currentMarks) || !currentMarks.some(mark => mark.type.excludes(newMarkType)))\n    )\n  }\n\n  const { ranges } = selection\n\n  return ranges.some(({ $from, $to }) => {\n    let someNodeSupportsMark =\n      $from.depth === 0 ? state.doc.inlineContent && state.doc.type.allowsMarkType(newMarkType) : false\n\n    state.doc.nodesBetween($from.pos, $to.pos, (node, _pos, parent) => {\n      // If we already found a mark that we can enable, return false to bypass the remaining search\n      if (someNodeSupportsMark) {\n        return false\n      }\n\n      if (node.isInline) {\n        const parentAllowsMarkType = !parent || parent.type.allowsMarkType(newMarkType)\n        const currentMarksAllowMarkType =\n          !!newMarkType.isInSet(node.marks) || !node.marks.some(otherMark => otherMark.type.excludes(newMarkType))\n\n        someNodeSupportsMark = parentAllowsMarkType && currentMarksAllowMarkType\n      }\n      return !someNodeSupportsMark\n    })\n\n    return someNodeSupportsMark\n  })\n}\nexport const setMark: RawCommands['setMark'] =\n  (typeOrName, attributes = {}) =>\n  ({ tr, state, dispatch }) => {\n    const { selection } = tr\n    const { empty, ranges } = selection\n    const type = getMarkType(typeOrName, state.schema)\n\n    if (dispatch) {\n      if (empty) {\n        const oldAttributes = getMarkAttributes(state, type)\n\n        tr.addStoredMark(\n          type.create({\n            ...oldAttributes,\n            ...attributes,\n          }),\n        )\n      } else {\n        ranges.forEach(range => {\n          const from = range.$from.pos\n          const to = range.$to.pos\n\n          state.doc.nodesBetween(from, to, (node, pos) => {\n            const trimmedFrom = Math.max(pos, from)\n            const trimmedTo = Math.min(pos + node.nodeSize, to)\n            const someHasMark = node.marks.find(mark => mark.type === type)\n\n            // if there is already a mark of this type\n            // we know that we have to merge its attributes\n            // otherwise we add a fresh new mark\n            if (someHasMark) {\n              node.marks.forEach(mark => {\n                if (type === mark.type) {\n                  tr.addMark(\n                    trimmedFrom,\n                    trimmedTo,\n                    type.create({\n                      ...mark.attrs,\n                      ...attributes,\n                    }),\n                  )\n                }\n              })\n            } else {\n              tr.addMark(trimmedFrom, trimmedTo, type.create(attributes))\n            }\n          })\n        })\n      }\n    }\n\n    return canSetMark(state, tr, type)\n  }\n","import type { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    setMeta: {\n      /**\n       * Store a metadata property in the current transaction.\n       * @param key The key of the metadata property.\n       * @param value The value to store.\n       * @example editor.commands.setMeta('foo', 'bar')\n       */\n      setMeta: (key: string | Plugin | PluginKey, value: any) => ReturnType\n    }\n  }\n}\n\nexport const setMeta: RawCommands['setMeta'] =\n  (key, value) =>\n  ({ tr }) => {\n    tr.setMeta(key, value)\n\n    return true\n  }\n","import { setBlockType } from '@tiptap/pm/commands'\nimport type { NodeType } from '@tiptap/pm/model'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    setNode: {\n      /**\n       * Replace a given range with a node.\n       * @param typeOrName The type or name of the node\n       * @param attributes The attributes of the node\n       * @example editor.commands.setNode('paragraph')\n       */\n      setNode: (typeOrName: string | NodeType, attributes?: Record<string, any>) => ReturnType\n    }\n  }\n}\n\nexport const setNode: RawCommands['setNode'] =\n  (typeOrName, attributes = {}) =>\n  ({ state, dispatch, chain }) => {\n    const type = getNodeType(typeOrName, state.schema)\n\n    let attributesToCopy: Record<string, any> | undefined\n\n    if (state.selection.$anchor.sameParent(state.selection.$head)) {\n      // only copy attributes if the selection is pointing to a node of the same type\n      attributesToCopy = state.selection.$anchor.parent.attrs\n    }\n\n    // TODO: use a fallback like insertContent?\n    if (!type.isTextblock) {\n      console.warn('[tiptap warn]: Currently \"setNode()\" only supports text block nodes.')\n\n      return false\n    }\n\n    return (\n      chain()\n        // try to convert node to default node if needed\n        .command(({ commands }) => {\n          const canSetBlock = setBlockType(type, { ...attributesToCopy, ...attributes })(state)\n\n          if (canSetBlock) {\n            return true\n          }\n\n          return commands.clearNodes()\n        })\n        .command(({ state: updatedState }) => {\n          return setBlockType(type, { ...attributesToCopy, ...attributes })(updatedState, dispatch)\n        })\n        .run()\n    )\n  }\n","import { NodeSelection } from '@tiptap/pm/state'\n\nimport type { RawCommands } from '../types.js'\nimport { minMax } from '../utilities/minMax.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    setNodeSelection: {\n      /**\n       * Creates a NodeSelection.\n       * @param position - Position of the node.\n       * @example editor.commands.setNodeSelection(10)\n       */\n      setNodeSelection: (position: number) => ReturnType\n    }\n  }\n}\n\nexport const setNodeSelection: RawCommands['setNodeSelection'] =\n  position =>\n  ({ tr, dispatch }) => {\n    if (dispatch) {\n      const { doc } = tr\n      const from = minMax(position, 0, doc.content.size)\n      const selection = NodeSelection.create(doc, from)\n\n      tr.setSelection(selection)\n    }\n\n    return true\n  }\n","import type { Range, RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    setTextDirection: {\n      /**\n       * Set the text direction for nodes.\n       * If no position is provided, it will use the current selection.\n       * @param direction The text direction to set ('ltr', 'rtl', or 'auto')\n       * @param position Optional position or range to apply the direction to\n       * @example editor.commands.setTextDirection('rtl')\n       * @example editor.commands.setTextDirection('ltr', { from: 0, to: 10 })\n       */\n      setTextDirection: (direction: 'ltr' | 'rtl' | 'auto', position?: number | Range) => ReturnType\n    }\n  }\n}\n\nexport const setTextDirection: RawCommands['setTextDirection'] =\n  (direction, position) =>\n  ({ tr, state, dispatch }) => {\n    const { selection } = state\n    let from: number\n    let to: number\n\n    if (typeof position === 'number') {\n      from = position\n      to = position\n    } else if (position && 'from' in position && 'to' in position) {\n      from = position.from\n      to = position.to\n    } else {\n      from = selection.from\n      to = selection.to\n    }\n\n    if (dispatch) {\n      tr.doc.nodesBetween(from, to, (node, pos) => {\n        if (node.isText) {\n          return\n        }\n\n        tr.setNodeMarkup(pos, undefined, {\n          ...node.attrs,\n          dir: direction,\n        })\n      })\n    }\n\n    return true\n  }\n","import { TextSelection } from '@tiptap/pm/state'\n\nimport type { Range, RawCommands } from '../types.js'\nimport { minMax } from '../utilities/minMax.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    setTextSelection: {\n      /**\n       * Creates a TextSelection.\n       * @param position The position of the selection.\n       * @example editor.commands.setTextSelection(10)\n       */\n      setTextSelection: (position: number | Range) => ReturnType\n    }\n  }\n}\n\nexport const setTextSelection: RawCommands['setTextSelection'] =\n  position =>\n  ({ tr, dispatch }) => {\n    if (dispatch) {\n      const { doc } = tr\n      const { from, to } = typeof position === 'number' ? { from: position, to: position } : position\n      const minPos = TextSelection.atStart(doc).from\n      const maxPos = TextSelection.atEnd(doc).to\n      const resolvedFrom = minMax(from, minPos, maxPos)\n      const resolvedEnd = minMax(to, minPos, maxPos)\n      const selection = TextSelection.create(doc, resolvedFrom, resolvedEnd)\n\n      tr.setSelection(selection)\n    }\n\n    return true\n  }\n","import type { NodeType } from '@tiptap/pm/model'\nimport { sinkListItem as originalSinkListItem } from '@tiptap/pm/schema-list'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    sinkListItem: {\n      /**\n       * Sink the list item down into an inner list.\n       * @param typeOrName The type or name of the node.\n       * @example editor.commands.sinkListItem('listItem')\n       */\n      sinkListItem: (typeOrName: string | NodeType) => ReturnType\n    }\n  }\n}\n\nexport const sinkListItem: RawCommands['sinkListItem'] =\n  typeOrName =>\n  ({ state, dispatch }) => {\n    const type = getNodeType(typeOrName, state.schema)\n\n    return originalSinkListItem(type)(state, dispatch)\n  }\n","import type { EditorState } from '@tiptap/pm/state'\nimport { NodeSelection, TextSelection } from '@tiptap/pm/state'\nimport { canSplit } from '@tiptap/pm/transform'\n\nimport { defaultBlockAt } from '../helpers/defaultBlockAt.js'\nimport { getSplittedAttributes } from '../helpers/getSplittedAttributes.js'\nimport type { RawCommands } from '../types.js'\n\nfunction ensureMarks(state: EditorState, splittableMarks?: string[]) {\n  const marks = state.storedMarks || (state.selection.$to.parentOffset && state.selection.$from.marks())\n\n  if (marks) {\n    const filteredMarks = marks.filter(mark => splittableMarks?.includes(mark.type.name))\n\n    state.tr.ensureMarks(filteredMarks)\n  }\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    splitBlock: {\n      /**\n       * Forks a new node from an existing node.\n       * @param options.keepMarks Keep marks from the previous node.\n       * @example editor.commands.splitBlock()\n       * @example editor.commands.splitBlock({ keepMarks: true })\n       */\n      splitBlock: (options?: { keepMarks?: boolean }) => ReturnType\n    }\n  }\n}\n\nexport const splitBlock: RawCommands['splitBlock'] =\n  ({ keepMarks = true } = {}) =>\n  ({ tr, state, dispatch, editor }) => {\n    const { selection, doc } = tr\n    const { $from, $to } = selection\n    const extensionAttributes = editor.extensionManager.attributes\n    const newAttributes = getSplittedAttributes(extensionAttributes, $from.node().type.name, $from.node().attrs)\n\n    if (selection instanceof NodeSelection && selection.node.isBlock) {\n      if (!$from.parentOffset || !canSplit(doc, $from.pos)) {\n        return false\n      }\n\n      if (dispatch) {\n        if (keepMarks) {\n          ensureMarks(state, editor.extensionManager.splittableMarks)\n        }\n\n        tr.split($from.pos).scrollIntoView()\n      }\n\n      return true\n    }\n\n    if (!$from.parent.isBlock) {\n      return false\n    }\n\n    const atEnd = $to.parentOffset === $to.parent.content.size\n\n    const deflt = $from.depth === 0 ? undefined : defaultBlockAt($from.node(-1).contentMatchAt($from.indexAfter(-1)))\n\n    let types =\n      atEnd && deflt\n        ? [\n            {\n              type: deflt,\n              attrs: newAttributes,\n            },\n          ]\n        : undefined\n\n    let can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types)\n\n    if (!types && !can && canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt ? [{ type: deflt }] : undefined)) {\n      can = true\n      types = deflt\n        ? [\n            {\n              type: deflt,\n              attrs: newAttributes,\n            },\n          ]\n        : undefined\n    }\n\n    if (dispatch) {\n      if (can) {\n        if (selection instanceof TextSelection) {\n          tr.deleteSelection()\n        }\n\n        tr.split(tr.mapping.map($from.pos), 1, types)\n\n        if (deflt && !atEnd && !$from.parentOffset && $from.parent.type !== deflt) {\n          const first = tr.mapping.map($from.before())\n          const $first = tr.doc.resolve(first)\n\n          if ($from.node(-1).canReplaceWith($first.index(), $first.index() + 1, deflt)) {\n            tr.setNodeMarkup(tr.mapping.map($from.before()), deflt)\n          }\n        }\n      }\n\n      if (keepMarks) {\n        ensureMarks(state, editor.extensionManager.splittableMarks)\n      }\n\n      tr.scrollIntoView()\n    }\n\n    return can\n  }\n","import type { Node as ProseMirrorNode, NodeType } from '@tiptap/pm/model'\nimport { Fragment, Slice } from '@tiptap/pm/model'\nimport { TextSelection } from '@tiptap/pm/state'\nimport { canSplit } from '@tiptap/pm/transform'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport { getSplittedAttributes } from '../helpers/getSplittedAttributes.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    splitListItem: {\n      /**\n       * Splits one list item into two list items.\n       * @param typeOrName The type or name of the node.\n       * @param overrideAttrs The attributes to ensure on the new node.\n       * @example editor.commands.splitListItem('listItem')\n       */\n      splitListItem: (typeOrName: string | NodeType, overrideAttrs?: Record<string, any>) => ReturnType\n    }\n  }\n}\n\nexport const splitListItem: RawCommands['splitListItem'] =\n  (typeOrName, overrideAttrs = {}) =>\n  ({ tr, state, dispatch, editor }) => {\n    const type = getNodeType(typeOrName, state.schema)\n    const { $from, $to } = state.selection\n\n    // @ts-ignore\n    // eslint-disable-next-line\n    const node: ProseMirrorNode = state.selection.node\n\n    if ((node && node.isBlock) || $from.depth < 2 || !$from.sameParent($to)) {\n      return false\n    }\n\n    const grandParent = $from.node(-1)\n\n    if (grandParent.type !== type) {\n      return false\n    }\n\n    const extensionAttributes = editor.extensionManager.attributes\n\n    if ($from.parent.content.size === 0 && $from.node(-1).childCount === $from.indexAfter(-1)) {\n      // In an empty block. If this is a nested list, the wrapping\n      // list item should be split. Otherwise, bail out and let next\n      // command handle lifting.\n      if ($from.depth === 2 || $from.node(-3).type !== type || $from.index(-2) !== $from.node(-2).childCount - 1) {\n        return false\n      }\n\n      if (dispatch) {\n        let wrap = Fragment.empty\n        // eslint-disable-next-line\n        const depthBefore = $from.index(-1) ? 1 : $from.index(-2) ? 2 : 3\n\n        // Build a fragment containing empty versions of the structure\n        // from the outer list item to the parent node of the cursor\n        for (let d = $from.depth - depthBefore; d >= $from.depth - 3; d -= 1) {\n          wrap = Fragment.from($from.node(d).copy(wrap))\n        }\n\n        const depthAfter =\n          // eslint-disable-next-line no-nested-ternary\n          $from.indexAfter(-1) < $from.node(-2).childCount\n            ? 1\n            : $from.indexAfter(-2) < $from.node(-3).childCount\n              ? 2\n              : 3\n\n        // Add a second list item with an empty default start node\n        const newNextTypeAttributes = {\n          ...getSplittedAttributes(extensionAttributes, $from.node().type.name, $from.node().attrs),\n          ...overrideAttrs,\n        }\n        const nextType = type.contentMatch.defaultType?.createAndFill(newNextTypeAttributes) || undefined\n\n        wrap = wrap.append(Fragment.from(type.createAndFill(null, nextType) || undefined))\n\n        const start = $from.before($from.depth - (depthBefore - 1))\n\n        tr.replace(start, $from.after(-depthAfter), new Slice(wrap, 4 - depthBefore, 0))\n\n        let sel = -1\n\n        tr.doc.nodesBetween(start, tr.doc.content.size, (n, pos) => {\n          if (sel > -1) {\n            return false\n          }\n\n          if (n.isTextblock && n.content.size === 0) {\n            sel = pos + 1\n          }\n        })\n\n        if (sel > -1) {\n          tr.setSelection(TextSelection.near(tr.doc.resolve(sel)))\n        }\n\n        tr.scrollIntoView()\n      }\n\n      return true\n    }\n\n    const nextType = $to.pos === $from.end() ? grandParent.contentMatchAt(0).defaultType : null\n\n    const newTypeAttributes = {\n      ...getSplittedAttributes(extensionAttributes, grandParent.type.name, grandParent.attrs),\n      ...overrideAttrs,\n    }\n    const newNextTypeAttributes = {\n      ...getSplittedAttributes(extensionAttributes, $from.node().type.name, $from.node().attrs),\n      ...overrideAttrs,\n    }\n\n    tr.delete($from.pos, $to.pos)\n\n    const types = nextType\n      ? [\n          { type, attrs: newTypeAttributes },\n          { type: nextType, attrs: newNextTypeAttributes },\n        ]\n      : [{ type, attrs: newTypeAttributes }]\n\n    if (!canSplit(tr.doc, $from.pos, 2)) {\n      return false\n    }\n\n    if (dispatch) {\n      const { selection, storedMarks } = state\n      const { splittableMarks } = editor.extensionManager\n      const marks = storedMarks || (selection.$to.parentOffset && selection.$from.marks())\n\n      tr.split($from.pos, 2, types).scrollIntoView()\n\n      if (!marks || !dispatch) {\n        return true\n      }\n\n      const filteredMarks = marks.filter(mark => splittableMarks.includes(mark.type.name))\n\n      tr.ensureMarks(filteredMarks)\n    }\n\n    return true\n  }\n","import type { NodeType } from '@tiptap/pm/model'\nimport type { Transaction } from '@tiptap/pm/state'\nimport { canJoin } from '@tiptap/pm/transform'\n\nimport { findParentNode } from '../helpers/findParentNode.js'\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport { isList } from '../helpers/isList.js'\nimport type { RawCommands } from '../types.js'\n\nconst joinListBackwards = (tr: Transaction, listType: NodeType): boolean => {\n  const list = findParentNode(node => node.type === listType)(tr.selection)\n\n  if (!list) {\n    return true\n  }\n\n  const before = tr.doc.resolve(Math.max(0, list.pos - 1)).before(list.depth)\n\n  if (before === undefined) {\n    return true\n  }\n\n  const nodeBefore = tr.doc.nodeAt(before)\n  const canJoinBackwards = list.node.type === nodeBefore?.type && canJoin(tr.doc, list.pos)\n\n  if (!canJoinBackwards) {\n    return true\n  }\n\n  tr.join(list.pos)\n\n  return true\n}\n\nconst joinListForwards = (tr: Transaction, listType: NodeType): boolean => {\n  const list = findParentNode(node => node.type === listType)(tr.selection)\n\n  if (!list) {\n    return true\n  }\n\n  const after = tr.doc.resolve(list.start).after(list.depth)\n\n  if (after === undefined) {\n    return true\n  }\n\n  const nodeAfter = tr.doc.nodeAt(after)\n  const canJoinForwards = list.node.type === nodeAfter?.type && canJoin(tr.doc, after)\n\n  if (!canJoinForwards) {\n    return true\n  }\n\n  tr.join(after)\n\n  return true\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    toggleList: {\n      /**\n       * Toggle between different list types.\n       * @param listTypeOrName The type or name of the list.\n       * @param itemTypeOrName The type or name of the list item.\n       * @param keepMarks Keep marks when toggling.\n       * @param attributes Attributes for the new list.\n       * @example editor.commands.toggleList('bulletList', 'listItem')\n       */\n      toggleList: (\n        listTypeOrName: string | NodeType,\n        itemTypeOrName: string | NodeType,\n        keepMarks?: boolean,\n        attributes?: Record<string, any>,\n      ) => ReturnType\n    }\n  }\n}\n\nexport const toggleList: RawCommands['toggleList'] =\n  (listTypeOrName, itemTypeOrName, keepMarks, attributes = {}) =>\n  ({ editor, tr, state, dispatch, chain, commands, can }) => {\n    const { extensions, splittableMarks } = editor.extensionManager\n    const listType = getNodeType(listTypeOrName, state.schema)\n    const itemType = getNodeType(itemTypeOrName, state.schema)\n    const { selection, storedMarks } = state\n    const { $from, $to } = selection\n    const range = $from.blockRange($to)\n\n    const marks = storedMarks || (selection.$to.parentOffset && selection.$from.marks())\n\n    if (!range) {\n      return false\n    }\n\n    const parentList = findParentNode(node => isList(node.type.name, extensions))(selection)\n\n    if (range.depth >= 1 && parentList && range.depth - parentList.depth <= 1) {\n      // remove list\n      if (parentList.node.type === listType) {\n        return commands.liftListItem(itemType)\n      }\n\n      // change list type\n      if (isList(parentList.node.type.name, extensions) && listType.validContent(parentList.node.content) && dispatch) {\n        return chain()\n          .command(() => {\n            tr.setNodeMarkup(parentList.pos, listType)\n\n            return true\n          })\n          .command(() => joinListBackwards(tr, listType))\n          .command(() => joinListForwards(tr, listType))\n          .run()\n      }\n    }\n    if (!keepMarks || !marks || !dispatch) {\n      return (\n        chain()\n          // try to convert node to default node if needed\n          .command(() => {\n            const canWrapInList = can().wrapInList(listType, attributes)\n\n            if (canWrapInList) {\n              return true\n            }\n\n            return commands.clearNodes()\n          })\n          .wrapInList(listType, attributes)\n          .command(() => joinListBackwards(tr, listType))\n          .command(() => joinListForwards(tr, listType))\n          .run()\n      )\n    }\n\n    return (\n      chain()\n        // try to convert node to default node if needed\n        .command(() => {\n          const canWrapInList = can().wrapInList(listType, attributes)\n\n          const filteredMarks = marks.filter(mark => splittableMarks.includes(mark.type.name))\n\n          tr.ensureMarks(filteredMarks)\n\n          if (canWrapInList) {\n            return true\n          }\n\n          return commands.clearNodes()\n        })\n        .wrapInList(listType, attributes)\n        .command(() => joinListBackwards(tr, listType))\n        .command(() => joinListForwards(tr, listType))\n        .run()\n    )\n  }\n","import type { MarkType } from '@tiptap/pm/model'\n\nimport { getMarkType } from '../helpers/getMarkType.js'\nimport { isMarkActive } from '../helpers/isMarkActive.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    toggleMark: {\n      /**\n       * Toggle a mark on and off.\n       * @param typeOrName The mark type or name.\n       * @param attributes The attributes of the mark.\n       * @param options.extendEmptyMarkRange Removes the mark even across the current selection. Defaults to `false`.\n       * @example editor.commands.toggleMark('bold')\n       */\n      toggleMark: (\n        /**\n         * The mark type or name.\n         */\n        typeOrName: string | MarkType,\n\n        /**\n         * The attributes of the mark.\n         */\n        attributes?: Record<string, any>,\n\n        options?: {\n          /**\n           * Removes the mark even across the current selection. Defaults to `false`.\n           */\n          extendEmptyMarkRange?: boolean\n        },\n      ) => ReturnType\n    }\n  }\n}\n\nexport const toggleMark: RawCommands['toggleMark'] =\n  (typeOrName, attributes = {}, options = {}) =>\n  ({ state, commands }) => {\n    const { extendEmptyMarkRange = false } = options\n    const type = getMarkType(typeOrName, state.schema)\n    const isActive = isMarkActive(state, type, attributes)\n\n    if (isActive) {\n      return commands.unsetMark(type, { extendEmptyMarkRange })\n    }\n\n    return commands.setMark(type, attributes)\n  }\n","import type { NodeType } from '@tiptap/pm/model'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport { isNodeActive } from '../helpers/isNodeActive.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    toggleNode: {\n      /**\n       * Toggle a node with another node.\n       * @param typeOrName The type or name of the node.\n       * @param toggleTypeOrName The type or name of the node to toggle.\n       * @param attributes The attributes of the node.\n       * @example editor.commands.toggleNode('heading', 'paragraph')\n       */\n      toggleNode: (\n        typeOrName: string | NodeType,\n        toggleTypeOrName: string | NodeType,\n        attributes?: Record<string, any>,\n      ) => ReturnType\n    }\n  }\n}\n\nexport const toggleNode: RawCommands['toggleNode'] =\n  (typeOrName, toggleTypeOrName, attributes = {}) =>\n  ({ state, commands }) => {\n    const type = getNodeType(typeOrName, state.schema)\n    const toggleType = getNodeType(toggleTypeOrName, state.schema)\n    const isActive = isNodeActive(state, type, attributes)\n\n    let attributesToCopy: Record<string, any> | undefined\n\n    if (state.selection.$anchor.sameParent(state.selection.$head)) {\n      // only copy attributes if the selection is pointing to a node of the same type\n      attributesToCopy = state.selection.$anchor.parent.attrs\n    }\n\n    if (isActive) {\n      return commands.setNode(toggleType, attributesToCopy)\n    }\n\n    // If the node is not active, we want to set the new node type with the given attributes\n    // Copying over the attributes from the current node if the selection is pointing to a node of the same type\n    return commands.setNode(type, { ...attributesToCopy, ...attributes })\n  }\n","import type { NodeType } from '@tiptap/pm/model'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport { isNodeActive } from '../helpers/isNodeActive.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    toggleWrap: {\n      /**\n       * Wraps nodes in another node, or removes an existing wrap.\n       * @param typeOrName The type or name of the node.\n       * @param attributes The attributes of the node.\n       * @example editor.commands.toggleWrap('blockquote')\n       */\n      toggleWrap: (typeOrName: string | NodeType, attributes?: Record<string, any>) => ReturnType\n    }\n  }\n}\n\nexport const toggleWrap: RawCommands['toggleWrap'] =\n  (typeOrName, attributes = {}) =>\n  ({ state, commands }) => {\n    const type = getNodeType(typeOrName, state.schema)\n    const isActive = isNodeActive(state, type, attributes)\n\n    if (isActive) {\n      return commands.lift(type)\n    }\n\n    return commands.wrapIn(type, attributes)\n  }\n","import type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    undoInputRule: {\n      /**\n       * Undo an input rule.\n       * @example editor.commands.undoInputRule()\n       */\n      undoInputRule: () => ReturnType\n    }\n  }\n}\n\nexport const undoInputRule: RawCommands['undoInputRule'] =\n  () =>\n  ({ state, dispatch }) => {\n    const plugins = state.plugins\n\n    for (let i = 0; i < plugins.length; i += 1) {\n      const plugin = plugins[i]\n      let undoable\n\n      // @ts-ignore\n      // eslint-disable-next-line\n      if (plugin.spec.isInputRules && (undoable = plugin.getState(state))) {\n        if (dispatch) {\n          const tr = state.tr\n          const toUndo = undoable.transform\n\n          for (let j = toUndo.steps.length - 1; j >= 0; j -= 1) {\n            tr.step(toUndo.steps[j].invert(toUndo.docs[j]))\n          }\n\n          if (undoable.text) {\n            const marks = tr.doc.resolve(undoable.from).marks()\n\n            tr.replaceWith(undoable.from, undoable.to, state.schema.text(undoable.text, marks))\n          } else {\n            tr.delete(undoable.from, undoable.to)\n          }\n        }\n\n        return true\n      }\n    }\n\n    return false\n  }\n","import type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    unsetAllMarks: {\n      /**\n       * Remove all marks in the current selection.\n       * @example editor.commands.unsetAllMarks()\n       */\n      unsetAllMarks: () => ReturnType\n    }\n  }\n}\n\nexport const unsetAllMarks: RawCommands['unsetAllMarks'] =\n  () =>\n  ({ tr, dispatch }) => {\n    const { selection } = tr\n    const { empty, ranges } = selection\n\n    if (empty) {\n      return true\n    }\n\n    if (dispatch) {\n      ranges.forEach(range => {\n        tr.removeMark(range.$from.pos, range.$to.pos)\n      })\n    }\n\n    return true\n  }\n","import type { MarkType } from '@tiptap/pm/model'\n\nimport { getMarkRange } from '../helpers/getMarkRange.js'\nimport { getMarkType } from '../helpers/getMarkType.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    unsetMark: {\n      /**\n       * Remove all marks in the current selection.\n       * @param typeOrName The mark type or name.\n       * @param options.extendEmptyMarkRange Removes the mark even across the current selection. Defaults to `false`.\n       * @example editor.commands.unsetMark('bold')\n       */\n      unsetMark: (\n        /**\n         * The mark type or name.\n         */\n        typeOrName: string | MarkType,\n\n        options?: {\n          /**\n           * Removes the mark even across the current selection. Defaults to `false`.\n           */\n          extendEmptyMarkRange?: boolean\n        },\n      ) => ReturnType\n    }\n  }\n}\n\nexport const unsetMark: RawCommands['unsetMark'] =\n  (typeOrName, options = {}) =>\n  ({ tr, state, dispatch }) => {\n    const { extendEmptyMarkRange = false } = options\n    const { selection } = tr\n    const type = getMarkType(typeOrName, state.schema)\n    const { $from, empty, ranges } = selection\n\n    if (!dispatch) {\n      return true\n    }\n\n    if (empty && extendEmptyMarkRange) {\n      let { from, to } = selection\n      const attrs = $from.marks().find(mark => mark.type === type)?.attrs\n      const range = getMarkRange($from, type, attrs)\n\n      if (range) {\n        from = range.from\n        to = range.to\n      }\n\n      tr.removeMark(from, to, type)\n    } else {\n      ranges.forEach(range => {\n        tr.removeMark(range.$from.pos, range.$to.pos, type)\n      })\n    }\n\n    tr.removeStoredMark(type)\n\n    return true\n  }\n","import type { Range, RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    unsetTextDirection: {\n      /**\n       * Remove the text direction attribute from nodes.\n       * If no position is provided, it will use the current selection.\n       * @param position Optional position or range to remove the direction from\n       * @example editor.commands.unsetTextDirection()\n       * @example editor.commands.unsetTextDirection({ from: 0, to: 10 })\n       */\n      unsetTextDirection: (position?: number | Range) => ReturnType\n    }\n  }\n}\n\nexport const unsetTextDirection: RawCommands['unsetTextDirection'] =\n  position =>\n  ({ tr, state, dispatch }) => {\n    const { selection } = state\n    let from: number\n    let to: number\n\n    if (typeof position === 'number') {\n      from = position\n      to = position\n    } else if (position && 'from' in position && 'to' in position) {\n      from = position.from\n      to = position.to\n    } else {\n      from = selection.from\n      to = selection.to\n    }\n\n    if (dispatch) {\n      tr.doc.nodesBetween(from, to, (node, pos) => {\n        if (node.isText) {\n          return\n        }\n\n        const newAttrs = { ...node.attrs }\n\n        delete newAttrs.dir\n\n        tr.setNodeMarkup(pos, undefined, newAttrs)\n      })\n    }\n\n    return true\n  }\n","import type { Mark, MarkType, Node, NodeType } from '@tiptap/pm/model'\nimport type { SelectionRange } from '@tiptap/pm/state'\n\nimport { getMarkType } from '../helpers/getMarkType.js'\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport { getSchemaTypeNameByName } from '../helpers/getSchemaTypeNameByName.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    updateAttributes: {\n      /**\n       * Update attributes of a node or mark.\n       * @param typeOrName The type or name of the node or mark.\n       * @param attributes The attributes of the node or mark.\n       * @example editor.commands.updateAttributes('mention', { userId: \"2\" })\n       */\n      updateAttributes: (\n        /**\n         * The type or name of the node or mark.\n         */\n        typeOrName: string | NodeType | MarkType,\n\n        /**\n         * The attributes of the node or mark.\n         */\n        attributes: Record<string, any>,\n      ) => ReturnType\n    }\n  }\n}\n\nexport const updateAttributes: RawCommands['updateAttributes'] =\n  (typeOrName, attributes = {}) =>\n  ({ tr, state, dispatch }) => {\n    let nodeType: NodeType | null = null\n    let markType: MarkType | null = null\n\n    const schemaType = getSchemaTypeNameByName(\n      typeof typeOrName === 'string' ? typeOrName : typeOrName.name,\n      state.schema,\n    )\n\n    if (!schemaType) {\n      return false\n    }\n\n    if (schemaType === 'node') {\n      nodeType = getNodeType(typeOrName as NodeType, state.schema)\n    }\n\n    if (schemaType === 'mark') {\n      markType = getMarkType(typeOrName as MarkType, state.schema)\n    }\n\n    let canUpdate = false\n\n    tr.selection.ranges.forEach((range: SelectionRange) => {\n      const from = range.$from.pos\n      const to = range.$to.pos\n\n      let lastPos: number | undefined\n      let lastNode: Node | undefined\n      let trimmedFrom: number\n      let trimmedTo: number\n\n      if (tr.selection.empty) {\n        state.doc.nodesBetween(from, to, (node: Node, pos: number) => {\n          if (nodeType && nodeType === node.type) {\n            canUpdate = true\n            trimmedFrom = Math.max(pos, from)\n            trimmedTo = Math.min(pos + node.nodeSize, to)\n            lastPos = pos\n            lastNode = node\n          }\n        })\n      } else {\n        state.doc.nodesBetween(from, to, (node: Node, pos: number) => {\n          if (pos < from && nodeType && nodeType === node.type) {\n            canUpdate = true\n            trimmedFrom = Math.max(pos, from)\n            trimmedTo = Math.min(pos + node.nodeSize, to)\n            lastPos = pos\n            lastNode = node\n          }\n\n          if (pos >= from && pos <= to) {\n            if (nodeType && nodeType === node.type) {\n              canUpdate = true\n\n              if (dispatch) {\n                tr.setNodeMarkup(pos, undefined, {\n                  ...node.attrs,\n                  ...attributes,\n                })\n              }\n            }\n\n            if (markType && node.marks.length) {\n              node.marks.forEach((mark: Mark) => {\n                if (markType === mark.type) {\n                  canUpdate = true\n\n                  if (dispatch) {\n                    const trimmedFrom2 = Math.max(pos, from)\n                    const trimmedTo2 = Math.min(pos + node.nodeSize, to)\n\n                    tr.addMark(\n                      trimmedFrom2,\n                      trimmedTo2,\n                      markType.create({\n                        ...mark.attrs,\n                        ...attributes,\n                      }),\n                    )\n                  }\n                }\n              })\n            }\n          }\n        })\n      }\n\n      if (lastNode) {\n        if (lastPos !== undefined && dispatch) {\n          tr.setNodeMarkup(lastPos, undefined, {\n            ...lastNode.attrs,\n            ...attributes,\n          })\n        }\n\n        if (markType && lastNode.marks.length) {\n          lastNode.marks.forEach((mark: Mark) => {\n            if (markType === mark.type && dispatch) {\n              tr.addMark(\n                trimmedFrom,\n                trimmedTo,\n                markType.create({\n                  ...mark.attrs,\n                  ...attributes,\n                }),\n              )\n            }\n          })\n        }\n      }\n    })\n\n    return canUpdate\n  }\n","import { wrapIn as originalWrapIn } from '@tiptap/pm/commands'\nimport type { NodeType } from '@tiptap/pm/model'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    wrapIn: {\n      /**\n       * Wraps nodes in another node.\n       * @param typeOrName The type or name of the node.\n       * @param attributes The attributes of the node.\n       * @example editor.commands.wrapIn('blockquote')\n       */\n      wrapIn: (typeOrName: string | NodeType, attributes?: Record<string, any>) => ReturnType\n    }\n  }\n}\n\nexport const wrapIn: RawCommands['wrapIn'] =\n  (typeOrName, attributes = {}) =>\n  ({ state, dispatch }) => {\n    const type = getNodeType(typeOrName, state.schema)\n\n    return originalWrapIn(type, attributes)(state, dispatch)\n  }\n","import type { NodeType } from '@tiptap/pm/model'\nimport { wrapInList as originalWrapInList } from '@tiptap/pm/schema-list'\n\nimport { getNodeType } from '../helpers/getNodeType.js'\nimport type { RawCommands } from '../types.js'\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    wrapInList: {\n      /**\n       * Wrap a node in a list.\n       * @param typeOrName The type or name of the node.\n       * @param attributes The attributes of the node.\n       * @example editor.commands.wrapInList('bulletList')\n       */\n      wrapInList: (typeOrName: string | NodeType, attributes?: Record<string, any>) => ReturnType\n    }\n  }\n}\n\nexport const wrapInList: RawCommands['wrapInList'] =\n  (typeOrName, attributes = {}) =>\n  ({ state, dispatch }) => {\n    const type = getNodeType(typeOrName, state.schema)\n\n    return originalWrapInList(type, attributes)(state, dispatch)\n  }\n","/* eslint-disable @typescript-eslint/no-empty-object-type */\nimport type { MarkType, Node as ProseMirrorNode, NodeType, Schema } from '@tiptap/pm/model'\nimport type { Plugin, PluginKey, Transaction } from '@tiptap/pm/state'\nimport { EditorState } from '@tiptap/pm/state'\nimport { type DirectEditorProps, EditorView } from '@tiptap/pm/view'\n\nimport { CommandManager } from './CommandManager.js'\nimport { EventEmitter } from './EventEmitter.js'\nimport { ExtensionManager } from './ExtensionManager.js'\nimport {\n  ClipboardTextSerializer,\n  Commands,\n  Delete,\n  Drop,\n  Editable,\n  FocusEvents,\n  Keymap,\n  Paste,\n  Tabindex,\n  TextDirection,\n} from './extensions/index.js'\nimport { createDocument } from './helpers/createDocument.js'\nimport { getAttributes } from './helpers/getAttributes.js'\nimport { getHTMLFromFragment } from './helpers/getHTMLFromFragment.js'\nimport { getText } from './helpers/getText.js'\nimport { getTextSerializersFromSchema } from './helpers/getTextSerializersFromSchema.js'\nimport { isActive } from './helpers/isActive.js'\nimport { isNodeEmpty } from './helpers/isNodeEmpty.js'\nimport { createMappablePosition, getUpdatedPosition } from './helpers/MappablePosition.js'\nimport { resolveFocusPosition } from './helpers/resolveFocusPosition.js'\nimport type { Storage } from './index.js'\nimport { NodePos } from './NodePos.js'\nimport { style } from './style.js'\nimport type {\n  CanCommands,\n  ChainedCommands,\n  DocumentType,\n  EditorEvents,\n  EditorOptions,\n  NodeType as TNodeType,\n  SingleCommands,\n  TextSerializer,\n  TextType as TTextType,\n  Utils,\n} from './types.js'\nimport { createStyleTag } from './utilities/createStyleTag.js'\nimport { isFunction } from './utilities/isFunction.js'\n\nexport * as extensions from './extensions/index.js'\n\n// @ts-ignore\nexport interface TiptapEditorHTMLElement extends HTMLElement {\n  editor?: Editor\n}\n\nexport class Editor extends EventEmitter<EditorEvents> {\n  private commandManager!: CommandManager\n\n  public extensionManager!: ExtensionManager\n\n  private css: HTMLStyleElement | null = null\n\n  private className = 'tiptap'\n\n  public schema!: Schema\n\n  private editorView: EditorView | null = null\n\n  public isFocused = false\n\n  private editorState!: EditorState\n\n  /**\n   * The editor is considered initialized after the `create` event has been emitted.\n   */\n  public isInitialized = false\n\n  public extensionStorage: Storage = {} as Storage\n\n  /**\n   * A unique ID for this editor instance.\n   */\n  public instanceId = Math.random().toString(36).slice(2, 9)\n\n  public options: EditorOptions = {\n    element: typeof document !== 'undefined' ? document.createElement('div') : null,\n    content: '',\n    injectCSS: true,\n    injectNonce: undefined,\n    extensions: [],\n    autofocus: false,\n    editable: true,\n    textDirection: undefined,\n    editorProps: {},\n    parseOptions: {},\n    coreExtensionOptions: {},\n    enableInputRules: true,\n    enablePasteRules: true,\n    enableCoreExtensions: true,\n    enableContentCheck: false,\n    emitContentError: false,\n    onBeforeCreate: () => null,\n    onCreate: () => null,\n    onMount: () => null,\n    onUnmount: () => null,\n    onUpdate: () => null,\n    onSelectionUpdate: () => null,\n    onTransaction: () => null,\n    onFocus: () => null,\n    onBlur: () => null,\n    onDestroy: () => null,\n    onContentError: ({ error }) => {\n      throw error\n    },\n    onPaste: () => null,\n    onDrop: () => null,\n    onDelete: () => null,\n    enableExtensionDispatchTransaction: true,\n  }\n\n  constructor(options: Partial<EditorOptions> = {}) {\n    super()\n    this.setOptions(options)\n    this.createExtensionManager()\n    this.createCommandManager()\n    this.createSchema()\n    this.on('beforeCreate', this.options.onBeforeCreate)\n    this.emit('beforeCreate', { editor: this })\n    this.on('mount', this.options.onMount)\n    this.on('unmount', this.options.onUnmount)\n    this.on('contentError', this.options.onContentError)\n    this.on('create', this.options.onCreate)\n    this.on('update', this.options.onUpdate)\n    this.on('selectionUpdate', this.options.onSelectionUpdate)\n    this.on('transaction', this.options.onTransaction)\n    this.on('focus', this.options.onFocus)\n    this.on('blur', this.options.onBlur)\n    this.on('destroy', this.options.onDestroy)\n    this.on('drop', ({ event, slice, moved }) => this.options.onDrop(event, slice, moved))\n    this.on('paste', ({ event, slice }) => this.options.onPaste(event, slice))\n    this.on('delete', this.options.onDelete)\n\n    const initialDoc = this.createDoc()\n    const selection = resolveFocusPosition(initialDoc, this.options.autofocus)\n\n    // Set editor state immediately, so that it's available independently from the view\n    this.editorState = EditorState.create({\n      doc: initialDoc,\n      schema: this.schema,\n      selection: selection || undefined,\n    })\n\n    if (this.options.element) {\n      this.mount(this.options.element)\n    }\n  }\n\n  /**\n   * Attach the editor to the DOM, creating a new editor view.\n   */\n  public mount(el: NonNullable<EditorOptions['element']> & {}) {\n    if (typeof document === 'undefined') {\n      throw new Error(\n        `[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.`,\n      )\n    }\n    this.createView(el)\n    this.emit('mount', { editor: this })\n\n    if (this.css && !document.head.contains(this.css)) {\n      document.head.appendChild(this.css)\n    }\n\n    window.setTimeout(() => {\n      if (this.isDestroyed) {\n        return\n      }\n\n      if (this.options.autofocus !== false && this.options.autofocus !== null) {\n        this.commands.focus(this.options.autofocus)\n      }\n      this.emit('create', { editor: this })\n      this.isInitialized = true\n    }, 0)\n  }\n\n  /**\n   * Remove the editor from the DOM, but still allow remounting at a different point in time\n   */\n  public unmount() {\n    if (this.editorView) {\n      // Cleanup our reference to prevent circular references which caused memory leaks\n      // @ts-ignore\n      const dom = this.editorView.dom as TiptapEditorHTMLElement\n\n      if (dom?.editor) {\n        delete dom.editor\n      }\n      this.editorView.destroy()\n    }\n    this.editorView = null\n    this.isInitialized = false\n\n    // Safely remove CSS element with fallback for test environments\n    // Only remove CSS if no other editors exist in the document after unmount\n    if (this.css && !document.querySelectorAll(`.${this.className}`).length) {\n      try {\n        if (typeof this.css.remove === 'function') {\n          this.css.remove()\n        } else if (this.css.parentNode) {\n          this.css.parentNode.removeChild(this.css)\n        }\n      } catch (error) {\n        // Silently handle any unexpected DOM removal errors in test environments\n        console.warn('Failed to remove CSS element:', error)\n      }\n    }\n    this.css = null\n    this.emit('unmount', { editor: this })\n  }\n\n  /**\n   * Returns the editor storage.\n   */\n  public get storage(): Storage {\n    return this.extensionStorage\n  }\n\n  /**\n   * An object of all registered commands.\n   */\n  public get commands(): SingleCommands {\n    return this.commandManager.commands\n  }\n\n  /**\n   * Create a command chain to call multiple commands at once.\n   */\n  public chain(): ChainedCommands {\n    return this.commandManager.chain()\n  }\n\n  /**\n   * Check if a command or a command chain can be executed. Without executing it.\n   */\n  public can(): CanCommands {\n    return this.commandManager.can()\n  }\n\n  /**\n   * Inject CSS styles.\n   */\n  private injectCSS(): void {\n    if (this.options.injectCSS && typeof document !== 'undefined') {\n      this.css = createStyleTag(style, this.options.injectNonce)\n    }\n  }\n\n  /**\n   * Update editor options.\n   *\n   * @param options A list of options\n   */\n  public setOptions(options: Partial<EditorOptions> = {}): void {\n    this.options = {\n      ...this.options,\n      ...options,\n    }\n\n    if (!this.editorView || !this.state || this.isDestroyed) {\n      return\n    }\n\n    if (this.options.editorProps) {\n      this.view.setProps(this.options.editorProps)\n    }\n\n    this.view.updateState(this.state)\n  }\n\n  /**\n   * Update editable state of the editor.\n   */\n  public setEditable(editable: boolean, emitUpdate = true): void {\n    this.setOptions({ editable })\n\n    if (emitUpdate) {\n      this.emit('update', { editor: this, transaction: this.state.tr, appendedTransactions: [] })\n    }\n  }\n\n  /**\n   * Returns whether the editor is editable.\n   */\n  public get isEditable(): boolean {\n    // since plugins are applied after creating the view\n    // `editable` is always `true` for one tick.\n    // thats why we also have to check for `options.editable`\n    return this.options.editable && this.view && this.view.editable\n  }\n\n  /**\n   * Returns the editor view.\n   */\n  public get view(): EditorView {\n    if (this.editorView) {\n      return this.editorView\n    }\n\n    return new Proxy(\n      {\n        state: this.editorState,\n        updateState: (state: EditorState): ReturnType<EditorView['updateState']> => {\n          this.editorState = state\n        },\n        dispatch: (tr: Transaction): ReturnType<EditorView['dispatch']> => {\n          this.dispatchTransaction(tr)\n        },\n\n        // Stub some commonly accessed properties to prevent errors\n        composing: false,\n        dragging: null,\n        editable: true,\n        isDestroyed: false,\n      } as EditorView,\n      {\n        get: (obj, key) => {\n          if (this.editorView) {\n            // If the editor view is available, but the caller has a stale reference to the proxy,\n            // Just return what the editor view has.\n            return this.editorView[key as keyof EditorView]\n          }\n          // Specifically always return the most recent editorState\n          if (key === 'state') {\n            return this.editorState\n          }\n          if (key in obj) {\n            return Reflect.get(obj, key)\n          }\n\n          // We throw an error here, because we know the view is not available\n          throw new Error(\n            `[tiptap error]: The editor view is not available. Cannot access view['${key as string}']. The editor may not be mounted yet.`,\n          )\n        },\n      },\n    ) as EditorView\n  }\n\n  /**\n   * Returns the editor state.\n   */\n  public get state(): EditorState {\n    if (this.editorView) {\n      this.editorState = this.view.state\n    }\n\n    return this.editorState\n  }\n\n  /**\n   * Register a ProseMirror plugin.\n   *\n   * @param plugin A ProseMirror plugin\n   * @param handlePlugins Control how to merge the plugin into the existing plugins.\n   * @returns The new editor state\n   */\n  public registerPlugin(\n    plugin: Plugin,\n    handlePlugins?: (newPlugin: Plugin, plugins: Plugin[]) => Plugin[],\n  ): EditorState {\n    const plugins = isFunction(handlePlugins)\n      ? handlePlugins(plugin, [...this.state.plugins])\n      : [...this.state.plugins, plugin]\n\n    const state = this.state.reconfigure({ plugins })\n\n    this.view.updateState(state)\n\n    return state\n  }\n\n  /**\n   * Unregister a ProseMirror plugin.\n   *\n   * @param nameOrPluginKeyToRemove The plugins name\n   * @returns The new editor state or undefined if the editor is destroyed\n   */\n  public unregisterPlugin(\n    nameOrPluginKeyToRemove: string | PluginKey | (string | PluginKey)[],\n  ): EditorState | undefined {\n    if (this.isDestroyed) {\n      return undefined\n    }\n\n    const prevPlugins = this.state.plugins\n    let plugins = prevPlugins\n\n    ;([] as (string | PluginKey)[]).concat(nameOrPluginKeyToRemove).forEach(nameOrPluginKey => {\n      // @ts-ignore\n      const name = typeof nameOrPluginKey === 'string' ? `${nameOrPluginKey}$` : nameOrPluginKey.key\n\n      // @ts-ignore\n      plugins = plugins.filter(plugin => !plugin.key.startsWith(name))\n    })\n\n    if (prevPlugins.length === plugins.length) {\n      // No plugin was removed, so we dont need to update the state\n      return undefined\n    }\n\n    const state = this.state.reconfigure({\n      plugins,\n    })\n\n    this.view.updateState(state)\n\n    return state\n  }\n\n  /**\n   * Creates an extension manager.\n   */\n  private createExtensionManager(): void {\n    const coreExtensions = this.options.enableCoreExtensions\n      ? [\n          Editable,\n          ClipboardTextSerializer.configure({\n            blockSeparator: this.options.coreExtensionOptions?.clipboardTextSerializer?.blockSeparator,\n          }),\n          Commands,\n          FocusEvents,\n          Keymap,\n          Tabindex,\n          Drop,\n          Paste,\n          Delete,\n          TextDirection.configure({\n            direction: this.options.textDirection,\n          }),\n        ].filter(ext => {\n          if (typeof this.options.enableCoreExtensions === 'object') {\n            return (\n              this.options.enableCoreExtensions[ext.name as keyof typeof this.options.enableCoreExtensions] !== false\n            )\n          }\n          return true\n        })\n      : []\n    const allExtensions = [...coreExtensions, ...this.options.extensions].filter(extension => {\n      return ['extension', 'node', 'mark'].includes(extension?.type)\n    })\n\n    this.extensionManager = new ExtensionManager(allExtensions, this)\n  }\n\n  /**\n   * Creates an command manager.\n   */\n  private createCommandManager(): void {\n    this.commandManager = new CommandManager({\n      editor: this,\n    })\n  }\n\n  /**\n   * Creates a ProseMirror schema.\n   */\n  private createSchema(): void {\n    this.schema = this.extensionManager.schema\n  }\n\n  /**\n   * Creates the initial document.\n   */\n  private createDoc(): ProseMirrorNode {\n    let doc: ProseMirrorNode\n\n    try {\n      doc = createDocument(this.options.content, this.schema, this.options.parseOptions, {\n        errorOnInvalidContent: this.options.enableContentCheck,\n      })\n    } catch (e) {\n      if (\n        !(e instanceof Error) ||\n        !['[tiptap error]: Invalid JSON content', '[tiptap error]: Invalid HTML content'].includes(e.message)\n      ) {\n        // Not the content error we were expecting\n        throw e\n      }\n      this.emit('contentError', {\n        editor: this,\n        error: e as Error,\n        disableCollaboration: () => {\n          if (\n            'collaboration' in this.storage &&\n            typeof this.storage.collaboration === 'object' &&\n            this.storage.collaboration\n          ) {\n            ;(this.storage.collaboration as any).isDisabled = true\n          }\n          // To avoid syncing back invalid content, reinitialize the extensions without the collaboration extension\n          this.options.extensions = this.options.extensions.filter(extension => extension.name !== 'collaboration')\n\n          // Restart the initialization process by recreating the extension manager with the new set of extensions\n          this.createExtensionManager()\n        },\n      })\n\n      // Content is invalid, but attempt to create it anyway, stripping out the invalid parts\n      doc = createDocument(this.options.content, this.schema, this.options.parseOptions, {\n        errorOnInvalidContent: false,\n      })\n    }\n    return doc\n  }\n\n  /**\n   * Creates a ProseMirror view.\n   */\n  private createView(element: NonNullable<EditorOptions['element']>): void {\n    const { editorProps, enableExtensionDispatchTransaction } = this.options\n    // If a user provided a custom `dispatchTransaction` through `editorProps`,\n    // we use that as the base dispatch function.\n    // Otherwise, we use Tiptap's internal `dispatchTransaction` method.\n    const baseDispatch = (editorProps as DirectEditorProps).dispatchTransaction || this.dispatchTransaction.bind(this)\n    const dispatch = enableExtensionDispatchTransaction\n      ? this.extensionManager.dispatchTransaction(baseDispatch)\n      : baseDispatch\n\n    // Compose transformPastedHTML from extensions and user-provided editorProps\n    const baseTransformPastedHTML = (editorProps as DirectEditorProps).transformPastedHTML\n    const transformPastedHTML = this.extensionManager.transformPastedHTML(baseTransformPastedHTML)\n\n    this.editorView = new EditorView(element, {\n      ...editorProps,\n      attributes: {\n        // add `role=\"textbox\"` to the editor element\n        role: 'textbox',\n        ...editorProps?.attributes,\n      },\n      dispatchTransaction: dispatch,\n      transformPastedHTML,\n      state: this.editorState,\n      markViews: this.extensionManager.markViews,\n      nodeViews: this.extensionManager.nodeViews,\n    })\n\n    // `editor.view` is not yet available at this time.\n    // Therefore we will add all plugins and node views directly afterwards.\n    const newState = this.state.reconfigure({\n      plugins: this.extensionManager.plugins,\n    })\n\n    this.view.updateState(newState)\n\n    this.prependClass()\n    this.injectCSS()\n\n    // Lets store the editor instance in the DOM element.\n    // So well have access to it for tests.\n    // @ts-ignore\n    const dom = this.view.dom as TiptapEditorHTMLElement\n\n    dom.editor = this\n  }\n\n  /**\n   * Creates all node and mark views.\n   */\n  public createNodeViews(): void {\n    if (this.view.isDestroyed) {\n      return\n    }\n\n    this.view.setProps({\n      markViews: this.extensionManager.markViews,\n      nodeViews: this.extensionManager.nodeViews,\n    })\n  }\n\n  /**\n   * Prepend class name to element.\n   */\n  public prependClass(): void {\n    this.view.dom.className = `${this.className} ${this.view.dom.className}`\n  }\n\n  public isCapturingTransaction = false\n\n  private capturedTransaction: Transaction | null = null\n\n  public captureTransaction(fn: () => void) {\n    this.isCapturingTransaction = true\n    fn()\n    this.isCapturingTransaction = false\n\n    const tr = this.capturedTransaction\n\n    this.capturedTransaction = null\n\n    return tr\n  }\n\n  /**\n   * The callback over which to send transactions (state updates) produced by the view.\n   *\n   * @param transaction An editor state transaction\n   */\n  private dispatchTransaction(transaction: Transaction): void {\n    // if the editor / the view of the editor was destroyed\n    // the transaction should not be dispatched as there is no view anymore.\n    if (this.view.isDestroyed) {\n      return\n    }\n\n    if (this.isCapturingTransaction) {\n      if (!this.capturedTransaction) {\n        this.capturedTransaction = transaction\n\n        return\n      }\n\n      transaction.steps.forEach(step => this.capturedTransaction?.step(step))\n\n      return\n    }\n\n    // Apply transaction and get resulting state and transactions\n    const { state, transactions } = this.state.applyTransaction(transaction)\n    const selectionHasChanged = !this.state.selection.eq(state.selection)\n    const rootTrWasApplied = transactions.includes(transaction)\n    const prevState = this.state\n\n    this.emit('beforeTransaction', {\n      editor: this,\n      transaction,\n      nextState: state,\n    })\n\n    // If transaction was filtered out, we can return early\n    if (!rootTrWasApplied) {\n      return\n    }\n\n    this.view.updateState(state)\n\n    // Emit transaction event with appended transactions info\n    this.emit('transaction', {\n      editor: this,\n      transaction,\n      appendedTransactions: transactions.slice(1),\n    })\n\n    if (selectionHasChanged) {\n      this.emit('selectionUpdate', {\n        editor: this,\n        transaction,\n      })\n    }\n\n    // Only emit the latest between focus and blur events\n    const mostRecentFocusTr = transactions.findLast(tr => tr.getMeta('focus') || tr.getMeta('blur'))\n    const focus = mostRecentFocusTr?.getMeta('focus')\n    const blur = mostRecentFocusTr?.getMeta('blur')\n\n    if (focus) {\n      this.emit('focus', {\n        editor: this,\n        event: focus.event,\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        transaction: mostRecentFocusTr!,\n      })\n    }\n\n    if (blur) {\n      this.emit('blur', {\n        editor: this,\n        event: blur.event,\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        transaction: mostRecentFocusTr!,\n      })\n    }\n\n    // Compare states for update event\n    if (\n      transaction.getMeta('preventUpdate') ||\n      !transactions.some(tr => tr.docChanged) ||\n      prevState.doc.eq(state.doc)\n    ) {\n      return\n    }\n\n    this.emit('update', {\n      editor: this,\n      transaction,\n      appendedTransactions: transactions.slice(1),\n    })\n  }\n\n  /**\n   * Get attributes of the currently selected node or mark.\n   */\n  public getAttributes(nameOrType: string | NodeType | MarkType): Record<string, any> {\n    return getAttributes(this.state, nameOrType)\n  }\n\n  /**\n   * Returns if the currently selected node or mark is active.\n   *\n   * @param name Name of the node or mark\n   * @param attributes Attributes of the node or mark\n   */\n  public isActive(name: string, attributes?: {}): boolean\n  public isActive(attributes: {}): boolean\n  public isActive(nameOrAttributes: string, attributesOrUndefined?: {}): boolean {\n    const name = typeof nameOrAttributes === 'string' ? nameOrAttributes : null\n\n    const attributes = typeof nameOrAttributes === 'string' ? attributesOrUndefined : nameOrAttributes\n\n    return isActive(this.state, name, attributes)\n  }\n\n  /**\n   * Get the document as JSON.\n   */\n  public getJSON(): DocumentType<\n    Record<string, any> | undefined,\n    TNodeType<string, undefined | Record<string, any>, any, (TNodeType | TTextType)[]>[]\n  > {\n    return this.state.doc.toJSON()\n  }\n\n  /**\n   * Get the document as HTML.\n   */\n  public getHTML(): string {\n    return getHTMLFromFragment(this.state.doc.content, this.schema)\n  }\n\n  /**\n   * Get the document as text.\n   */\n  public getText(options?: { blockSeparator?: string; textSerializers?: Record<string, TextSerializer> }): string {\n    const { blockSeparator = '\\n\\n', textSerializers = {} } = options || {}\n\n    return getText(this.state.doc, {\n      blockSeparator,\n      textSerializers: {\n        ...getTextSerializersFromSchema(this.schema),\n        ...textSerializers,\n      },\n    })\n  }\n\n  /**\n   * Check if there is no content.\n   */\n  public get isEmpty(): boolean {\n    return isNodeEmpty(this.state.doc)\n  }\n\n  /**\n   * Destroy the editor.\n   */\n  public destroy(): void {\n    this.emit('destroy')\n\n    this.unmount()\n\n    this.removeAllListeners()\n  }\n\n  /**\n   * Check if the editor is already destroyed.\n   */\n  public get isDestroyed(): boolean {\n    return this.editorView?.isDestroyed ?? true\n  }\n\n  public $node(selector: string, attributes?: { [key: string]: any }): NodePos | null {\n    return this.$doc?.querySelector(selector, attributes) || null\n  }\n\n  public $nodes(selector: string, attributes?: { [key: string]: any }): NodePos[] | null {\n    return this.$doc?.querySelectorAll(selector, attributes) || null\n  }\n\n  public $pos(pos: number) {\n    const $pos = this.state.doc.resolve(pos)\n\n    return new NodePos($pos, this)\n  }\n\n  get $doc() {\n    return this.$pos(0)\n  }\n\n  /**\n   * Returns a set of utilities for working with positions and ranges.\n   */\n  public utils: Utils = {\n    getUpdatedPosition,\n    createMappablePosition,\n  }\n}\n","type StringKeyOf<T> = Extract<keyof T, string>\ntype CallbackType<T extends Record<string, any>, EventName extends StringKeyOf<T>> = T[EventName] extends any[]\n  ? T[EventName]\n  : [T[EventName]]\ntype CallbackFunction<T extends Record<string, any>, EventName extends StringKeyOf<T>> = (\n  ...props: CallbackType<T, EventName>\n) => any\n\nexport class EventEmitter<T extends Record<string, any>> {\n  private callbacks: { [key: string]: Array<(...args: any[]) => void> } = {}\n\n  public on<EventName extends StringKeyOf<T>>(event: EventName, fn: CallbackFunction<T, EventName>): this {\n    if (!this.callbacks[event]) {\n      this.callbacks[event] = []\n    }\n\n    this.callbacks[event].push(fn)\n\n    return this\n  }\n\n  public emit<EventName extends StringKeyOf<T>>(event: EventName, ...args: CallbackType<T, EventName>): this {\n    const callbacks = this.callbacks[event]\n\n    if (callbacks) {\n      callbacks.forEach(callback => callback.apply(this, args))\n    }\n\n    return this\n  }\n\n  public off<EventName extends StringKeyOf<T>>(event: EventName, fn?: CallbackFunction<T, EventName>): this {\n    const callbacks = this.callbacks[event]\n\n    if (callbacks) {\n      if (fn) {\n        this.callbacks[event] = callbacks.filter(callback => callback !== fn)\n      } else {\n        delete this.callbacks[event]\n      }\n    }\n\n    return this\n  }\n\n  public once<EventName extends StringKeyOf<T>>(event: EventName, fn: CallbackFunction<T, EventName>): this {\n    const onceFn = (...args: CallbackType<T, EventName>) => {\n      this.off(event, onceFn)\n      fn.apply(this, args)\n    }\n\n    return this.on(event, onceFn)\n  }\n\n  public removeAllListeners(): void {\n    this.callbacks = {}\n  }\n}\n","import { keymap } from '@tiptap/pm/keymap'\nimport type { Schema } from '@tiptap/pm/model'\nimport type { Plugin, Transaction } from '@tiptap/pm/state'\nimport type { EditorView, MarkViewConstructor, NodeViewConstructor } from '@tiptap/pm/view'\n\nimport type { Editor } from './Editor.js'\nimport {\n  flattenExtensions,\n  getAttributesFromExtensions,\n  getExtensionField,\n  getNodeType,\n  getRenderedAttributes,\n  getSchemaByResolvedExtensions,\n  getSchemaTypeByName,\n  isExtensionRulesEnabled,\n  resolveExtensions,\n  sortExtensions,\n  splitExtensions,\n} from './helpers/index.js'\nimport { type MarkConfig, type NodeConfig, type Storage, getMarkType, updateMarkViewAttributes } from './index.js'\nimport { inputRulesPlugin } from './InputRule.js'\nimport { Mark } from './Mark.js'\nimport { pasteRulesPlugin } from './PasteRule.js'\nimport type { AnyConfig, Extensions, RawCommands } from './types.js'\nimport { callOrReturn } from './utilities/callOrReturn.js'\n\nexport class ExtensionManager {\n  editor: Editor\n\n  schema: Schema\n\n  /**\n   * A flattened and sorted array of all extensions\n   */\n  extensions: Extensions\n\n  /**\n   * A non-flattened array of base extensions (no sub-extensions)\n   */\n  baseExtensions: Extensions\n\n  splittableMarks: string[] = []\n\n  constructor(extensions: Extensions, editor: Editor) {\n    this.editor = editor\n    this.baseExtensions = extensions\n    this.extensions = resolveExtensions(extensions)\n    this.schema = getSchemaByResolvedExtensions(this.extensions, editor)\n    this.setupExtensions()\n  }\n\n  static resolve = resolveExtensions\n\n  static sort = sortExtensions\n\n  static flatten = flattenExtensions\n\n  /**\n   * Get all commands from the extensions.\n   * @returns An object with all commands where the key is the command name and the value is the command function\n   */\n  get commands(): RawCommands {\n    return this.extensions.reduce((commands, extension) => {\n      const context = {\n        name: extension.name,\n        options: extension.options,\n        storage: this.editor.extensionStorage[extension.name as keyof Storage],\n        editor: this.editor,\n        type: getSchemaTypeByName(extension.name, this.schema),\n      }\n\n      const addCommands = getExtensionField<AnyConfig['addCommands']>(extension, 'addCommands', context)\n\n      if (!addCommands) {\n        return commands\n      }\n\n      return {\n        ...commands,\n        ...addCommands(),\n      }\n    }, {} as RawCommands)\n  }\n\n  /**\n   * Get all registered Prosemirror plugins from the extensions.\n   * @returns An array of Prosemirror plugins\n   */\n  get plugins(): Plugin[] {\n    const { editor } = this\n\n    // With ProseMirror, first plugins within an array are executed first.\n    // In Tiptap, we provide the ability to override plugins,\n    // so it feels more natural to run plugins at the end of an array first.\n    // Thats why we have to reverse the `extensions` array and sort again\n    // based on the `priority` option.\n    const extensions = sortExtensions([...this.extensions].reverse())\n\n    const allPlugins = extensions.flatMap(extension => {\n      const context = {\n        name: extension.name,\n        options: extension.options,\n        storage: this.editor.extensionStorage[extension.name as keyof Storage],\n        editor,\n        type: getSchemaTypeByName(extension.name, this.schema),\n      }\n\n      const plugins: Plugin[] = []\n\n      const addKeyboardShortcuts = getExtensionField<AnyConfig['addKeyboardShortcuts']>(\n        extension,\n        'addKeyboardShortcuts',\n        context,\n      )\n\n      let defaultBindings: Record<string, () => boolean> = {}\n\n      // bind exit handling\n      if (extension.type === 'mark' && getExtensionField<MarkConfig['exitable']>(extension, 'exitable', context)) {\n        defaultBindings.ArrowRight = () => Mark.handleExit({ editor, mark: extension as Mark })\n      }\n\n      if (addKeyboardShortcuts) {\n        const bindings = Object.fromEntries(\n          Object.entries(addKeyboardShortcuts()).map(([shortcut, method]) => {\n            return [shortcut, () => method({ editor })]\n          }),\n        )\n\n        defaultBindings = { ...defaultBindings, ...bindings }\n      }\n\n      const keyMapPlugin = keymap(defaultBindings)\n\n      plugins.push(keyMapPlugin)\n\n      const addInputRules = getExtensionField<AnyConfig['addInputRules']>(extension, 'addInputRules', context)\n\n      if (isExtensionRulesEnabled(extension, editor.options.enableInputRules) && addInputRules) {\n        const rules = addInputRules()\n\n        if (rules && rules.length) {\n          const inputResult = inputRulesPlugin({\n            editor,\n            rules,\n          })\n\n          const inputPlugins = Array.isArray(inputResult) ? inputResult : [inputResult]\n\n          plugins.push(...inputPlugins)\n        }\n      }\n\n      const addPasteRules = getExtensionField<AnyConfig['addPasteRules']>(extension, 'addPasteRules', context)\n\n      if (isExtensionRulesEnabled(extension, editor.options.enablePasteRules) && addPasteRules) {\n        const rules = addPasteRules()\n\n        if (rules && rules.length) {\n          const pasteRules = pasteRulesPlugin({ editor, rules })\n\n          plugins.push(...pasteRules)\n        }\n      }\n\n      const addProseMirrorPlugins = getExtensionField<AnyConfig['addProseMirrorPlugins']>(\n        extension,\n        'addProseMirrorPlugins',\n        context,\n      )\n\n      if (addProseMirrorPlugins) {\n        const proseMirrorPlugins = addProseMirrorPlugins()\n\n        plugins.push(...proseMirrorPlugins)\n      }\n\n      return plugins\n    })\n\n    return allPlugins\n  }\n\n  /**\n   * Get all attributes from the extensions.\n   * @returns An array of attributes\n   */\n  get attributes() {\n    return getAttributesFromExtensions(this.extensions)\n  }\n\n  /**\n   * Get all node views from the extensions.\n   * @returns An object with all node views where the key is the node name and the value is the node view function\n   */\n  get nodeViews(): Record<string, NodeViewConstructor> {\n    const { editor } = this\n    const { nodeExtensions } = splitExtensions(this.extensions)\n\n    return Object.fromEntries(\n      nodeExtensions\n        .filter(extension => !!getExtensionField(extension, 'addNodeView'))\n        .map(extension => {\n          const extensionAttributes = this.attributes.filter(attribute => attribute.type === extension.name)\n          const context = {\n            name: extension.name,\n            options: extension.options,\n            storage: this.editor.extensionStorage[extension.name as keyof Storage],\n            editor,\n            type: getNodeType(extension.name, this.schema),\n          }\n          const addNodeView = getExtensionField<NodeConfig['addNodeView']>(extension, 'addNodeView', context)\n\n          if (!addNodeView) {\n            return []\n          }\n\n          const nodeViewResult = addNodeView()\n\n          if (!nodeViewResult) {\n            return []\n          }\n\n          const nodeview: NodeViewConstructor = (node, view, getPos, decorations, innerDecorations) => {\n            const HTMLAttributes = getRenderedAttributes(node, extensionAttributes)\n\n            return nodeViewResult({\n              // pass-through\n              node,\n              view,\n              getPos: getPos as () => number,\n              decorations,\n              innerDecorations,\n              // tiptap-specific\n              editor,\n              extension,\n              HTMLAttributes,\n            })\n          }\n\n          return [extension.name, nodeview]\n        }),\n    )\n  }\n\n  /**\n   * Get the composed dispatchTransaction function from all extensions.\n   * @param baseDispatch The base dispatch function (e.g. from the editor or user props)\n   * @returns A composed dispatch function\n   */\n  dispatchTransaction(baseDispatch: (tr: Transaction) => void): (tr: Transaction) => void {\n    const { editor } = this\n    const extensions = sortExtensions([...this.extensions].reverse())\n\n    return extensions.reduceRight((next, extension) => {\n      const context = {\n        name: extension.name,\n        options: extension.options,\n        storage: this.editor.extensionStorage[extension.name as keyof Storage],\n        editor,\n        type: getSchemaTypeByName(extension.name, this.schema),\n      }\n\n      const dispatchTransaction = getExtensionField<AnyConfig['dispatchTransaction']>(\n        extension,\n        'dispatchTransaction',\n        context,\n      )\n\n      if (!dispatchTransaction) {\n        return next\n      }\n\n      return (transaction: Transaction) => {\n        dispatchTransaction.call(context, { transaction, next })\n      }\n    }, baseDispatch)\n  }\n\n  /**\n   * Get the composed transformPastedHTML function from all extensions.\n   * @param baseTransform The base transform function (e.g. from the editor props)\n   * @returns A composed transform function that chains all extension transforms\n   */\n  transformPastedHTML(\n    baseTransform?: (html: string, view?: any) => string,\n  ): (html: string, view?: EditorView) => string {\n    const { editor } = this\n    const extensions = sortExtensions([...this.extensions])\n\n    return extensions.reduce(\n      (transform, extension) => {\n        const context = {\n          name: extension.name,\n          options: extension.options,\n          storage: this.editor.extensionStorage[extension.name as keyof Storage],\n          editor,\n          type: getSchemaTypeByName(extension.name, this.schema),\n        }\n\n        const extensionTransform = getExtensionField<AnyConfig['transformPastedHTML']>(\n          extension,\n          'transformPastedHTML',\n          context,\n        )\n\n        if (!extensionTransform) {\n          return transform\n        }\n\n        return (html: string, view?: any) => {\n          // Chain the transforms: pass the result of the previous transform to the next\n          const transformedHtml = transform(html, view)\n          return extensionTransform.call(context, transformedHtml)\n        }\n      },\n      baseTransform || ((html: string) => html),\n    )\n  }\n\n  get markViews(): Record<string, MarkViewConstructor> {\n    const { editor } = this\n    const { markExtensions } = splitExtensions(this.extensions)\n\n    return Object.fromEntries(\n      markExtensions\n        .filter(extension => !!getExtensionField(extension, 'addMarkView'))\n        .map(extension => {\n          const extensionAttributes = this.attributes.filter(attribute => attribute.type === extension.name)\n          const context = {\n            name: extension.name,\n            options: extension.options,\n            storage: this.editor.extensionStorage[extension.name as keyof Storage],\n            editor,\n            type: getMarkType(extension.name, this.schema),\n          }\n          const addMarkView = getExtensionField<MarkConfig['addMarkView']>(extension, 'addMarkView', context)\n\n          if (!addMarkView) {\n            return []\n          }\n\n          const markView: MarkViewConstructor = (mark, view, inline) => {\n            const HTMLAttributes = getRenderedAttributes(mark, extensionAttributes)\n\n            return addMarkView()({\n              // pass-through\n              mark,\n              view,\n              inline,\n              // tiptap-specific\n              editor,\n              extension,\n              HTMLAttributes,\n              updateAttributes: (attrs: Record<string, any>) => {\n                updateMarkViewAttributes(mark, editor, attrs)\n              },\n            })\n          }\n\n          return [extension.name, markView]\n        }),\n    )\n  }\n\n  /**\n   * Go through all extensions, create extension storages & setup marks\n   * & bind editor event listener.\n   */\n  private setupExtensions() {\n    const extensions = this.extensions\n    // re-initialize the extension storage object instance\n    this.editor.extensionStorage = Object.fromEntries(\n      extensions.map(extension => [extension.name, extension.storage]),\n    ) as unknown as Storage\n\n    extensions.forEach(extension => {\n      const context = {\n        name: extension.name,\n        options: extension.options,\n        storage: this.editor.extensionStorage[extension.name as keyof Storage],\n        editor: this.editor,\n        type: getSchemaTypeByName(extension.name, this.schema),\n      }\n\n      if (extension.type === 'mark') {\n        const keepOnSplit = callOrReturn(getExtensionField(extension, 'keepOnSplit', context)) ?? true\n\n        if (keepOnSplit) {\n          this.splittableMarks.push(extension.name)\n        }\n      }\n\n      const onBeforeCreate = getExtensionField<AnyConfig['onBeforeCreate']>(extension, 'onBeforeCreate', context)\n      const onCreate = getExtensionField<AnyConfig['onCreate']>(extension, 'onCreate', context)\n      const onUpdate = getExtensionField<AnyConfig['onUpdate']>(extension, 'onUpdate', context)\n      const onSelectionUpdate = getExtensionField<AnyConfig['onSelectionUpdate']>(\n        extension,\n        'onSelectionUpdate',\n        context,\n      )\n      const onTransaction = getExtensionField<AnyConfig['onTransaction']>(extension, 'onTransaction', context)\n      const onFocus = getExtensionField<AnyConfig['onFocus']>(extension, 'onFocus', context)\n      const onBlur = getExtensionField<AnyConfig['onBlur']>(extension, 'onBlur', context)\n      const onDestroy = getExtensionField<AnyConfig['onDestroy']>(extension, 'onDestroy', context)\n\n      if (onBeforeCreate) {\n        this.editor.on('beforeCreate', onBeforeCreate)\n      }\n\n      if (onCreate) {\n        this.editor.on('create', onCreate)\n      }\n\n      if (onUpdate) {\n        this.editor.on('update', onUpdate)\n      }\n\n      if (onSelectionUpdate) {\n        this.editor.on('selectionUpdate', onSelectionUpdate)\n      }\n\n      if (onTransaction) {\n        this.editor.on('transaction', onTransaction)\n      }\n\n      if (onFocus) {\n        this.editor.on('focus', onFocus)\n      }\n\n      if (onBlur) {\n        this.editor.on('blur', onBlur)\n      }\n\n      if (onDestroy) {\n        this.editor.on('destroy', onDestroy)\n      }\n    })\n  }\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\nimport { Fragment } from '@tiptap/pm/model'\nimport type { EditorState, TextSelection } from '@tiptap/pm/state'\nimport { Plugin } from '@tiptap/pm/state'\n\nimport { CommandManager } from './CommandManager.js'\nimport type { Editor } from './Editor.js'\nimport { createChainableState } from './helpers/createChainableState.js'\nimport { getHTMLFromFragment } from './helpers/getHTMLFromFragment.js'\nimport { getTextContentFromNodes } from './helpers/getTextContentFromNodes.js'\nimport type { CanCommands, ChainedCommands, ExtendedRegExpMatchArray, Range, SingleCommands } from './types.js'\nimport { isRegExp } from './utilities/isRegExp.js'\n\nexport type InputRuleMatch = {\n  index: number\n  text: string\n  replaceWith?: string\n  match?: RegExpMatchArray\n  data?: Record<string, any>\n}\n\nexport type InputRuleFinder = RegExp | ((text: string) => InputRuleMatch | null)\n\nexport class InputRule {\n  find: InputRuleFinder\n\n  handler: (props: {\n    state: EditorState\n    range: Range\n    match: ExtendedRegExpMatchArray\n    commands: SingleCommands\n    chain: () => ChainedCommands\n    can: () => CanCommands\n  }) => void | null\n\n  undoable: boolean\n\n  constructor(config: {\n    find: InputRuleFinder\n    handler: (props: {\n      state: EditorState\n      range: Range\n      match: ExtendedRegExpMatchArray\n      commands: SingleCommands\n      chain: () => ChainedCommands\n      can: () => CanCommands\n    }) => void | null\n    undoable?: boolean\n  }) {\n    this.find = config.find\n    this.handler = config.handler\n    this.undoable = config.undoable ?? true\n  }\n}\n\nconst inputRuleMatcherHandler = (text: string, find: InputRuleFinder): ExtendedRegExpMatchArray | null => {\n  if (isRegExp(find)) {\n    return find.exec(text)\n  }\n\n  const inputRuleMatch = find(text)\n\n  if (!inputRuleMatch) {\n    return null\n  }\n\n  const result: ExtendedRegExpMatchArray = [inputRuleMatch.text]\n\n  result.index = inputRuleMatch.index\n  result.input = text\n  result.data = inputRuleMatch.data\n\n  if (inputRuleMatch.replaceWith) {\n    if (!inputRuleMatch.text.includes(inputRuleMatch.replaceWith)) {\n      console.warn('[tiptap warn]: \"inputRuleMatch.replaceWith\" must be part of \"inputRuleMatch.text\".')\n    }\n\n    result.push(inputRuleMatch.replaceWith)\n  }\n\n  return result\n}\n\nfunction run(config: {\n  editor: Editor\n  from: number\n  to: number\n  text: string\n  rules: InputRule[]\n  plugin: Plugin\n}): boolean {\n  const { editor, from, to, text, rules, plugin } = config\n  const { view } = editor\n\n  if (view.composing) {\n    return false\n  }\n\n  const $from = view.state.doc.resolve(from)\n\n  if (\n    // check for code node\n    $from.parent.type.spec.code ||\n    // check for code mark\n    !!($from.nodeBefore || $from.nodeAfter)?.marks.find(mark => mark.type.spec.code)\n  ) {\n    return false\n  }\n\n  let matched = false\n\n  const textBefore = getTextContentFromNodes($from) + text\n\n  rules.forEach(rule => {\n    if (matched) {\n      return\n    }\n\n    const match = inputRuleMatcherHandler(textBefore, rule.find)\n\n    if (!match) {\n      return\n    }\n\n    const tr = view.state.tr\n    const state = createChainableState({\n      state: view.state,\n      transaction: tr,\n    })\n    const range = {\n      from: from - (match[0].length - text.length),\n      to,\n    }\n\n    const { commands, chain, can } = new CommandManager({\n      editor,\n      state,\n    })\n\n    const handler = rule.handler({\n      state,\n      range,\n      match,\n      commands,\n      chain,\n      can,\n    })\n\n    // stop if there are no changes\n    if (handler === null || !tr.steps.length) {\n      return\n    }\n\n    // store transform as meta data\n    // so we can undo input rules within the `undoInputRules` command\n    if (rule.undoable) {\n      tr.setMeta(plugin, {\n        transform: tr,\n        from,\n        to,\n        text,\n      })\n    }\n\n    view.dispatch(tr)\n    matched = true\n  })\n\n  return matched\n}\n\n/**\n * Create an input rules plugin. When enabled, it will cause text\n * input that matches any of the given rules to trigger the rules\n * action.\n */\nexport function inputRulesPlugin(props: { editor: Editor; rules: InputRule[] }): Plugin {\n  const { editor, rules } = props\n  const plugin = new Plugin({\n    state: {\n      init() {\n        return null\n      },\n      apply(tr, prev, state) {\n        const stored = tr.getMeta(plugin)\n\n        if (stored) {\n          return stored\n        }\n\n        // if InputRule is triggered by insertContent()\n        const simulatedInputMeta = tr.getMeta('applyInputRules') as\n          | undefined\n          | {\n              from: number\n              text: string | ProseMirrorNode | Fragment\n            }\n        const isSimulatedInput = !!simulatedInputMeta\n\n        if (isSimulatedInput) {\n          setTimeout(() => {\n            let { text } = simulatedInputMeta\n\n            if (typeof text === 'string') {\n              text = text as string\n            } else {\n              text = getHTMLFromFragment(Fragment.from(text), state.schema)\n            }\n\n            const { from } = simulatedInputMeta\n            const to = from + text.length\n\n            run({\n              editor,\n              from,\n              to,\n              text,\n              rules,\n              plugin,\n            })\n          })\n        }\n\n        return tr.selectionSet || tr.docChanged ? null : prev\n      },\n    },\n\n    props: {\n      handleTextInput(view, from, to, text) {\n        return run({\n          editor,\n          from,\n          to,\n          text,\n          rules,\n          plugin,\n        })\n      },\n\n      handleDOMEvents: {\n        compositionend: view => {\n          setTimeout(() => {\n            const { $cursor } = view.state.selection as TextSelection\n\n            if ($cursor) {\n              run({\n                editor,\n                from: $cursor.pos,\n                to: $cursor.pos,\n                text: '',\n                rules,\n                plugin,\n              })\n            }\n          })\n\n          return false\n        },\n      },\n\n      // add support for input rules to trigger on enter\n      // this is useful for example for code blocks\n      handleKeyDown(view, event) {\n        if (event.key !== 'Enter') {\n          return false\n        }\n\n        const { $cursor } = view.state.selection as TextSelection\n\n        if ($cursor) {\n          return run({\n            editor,\n            from: $cursor.pos,\n            to: $cursor.pos,\n            text: '\\n',\n            rules,\n            plugin,\n          })\n        }\n\n        return false\n      },\n    },\n\n    // @ts-ignore\n    isInputRules: true,\n  }) as Plugin\n\n  return plugin\n}\n","// see: https://github.com/mesqueeb/is-what/blob/88d6e4ca92fb2baab6003c54e02eedf4e729e5ab/src/index.ts\n\nfunction getType(value: any): string {\n  return Object.prototype.toString.call(value).slice(8, -1)\n}\n\nexport function isPlainObject(value: any): value is Record<string, any> {\n  if (getType(value) !== 'Object') {\n    return false\n  }\n\n  return value.constructor === Object && Object.getPrototypeOf(value) === Object.prototype\n}\n","import { isPlainObject } from './isPlainObject.js'\n\nexport function mergeDeep(target: Record<string, any>, source: Record<string, any>): Record<string, any> {\n  const output = { ...target }\n\n  if (isPlainObject(target) && isPlainObject(source)) {\n    Object.keys(source).forEach(key => {\n      if (isPlainObject(source[key]) && isPlainObject(target[key])) {\n        output[key] = mergeDeep(target[key], source[key])\n      } else {\n        output[key] = source[key]\n      }\n    })\n  }\n\n  return output\n}\n","import type { Plugin } from '@tiptap/pm/state'\n\nimport type { Editor } from './Editor.js'\nimport { getExtensionField } from './helpers/getExtensionField.js'\nimport type { ExtensionConfig, MarkConfig, NodeConfig } from './index.js'\nimport type { InputRule } from './InputRule.js'\nimport type { Mark } from './Mark.js'\nimport type { Node } from './Node.js'\nimport type { PasteRule } from './PasteRule.js'\nimport type {\n  AnyConfig,\n  DispatchTransactionProps,\n  EditorEvents,\n  Extensions,\n  GlobalAttributes,\n  JSONContent,\n  KeyboardShortcutCommand,\n  MarkdownParseHelpers,\n  MarkdownParseResult,\n  MarkdownRendererHelpers,\n  MarkdownToken,\n  MarkdownTokenizer,\n  ParentConfig,\n  RawCommands,\n  RenderContext,\n} from './types.js'\nimport { callOrReturn } from './utilities/callOrReturn.js'\nimport { mergeDeep } from './utilities/mergeDeep.js'\n\nexport interface ExtendableConfig<\n  Options = any,\n  Storage = any,\n  Config extends\n    | ExtensionConfig<Options, Storage>\n    | NodeConfig<Options, Storage>\n    | MarkConfig<Options, Storage>\n    | ExtendableConfig<Options, Storage> = ExtendableConfig<Options, Storage, any, any>,\n  PMType = any,\n> {\n  /**\n   * The extension name - this must be unique.\n   * It will be used to identify the extension.\n   *\n   * @example 'myExtension'\n   */\n  name: string\n\n  /**\n   * The priority of your extension. The higher, the earlier it will be called\n   * and will take precedence over other extensions with a lower priority.\n   * @default 100\n   * @example 101\n   */\n  priority?: number\n\n  /**\n   * This method will add options to this extension\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#settings\n   * @example\n   * addOptions() {\n   *  return {\n   *    myOption: 'foo',\n   *    myOtherOption: 10,\n   * }\n   */\n  addOptions?: (this: { name: string; parent: ParentConfig<Config>['addOptions'] }) => Options\n\n  /**\n   * The default storage this extension can save data to.\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#storage\n   * @example\n   * defaultStorage: {\n   *   prefetchedUsers: [],\n   *   loading: false,\n   * }\n   */\n  addStorage?: (this: { name: string; options: Options; parent: ParentConfig<Config>['addStorage'] }) => Storage\n\n  /**\n   * This function adds globalAttributes to specific nodes.\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#global-attributes\n   * @example\n   * addGlobalAttributes() {\n   *   return [\n   *     {\n           // Extend the following extensions\n   *       types: [\n   *         'heading',\n   *         'paragraph',\n   *       ],\n   *       //  with those attributes\n   *       attributes: {\n   *         textAlign: {\n   *           default: 'left',\n   *           renderHTML: attributes => ({\n   *             style: `text-align: ${attributes.textAlign}`,\n   *           }),\n   *           parseHTML: element => element.style.textAlign || 'left',\n   *         },\n   *       },\n   *     },\n   *   ]\n   * }\n   */\n  addGlobalAttributes?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    extensions: (Node | Mark)[]\n    parent: ParentConfig<Config>['addGlobalAttributes']\n  }) => GlobalAttributes\n\n  /**\n   * This function adds commands to the editor\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#commands\n   * @example\n   * addCommands() {\n   *   return {\n   *     myCommand: () => ({ chain }) => chain().setMark('type', 'foo').run(),\n   *   }\n   * }\n   */\n  addCommands?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    editor: Editor\n    type: PMType\n    parent: ParentConfig<Config>['addCommands']\n  }) => Partial<RawCommands>\n\n  /**\n   * This function registers keyboard shortcuts.\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#keyboard-shortcuts\n   * @example\n   * addKeyboardShortcuts() {\n   *   return {\n   *     'Mod-l': () => this.editor.commands.toggleBulletList(),\n   *   }\n   * },\n   */\n  addKeyboardShortcuts?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    editor: Editor\n    type: PMType\n    parent: ParentConfig<Config>['addKeyboardShortcuts']\n  }) => {\n    [key: string]: KeyboardShortcutCommand\n  }\n\n  /**\n   * This function adds input rules to the editor.\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#input-rules\n   * @example\n   * addInputRules() {\n   *   return [\n   *     markInputRule({\n   *       find: inputRegex,\n   *       type: this.type,\n   *     }),\n   *   ]\n   * },\n   */\n  addInputRules?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    editor: Editor\n    type: PMType\n    parent: ParentConfig<Config>['addInputRules']\n  }) => InputRule[]\n\n  /**\n   * This function adds paste rules to the editor.\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#paste-rules\n   * @example\n   * addPasteRules() {\n   *   return [\n   *     markPasteRule({\n   *       find: pasteRegex,\n   *       type: this.type,\n   *     }),\n   *   ]\n   * },\n   */\n  addPasteRules?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    editor: Editor\n    type: PMType\n    parent: ParentConfig<Config>['addPasteRules']\n  }) => PasteRule[]\n\n  /**\n   * This function adds Prosemirror plugins to the editor\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#prosemirror-plugins\n   * @example\n   * addProseMirrorPlugins() {\n   *   return [\n   *     customPlugin(),\n   *   ]\n   * }\n   */\n  addProseMirrorPlugins?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    editor: Editor\n    type: PMType\n    parent: ParentConfig<Config>['addProseMirrorPlugins']\n  }) => Plugin[]\n\n  /**\n   * This function transforms pasted HTML content before it's parsed.\n   * Extensions can use this to modify or clean up pasted HTML.\n   * The transformations are chained - each extension's transform receives\n   * the output from the previous extension's transform.\n   * @see https://tiptap.dev/docs/editor/guide/custom-extensions#transform-pasted-html\n   * @example\n   * transformPastedHTML(html) {\n   *   // Remove all style attributes\n   *   return html.replace(/style=\"[^\"]*\"/g, '')\n   * }\n   */\n  transformPastedHTML?: (\n    this: {\n      name: string\n      options: Options\n      storage: Storage\n      editor: Editor\n      type: PMType\n      parent: ParentConfig<Config>['transformPastedHTML']\n    },\n    html: string,\n  ) => string\n\n  /**\n   * This function adds additional extensions to the editor. This is useful for\n   * building extension kits.\n   * @example\n   * addExtensions() {\n   *   return [\n   *     BulletList,\n   *     OrderedList,\n   *     ListItem\n   *   ]\n   * }\n   */\n  addExtensions?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    parent: ParentConfig<Config>['addExtensions']\n  }) => Extensions\n\n  /**\n   * The markdown token name\n   *\n   * This is the name of the token that this extension uses to parse and render markdown and comes from the Marked Lexer.\n   *\n   * @see https://github.com/markedjs/marked/blob/master/src/Tokens.ts\n   *\n   */\n  markdownTokenName?: string\n\n  /**\n   * The parse function used by the markdown parser to convert markdown tokens to ProseMirror nodes.\n   */\n  parseMarkdown?: (token: MarkdownToken, helpers: MarkdownParseHelpers) => MarkdownParseResult\n\n  /**\n   * The serializer function used by the markdown serializer to convert ProseMirror nodes to markdown tokens.\n   */\n  renderMarkdown?: (node: JSONContent, helpers: MarkdownRendererHelpers, ctx: RenderContext) => string\n\n  /**\n   * The markdown tokenizer responsible for turning a markdown string into tokens\n   *\n   * Custom tokenizers are only needed when you want to parse non-standard markdown token.\n   */\n  markdownTokenizer?: MarkdownTokenizer\n\n  /**\n   * Optional markdown options for indentation\n   */\n  markdownOptions?: {\n    /**\n     * Defines if this markdown element should indent it's child elements\n     */\n    indentsContent?: boolean\n  }\n\n  /**\n   * This function extends the schema of the node.\n   * @example\n   * extendNodeSchema() {\n   *   return {\n   *     group: 'inline',\n   *     selectable: false,\n   *   }\n   * }\n   */\n  extendNodeSchema?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          parent: ParentConfig<Config>['extendNodeSchema']\n        },\n        extension: Node,\n      ) => Record<string, any>)\n    | null\n\n  /**\n   * This function extends the schema of the mark.\n   * @example\n   * extendMarkSchema() {\n   *   return {\n   *     group: 'inline',\n   *     selectable: false,\n   *   }\n   * }\n   */\n  extendMarkSchema?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          parent: ParentConfig<Config>['extendMarkSchema']\n        },\n        extension: Mark,\n      ) => Record<string, any>)\n    | null\n\n  /**\n   * The editor is not ready yet.\n   */\n  onBeforeCreate?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['onBeforeCreate']\n        },\n        event: EditorEvents['beforeCreate'],\n      ) => void)\n    | null\n\n  /**\n   * The editor is ready.\n   */\n  onCreate?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['onCreate']\n        },\n        event: EditorEvents['create'],\n      ) => void)\n    | null\n\n  /**\n   * The content has changed.\n   */\n  onUpdate?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['onUpdate']\n        },\n        event: EditorEvents['update'],\n      ) => void)\n    | null\n\n  /**\n   * The selection has changed.\n   */\n  onSelectionUpdate?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['onSelectionUpdate']\n        },\n        event: EditorEvents['selectionUpdate'],\n      ) => void)\n    | null\n\n  /**\n   * The editor state has changed.\n   */\n  onTransaction?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['onTransaction']\n        },\n        event: EditorEvents['transaction'],\n      ) => void)\n    | null\n\n  /**\n   * The editor is focused.\n   */\n  onFocus?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['onFocus']\n        },\n        event: EditorEvents['focus'],\n      ) => void)\n    | null\n\n  /**\n   * The editor isnt focused anymore.\n   */\n  onBlur?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['onBlur']\n        },\n        event: EditorEvents['blur'],\n      ) => void)\n    | null\n\n  /**\n   * The editor is destroyed.\n   */\n  onDestroy?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['onDestroy']\n        },\n        event: EditorEvents['destroy'],\n      ) => void)\n    | null\n\n  /**\n   * This hook allows you to intercept and modify transactions before they are dispatched.\n   *\n   * Example\n   * ```ts\n   * dispatchTransaction({ transaction, next }) {\n   *   console.log('Dispatching transaction:', transaction)\n   *   next(transaction)\n   * }\n   * ```\n   *\n   * @param props - The dispatch transaction props\n   */\n  dispatchTransaction?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          editor: Editor\n          type: PMType\n          parent: ParentConfig<Config>['dispatchTransaction']\n        },\n        props: DispatchTransactionProps,\n      ) => void)\n    | null\n}\n\nexport class Extendable<\n  Options = any,\n  Storage = any,\n  Config = ExtensionConfig<Options, Storage> | NodeConfig<Options, Storage> | MarkConfig<Options, Storage>,\n> {\n  type = 'extendable'\n  parent: Extendable | null = null\n\n  child: Extendable | null = null\n\n  name = ''\n\n  config: Config = {\n    name: this.name,\n  } as Config\n\n  constructor(config: Partial<Config> = {}) {\n    this.config = {\n      ...this.config,\n      ...config,\n    }\n\n    this.name = (this.config as any).name\n  }\n\n  get options(): Options {\n    return {\n      ...(callOrReturn(\n        getExtensionField<AnyConfig['addOptions']>(this as any, 'addOptions', {\n          name: this.name,\n        }),\n      ) || {}),\n    }\n  }\n\n  get storage(): Readonly<Storage> {\n    return {\n      ...(callOrReturn(\n        getExtensionField<AnyConfig['addStorage']>(this as any, 'addStorage', {\n          name: this.name,\n          options: this.options,\n        }),\n      ) || {}),\n    }\n  }\n\n  configure(options: Partial<Options> = {}) {\n    const extension = this.extend<Options, Storage, Config>({\n      ...this.config,\n      addOptions: () => {\n        return mergeDeep(this.options as Record<string, any>, options) as Options\n      },\n    })\n\n    extension.name = this.name\n    extension.parent = this.parent\n\n    return extension\n  }\n\n  extend<\n    ExtendedOptions = Options,\n    ExtendedStorage = Storage,\n    ExtendedConfig =\n      | ExtensionConfig<ExtendedOptions, ExtendedStorage>\n      | NodeConfig<ExtendedOptions, ExtendedStorage>\n      | MarkConfig<ExtendedOptions, ExtendedStorage>,\n  >(extendedConfig: Partial<ExtendedConfig> = {}): Extendable<ExtendedOptions, ExtendedStorage> {\n    const extension = new (this.constructor as any)({ ...this.config, ...extendedConfig })\n\n    extension.parent = this\n    this.child = extension\n    extension.name = 'name' in extendedConfig ? extendedConfig.name : extension.parent.name\n\n    return extension\n  }\n}\n","import type { DOMOutputSpec, Mark as ProseMirrorMark, MarkSpec, MarkType } from '@tiptap/pm/model'\n\nimport type { Editor } from './Editor.js'\nimport type { ExtendableConfig } from './Extendable.js'\nimport { Extendable } from './Extendable.js'\nimport type { Attributes, MarkViewRenderer, ParentConfig } from './types.js'\n\nexport interface MarkConfig<Options = any, Storage = any>\n  extends ExtendableConfig<Options, Storage, MarkConfig<Options, Storage>, MarkType> {\n  /**\n   * Mark View\n   */\n  addMarkView?:\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        editor: Editor\n        type: MarkType\n        parent: ParentConfig<MarkConfig<Options, Storage>>['addMarkView']\n      }) => MarkViewRenderer)\n    | null\n\n  /**\n   * Keep mark after split node\n   */\n  keepOnSplit?: boolean | (() => boolean)\n\n  /**\n   * Inclusive\n   */\n  inclusive?:\n    | MarkSpec['inclusive']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<MarkConfig<Options, Storage>>['inclusive']\n        editor?: Editor\n      }) => MarkSpec['inclusive'])\n\n  /**\n   * Excludes\n   */\n  excludes?:\n    | MarkSpec['excludes']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<MarkConfig<Options, Storage>>['excludes']\n        editor?: Editor\n      }) => MarkSpec['excludes'])\n\n  /**\n   * Marks this Mark as exitable\n   */\n  exitable?: boolean | (() => boolean)\n\n  /**\n   * Group\n   */\n  group?:\n    | MarkSpec['group']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<MarkConfig<Options, Storage>>['group']\n        editor?: Editor\n      }) => MarkSpec['group'])\n\n  /**\n   * Spanning\n   */\n  spanning?:\n    | MarkSpec['spanning']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<MarkConfig<Options, Storage>>['spanning']\n        editor?: Editor\n      }) => MarkSpec['spanning'])\n\n  /**\n   * Code\n   */\n  code?:\n    | boolean\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<MarkConfig<Options, Storage>>['code']\n        editor?: Editor\n      }) => boolean)\n\n  /**\n   * Parse HTML\n   */\n  parseHTML?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    parent: ParentConfig<MarkConfig<Options, Storage>>['parseHTML']\n    editor?: Editor\n  }) => MarkSpec['parseDOM']\n\n  /**\n   * Render HTML\n   */\n  renderHTML?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          parent: ParentConfig<MarkConfig<Options, Storage>>['renderHTML']\n          editor?: Editor\n        },\n        props: {\n          mark: ProseMirrorMark\n          HTMLAttributes: Record<string, any>\n        },\n      ) => DOMOutputSpec)\n    | null\n\n  /**\n   * Attributes\n   */\n  addAttributes?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    parent: ParentConfig<MarkConfig<Options, Storage>>['addAttributes']\n    editor?: Editor\n    // eslint-disable-next-line @typescript-eslint/no-empty-object-type\n  }) => Attributes | {}\n}\n\n/**\n * The Mark class is used to create custom mark extensions.\n * @see https://tiptap.dev/api/extensions#create-a-new-extension\n */\nexport class Mark<Options = any, Storage = any> extends Extendable<Options, Storage, MarkConfig<Options, Storage>> {\n  type = 'mark'\n\n  /**\n   * Create a new Mark instance\n   * @param config - Mark configuration object or a function that returns a configuration object\n   */\n  static create<O = any, S = any>(config: Partial<MarkConfig<O, S>> | (() => Partial<MarkConfig<O, S>>) = {}) {\n    // If the config is a function, execute it to get the configuration object\n    const resolvedConfig = typeof config === 'function' ? config() : config\n    return new Mark<O, S>(resolvedConfig)\n  }\n\n  static handleExit({ editor, mark }: { editor: Editor; mark: Mark }) {\n    const { tr } = editor.state\n    const currentPos = editor.state.selection.$from\n    const isAtEnd = currentPos.pos === currentPos.end()\n\n    if (isAtEnd) {\n      const currentMarks = currentPos.marks()\n      const isInMark = !!currentMarks.find(m => m?.type.name === mark.name)\n\n      if (!isInMark) {\n        return false\n      }\n\n      const removeMark = currentMarks.find(m => m?.type.name === mark.name)\n\n      if (removeMark) {\n        tr.removeStoredMark(removeMark)\n      }\n      tr.insertText(' ', currentPos.pos)\n\n      editor.view.dispatch(tr)\n\n      return true\n    }\n\n    return false\n  }\n\n  configure(options?: Partial<Options>) {\n    return super.configure(options) as Mark<Options, Storage>\n  }\n\n  extend<\n    ExtendedOptions = Options,\n    ExtendedStorage = Storage,\n    ExtendedConfig extends MarkConfig<ExtendedOptions, ExtendedStorage> = MarkConfig<ExtendedOptions, ExtendedStorage>,\n  >(\n    extendedConfig?:\n      | (() => Partial<ExtendedConfig>)\n      | (Partial<ExtendedConfig> &\n          ThisType<{\n            name: string\n            options: ExtendedOptions\n            storage: ExtendedStorage\n            editor: Editor\n            type: MarkType\n          }>),\n  ): Mark<ExtendedOptions, ExtendedStorage> {\n    // If the extended config is a function, execute it to get the configuration object\n    const resolvedConfig = typeof extendedConfig === 'function' ? extendedConfig() : extendedConfig\n    return super.extend(resolvedConfig) as Mark<ExtendedOptions, ExtendedStorage>\n  }\n}\n","import type { Node as ProseMirrorNode } from '@tiptap/pm/model'\nimport { Fragment } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\nimport { Plugin } from '@tiptap/pm/state'\n\nimport { CommandManager } from './CommandManager.js'\nimport type { Editor } from './Editor.js'\nimport { createChainableState } from './helpers/createChainableState.js'\nimport { getHTMLFromFragment } from './helpers/getHTMLFromFragment.js'\nimport type { CanCommands, ChainedCommands, ExtendedRegExpMatchArray, Range, SingleCommands } from './types.js'\nimport { isNumber } from './utilities/isNumber.js'\nimport { isRegExp } from './utilities/isRegExp.js'\n\nexport type PasteRuleMatch = {\n  index: number\n  text: string\n  replaceWith?: string\n  match?: RegExpMatchArray\n  data?: Record<string, any>\n}\n\nexport type PasteRuleFinder =\n  | RegExp\n  | ((text: string, event?: ClipboardEvent | null) => PasteRuleMatch[] | null | undefined)\n\n/**\n * Paste rules are used to react to pasted content.\n * @see https://tiptap.dev/docs/editor/extensions/custom-extensions/extend-existing#paste-rules\n */\nexport class PasteRule {\n  find: PasteRuleFinder\n\n  handler: (props: {\n    state: EditorState\n    range: Range\n    match: ExtendedRegExpMatchArray\n    commands: SingleCommands\n    chain: () => ChainedCommands\n    can: () => CanCommands\n    pasteEvent: ClipboardEvent | null\n    dropEvent: DragEvent | null\n  }) => void | null\n\n  constructor(config: {\n    find: PasteRuleFinder\n    handler: (props: {\n      can: () => CanCommands\n      chain: () => ChainedCommands\n      commands: SingleCommands\n      dropEvent: DragEvent | null\n      match: ExtendedRegExpMatchArray\n      pasteEvent: ClipboardEvent | null\n      range: Range\n      state: EditorState\n    }) => void | null\n  }) {\n    this.find = config.find\n    this.handler = config.handler\n  }\n}\n\nconst pasteRuleMatcherHandler = (\n  text: string,\n  find: PasteRuleFinder,\n  event?: ClipboardEvent | null,\n): ExtendedRegExpMatchArray[] => {\n  if (isRegExp(find)) {\n    return [...text.matchAll(find)]\n  }\n\n  const matches = find(text, event)\n\n  if (!matches) {\n    return []\n  }\n\n  return matches.map(pasteRuleMatch => {\n    const result: ExtendedRegExpMatchArray = [pasteRuleMatch.text]\n\n    result.index = pasteRuleMatch.index\n    result.input = text\n    result.data = pasteRuleMatch.data\n\n    if (pasteRuleMatch.replaceWith) {\n      if (!pasteRuleMatch.text.includes(pasteRuleMatch.replaceWith)) {\n        console.warn('[tiptap warn]: \"pasteRuleMatch.replaceWith\" must be part of \"pasteRuleMatch.text\".')\n      }\n\n      result.push(pasteRuleMatch.replaceWith)\n    }\n\n    return result\n  })\n}\n\nfunction run(config: {\n  editor: Editor\n  state: EditorState\n  from: number\n  to: number\n  rule: PasteRule\n  pasteEvent: ClipboardEvent | null\n  dropEvent: DragEvent | null\n}): boolean {\n  const { editor, state, from, to, rule, pasteEvent, dropEvent } = config\n\n  const { commands, chain, can } = new CommandManager({\n    editor,\n    state,\n  })\n\n  const handlers: (void | null)[] = []\n\n  state.doc.nodesBetween(from, to, (node, pos) => {\n    // Skip code blocks and non-textual nodes.\n    // Be defensive: `node` may be a Fragment without a `type`. Only text,\n    // inline, or textblock nodes are processed by paste rules.\n    if (node.type?.spec?.code || !(node.isText || node.isTextblock || node.isInline)) {\n      return\n    }\n\n    // For textblock and inline/text nodes, compute the range relative to the node.\n    // Prefer `node.nodeSize` when available (some Node shapes expose this),\n    // otherwise fall back to `node.content?.size`. Default to 0 if neither exists.\n    const contentSize = node.content?.size ?? node.nodeSize ?? 0\n    const resolvedFrom = Math.max(from, pos)\n    const resolvedTo = Math.min(to, pos + contentSize)\n\n    // If the resolved range is empty or invalid for this node, skip it. This\n    // avoids calling `textBetween` with start > end which can cause internal\n    // Fragment/Node traversal to access undefined `nodeSize` values.\n    if (resolvedFrom >= resolvedTo) {\n      return\n    }\n\n    const textToMatch = node.isText\n      ? node.text || ''\n      : node.textBetween(resolvedFrom - pos, resolvedTo - pos, undefined, '\\ufffc')\n\n    const matches = pasteRuleMatcherHandler(textToMatch, rule.find, pasteEvent)\n\n    matches.forEach(match => {\n      if (match.index === undefined) {\n        return\n      }\n\n      const start = resolvedFrom + match.index + 1\n      const end = start + match[0].length\n      const range = {\n        from: state.tr.mapping.map(start),\n        to: state.tr.mapping.map(end),\n      }\n\n      const handler = rule.handler({\n        state,\n        range,\n        match,\n        commands,\n        chain,\n        can,\n        pasteEvent,\n        dropEvent,\n      })\n\n      handlers.push(handler)\n    })\n  })\n\n  const success = handlers.every(handler => handler !== null)\n\n  return success\n}\n\n// When dragging across editors, must get another editor instance to delete selection content.\nlet tiptapDragFromOtherEditor: Editor | null = null\n\nconst createClipboardPasteEvent = (text: string) => {\n  const event = new ClipboardEvent('paste', {\n    clipboardData: new DataTransfer(),\n  })\n\n  event.clipboardData?.setData('text/html', text)\n\n  return event\n}\n\n/**\n * Create an paste rules plugin. When enabled, it will cause pasted\n * text that matches any of the given rules to trigger the rules\n * action.\n */\nexport function pasteRulesPlugin(props: { editor: Editor; rules: PasteRule[] }): Plugin[] {\n  const { editor, rules } = props\n  let dragSourceElement: Element | null = null\n  let isPastedFromProseMirror = false\n  let isDroppedFromProseMirror = false\n  let pasteEvent = typeof ClipboardEvent !== 'undefined' ? new ClipboardEvent('paste') : null\n  let dropEvent: DragEvent | null\n\n  try {\n    dropEvent = typeof DragEvent !== 'undefined' ? new DragEvent('drop') : null\n  } catch {\n    dropEvent = null\n  }\n\n  const processEvent = ({\n    state,\n    from,\n    to,\n    rule,\n    pasteEvt,\n  }: {\n    state: EditorState\n    from: number\n    to: { b: number }\n    rule: PasteRule\n    pasteEvt: ClipboardEvent | null\n  }) => {\n    const tr = state.tr\n    const chainableState = createChainableState({\n      state,\n      transaction: tr,\n    })\n\n    const handler = run({\n      editor,\n      state: chainableState,\n      from: Math.max(from - 1, 0),\n      to: to.b - 1,\n      rule,\n      pasteEvent: pasteEvt,\n      dropEvent,\n    })\n\n    if (!handler || !tr.steps.length) {\n      return\n    }\n\n    try {\n      dropEvent = typeof DragEvent !== 'undefined' ? new DragEvent('drop') : null\n    } catch {\n      dropEvent = null\n    }\n    pasteEvent = typeof ClipboardEvent !== 'undefined' ? new ClipboardEvent('paste') : null\n\n    return tr\n  }\n\n  const plugins = rules.map(rule => {\n    return new Plugin({\n      // we register a global drag handler to track the current drag source element\n      view(view) {\n        const handleDragstart = (event: DragEvent) => {\n          dragSourceElement = view.dom.parentElement?.contains(event.target as Element) ? view.dom.parentElement : null\n\n          if (dragSourceElement) {\n            tiptapDragFromOtherEditor = editor\n          }\n        }\n\n        const handleDragend = () => {\n          if (tiptapDragFromOtherEditor) {\n            tiptapDragFromOtherEditor = null\n          }\n        }\n\n        window.addEventListener('dragstart', handleDragstart)\n        window.addEventListener('dragend', handleDragend)\n\n        return {\n          destroy() {\n            window.removeEventListener('dragstart', handleDragstart)\n            window.removeEventListener('dragend', handleDragend)\n          },\n        }\n      },\n\n      props: {\n        handleDOMEvents: {\n          drop: (view, event: Event) => {\n            isDroppedFromProseMirror = dragSourceElement === view.dom.parentElement\n            dropEvent = event as DragEvent\n\n            if (!isDroppedFromProseMirror) {\n              const dragFromOtherEditor = tiptapDragFromOtherEditor\n\n              if (dragFromOtherEditor?.isEditable) {\n                // setTimeout to avoid the wrong content after drop, timeout arg can't be empty or 0\n                setTimeout(() => {\n                  const selection = dragFromOtherEditor.state.selection\n\n                  if (selection) {\n                    dragFromOtherEditor.commands.deleteRange({ from: selection.from, to: selection.to })\n                  }\n                }, 10)\n              }\n            }\n            return false\n          },\n\n          paste: (_view, event: Event) => {\n            const html = (event as ClipboardEvent).clipboardData?.getData('text/html')\n\n            pasteEvent = event as ClipboardEvent\n\n            isPastedFromProseMirror = !!html?.includes('data-pm-slice')\n\n            return false\n          },\n        },\n      },\n\n      appendTransaction: (transactions, oldState, state) => {\n        const transaction = transactions[0]\n        const isPaste = transaction.getMeta('uiEvent') === 'paste' && !isPastedFromProseMirror\n        const isDrop = transaction.getMeta('uiEvent') === 'drop' && !isDroppedFromProseMirror\n\n        // if PasteRule is triggered by insertContent()\n        const simulatedPasteMeta = transaction.getMeta('applyPasteRules') as\n          | undefined\n          | { from: number; text: string | ProseMirrorNode | Fragment }\n        const isSimulatedPaste = !!simulatedPasteMeta\n\n        if (!isPaste && !isDrop && !isSimulatedPaste) {\n          return\n        }\n\n        // Handle simulated paste\n        if (isSimulatedPaste) {\n          let { text } = simulatedPasteMeta\n\n          if (typeof text === 'string') {\n            text = text as string\n          } else {\n            text = getHTMLFromFragment(Fragment.from(text), state.schema)\n          }\n\n          const { from } = simulatedPasteMeta\n          const to = from + text.length\n\n          const pasteEvt = createClipboardPasteEvent(text)\n\n          return processEvent({\n            rule,\n            state,\n            from,\n            to: { b: to },\n            pasteEvt,\n          })\n        }\n\n        // handle actual paste/drop\n        const from = oldState.doc.content.findDiffStart(state.doc.content)\n        const to = oldState.doc.content.findDiffEnd(state.doc.content)\n\n        // stop if there is no changed range\n        if (!isNumber(from) || !to || from === to.b) {\n          return\n        }\n\n        return processEvent({\n          rule,\n          state,\n          from,\n          to,\n          pasteEvt: pasteEvent,\n        })\n      },\n    })\n  })\n\n  return plugins\n}\n","export function isNumber(value: any): value is number {\n  return typeof value === 'number'\n}\n","export { ClipboardTextSerializer } from './clipboardTextSerializer.js'\nexport { Commands } from './commands.js'\nexport { Delete } from './delete.js'\nexport { Drop } from './drop.js'\nexport { Editable } from './editable.js'\nexport { FocusEvents, focusEventsPluginKey } from './focusEvents.js'\nexport { Keymap } from './keymap.js'\nexport { Paste } from './paste.js'\nexport { Tabindex } from './tabindex.js'\nexport { TextDirection } from './textDirection.js'\n","import { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport { Extension } from '../Extension.js'\nimport { getTextBetween } from '../helpers/getTextBetween.js'\nimport { getTextSerializersFromSchema } from '../helpers/getTextSerializersFromSchema.js'\n\nexport type ClipboardTextSerializerOptions = {\n  blockSeparator?: string\n}\n\nexport const ClipboardTextSerializer = Extension.create<ClipboardTextSerializerOptions>({\n  name: 'clipboardTextSerializer',\n\n  addOptions() {\n    return {\n      blockSeparator: undefined,\n    }\n  },\n\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        key: new PluginKey('clipboardTextSerializer'),\n        props: {\n          clipboardTextSerializer: () => {\n            const { editor } = this\n            const { state, schema } = editor\n            const { doc, selection } = state\n            const { ranges } = selection\n            const from = Math.min(...ranges.map(range => range.$from.pos))\n            const to = Math.max(...ranges.map(range => range.$to.pos))\n            const textSerializers = getTextSerializersFromSchema(schema)\n            const range = { from, to }\n\n            return getTextBetween(doc, range, {\n              ...(this.options.blockSeparator !== undefined ? { blockSeparator: this.options.blockSeparator } : {}),\n              textSerializers,\n            })\n          },\n        },\n      }),\n    ]\n  },\n})\n","import type { Editor } from './Editor.js'\nimport { type ExtendableConfig, Extendable } from './Extendable.js'\n\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nexport interface ExtensionConfig<Options = any, Storage = any>\n  extends ExtendableConfig<Options, Storage, ExtensionConfig<Options, Storage>, null> {}\n\n/**\n * The Extension class is the base class for all extensions.\n * @see https://tiptap.dev/api/extensions#create-a-new-extension\n */\nexport class Extension<Options = any, Storage = any> extends Extendable<\n  Options,\n  Storage,\n  ExtensionConfig<Options, Storage>\n> {\n  type = 'extension'\n\n  /**\n   * Create a new Extension instance\n   * @param config - Extension configuration object or a function that returns a configuration object\n   */\n  static create<O = any, S = any>(\n    config: Partial<ExtensionConfig<O, S>> | (() => Partial<ExtensionConfig<O, S>>) = {},\n  ) {\n    // If the config is a function, execute it to get the configuration object\n    const resolvedConfig = typeof config === 'function' ? config() : config\n    return new Extension<O, S>(resolvedConfig)\n  }\n\n  configure(options?: Partial<Options>) {\n    return super.configure(options) as Extension<Options, Storage>\n  }\n\n  extend<\n    ExtendedOptions = Options,\n    ExtendedStorage = Storage,\n    ExtendedConfig = ExtensionConfig<ExtendedOptions, ExtendedStorage>,\n  >(\n    extendedConfig?:\n      | (() => Partial<ExtendedConfig>)\n      | (Partial<ExtendedConfig> &\n          ThisType<{\n            name: string\n            options: ExtendedOptions\n            storage: ExtendedStorage\n            editor: Editor\n            type: null\n          }>),\n  ): Extension<ExtendedOptions, ExtendedStorage> {\n    // If the extended config is a function, execute it to get the configuration object\n    const resolvedConfig = typeof extendedConfig === 'function' ? extendedConfig() : extendedConfig\n    return super.extend(resolvedConfig) as Extension<ExtendedOptions, ExtendedStorage>\n  }\n}\n","import * as commands from '../commands/index.js'\nimport { Extension } from '../Extension.js'\n\nexport * from '../commands/index.js'\n\nexport const Commands = Extension.create({\n  name: 'commands',\n\n  addCommands() {\n    return {\n      ...commands,\n    }\n  },\n})\n","import { RemoveMarkStep } from '@tiptap/pm/transform'\n\nimport { Extension } from '../Extension.js'\nimport { combineTransactionSteps, getChangedRanges } from '../helpers/index.js'\n\n/**\n * This extension allows you to be notified when the user deletes content you are interested in.\n */\nexport const Delete = Extension.create({\n  name: 'delete',\n\n  onUpdate({ transaction, appendedTransactions }) {\n    const callback = () => {\n      if (\n        this.editor.options.coreExtensionOptions?.delete?.filterTransaction?.(transaction) ??\n        transaction.getMeta('y-sync$')\n      ) {\n        return\n      }\n      const nextTransaction = combineTransactionSteps(transaction.before, [transaction, ...appendedTransactions])\n      const changes = getChangedRanges(nextTransaction)\n\n      changes.forEach(change => {\n        if (\n          nextTransaction.mapping.mapResult(change.oldRange.from).deletedAfter &&\n          nextTransaction.mapping.mapResult(change.oldRange.to).deletedBefore\n        ) {\n          nextTransaction.before.nodesBetween(change.oldRange.from, change.oldRange.to, (node, from) => {\n            const to = from + node.nodeSize - 2\n            const isFullyWithinRange = change.oldRange.from <= from && to <= change.oldRange.to\n\n            this.editor.emit('delete', {\n              type: 'node',\n              node,\n              from,\n              to,\n              newFrom: nextTransaction.mapping.map(from),\n              newTo: nextTransaction.mapping.map(to),\n              deletedRange: change.oldRange,\n              newRange: change.newRange,\n              partial: !isFullyWithinRange,\n              editor: this.editor,\n              transaction,\n              combinedTransform: nextTransaction,\n            })\n          })\n        }\n      })\n\n      const mapping = nextTransaction.mapping\n      nextTransaction.steps.forEach((step, index) => {\n        if (step instanceof RemoveMarkStep) {\n          const newStart = mapping.slice(index).map(step.from, -1)\n          const newEnd = mapping.slice(index).map(step.to)\n          const oldStart = mapping.invert().map(newStart, -1)\n          const oldEnd = mapping.invert().map(newEnd)\n\n          const foundBeforeMark = nextTransaction.doc.nodeAt(newStart - 1)?.marks.some(mark => mark.eq(step.mark))\n          const foundAfterMark = nextTransaction.doc.nodeAt(newEnd)?.marks.some(mark => mark.eq(step.mark))\n\n          this.editor.emit('delete', {\n            type: 'mark',\n            mark: step.mark,\n            from: step.from,\n            to: step.to,\n            deletedRange: {\n              from: oldStart,\n              to: oldEnd,\n            },\n            newRange: {\n              from: newStart,\n              to: newEnd,\n            },\n            partial: Boolean(foundAfterMark || foundBeforeMark),\n            editor: this.editor,\n            transaction,\n            combinedTransform: nextTransaction,\n          })\n        }\n      })\n    }\n\n    if (this.editor.options.coreExtensionOptions?.delete?.async ?? true) {\n      setTimeout(callback, 0)\n    } else {\n      callback()\n    }\n  },\n})\n","import { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport { Extension } from '../Extension.js'\n\nexport const Drop = Extension.create({\n  name: 'drop',\n\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        key: new PluginKey('tiptapDrop'),\n\n        props: {\n          handleDrop: (_, e, slice, moved) => {\n            this.editor.emit('drop', {\n              editor: this.editor,\n              event: e,\n              slice,\n              moved,\n            })\n          },\n        },\n      }),\n    ]\n  },\n})\n","import { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport { Extension } from '../Extension.js'\n\nexport const Editable = Extension.create({\n  name: 'editable',\n\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        key: new PluginKey('editable'),\n        props: {\n          editable: () => this.editor.options.editable,\n        },\n      }),\n    ]\n  },\n})\n","import { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport { Extension } from '../Extension.js'\n\nexport const focusEventsPluginKey = new PluginKey('focusEvents')\n\nexport const FocusEvents = Extension.create({\n  name: 'focusEvents',\n\n  addProseMirrorPlugins() {\n    const { editor } = this\n\n    return [\n      new Plugin({\n        key: focusEventsPluginKey,\n        props: {\n          handleDOMEvents: {\n            focus: (view, event: Event) => {\n              editor.isFocused = true\n\n              const transaction = editor.state.tr.setMeta('focus', { event }).setMeta('addToHistory', false)\n\n              view.dispatch(transaction)\n\n              return false\n            },\n            blur: (view, event: Event) => {\n              editor.isFocused = false\n\n              const transaction = editor.state.tr.setMeta('blur', { event }).setMeta('addToHistory', false)\n\n              view.dispatch(transaction)\n\n              return false\n            },\n          },\n        },\n      }),\n    ]\n  },\n})\n","import { Plugin, PluginKey, Selection } from '@tiptap/pm/state'\n\nimport { CommandManager } from '../CommandManager.js'\nimport { Extension } from '../Extension.js'\nimport { createChainableState } from '../helpers/createChainableState.js'\nimport { isNodeEmpty } from '../helpers/isNodeEmpty.js'\nimport { isiOS } from '../utilities/isiOS.js'\nimport { isMacOS } from '../utilities/isMacOS.js'\n\nexport const Keymap = Extension.create({\n  name: 'keymap',\n\n  addKeyboardShortcuts() {\n    const handleBackspace = () =>\n      this.editor.commands.first(({ commands }) => [\n        () => commands.undoInputRule(),\n\n        // maybe convert first text block node to default node\n        () =>\n          commands.command(({ tr }) => {\n            const { selection, doc } = tr\n            const { empty, $anchor } = selection\n            const { pos, parent } = $anchor\n            const $parentPos = $anchor.parent.isTextblock && pos > 0 ? tr.doc.resolve(pos - 1) : $anchor\n            const parentIsIsolating = $parentPos.parent.type.spec.isolating\n\n            const parentPos = $anchor.pos - $anchor.parentOffset\n\n            const isAtStart =\n              parentIsIsolating && $parentPos.parent.childCount === 1\n                ? parentPos === $anchor.pos\n                : Selection.atStart(doc).from === pos\n\n            if (\n              !empty ||\n              !parent.type.isTextblock ||\n              parent.textContent.length ||\n              !isAtStart ||\n              (isAtStart && $anchor.parent.type.name === 'paragraph') // prevent clearNodes when no nodes to clear, otherwise history stack is appended\n            ) {\n              return false\n            }\n\n            return commands.clearNodes()\n          }),\n\n        () => commands.deleteSelection(),\n        () => commands.joinBackward(),\n        () => commands.selectNodeBackward(),\n      ])\n\n    const handleDelete = () =>\n      this.editor.commands.first(({ commands }) => [\n        () => commands.deleteSelection(),\n        () => commands.deleteCurrentNode(),\n        () => commands.joinForward(),\n        () => commands.selectNodeForward(),\n      ])\n\n    const handleEnter = () =>\n      this.editor.commands.first(({ commands }) => [\n        () => commands.newlineInCode(),\n        () => commands.createParagraphNear(),\n        () => commands.liftEmptyBlock(),\n        () => commands.splitBlock(),\n      ])\n\n    const baseKeymap = {\n      Enter: handleEnter,\n      'Mod-Enter': () => this.editor.commands.exitCode(),\n      Backspace: handleBackspace,\n      'Mod-Backspace': handleBackspace,\n      'Shift-Backspace': handleBackspace,\n      Delete: handleDelete,\n      'Mod-Delete': handleDelete,\n      'Mod-a': () => this.editor.commands.selectAll(),\n    }\n\n    const pcKeymap = {\n      ...baseKeymap,\n    }\n\n    const macKeymap = {\n      ...baseKeymap,\n      'Ctrl-h': handleBackspace,\n      'Alt-Backspace': handleBackspace,\n      'Ctrl-d': handleDelete,\n      'Ctrl-Alt-Backspace': handleDelete,\n      'Alt-Delete': handleDelete,\n      'Alt-d': handleDelete,\n      'Ctrl-a': () => this.editor.commands.selectTextblockStart(),\n      'Ctrl-e': () => this.editor.commands.selectTextblockEnd(),\n    }\n\n    if (isiOS() || isMacOS()) {\n      return macKeymap\n    }\n\n    return pcKeymap\n  },\n\n  addProseMirrorPlugins() {\n    return [\n      // With this plugin we check if the whole document was selected and deleted.\n      // In this case we will additionally call `clearNodes()` to convert e.g. a heading\n      // to a paragraph if necessary.\n      // This is an alternative to ProseMirror's `AllSelection`, which doesnt work well\n      // with many other commands.\n      new Plugin({\n        key: new PluginKey('clearDocument'),\n        appendTransaction: (transactions, oldState, newState) => {\n          if (transactions.some(tr => tr.getMeta('composition'))) {\n            return\n          }\n\n          const docChanges = transactions.some(transaction => transaction.docChanged) && !oldState.doc.eq(newState.doc)\n\n          const ignoreTr = transactions.some(transaction => transaction.getMeta('preventClearDocument'))\n\n          if (!docChanges || ignoreTr) {\n            return\n          }\n\n          const { empty, from, to } = oldState.selection\n          const allFrom = Selection.atStart(oldState.doc).from\n          const allEnd = Selection.atEnd(oldState.doc).to\n          const allWasSelected = from === allFrom && to === allEnd\n\n          if (empty || !allWasSelected) {\n            return\n          }\n\n          const isEmpty = isNodeEmpty(newState.doc)\n\n          if (!isEmpty) {\n            return\n          }\n\n          const tr = newState.tr\n          const state = createChainableState({\n            state: newState,\n            transaction: tr,\n          })\n          const { commands } = new CommandManager({\n            editor: this.editor,\n            state,\n          })\n\n          commands.clearNodes()\n\n          if (!tr.steps.length) {\n            return\n          }\n\n          return tr\n        },\n      }),\n    ]\n  },\n})\n","import { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport { Extension } from '../Extension.js'\n\nexport const Paste = Extension.create({\n  name: 'paste',\n\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        key: new PluginKey('tiptapPaste'),\n\n        props: {\n          handlePaste: (_view, e, slice) => {\n            this.editor.emit('paste', {\n              editor: this.editor,\n              event: e,\n              slice,\n            })\n          },\n        },\n      }),\n    ]\n  },\n})\n","import { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport { Extension } from '../Extension.js'\n\nexport const Tabindex = Extension.create({\n  name: 'tabindex',\n\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        key: new PluginKey('tabindex'),\n        props: {\n          attributes: (): { [name: string]: string } => (this.editor.isEditable ? { tabindex: '0' } : {}),\n        },\n      }),\n    ]\n  },\n})\n","import { Plugin, PluginKey } from '@tiptap/pm/state'\n\nimport { Extension } from '../Extension.js'\nimport { splitExtensions } from '../helpers/splitExtensions.js'\n\nexport interface TextDirectionOptions {\n  direction: 'ltr' | 'rtl' | 'auto' | undefined\n}\n\n/**\n * The TextDirection extension adds support for setting text direction (LTR/RTL/auto)\n * on all nodes in the editor.\n *\n * This extension adds a global `dir` attribute to all node types, which can be used\n * to control bidirectional text rendering. The direction can be set globally via\n * editor options or per-node using commands.\n */\nexport const TextDirection = Extension.create<TextDirectionOptions>({\n  name: 'textDirection',\n\n  addOptions() {\n    return {\n      direction: undefined,\n    }\n  },\n\n  addGlobalAttributes() {\n    // Only add the dir attribute to nodes if text direction is configured\n    // This prevents null/undefined values from appearing in JSON exports\n    if (!this.options.direction) {\n      return []\n    }\n\n    const { nodeExtensions } = splitExtensions(this.extensions)\n\n    return [\n      {\n        types: nodeExtensions.filter(extension => extension.name !== 'text').map(extension => extension.name),\n        attributes: {\n          dir: {\n            default: this.options.direction,\n            parseHTML: element => {\n              const dir = element.getAttribute('dir')\n\n              if (dir && (dir === 'ltr' || dir === 'rtl' || dir === 'auto')) {\n                return dir\n              }\n\n              return this.options.direction\n            },\n            renderHTML: attributes => {\n              if (!attributes.dir) {\n                return {}\n              }\n\n              return {\n                dir: attributes.dir,\n              }\n            },\n          },\n        },\n      },\n    ]\n  },\n\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        key: new PluginKey('textDirection'),\n        props: {\n          attributes: (): { [name: string]: string } => {\n            const direction = this.options.direction\n\n            if (!direction) {\n              return {}\n            }\n\n            return {\n              dir: direction,\n            }\n          },\n        },\n      }),\n    ]\n  },\n})\n","import type { Fragment, Node, ResolvedPos } from '@tiptap/pm/model'\n\nimport type { Editor } from './Editor.js'\nimport type { Content, Range } from './types.js'\n\nexport class NodePos {\n  private resolvedPos: ResolvedPos\n\n  private isBlock: boolean\n\n  private editor: Editor\n\n  private get name(): string {\n    return this.node.type.name\n  }\n\n  constructor(pos: ResolvedPos, editor: Editor, isBlock = false, node: Node | null = null) {\n    this.isBlock = isBlock\n    this.resolvedPos = pos\n    this.editor = editor\n    this.currentNode = node\n  }\n\n  private currentNode: Node | null = null\n\n  get node(): Node {\n    return this.currentNode || this.resolvedPos.node()\n  }\n\n  get element(): HTMLElement {\n    return this.editor.view.domAtPos(this.pos).node as HTMLElement\n  }\n\n  public actualDepth: number | null = null\n\n  get depth(): number {\n    return this.actualDepth ?? this.resolvedPos.depth\n  }\n\n  get pos(): number {\n    return this.resolvedPos.pos\n  }\n\n  get content(): Fragment {\n    return this.node.content\n  }\n\n  set content(content: Content) {\n    let from = this.from\n    let to = this.to\n\n    if (this.isBlock) {\n      if (this.content.size === 0) {\n        console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`)\n        return\n      }\n\n      from = this.from + 1\n      to = this.to - 1\n    }\n\n    this.editor.commands.insertContentAt({ from, to }, content)\n  }\n\n  get attributes(): { [key: string]: any } {\n    return this.node.attrs\n  }\n\n  get textContent(): string {\n    return this.node.textContent\n  }\n\n  get size(): number {\n    return this.node.nodeSize\n  }\n\n  get from(): number {\n    if (this.isBlock) {\n      return this.pos\n    }\n\n    return this.resolvedPos.start(this.resolvedPos.depth)\n  }\n\n  get range(): Range {\n    return {\n      from: this.from,\n      to: this.to,\n    }\n  }\n\n  get to(): number {\n    if (this.isBlock) {\n      return this.pos + this.size\n    }\n\n    return this.resolvedPos.end(this.resolvedPos.depth) + (this.node.isText ? 0 : 1)\n  }\n\n  get parent(): NodePos | null {\n    if (this.depth === 0) {\n      return null\n    }\n\n    const parentPos = this.resolvedPos.start(this.resolvedPos.depth - 1)\n    const $pos = this.resolvedPos.doc.resolve(parentPos)\n\n    return new NodePos($pos, this.editor)\n  }\n\n  get before(): NodePos | null {\n    let $pos = this.resolvedPos.doc.resolve(this.from - (this.isBlock ? 1 : 2))\n\n    if ($pos.depth !== this.depth) {\n      $pos = this.resolvedPos.doc.resolve(this.from - 3)\n    }\n\n    return new NodePos($pos, this.editor)\n  }\n\n  get after(): NodePos | null {\n    let $pos = this.resolvedPos.doc.resolve(this.to + (this.isBlock ? 2 : 1))\n\n    if ($pos.depth !== this.depth) {\n      $pos = this.resolvedPos.doc.resolve(this.to + 3)\n    }\n\n    return new NodePos($pos, this.editor)\n  }\n\n  get children(): NodePos[] {\n    const children: NodePos[] = []\n\n    this.node.content.forEach((node, offset) => {\n      const isBlock = node.isBlock && !node.isTextblock\n      const isNonTextAtom = node.isAtom && !node.isText\n      const isInline = node.isInline\n\n      const targetPos = this.pos + offset + (isNonTextAtom ? 0 : 1)\n\n      // Check if targetPos is within valid document range\n      if (targetPos < 0 || targetPos > this.resolvedPos.doc.nodeSize - 2) {\n        return\n      }\n\n      const $pos = this.resolvedPos.doc.resolve(targetPos)\n\n      // Only apply depth check for non-block, non-inline nodes (i.e., textblocks)\n      // Inline nodes should always be included as children since we're iterating\n      // over direct children via this.node.content\n      if (!isBlock && !isInline && $pos.depth <= this.depth) {\n        return\n      }\n\n      // Pass the node for both block and inline nodes to ensure correct node reference\n      const childNodePos = new NodePos($pos, this.editor, isBlock, isBlock || isInline ? node : null)\n\n      if (isBlock) {\n        childNodePos.actualDepth = this.depth + 1\n      }\n\n      children.push(childNodePos)\n    })\n\n    return children\n  }\n\n  get firstChild(): NodePos | null {\n    return this.children[0] || null\n  }\n\n  get lastChild(): NodePos | null {\n    const children = this.children\n\n    return children[children.length - 1] || null\n  }\n\n  closest(selector: string, attributes: { [key: string]: any } = {}): NodePos | null {\n    let node: NodePos | null = null\n    let currentNode = this.parent\n\n    while (currentNode && !node) {\n      if (currentNode.node.type.name === selector) {\n        if (Object.keys(attributes).length > 0) {\n          const nodeAttributes = currentNode.node.attrs\n          const attrKeys = Object.keys(attributes)\n\n          for (let index = 0; index < attrKeys.length; index += 1) {\n            const key = attrKeys[index]\n\n            if (nodeAttributes[key] !== attributes[key]) {\n              break\n            }\n          }\n        } else {\n          node = currentNode\n        }\n      }\n\n      currentNode = currentNode.parent\n    }\n\n    return node\n  }\n\n  querySelector(selector: string, attributes: { [key: string]: any } = {}): NodePos | null {\n    return this.querySelectorAll(selector, attributes, true)[0] || null\n  }\n\n  querySelectorAll(selector: string, attributes: { [key: string]: any } = {}, firstItemOnly = false): NodePos[] {\n    let nodes: NodePos[] = []\n\n    if (!this.children || this.children.length === 0) {\n      return nodes\n    }\n    const attrKeys = Object.keys(attributes)\n\n    /**\n     * Finds all children recursively that match the selector and attributes\n     * If firstItemOnly is true, it will return the first item found\n     */\n    this.children.forEach(childPos => {\n      // If we already found a node and we only want the first item, we dont need to keep going\n      if (firstItemOnly && nodes.length > 0) {\n        return\n      }\n\n      if (childPos.node.type.name === selector) {\n        const doesAllAttributesMatch = attrKeys.every(key => attributes[key] === childPos.node.attrs[key])\n\n        if (doesAllAttributesMatch) {\n          nodes.push(childPos)\n        }\n      }\n\n      // If we already found a node and we only want the first item, we can stop here and skip the recursion\n      if (firstItemOnly && nodes.length > 0) {\n        return\n      }\n\n      nodes = nodes.concat(childPos.querySelectorAll(selector, attributes, firstItemOnly))\n    })\n\n    return nodes\n  }\n\n  setAttribute(attributes: { [key: string]: any }) {\n    const { tr } = this.editor.state\n\n    tr.setNodeMarkup(this.from, undefined, {\n      ...this.node.attrs,\n      ...attributes,\n    })\n\n    this.editor.view.dispatch(tr)\n  }\n}\n","export const style = `.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: \"liga\" 0; /* the above doesn't seem to work in Edge */\n}\n\n.ProseMirror [contenteditable=\"false\"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable=\"false\"] [contenteditable=\"true\"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: \"\";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}`\n","export function createStyleTag(style: string, nonce?: string, suffix?: string): HTMLStyleElement {\n  const tiptapStyleTag = <HTMLStyleElement>(\n    document.querySelector(`style[data-tiptap-style${suffix ? `-${suffix}` : ''}]`)\n  )\n\n  if (tiptapStyleTag !== null) {\n    return tiptapStyleTag\n  }\n\n  const styleNode = document.createElement('style')\n\n  if (nonce) {\n    styleNode.setAttribute('nonce', nonce)\n  }\n\n  styleNode.setAttribute(`data-tiptap-style${suffix ? `-${suffix}` : ''}`, '')\n  styleNode.innerHTML = style\n  document.getElementsByTagName('head')[0].appendChild(styleNode)\n\n  return styleNode\n}\n","import type { MarkType } from '@tiptap/pm/model'\n\nimport { getMarksBetween } from '../helpers/getMarksBetween.js'\nimport type { InputRuleFinder } from '../InputRule.js'\nimport { InputRule } from '../InputRule.js'\nimport type { ExtendedRegExpMatchArray } from '../types.js'\nimport { callOrReturn } from '../utilities/callOrReturn.js'\n\n/**\n * Build an input rule that adds a mark when the\n * matched text is typed into it.\n * @see https://tiptap.dev/docs/editor/extensions/custom-extensions/extend-existing#input-rules\n */\nexport function markInputRule(config: {\n  find: InputRuleFinder\n  type: MarkType\n  undoable?: boolean\n  getAttributes?: Record<string, any> | ((match: ExtendedRegExpMatchArray) => Record<string, any>) | false | null\n}) {\n  return new InputRule({\n    find: config.find,\n    handler: ({ state, range, match }) => {\n      const attributes = callOrReturn(config.getAttributes, undefined, match)\n\n      if (attributes === false || attributes === null) {\n        return null\n      }\n\n      const { tr } = state\n      const captureGroup = match[match.length - 1]\n      const fullMatch = match[0]\n\n      if (captureGroup) {\n        const startSpaces = fullMatch.search(/\\S/)\n        const textStart = range.from + fullMatch.indexOf(captureGroup)\n        const textEnd = textStart + captureGroup.length\n\n        const excludedMarks = getMarksBetween(range.from, range.to, state.doc)\n          .filter(item => {\n            // @ts-ignore\n            const excluded = item.mark.type.excluded as MarkType[]\n\n            return excluded.find(type => type === config.type && type !== item.mark.type)\n          })\n          .filter(item => item.to > textStart)\n\n        if (excludedMarks.length) {\n          return null\n        }\n\n        if (textEnd < range.to) {\n          tr.delete(textEnd, range.to)\n        }\n\n        if (textStart > range.from) {\n          tr.delete(range.from + startSpaces, textStart)\n        }\n\n        const markEnd = range.from + startSpaces + captureGroup.length\n\n        tr.addMark(range.from + startSpaces, markEnd, config.type.create(attributes || {}))\n\n        tr.removeStoredMark(config.type)\n      }\n    },\n    undoable: config.undoable,\n  })\n}\n","import type { NodeType } from '@tiptap/pm/model'\n\nimport type { InputRuleFinder } from '../InputRule.js'\nimport { InputRule } from '../InputRule.js'\nimport type { ExtendedRegExpMatchArray } from '../types.js'\nimport { callOrReturn } from '../utilities/callOrReturn.js'\n\n/**\n * Build an input rule that adds a node when the\n * matched text is typed into it.\n * @see https://tiptap.dev/docs/editor/extensions/custom-extensions/extend-existing#input-rules\n */\nexport function nodeInputRule(config: {\n  /**\n   * The regex to match.\n   */\n  find: InputRuleFinder\n\n  /**\n   * The node type to add.\n   */\n  type: NodeType\n\n  /**\n   * Whether the input rule should be undoable\n   * when the user presses backspace.\n   */\n  undoable?: boolean\n\n  /**\n   * A function that returns the attributes for the node\n   * can also be an object of attributes\n   */\n  getAttributes?: Record<string, any> | ((match: ExtendedRegExpMatchArray) => Record<string, any>) | false | null\n}) {\n  return new InputRule({\n    find: config.find,\n    handler: ({ state, range, match }) => {\n      const attributes = callOrReturn(config.getAttributes, undefined, match) || {}\n      const { tr } = state\n      const start = range.from\n      let end = range.to\n\n      const newNode = config.type.create(attributes)\n\n      if (match[1]) {\n        const offset = match[0].lastIndexOf(match[1])\n        let matchStart = start + offset\n\n        if (matchStart > end) {\n          matchStart = end\n        } else {\n          end = matchStart + match[1].length\n        }\n\n        // insert last typed character\n        const lastChar = match[0][match[0].length - 1]\n\n        tr.insertText(lastChar, start + match[0].length - 1)\n\n        // insert node from input rule\n        tr.replaceWith(matchStart, end, newNode)\n      } else if (match[0]) {\n        const insertionStart = config.type.isInline ? start : start - 1\n\n        tr.insert(insertionStart, config.type.create(attributes)).delete(tr.mapping.map(start), tr.mapping.map(end))\n      }\n\n      tr.scrollIntoView()\n    },\n    undoable: config.undoable,\n  })\n}\n","import type { NodeType } from '@tiptap/pm/model'\n\nimport type { InputRuleFinder } from '../InputRule.js'\nimport { InputRule } from '../InputRule.js'\nimport type { ExtendedRegExpMatchArray } from '../types.js'\nimport { callOrReturn } from '../utilities/callOrReturn.js'\n\n/**\n * Build an input rule that changes the type of a textblock when the\n * matched text is typed into it. When using a regular expresion youll\n * probably want the regexp to start with `^`, so that the pattern can\n * only occur at the start of a textblock.\n * @see https://tiptap.dev/docs/editor/extensions/custom-extensions/extend-existing#input-rules\n */\nexport function textblockTypeInputRule(config: {\n  find: InputRuleFinder\n  type: NodeType\n  undoable?: boolean\n  getAttributes?: Record<string, any> | ((match: ExtendedRegExpMatchArray) => Record<string, any>) | false | null\n}) {\n  return new InputRule({\n    find: config.find,\n    handler: ({ state, range, match }) => {\n      const $start = state.doc.resolve(range.from)\n      const attributes = callOrReturn(config.getAttributes, undefined, match) || {}\n\n      if (!$start.node(-1).canReplaceWith($start.index(-1), $start.indexAfter(-1), config.type)) {\n        return null\n      }\n\n      state.tr.delete(range.from, range.to).setBlockType(range.from, range.from, config.type, attributes)\n    },\n    undoable: config.undoable,\n  })\n}\n","import type { InputRuleFinder } from '../InputRule.js'\nimport { InputRule } from '../InputRule.js'\n\n/**\n * Build an input rule that replaces text when the\n * matched text is typed into it.\n * @see https://tiptap.dev/docs/editor/extensions/custom-extensions/extend-existing#input-rules\n */\nexport function textInputRule(config: { find: InputRuleFinder; replace: string; undoable?: boolean }) {\n  return new InputRule({\n    find: config.find,\n    handler: ({ state, range, match }) => {\n      let insert = config.replace\n      let start = range.from\n      const end = range.to\n\n      if (match[1]) {\n        const offset = match[0].lastIndexOf(match[1])\n\n        insert += match[0].slice(offset + match[1].length)\n        start += offset\n\n        const cutOff = start - end\n\n        if (cutOff > 0) {\n          insert = match[0].slice(offset - cutOff, offset) + insert\n          start = end\n        }\n      }\n\n      state.tr.insertText(insert, start, end)\n    },\n    undoable: config.undoable,\n  })\n}\n","import type { Node as ProseMirrorNode, NodeType } from '@tiptap/pm/model'\nimport { canJoin, findWrapping } from '@tiptap/pm/transform'\n\nimport type { Editor } from '../Editor.js'\nimport type { InputRuleFinder } from '../InputRule.js'\nimport { InputRule } from '../InputRule.js'\nimport type { ExtendedRegExpMatchArray } from '../types.js'\nimport { callOrReturn } from '../utilities/callOrReturn.js'\n\n/**\n * Build an input rule for automatically wrapping a textblock when a\n * given string is typed. When using a regular expresion youll\n * probably want the regexp to start with `^`, so that the pattern can\n * only occur at the start of a textblock.\n *\n * `type` is the type of node to wrap in.\n *\n * By default, if theres a node with the same type above the newly\n * wrapped node, the rule will try to join those\n * two nodes. You can pass a join predicate, which takes a regular\n * expression match and the node before the wrapped node, and can\n * return a boolean to indicate whether a join should happen.\n * @see https://tiptap.dev/docs/editor/extensions/custom-extensions/extend-existing#input-rules\n */\nexport function wrappingInputRule(config: {\n  find: InputRuleFinder\n  type: NodeType\n  keepMarks?: boolean\n  keepAttributes?: boolean\n  editor?: Editor\n  undoable?: boolean\n  getAttributes?: Record<string, any> | ((match: ExtendedRegExpMatchArray) => Record<string, any>) | false | null\n  joinPredicate?: (match: ExtendedRegExpMatchArray, node: ProseMirrorNode) => boolean\n}) {\n  return new InputRule({\n    find: config.find,\n    handler: ({ state, range, match, chain }) => {\n      const attributes = callOrReturn(config.getAttributes, undefined, match) || {}\n      const tr = state.tr.delete(range.from, range.to)\n      const $start = tr.doc.resolve(range.from)\n      const blockRange = $start.blockRange()\n      const wrapping = blockRange && findWrapping(blockRange, config.type, attributes)\n\n      if (!wrapping) {\n        return null\n      }\n\n      tr.wrap(blockRange, wrapping)\n\n      if (config.keepMarks && config.editor) {\n        const { selection, storedMarks } = state\n        const { splittableMarks } = config.editor.extensionManager\n        const marks = storedMarks || (selection.$to.parentOffset && selection.$from.marks())\n\n        if (marks) {\n          const filteredMarks = marks.filter(mark => splittableMarks.includes(mark.type.name))\n\n          tr.ensureMarks(filteredMarks)\n        }\n      }\n      if (config.keepAttributes) {\n        /** If the nodeType is `bulletList` or `orderedList` set the `nodeType` as `listItem` */\n        const nodeType =\n          config.type.name === 'bulletList' || config.type.name === 'orderedList' ? 'listItem' : 'taskList'\n\n        chain().updateAttributes(nodeType, attributes).run()\n      }\n\n      const before = tr.doc.resolve(range.from - 1).nodeBefore\n\n      if (\n        before &&\n        before.type === config.type &&\n        canJoin(tr.doc, range.from - 1) &&\n        (!config.joinPredicate || config.joinPredicate(match, before))\n      ) {\n        tr.join(range.from - 1)\n      }\n    },\n    undoable: config.undoable,\n  })\n}\n","export type Attributes = Record<string, any>\n\nexport type DOMOutputSpecElement = 0 | Attributes | DOMOutputSpecArray\n/**\n * Better describes the output of a `renderHTML` function in prosemirror\n * @see https://prosemirror.net/docs/ref/#model.DOMOutputSpec\n */\nexport type DOMOutputSpecArray =\n  | [string]\n  | [string, Attributes]\n  | [string, 0]\n  | [string, Attributes, 0]\n  | [string, Attributes, DOMOutputSpecArray | 0]\n  | [string, DOMOutputSpecArray]\n\n// JSX types for Tiptap's JSX runtime\n// These types only apply when using @jsxImportSource @tiptap/core\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace JSX {\n  export type Element = DOMOutputSpecArray\n  export interface IntrinsicElements {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any\n  }\n  export interface ElementChildrenAttribute {\n    children: unknown\n  }\n}\n\nexport type JSXRenderer = (\n  tag: 'slot' | string | ((props?: Attributes) => DOMOutputSpecArray | DOMOutputSpecElement),\n  props?: Attributes,\n  ...children: JSXRenderer[]\n) => DOMOutputSpecArray | DOMOutputSpecElement\n\nexport function Fragment(props: { children: JSXRenderer[] }) {\n  return props.children\n}\n\nexport const h: JSXRenderer = (tag, attributes) => {\n  // Treat the slot tag as the Prosemirror hole to render content into\n  if (tag === 'slot') {\n    return 0\n  }\n\n  // If the tag is a function, call it with the props\n  if (tag instanceof Function) {\n    return tag(attributes)\n  }\n\n  const { children, ...rest } = attributes ?? {}\n\n  if (tag === 'svg') {\n    throw new Error('SVG elements are not supported in the JSX syntax, use the array syntax instead')\n  }\n\n  // Otherwise, return the tag, attributes, and children\n  return [tag, rest, children]\n}\n\n// See\n// https://esbuild.github.io/api/#jsx-import-source\n// https://www.typescriptlang.org/tsconfig/#jsxImportSource\n\nexport { h as createElement, h as jsx, h as jsxDEV, h as jsxs }\n","import type { Node as PMNode } from '@tiptap/pm/model'\nimport type { Decoration, DecorationSource, NodeView } from '@tiptap/pm/view'\n\nimport type { Editor } from '../Editor.js'\n\nconst isTouchEvent = (e: MouseEvent | TouchEvent): e is TouchEvent => {\n  return 'touches' in e\n}\n\n/**\n * Directions where resize handles can be placed\n *\n * @example\n * - `'top'` - Top edge handle\n * - `'bottom-right'` - Bottom-right corner handle\n */\nexport type ResizableNodeViewDirection =\n  | 'top'\n  | 'right'\n  | 'bottom'\n  | 'left'\n  | 'top-right'\n  | 'top-left'\n  | 'bottom-right'\n  | 'bottom-left'\n\n/**\n * Dimensions for the resizable node in pixels\n */\nexport type ResizableNodeDimensions = {\n  /** Width in pixels */\n  width: number\n  /** Height in pixels */\n  height: number\n}\n\n/**\n * Configuration options for creating a ResizableNodeView\n *\n * @example\n * ```ts\n * new ResizableNodeView({\n *   element: imgElement,\n *   node,\n *   getPos,\n *   onResize: (width, height) => {\n *     imgElement.style.width = `${width}px`\n *     imgElement.style.height = `${height}px`\n *   },\n *   onCommit: (width, height) => {\n *     editor.commands.updateAttributes('image', { width, height })\n *   },\n *   onUpdate: (node) => true,\n *   options: {\n *     directions: ['bottom-right', 'bottom-left'],\n *     min: { width: 100, height: 100 },\n *     preserveAspectRatio: true\n *   }\n * })\n * ```\n */\nexport type ResizableNodeViewOptions = {\n  /**\n   * The DOM element to make resizable (e.g., an img, video, or iframe element)\n   */\n  element: HTMLElement\n\n  /**\n   * The DOM element that will hold the editable content element\n   */\n  contentElement?: HTMLElement\n\n  /**\n   * The ProseMirror node instance\n   */\n  node: PMNode\n\n  /**\n   * The Tiptap editor instance\n   */\n  editor: Editor\n\n  /**\n   * Function that returns the current position of the node in the document\n   */\n  getPos: () => number | undefined\n\n  /**\n   * Callback fired continuously during resize with current dimensions.\n   * Use this to update the element's visual size in real-time.\n   *\n   * @param width - Current width in pixels\n   * @param height - Current height in pixels\n   *\n   * @example\n   * ```ts\n   * onResize: (width, height) => {\n   *   element.style.width = `${width}px`\n   *   element.style.height = `${height}px`\n   * }\n   * ```\n   */\n  onResize?: (width: number, height: number) => void\n\n  /**\n   * Callback fired once when resize completes with final dimensions.\n   * Use this to persist the new size to the node's attributes.\n   *\n   * @param width - Final width in pixels\n   * @param height - Final height in pixels\n   *\n   * @example\n   * ```ts\n   * onCommit: (width, height) => {\n   *   const pos = getPos()\n   *   if (pos !== undefined) {\n   *     editor.commands.updateAttributes('image', { width, height })\n   *   }\n   * }\n   * ```\n   */\n  onCommit: (width: number, height: number) => void\n\n  /**\n   * Callback for handling node updates.\n   * Return `true` to accept the update, `false` to reject it.\n   *\n   * @example\n   * ```ts\n   * onUpdate: (node, decorations, innerDecorations) => {\n   *   if (node.type !== this.node.type) return false\n   *   return true\n   * }\n   * ```\n   */\n  onUpdate: NodeView['update']\n\n  /**\n   * Optional configuration for resize behavior and styling\n   */\n  options?: {\n    /**\n     * Which resize handles to display.\n     * @default ['bottom-left', 'bottom-right', 'top-left', 'top-right']\n     *\n     * @example\n     * ```ts\n     * // Only show corner handles\n     * directions: ['top-left', 'top-right', 'bottom-left', 'bottom-right']\n     *\n     * // Only show right edge handle\n     * directions: ['right']\n     * ```\n     */\n    directions?: ResizableNodeViewDirection[]\n\n    /**\n     * Minimum dimensions in pixels\n     * @default { width: 8, height: 8 }\n     *\n     * @example\n     * ```ts\n     * min: { width: 100, height: 50 }\n     * ```\n     */\n    min?: Partial<ResizableNodeDimensions>\n\n    /**\n     * Maximum dimensions in pixels\n     * @default undefined (no maximum)\n     *\n     * @example\n     * ```ts\n     * max: { width: 1000, height: 800 }\n     * ```\n     */\n    max?: Partial<ResizableNodeDimensions>\n\n    /**\n     * Always preserve aspect ratio when resizing.\n     * When `false`, aspect ratio is preserved only when Shift key is pressed.\n     * @default false\n     *\n     * @example\n     * ```ts\n     * preserveAspectRatio: true // Always lock aspect ratio\n     * ```\n     */\n    preserveAspectRatio?: boolean\n\n    /**\n     * Custom CSS class names for styling\n     *\n     * @example\n     * ```ts\n     * className: {\n     *   container: 'resize-container',\n     *   wrapper: 'resize-wrapper',\n     *   handle: 'resize-handle',\n     *   resizing: 'is-resizing'\n     * }\n     * ```\n     */\n    className?: {\n      /** Class for the outer container element */\n      container?: string\n      /** Class for the wrapper element that contains the resizable element */\n      wrapper?: string\n      /** Class applied to all resize handles */\n      handle?: string\n      /** Class added to container while actively resizing */\n      resizing?: string\n    }\n\n    /**\n     * Optional callback for creating custom resize handle elements.\n     *\n     * This function allows developers to define their own handle element\n     * (e.g., custom icons, classes, or styles) for a given resize direction.\n     * It is called internally for each handle direction.\n     *\n     * @param direction - The direction of the handle being created (e.g., 'top', 'bottom-right').\n     * @returns The custom handle HTMLElement.\n     *\n     * @example\n     * ```ts\n     * createCustomHandle: (direction) => {\n     *   const handle = document.createElement('div')\n     *   handle.dataset.resizeHandle = direction\n     *   handle.style.position = 'absolute'\n     *   handle.className = 'tiptap-custom-handle'\n     *\n     *   const isTop = direction.includes('top')\n     *   const isBottom = direction.includes('bottom')\n     *   const isLeft = direction.includes('left')\n     *   const isRight = direction.includes('right')\n     *\n     *   if (isTop) handle.style.top = '0'\n     *   if (isBottom) handle.style.bottom = '0'\n     *   if (isLeft) handle.style.left = '0'\n     *   if (isRight) handle.style.right = '0'\n     *\n     *   // Edge handles span the full width or height\n     *   if (direction === 'top' || direction === 'bottom') {\n     *     handle.style.left = '0'\n     *     handle.style.right = '0'\n     *   }\n     *\n     *   if (direction === 'left' || direction === 'right') {\n     *     handle.style.top = '0'\n     *     handle.style.bottom = '0'\n     *   }\n     *\n     *   return handle\n     * }\n     * ```\n     */\n    createCustomHandle?: (direction: ResizableNodeViewDirection) => HTMLElement\n  }\n}\n\n/**\n * A NodeView implementation that adds resize handles to any DOM element.\n *\n * This class creates a resizable node view for Tiptap/ProseMirror editors.\n * It wraps your element with resize handles and manages the resize interaction,\n * including aspect ratio preservation, min/max constraints, and keyboard modifiers.\n *\n * @example\n * ```ts\n * // Basic usage in a Tiptap extension\n * addNodeView() {\n *   return ({ node, getPos }) => {\n *     const img = document.createElement('img')\n *     img.src = node.attrs.src\n *\n *     return new ResizableNodeView({\n *       element: img,\n *       node,\n *       getPos,\n *       onResize: (width, height) => {\n *         img.style.width = `${width}px`\n *         img.style.height = `${height}px`\n *       },\n *       onCommit: (width, height) => {\n *         this.editor.commands.updateAttributes('image', { width, height })\n *       },\n *       onUpdate: () => true,\n *       options: {\n *         min: { width: 100, height: 100 },\n *         preserveAspectRatio: true\n *       }\n *     })\n *   }\n * }\n * ```\n */\nexport class ResizableNodeView {\n  /** The ProseMirror node instance */\n  node: PMNode\n\n  /** The Tiptap editor instance */\n  editor: Editor\n\n  /** The DOM element being made resizable */\n  element: HTMLElement\n\n  /** The editable DOM element inside the DOM */\n  contentElement?: HTMLElement\n\n  /** The outer container element (returned as NodeView.dom) */\n  container: HTMLElement\n\n  /** The wrapper element that contains the element and handles */\n  wrapper: HTMLElement\n\n  /** Function to get the current node position */\n  getPos: () => number | undefined\n\n  /** Callback fired during resize */\n  onResize?: (width: number, height: number) => void\n\n  /** Callback fired when resize completes */\n  onCommit: (width: number, height: number) => void\n\n  /** Callback for node updates */\n  onUpdate?: NodeView['update']\n\n  /** Active resize handle directions */\n  directions: ResizableNodeViewDirection[] = ['bottom-left', 'bottom-right', 'top-left', 'top-right']\n\n  /** Minimum allowed dimensions */\n  minSize: ResizableNodeDimensions = {\n    height: 8,\n    width: 8,\n  }\n\n  /** Maximum allowed dimensions (optional) */\n  maxSize?: Partial<ResizableNodeDimensions>\n\n  /** Whether to always preserve aspect ratio */\n  preserveAspectRatio: boolean = false\n\n  /** CSS class names for elements */\n  classNames = {\n    container: '',\n    wrapper: '',\n    handle: '',\n    resizing: '',\n  }\n\n  /** Optional callback for creating custom resize handles */\n  createCustomHandle?: (direction: ResizableNodeViewDirection) => HTMLElement\n\n  /** Initial width of the element (for aspect ratio calculation) */\n  private initialWidth: number = 0\n\n  /** Initial height of the element (for aspect ratio calculation) */\n  private initialHeight: number = 0\n\n  /** Calculated aspect ratio (width / height) */\n  private aspectRatio: number = 1\n\n  /** Whether a resize operation is currently active */\n  private isResizing: boolean = false\n\n  /** The handle currently being dragged */\n  private activeHandle: ResizableNodeViewDirection | null = null\n\n  /** Starting mouse X position when resize began */\n  private startX: number = 0\n\n  /** Starting mouse Y position when resize began */\n  private startY: number = 0\n\n  /** Element width when resize began */\n  private startWidth: number = 0\n\n  /** Element height when resize began */\n  private startHeight: number = 0\n\n  /** Whether Shift key is currently pressed (for temporary aspect ratio lock) */\n  private isShiftKeyPressed: boolean = false\n\n  /** Last known editable state of the editor */\n  private lastEditableState: boolean | undefined = undefined\n\n  /** Map of handle elements by direction */\n  private handleMap = new Map<ResizableNodeViewDirection, HTMLElement>()\n\n  /**\n   * Creates a new ResizableNodeView instance.\n   *\n   * The constructor sets up the resize handles, applies initial sizing from\n   * node attributes, and configures all resize behavior options.\n   *\n   * @param options - Configuration options for the resizable node view\n   */\n  constructor(options: ResizableNodeViewOptions) {\n    this.node = options.node\n    this.editor = options.editor\n    this.element = options.element\n    this.contentElement = options.contentElement\n\n    this.getPos = options.getPos\n\n    this.onResize = options.onResize\n    this.onCommit = options.onCommit\n    this.onUpdate = options.onUpdate\n\n    if (options.options?.min) {\n      this.minSize = {\n        ...this.minSize,\n        ...options.options.min,\n      }\n    }\n\n    if (options.options?.max) {\n      this.maxSize = options.options.max\n    }\n\n    if (options?.options?.directions) {\n      this.directions = options.options.directions\n    }\n\n    if (options.options?.preserveAspectRatio) {\n      this.preserveAspectRatio = options.options.preserveAspectRatio\n    }\n\n    if (options.options?.className) {\n      this.classNames = {\n        container: options.options.className.container || '',\n        wrapper: options.options.className.wrapper || '',\n        handle: options.options.className.handle || '',\n        resizing: options.options.className.resizing || '',\n      }\n    }\n\n    if (options.options?.createCustomHandle) {\n      this.createCustomHandle = options.options.createCustomHandle\n    }\n\n    this.wrapper = this.createWrapper()\n    this.container = this.createContainer()\n\n    this.applyInitialSize()\n    this.attachHandles()\n\n    this.editor.on('update', this.handleEditorUpdate.bind(this))\n  }\n\n  /**\n   * Returns the top-level DOM node that should be placed in the editor.\n   *\n   * This is required by the ProseMirror NodeView interface. The container\n   * includes the wrapper, handles, and the actual content element.\n   *\n   * @returns The container element to be inserted into the editor\n   */\n  get dom() {\n    return this.container\n  }\n\n  get contentDOM(): HTMLElement | null {\n    return this.contentElement ?? null\n  }\n\n  private handleEditorUpdate() {\n    const isEditable = this.editor.isEditable\n\n    // Only if state actually changed\n    if (isEditable === this.lastEditableState) {\n      return\n    }\n\n    this.lastEditableState = isEditable\n\n    if (!isEditable) {\n      this.removeHandles()\n    } else if (isEditable && this.handleMap.size === 0) {\n      this.attachHandles()\n    }\n  }\n\n  /**\n   * Called when the node's content or attributes change.\n   *\n   * Updates the internal node reference. If a custom `onUpdate` callback\n   * was provided, it will be called to handle additional update logic.\n   *\n   * @param node - The new/updated node\n   * @param decorations - Node decorations\n   * @param innerDecorations - Inner decorations\n   * @returns `false` if the node type has changed (requires full rebuild), otherwise the result of `onUpdate` or `true`\n   */\n  update(node: PMNode, decorations: readonly Decoration[], innerDecorations: DecorationSource): boolean {\n    if (node.type !== this.node.type) {\n      return false\n    }\n\n    this.node = node\n\n    if (this.onUpdate) {\n      return this.onUpdate(node, decorations, innerDecorations)\n    }\n\n    return true\n  }\n\n  /**\n   * Cleanup method called when the node view is being removed.\n   *\n   * Removes all event listeners to prevent memory leaks. This is required\n   * by the ProseMirror NodeView interface. If a resize is active when\n   * destroy is called, it will be properly cancelled.\n   */\n  destroy() {\n    if (this.isResizing) {\n      this.container.dataset.resizeState = 'false'\n\n      if (this.classNames.resizing) {\n        this.container.classList.remove(this.classNames.resizing)\n      }\n\n      document.removeEventListener('mousemove', this.handleMouseMove)\n      document.removeEventListener('mouseup', this.handleMouseUp)\n      document.removeEventListener('keydown', this.handleKeyDown)\n      document.removeEventListener('keyup', this.handleKeyUp)\n      this.isResizing = false\n      this.activeHandle = null\n    }\n\n    this.editor.off('update', this.handleEditorUpdate.bind(this))\n\n    this.container.remove()\n  }\n\n  /**\n   * Creates the outer container element.\n   *\n   * The container is the top-level element returned by the NodeView and\n   * wraps the entire resizable node. It's set up with flexbox to handle\n   * alignment and includes data attributes for styling and identification.\n   *\n   * @returns The container element\n   */\n  createContainer() {\n    const element = document.createElement('div')\n    element.dataset.resizeContainer = ''\n    element.dataset.node = this.node.type.name\n    element.style.display = 'flex'\n\n    if (this.classNames.container) {\n      element.className = this.classNames.container\n    }\n\n    element.appendChild(this.wrapper)\n\n    return element\n  }\n\n  /**\n   * Creates the wrapper element that contains the content and handles.\n   *\n   * The wrapper uses relative positioning so that resize handles can be\n   * positioned absolutely within it. This is the direct parent of the\n   * content element being made resizable.\n   *\n   * @returns The wrapper element\n   */\n  createWrapper() {\n    const element = document.createElement('div')\n    element.style.position = 'relative'\n    element.style.display = 'block'\n    element.dataset.resizeWrapper = ''\n\n    if (this.classNames.wrapper) {\n      element.className = this.classNames.wrapper\n    }\n\n    element.appendChild(this.element)\n\n    return element\n  }\n\n  /**\n   * Creates a resize handle element for a specific direction.\n   *\n   * Each handle is absolutely positioned and includes a data attribute\n   * identifying its direction for styling purposes.\n   *\n   * @param direction - The resize direction for this handle\n   * @returns The handle element\n   */\n  private createHandle(direction: ResizableNodeViewDirection): HTMLElement {\n    const handle = document.createElement('div')\n    handle.dataset.resizeHandle = direction\n    handle.style.position = 'absolute'\n\n    if (this.classNames.handle) {\n      handle.className = this.classNames.handle\n    }\n\n    return handle\n  }\n\n  /**\n   * Positions a handle element according to its direction.\n   *\n   * Corner handles (e.g., 'top-left') are positioned at the intersection\n   * of two edges. Edge handles (e.g., 'top') span the full width or height.\n   *\n   * @param handle - The handle element to position\n   * @param direction - The direction determining the position\n   */\n  private positionHandle(handle: HTMLElement, direction: ResizableNodeViewDirection): void {\n    const isTop = direction.includes('top')\n    const isBottom = direction.includes('bottom')\n    const isLeft = direction.includes('left')\n    const isRight = direction.includes('right')\n\n    if (isTop) {\n      handle.style.top = '0'\n    }\n\n    if (isBottom) {\n      handle.style.bottom = '0'\n    }\n\n    if (isLeft) {\n      handle.style.left = '0'\n    }\n\n    if (isRight) {\n      handle.style.right = '0'\n    }\n\n    // Edge handles span the full width or height\n    if (direction === 'top' || direction === 'bottom') {\n      handle.style.left = '0'\n      handle.style.right = '0'\n    }\n\n    if (direction === 'left' || direction === 'right') {\n      handle.style.top = '0'\n      handle.style.bottom = '0'\n    }\n  }\n\n  /**\n   * Creates and attaches all resize handles to the wrapper.\n   *\n   * Iterates through the configured directions, creates a handle for each,\n   * positions it, attaches the mousedown listener, and appends it to the DOM.\n   */\n  private attachHandles(): void {\n    this.directions.forEach(direction => {\n      let handle: HTMLElement\n\n      if (this.createCustomHandle) {\n        handle = this.createCustomHandle(direction)\n      } else {\n        handle = this.createHandle(direction)\n      }\n\n      if (!(handle instanceof HTMLElement)) {\n        console.warn(\n          `[ResizableNodeView] createCustomHandle(\"${direction}\") did not return an HTMLElement. Falling back to default handle.`,\n        )\n        handle = this.createHandle(direction)\n      }\n\n      if (!this.createCustomHandle) {\n        this.positionHandle(handle, direction)\n      }\n\n      handle.addEventListener('mousedown', event => this.handleResizeStart(event, direction))\n      handle.addEventListener('touchstart', event => this.handleResizeStart(event as unknown as MouseEvent, direction))\n\n      this.handleMap.set(direction, handle)\n\n      this.wrapper.appendChild(handle)\n    })\n  }\n\n  /**\n   * Removes all resize handles from the wrapper.\n   *\n   * Cleans up the handle map and removes each handle element from the DOM.\n   */\n  private removeHandles(): void {\n    this.handleMap.forEach(el => el.remove())\n    this.handleMap.clear()\n  }\n\n  /**\n   * Applies initial sizing from node attributes to the element.\n   *\n   * If width/height attributes exist on the node, they're applied to the element.\n   * Otherwise, the element's natural/current dimensions are measured. The aspect\n   * ratio is calculated for later use in aspect-ratio-preserving resizes.\n   */\n  private applyInitialSize(): void {\n    const width = this.node.attrs.width as number | undefined\n    const height = this.node.attrs.height as number | undefined\n\n    if (width) {\n      this.element.style.width = `${width}px`\n      this.initialWidth = width\n    } else {\n      this.initialWidth = this.element.offsetWidth\n    }\n\n    if (height) {\n      this.element.style.height = `${height}px`\n      this.initialHeight = height\n    } else {\n      this.initialHeight = this.element.offsetHeight\n    }\n\n    // Calculate aspect ratio for use during resizing\n    if (this.initialWidth > 0 && this.initialHeight > 0) {\n      this.aspectRatio = this.initialWidth / this.initialHeight\n    }\n  }\n\n  /**\n   * Initiates a resize operation when a handle is clicked.\n   *\n   * Captures the starting mouse position and element dimensions, sets up\n   * the resize state, adds the resizing class and state attribute, and\n   * attaches document-level listeners for mouse movement and keyboard input.\n   *\n   * @param event - The mouse down event\n   * @param direction - The direction of the handle being dragged\n   */\n  private handleResizeStart(event: MouseEvent | TouchEvent, direction: ResizableNodeViewDirection): void {\n    event.preventDefault()\n    event.stopPropagation()\n\n    // Capture initial state\n    this.isResizing = true\n    this.activeHandle = direction\n\n    if (isTouchEvent(event)) {\n      this.startX = event.touches[0].clientX\n      this.startY = event.touches[0].clientY\n    } else {\n      this.startX = event.clientX\n      this.startY = event.clientY\n    }\n\n    this.startWidth = this.element.offsetWidth\n    this.startHeight = this.element.offsetHeight\n\n    // Recalculate aspect ratio at resize start for accuracy\n    if (this.startWidth > 0 && this.startHeight > 0) {\n      this.aspectRatio = this.startWidth / this.startHeight\n    }\n\n    const pos = this.getPos()\n    if (pos !== undefined) {\n      // TODO: Select the node in the editor\n    }\n\n    // Update UI state\n    this.container.dataset.resizeState = 'true'\n\n    if (this.classNames.resizing) {\n      this.container.classList.add(this.classNames.resizing)\n    }\n\n    // Attach document-level listeners for resize\n    document.addEventListener('mousemove', this.handleMouseMove)\n    document.addEventListener('touchmove', this.handleTouchMove)\n    document.addEventListener('mouseup', this.handleMouseUp)\n    document.addEventListener('keydown', this.handleKeyDown)\n    document.addEventListener('keyup', this.handleKeyUp)\n  }\n\n  /**\n   * Handles mouse movement during an active resize.\n   *\n   * Calculates the delta from the starting position, computes new dimensions\n   * based on the active handle direction, applies constraints and aspect ratio,\n   * then updates the element's style and calls the onResize callback.\n   *\n   * @param event - The mouse move event\n   */\n  private handleMouseMove = (event: MouseEvent): void => {\n    if (!this.isResizing || !this.activeHandle) {\n      return\n    }\n\n    const deltaX = event.clientX - this.startX\n    const deltaY = event.clientY - this.startY\n\n    this.handleResize(deltaX, deltaY)\n  }\n\n  private handleTouchMove = (event: TouchEvent): void => {\n    if (!this.isResizing || !this.activeHandle) {\n      return\n    }\n\n    const touch = event.touches[0]\n    if (!touch) {\n      return\n    }\n\n    const deltaX = touch.clientX - this.startX\n    const deltaY = touch.clientY - this.startY\n\n    this.handleResize(deltaX, deltaY)\n  }\n\n  private handleResize(deltaX: number, deltaY: number) {\n    if (!this.activeHandle) {\n      return\n    }\n\n    const shouldPreserveAspectRatio = this.preserveAspectRatio || this.isShiftKeyPressed\n    const { width, height } = this.calculateNewDimensions(this.activeHandle, deltaX, deltaY)\n    const constrained = this.applyConstraints(width, height, shouldPreserveAspectRatio)\n\n    this.element.style.width = `${constrained.width}px`\n    this.element.style.height = `${constrained.height}px`\n\n    if (this.onResize) {\n      this.onResize(constrained.width, constrained.height)\n    }\n  }\n\n  /**\n   * Completes the resize operation when the mouse button is released.\n   *\n   * Captures final dimensions, calls the onCommit callback to persist changes,\n   * removes the resizing state and class, and cleans up document-level listeners.\n   */\n  private handleMouseUp = (): void => {\n    if (!this.isResizing) {\n      return\n    }\n\n    const finalWidth = this.element.offsetWidth\n    const finalHeight = this.element.offsetHeight\n\n    this.onCommit(finalWidth, finalHeight)\n\n    this.isResizing = false\n    this.activeHandle = null\n\n    // Remove UI state\n    this.container.dataset.resizeState = 'false'\n\n    if (this.classNames.resizing) {\n      this.container.classList.remove(this.classNames.resizing)\n    }\n\n    // Clean up document-level listeners\n    document.removeEventListener('mousemove', this.handleMouseMove)\n    document.removeEventListener('mouseup', this.handleMouseUp)\n    document.removeEventListener('keydown', this.handleKeyDown)\n    document.removeEventListener('keyup', this.handleKeyUp)\n  }\n\n  /**\n   * Tracks Shift key state to enable temporary aspect ratio locking.\n   *\n   * When Shift is pressed during resize, aspect ratio is preserved even if\n   * preserveAspectRatio is false.\n   *\n   * @param event - The keyboard event\n   */\n  private handleKeyDown = (event: KeyboardEvent): void => {\n    if (event.key === 'Shift') {\n      this.isShiftKeyPressed = true\n    }\n  }\n\n  /**\n   * Tracks Shift key release to disable temporary aspect ratio locking.\n   *\n   * @param event - The keyboard event\n   */\n  private handleKeyUp = (event: KeyboardEvent): void => {\n    if (event.key === 'Shift') {\n      this.isShiftKeyPressed = false\n    }\n  }\n\n  /**\n   * Calculates new dimensions based on mouse delta and resize direction.\n   *\n   * Takes the starting dimensions and applies the mouse movement delta\n   * according to the handle direction. For corner handles, both dimensions\n   * are affected. For edge handles, only one dimension changes. If aspect\n   * ratio should be preserved, delegates to applyAspectRatio.\n   *\n   * @param direction - The active resize handle direction\n   * @param deltaX - Horizontal mouse movement since resize start\n   * @param deltaY - Vertical mouse movement since resize start\n   * @returns The calculated width and height\n   */\n  private calculateNewDimensions(\n    direction: ResizableNodeViewDirection,\n    deltaX: number,\n    deltaY: number,\n  ): ResizableNodeDimensions {\n    let newWidth = this.startWidth\n    let newHeight = this.startHeight\n\n    const isRight = direction.includes('right')\n    const isLeft = direction.includes('left')\n    const isBottom = direction.includes('bottom')\n    const isTop = direction.includes('top')\n\n    // Apply horizontal delta\n    if (isRight) {\n      newWidth = this.startWidth + deltaX\n    } else if (isLeft) {\n      newWidth = this.startWidth - deltaX\n    }\n\n    // Apply vertical delta\n    if (isBottom) {\n      newHeight = this.startHeight + deltaY\n    } else if (isTop) {\n      newHeight = this.startHeight - deltaY\n    }\n\n    // For pure horizontal/vertical handles, only one dimension changes\n    if (direction === 'right' || direction === 'left') {\n      newWidth = this.startWidth + (isRight ? deltaX : -deltaX)\n    }\n\n    if (direction === 'top' || direction === 'bottom') {\n      newHeight = this.startHeight + (isBottom ? deltaY : -deltaY)\n    }\n\n    const shouldPreserveAspectRatio = this.preserveAspectRatio || this.isShiftKeyPressed\n\n    if (shouldPreserveAspectRatio) {\n      return this.applyAspectRatio(newWidth, newHeight, direction)\n    }\n\n    return { width: newWidth, height: newHeight }\n  }\n\n  /**\n   * Applies min/max constraints to dimensions.\n   *\n   * When aspect ratio is NOT preserved, constraints are applied independently\n   * to width and height. When aspect ratio IS preserved, constraints are\n   * applied while maintaining the aspect ratioif one dimension hits a limit,\n   * the other is recalculated proportionally.\n   *\n   * This ensures that aspect ratio is never broken when constrained.\n   *\n   * @param width - The unconstrained width\n   * @param height - The unconstrained height\n   * @param preserveAspectRatio - Whether to maintain aspect ratio while constraining\n   * @returns The constrained dimensions\n   */\n  private applyConstraints(width: number, height: number, preserveAspectRatio: boolean): ResizableNodeDimensions {\n    if (!preserveAspectRatio) {\n      // Independent constraints for each dimension\n      let constrainedWidth = Math.max(this.minSize.width, width)\n      let constrainedHeight = Math.max(this.minSize.height, height)\n\n      if (this.maxSize?.width) {\n        constrainedWidth = Math.min(this.maxSize.width, constrainedWidth)\n      }\n\n      if (this.maxSize?.height) {\n        constrainedHeight = Math.min(this.maxSize.height, constrainedHeight)\n      }\n\n      return { width: constrainedWidth, height: constrainedHeight }\n    }\n\n    // Aspect-ratio-aware constraints: adjust both dimensions proportionally\n    let constrainedWidth = width\n    let constrainedHeight = height\n\n    // Check minimum constraints\n    if (constrainedWidth < this.minSize.width) {\n      constrainedWidth = this.minSize.width\n      constrainedHeight = constrainedWidth / this.aspectRatio\n    }\n\n    if (constrainedHeight < this.minSize.height) {\n      constrainedHeight = this.minSize.height\n      constrainedWidth = constrainedHeight * this.aspectRatio\n    }\n\n    // Check maximum constraints\n    if (this.maxSize?.width && constrainedWidth > this.maxSize.width) {\n      constrainedWidth = this.maxSize.width\n      constrainedHeight = constrainedWidth / this.aspectRatio\n    }\n\n    if (this.maxSize?.height && constrainedHeight > this.maxSize.height) {\n      constrainedHeight = this.maxSize.height\n      constrainedWidth = constrainedHeight * this.aspectRatio\n    }\n\n    return { width: constrainedWidth, height: constrainedHeight }\n  }\n\n  /**\n   * Adjusts dimensions to maintain the original aspect ratio.\n   *\n   * For horizontal handles (left/right), uses width as the primary dimension\n   * and calculates height from it. For vertical handles (top/bottom), uses\n   * height as primary and calculates width. For corner handles, uses width\n   * as the primary dimension.\n   *\n   * @param width - The new width\n   * @param height - The new height\n   * @param direction - The active resize direction\n   * @returns Dimensions adjusted to preserve aspect ratio\n   */\n  private applyAspectRatio(\n    width: number,\n    height: number,\n    direction: ResizableNodeViewDirection,\n  ): ResizableNodeDimensions {\n    const isHorizontal = direction === 'left' || direction === 'right'\n    const isVertical = direction === 'top' || direction === 'bottom'\n\n    if (isHorizontal) {\n      // For horizontal resize, width is primary\n      return {\n        width,\n        height: width / this.aspectRatio,\n      }\n    }\n\n    if (isVertical) {\n      // For vertical resize, height is primary\n      return {\n        width: height * this.aspectRatio,\n        height,\n      }\n    }\n\n    // For corner resize, width is primary\n    return {\n      width,\n      height: width / this.aspectRatio,\n    }\n  }\n}\n\n/**\n * Alias for ResizableNodeView to maintain consistent naming.\n * @deprecated Use ResizableNodeView instead - will be removed in future versions.\n */\nexport const ResizableNodeview = ResizableNodeView\n","import type { NodeType } from '@tiptap/pm/model'\nimport { type EditorState, NodeSelection } from '@tiptap/pm/state'\n\nexport function canInsertNode(state: EditorState, nodeType: NodeType): boolean {\n  const { selection } = state\n  const { $from } = selection\n\n  // Special handling for NodeSelection\n  if (selection instanceof NodeSelection) {\n    const index = $from.index()\n    const parent = $from.parent\n\n    // Can we replace the selected node with the horizontal rule?\n    return parent.canReplaceWith(index, index + 1, nodeType)\n  }\n\n  // Default: check if we can insert at the current position\n  let depth = $from.depth\n\n  while (depth >= 0) {\n    const index = $from.index(depth)\n    const parent = $from.node(depth)\n    const match = parent.contentMatchAt(index)\n    if (match.matchType(nodeType)) {\n      return true\n    }\n    depth -= 1\n  }\n  return false\n}\n","// source: https://stackoverflow.com/a/6969486\nexport function escapeForRegEx(string: string): string {\n  return string.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n}\n","/**\n * Detects if the current browser is Firefox.\n * @returns `true` if the browser is Firefox, `false` otherwise.\n * @example\n * if (isFirefox()) {\n *   // Firefox-specific handling\n * }\n */\nexport function isFirefox(): boolean {\n  return typeof navigator !== 'undefined' ? /Firefox/.test(navigator.userAgent) : false\n}\n","export function isString(value: any): value is string {\n  return typeof value === 'string'\n}\n","/**\n * @fileoverview Markdown utilities for creating standardized markdown specs.\n *\n * This module provides utilities for creating complete markdown specifications\n * for different types of nodes using unified syntax patterns.\n */\n\nexport * from './attributeUtils.js'\nexport * from './createAtomBlockMarkdownSpec.js'\nexport * from './createBlockMarkdownSpec.js'\nexport * from './createInlineMarkdownSpec.js'\nexport * from './parseIndentedBlocks.js'\nexport * from './renderNestedMarkdownContent.js'\n","/**\n * @fileoverview Utility functions for parsing and serializing markdown attributes.\n *\n * These utilities handle the common patterns for parsing attribute strings\n * in various markdown syntaxes like Pandoc attributes.\n */\n\n/**\n * Parses a Pandoc-style attribute string into an object.\n *\n * Supports the following patterns:\n * - Classes: `.className`  `{ class: 'className' }`\n * - IDs: `#myId`  `{ id: 'myId' }`\n * - Key-value pairs: `key=\"value\"`  `{ key: 'value' }`\n * - Boolean attributes: `disabled`  `{ disabled: true }`\n *\n * @param attrString - The attribute string to parse\n * @returns Parsed attributes object\n *\n * @example\n * ```ts\n * parseAttributes('.btn #submit disabled type=\"button\"')\n * //  { class: 'btn', id: 'submit', disabled: true, type: 'button' }\n * ```\n */\nexport function parseAttributes(attrString: string): Record<string, any> {\n  if (!attrString?.trim()) {\n    return {}\n  }\n\n  const attributes: Record<string, any> = {}\n\n  // First, extract and remove quoted strings to avoid parsing content inside them\n  const quotedStrings: string[] = []\n  const tempString = attrString.replace(/[\"']([^\"']*)[\"']/g, match => {\n    quotedStrings.push(match)\n    return `__QUOTED_${quotedStrings.length - 1}__`\n  })\n\n  // Parse classes (.className) - only outside of quoted strings\n  const classMatches = tempString.match(/(?:^|\\s)\\.([a-zA-Z][\\w-]*)/g)\n  if (classMatches) {\n    const classes = classMatches.map(match => match.trim().slice(1)) // Remove the dot\n    attributes.class = classes.join(' ')\n  }\n\n  // Parse IDs (#myId) - only outside of quoted strings\n  const idMatch = tempString.match(/(?:^|\\s)#([a-zA-Z][\\w-]*)/)\n  if (idMatch) {\n    attributes.id = idMatch[1]\n  }\n\n  // Parse key-value pairs (key=\"value\" or key='value') - restore quoted strings\n  const kvRegex = /([a-zA-Z][\\w-]*)\\s*=\\s*(__QUOTED_\\d+__)/g\n  const kvMatches = Array.from(tempString.matchAll(kvRegex))\n  kvMatches.forEach(([, key, quotedRef]) => {\n    const quotedIndex = parseInt(quotedRef.match(/__QUOTED_(\\d+)__/)?.[1] || '0', 10)\n    const quotedValue = quotedStrings[quotedIndex]\n    if (quotedValue) {\n      // Remove the outer quotes\n      attributes[key] = quotedValue.slice(1, -1)\n    }\n  })\n\n  // Parse boolean attributes (standalone words that aren't classes/IDs)\n  const cleanString = tempString\n    .replace(/(?:^|\\s)\\.([a-zA-Z][\\w-]*)/g, '') // Remove classes\n    .replace(/(?:^|\\s)#([a-zA-Z][\\w-]*)/g, '') // Remove IDs\n    .replace(/([a-zA-Z][\\w-]*)\\s*=\\s*__QUOTED_\\d+__/g, '') // Remove key-value pairs\n    .trim()\n\n  if (cleanString) {\n    const booleanAttrs = cleanString.split(/\\s+/).filter(Boolean)\n    booleanAttrs.forEach(attr => {\n      if (attr.match(/^[a-zA-Z][\\w-]*$/)) {\n        attributes[attr] = true\n      }\n    })\n  }\n\n  return attributes\n}\n\n/**\n * Serializes an attributes object back to a Pandoc-style attribute string.\n *\n * @param attributes - The attributes object to serialize\n * @returns Serialized attribute string\n *\n * @example\n * ```ts\n * serializeAttributes({ class: 'btn primary', id: 'submit', disabled: true, type: 'button' })\n * //  '.btn.primary #submit disabled type=\"button\"'\n * ```\n */\nexport function serializeAttributes(attributes: Record<string, any>): string {\n  if (!attributes || Object.keys(attributes).length === 0) {\n    return ''\n  }\n\n  const parts: string[] = []\n\n  // Handle classes\n  if (attributes.class) {\n    const classes = String(attributes.class).split(/\\s+/).filter(Boolean)\n    classes.forEach(cls => parts.push(`.${cls}`))\n  }\n\n  // Handle ID\n  if (attributes.id) {\n    parts.push(`#${attributes.id}`)\n  }\n\n  // Handle other attributes\n  Object.entries(attributes).forEach(([key, value]) => {\n    if (key === 'class' || key === 'id') {\n      return // Already handled\n    }\n\n    if (value === true) {\n      // Boolean attribute\n      parts.push(key)\n    } else if (value !== false && value != null) {\n      // Key-value attribute\n      parts.push(`${key}=\"${String(value)}\"`)\n    }\n  })\n\n  return parts.join(' ')\n}\n","import type {\n  JSONContent,\n  MarkdownParseHelpers,\n  MarkdownParseResult,\n  MarkdownToken,\n  MarkdownTokenizer,\n} from '../../types.js'\nimport {\n  parseAttributes as defaultParseAttributes,\n  serializeAttributes as defaultSerializeAttributes,\n} from './attributeUtils.js'\n\nexport interface AtomBlockMarkdownSpecOptions {\n  /** The Tiptap node name this spec is for */\n  nodeName: string\n  /** The markdown syntax name (defaults to nodeName if not provided) */\n  name?: string\n  /** Function to parse attributes from token attribute string */\n  parseAttributes?: (attrString: string) => Record<string, any>\n  /** Function to serialize attributes back to string for rendering */\n  serializeAttributes?: (attrs: Record<string, any>) => string\n  /** Default attributes to apply when parsing */\n  defaultAttributes?: Record<string, any>\n  /** Required attributes that must be present for successful parsing */\n  requiredAttributes?: string[]\n  /** Attributes that are allowed to be rendered back to markdown (whitelist) */\n  allowedAttributes?: string[]\n}\n\n/**\n * Creates a complete markdown spec for atomic block nodes using Pandoc syntax.\n *\n * The generated spec handles:\n * - Parsing self-closing blocks with `:::blockName {attributes}`\n * - Extracting and parsing attributes\n * - Validating required attributes\n * - Rendering blocks back to markdown\n *\n * @param options - Configuration for the atomic block markdown spec\n * @returns Complete markdown specification object\n *\n * @example\n * ```ts\n * const youtubeSpec = createAtomBlockMarkdownSpec({\n *   nodeName: 'youtube',\n *   requiredAttributes: ['src'],\n *   defaultAttributes: { start: 0 },\n *   allowedAttributes: ['src', 'start', 'width', 'height'] // Only these get rendered to markdown\n * })\n *\n * // Usage in extension:\n * export const Youtube = Node.create({\n *   // ... other config\n *   markdown: youtubeSpec\n * })\n * ```\n */\nexport function createAtomBlockMarkdownSpec(options: AtomBlockMarkdownSpecOptions): {\n  parseMarkdown: (token: MarkdownToken, h: MarkdownParseHelpers) => MarkdownParseResult\n  markdownTokenizer: MarkdownTokenizer\n  renderMarkdown: (node: JSONContent) => string\n} {\n  const {\n    nodeName,\n    name: markdownName,\n    parseAttributes = defaultParseAttributes,\n    serializeAttributes = defaultSerializeAttributes,\n    defaultAttributes = {},\n    requiredAttributes = [],\n    allowedAttributes,\n  } = options\n\n  // Use markdownName for syntax, fallback to nodeName\n  const blockName = markdownName || nodeName\n\n  // Helper function to filter attributes based on allowlist\n  const filterAttributes = (attrs: Record<string, any>) => {\n    if (!allowedAttributes) {\n      return attrs\n    }\n\n    const filtered: Record<string, any> = {}\n    allowedAttributes.forEach(key => {\n      if (key in attrs) {\n        filtered[key] = attrs[key]\n      }\n    })\n    return filtered\n  }\n\n  return {\n    parseMarkdown: (token: MarkdownToken, h: MarkdownParseHelpers) => {\n      const attrs = { ...defaultAttributes, ...token.attributes }\n      return h.createNode(nodeName, attrs, [])\n    },\n\n    markdownTokenizer: {\n      name: nodeName,\n      level: 'block' as const,\n      start(src: string) {\n        const regex = new RegExp(`^:::${blockName}(?:\\\\s|$)`, 'm')\n        const index = src.match(regex)?.index\n        return index !== undefined ? index : -1\n      },\n      tokenize(src, _tokens, _lexer) {\n        // Use non-global regex to match from the start of the string\n        // Include optional newline to ensure we consume the entire line\n        const regex = new RegExp(`^:::${blockName}(?:\\\\s+\\\\{([^}]*)\\\\})?\\\\s*:::(?:\\\\n|$)`)\n        const match = src.match(regex)\n\n        if (!match) {\n          return undefined\n        }\n\n        // Parse attributes if present\n        const attrString = match[1] || ''\n        const attributes = parseAttributes(attrString)\n\n        // Validate required attributes\n        const missingRequired = requiredAttributes.find(required => !(required in attributes))\n        if (missingRequired) {\n          return undefined\n        }\n\n        return {\n          type: nodeName,\n          raw: match[0],\n          attributes,\n        }\n      },\n    },\n\n    renderMarkdown: node => {\n      const filteredAttrs = filterAttributes(node.attrs || {})\n      const attrs = serializeAttributes(filteredAttrs)\n      const attrString = attrs ? ` {${attrs}}` : ''\n\n      return `:::${blockName}${attrString} :::`\n    },\n  }\n}\n","import type {\n  JSONContent,\n  MarkdownParseHelpers,\n  MarkdownParseResult,\n  MarkdownRendererHelpers,\n  MarkdownToken,\n  MarkdownTokenizer,\n} from '../../types.js'\nimport {\n  parseAttributes as defaultParseAttributes,\n  serializeAttributes as defaultSerializeAttributes,\n} from './attributeUtils.js'\n\nexport interface BlockMarkdownSpecOptions {\n  /** The Tiptap node name this spec is for */\n  nodeName: string\n  /** The markdown syntax name (defaults to nodeName if not provided) */\n  name?: string\n  /** Function to extract content from the node for serialization */\n  getContent?: (token: MarkdownToken) => string\n  /** Function to parse attributes from the attribute string */\n  parseAttributes?: (attrString: string) => Record<string, any>\n  /** Function to serialize attributes to string */\n  serializeAttributes?: (attrs: Record<string, any>) => string\n  /** Default attributes to apply when parsing */\n  defaultAttributes?: Record<string, any>\n  /** Content type: 'block' allows paragraphs/lists/etc, 'inline' only allows bold/italic/links/etc */\n  content?: 'block' | 'inline'\n  /** Allowlist of attributes to include in markdown (if not provided, all attributes are included) */\n  allowedAttributes?: string[]\n}\n\n/**\n * Creates a complete markdown spec for block-level nodes using Pandoc syntax.\n *\n * The generated spec handles:\n * - Parsing blocks with `:::blockName {attributes}` syntax\n * - Extracting and parsing attributes\n * - Rendering blocks back to markdown with proper formatting\n * - Nested content support\n *\n * @param options - Configuration for the block markdown spec\n * @returns Complete markdown specification object\n *\n * @example\n * ```ts\n * const calloutSpec = createBlockMarkdownSpec({\n *   nodeName: 'callout',\n *   defaultAttributes: { type: 'info' },\n *   allowedAttributes: ['type', 'title'] // Only these get rendered to markdown\n * })\n *\n * // Usage in extension:\n * export const Callout = Node.create({\n *   // ... other config\n *   markdown: calloutSpec\n * })\n * ```\n */\nexport function createBlockMarkdownSpec(options: BlockMarkdownSpecOptions): {\n  parseMarkdown: (token: MarkdownToken, h: MarkdownParseHelpers) => MarkdownParseResult\n  markdownTokenizer: MarkdownTokenizer\n  renderMarkdown: (node: JSONContent, h: MarkdownRendererHelpers) => string\n} {\n  const {\n    nodeName,\n    name: markdownName,\n    getContent,\n    parseAttributes = defaultParseAttributes,\n    serializeAttributes = defaultSerializeAttributes,\n    defaultAttributes = {},\n    content = 'block',\n    allowedAttributes,\n  } = options\n\n  // Use markdownName for syntax, fallback to nodeName\n  const blockName = markdownName || nodeName\n\n  // Helper function to filter attributes based on allowlist\n  const filterAttributes = (attrs: Record<string, any>) => {\n    if (!allowedAttributes) {\n      return attrs\n    }\n\n    const filtered: Record<string, any> = {}\n    allowedAttributes.forEach(key => {\n      if (key in attrs) {\n        filtered[key] = attrs[key]\n      }\n    })\n    return filtered\n  }\n\n  return {\n    parseMarkdown: (token, h) => {\n      let nodeContent: JSONContent[]\n\n      if (getContent) {\n        const contentResult = getContent(token)\n        // If getContent returns a string, wrap it in a text node\n        nodeContent = typeof contentResult === 'string' ? [{ type: 'text', text: contentResult }] : contentResult\n      } else if (content === 'block') {\n        nodeContent = h.parseChildren(token.tokens || [])\n      } else {\n        nodeContent = h.parseInline(token.tokens || [])\n      }\n\n      const attrs = { ...defaultAttributes, ...token.attributes }\n\n      return h.createNode(nodeName, attrs, nodeContent)\n    },\n\n    markdownTokenizer: {\n      name: nodeName,\n      level: 'block' as const,\n      start(src) {\n        const regex = new RegExp(`^:::${blockName}`, 'm')\n        const index = src.match(regex)?.index\n        return index !== undefined ? index : -1\n      },\n      tokenize(src, _tokens, lexer) {\n        // Match the opening tag with optional attributes\n        const openingRegex = new RegExp(`^:::${blockName}(?:\\\\s+\\\\{([^}]*)\\\\})?\\\\s*\\\\n`)\n        const openingMatch = src.match(openingRegex)\n\n        if (!openingMatch) {\n          return undefined\n        }\n\n        const [openingTag, attrString = ''] = openingMatch\n        const attributes = parseAttributes(attrString)\n\n        // Find the matching closing tag by tracking nesting level\n        let level = 1\n        const position = openingTag.length\n        let matchedContent = ''\n\n        // Pattern to match any block opening (:::word) or closing (:::)\n        const blockPattern = /^:::([\\w-]*)(\\s.*)?/gm\n        const remaining = src.slice(position)\n\n        blockPattern.lastIndex = 0\n\n        // run until no more matches are found\n        for (;;) {\n          const match = blockPattern.exec(remaining)\n          if (match === null) {\n            break\n          }\n          const matchPos = match.index\n          const blockType = match[1] // Empty string for closing tag, block name for opening\n\n          if (match[2]?.endsWith(':::')) {\n            // this is an atom ::: node, we skip it\n            continue\n          }\n\n          if (blockType) {\n            // Opening tag found - increase level\n            level += 1\n          } else {\n            // Closing tag found - decrease level\n            level -= 1\n\n            if (level === 0) {\n              // Found our matching closing tag\n              // Don't trim yet - keep newlines for tokenizer regex matching\n              const rawContent = remaining.slice(0, matchPos)\n              matchedContent = rawContent.trim()\n              const fullMatch = src.slice(0, position + matchPos + match[0].length)\n\n              // Tokenize the content\n              let contentTokens: MarkdownToken[] = []\n              if (matchedContent) {\n                if (content === 'block') {\n                  // Use rawContent for tokenization to preserve line boundaries for regex matching\n                  contentTokens = lexer.blockTokens(rawContent)\n\n                  // Parse inline tokens for any token that has text content but no tokens\n                  contentTokens.forEach(token => {\n                    if (token.text && (!token.tokens || token.tokens.length === 0)) {\n                      token.tokens = lexer.inlineTokens(token.text)\n                    }\n                  })\n\n                  // Clean up empty trailing paragraphs\n                  while (contentTokens.length > 0) {\n                    const lastToken = contentTokens[contentTokens.length - 1]\n                    if (lastToken.type === 'paragraph' && (!lastToken.text || lastToken.text.trim() === '')) {\n                      contentTokens.pop()\n                    } else {\n                      break\n                    }\n                  }\n                } else {\n                  contentTokens = lexer.inlineTokens(matchedContent)\n                }\n              }\n\n              return {\n                type: nodeName,\n                raw: fullMatch,\n                attributes,\n                content: matchedContent,\n                tokens: contentTokens,\n              }\n            }\n          }\n        }\n\n        // No matching closing tag found\n        return undefined\n      },\n    },\n\n    renderMarkdown: (node, h) => {\n      const filteredAttrs = filterAttributes(node.attrs || {})\n      const attrs = serializeAttributes(filteredAttrs)\n      const attrString = attrs ? ` {${attrs}}` : ''\n      const renderedContent = h.renderChildren(node.content || [], '\\n\\n')\n\n      return `:::${blockName}${attrString}\\n\\n${renderedContent}\\n\\n:::`\n    },\n  }\n}\n","import type {\n  JSONContent,\n  MarkdownParseHelpers,\n  MarkdownParseResult,\n  MarkdownToken,\n  MarkdownTokenizer,\n} from '../../types.js'\n\n/**\n * Parse shortcode attributes like 'id=\"madonna\" handle=\"john\" name=\"John Doe\"'\n * Requires all values to be quoted with either single or double quotes\n */\nfunction parseShortcodeAttributes(attrString: string): Record<string, any> {\n  if (!attrString.trim()) {\n    return {}\n  }\n\n  const attributes: Record<string, any> = {}\n  // Match key=value pairs, only accepting quoted values\n  const regex = /(\\w+)=(?:\"([^\"]*)\"|'([^']*)')/g\n  let match = regex.exec(attrString)\n\n  while (match !== null) {\n    const [, key, doubleQuoted, singleQuoted] = match\n    attributes[key] = doubleQuoted || singleQuoted\n    match = regex.exec(attrString)\n  }\n\n  return attributes\n}\n\n/**\n * Serialize attributes back to shortcode format\n * Always quotes all values with double quotes\n */\nfunction serializeShortcodeAttributes(attrs: Record<string, any>): string {\n  return Object.entries(attrs)\n    .filter(([, value]) => value !== undefined && value !== null)\n    .map(([key, value]) => `${key}=\"${value}\"`)\n    .join(' ')\n}\n\n/**\n * Configuration for an allowed attribute in markdown serialization.\n * Can be a simple string (attribute name) or an object with additional options.\n */\nexport type AllowedAttribute =\n  | string\n  | {\n      /** The attribute name */\n      name: string\n      /**\n       * If provided, the attribute will be skipped during serialization when its value\n       * equals this default value. This keeps markdown output clean by omitting\n       * attributes that have their default values.\n       */\n      skipIfDefault?: any\n    }\n\nexport interface InlineMarkdownSpecOptions {\n  /** The Tiptap node name this spec is for */\n  nodeName: string\n  /** The shortcode name (defaults to nodeName if not provided) */\n  name?: string\n  /** Function to extract content from the node for serialization */\n  getContent?: (node: any) => string\n  /** Function to parse attributes from the attribute string */\n  parseAttributes?: (attrString: string) => Record<string, any>\n  /** Function to serialize attributes to string */\n  serializeAttributes?: (attrs: Record<string, any>) => string\n  /** Default attributes to apply when parsing */\n  defaultAttributes?: Record<string, any>\n  /** Whether this is a self-closing shortcode (no content, like [emoji name=party]) */\n  selfClosing?: boolean\n  /**\n   * Allowlist of attributes to include in markdown serialization.\n   * If not provided, all attributes are included.\n   *\n   * Each item can be either:\n   * - A string: the attribute name (always included if present)\n   * - An object: `{ name: string, skipIfDefault?: any }` for conditional inclusion\n   *\n   * @example\n   * // Simple string attributes (backward compatible)\n   * allowedAttributes: ['id', 'label']\n   *\n   * // Mixed with conditional attributes\n   * allowedAttributes: [\n   *   'id',\n   *   'label',\n   *   { name: 'mentionSuggestionChar', skipIfDefault: '@' }\n   * ]\n   */\n  allowedAttributes?: AllowedAttribute[]\n}\n\n/**\n * Creates a complete markdown spec for inline nodes using attribute syntax.\n *\n * The generated spec handles:\n * - Parsing shortcode syntax with `[nodeName attributes]content[/nodeName]` format\n * - Self-closing shortcodes like `[emoji name=party_popper]`\n * - Extracting and parsing attributes from the opening tag\n * - Rendering inline elements back to shortcode markdown\n * - Supporting both content-based and self-closing inline elements\n *\n * @param options - Configuration for the inline markdown spec\n * @returns Complete markdown specification object\n *\n * @example\n * ```ts\n * // Self-closing mention: [mention id=\"madonna\" label=\"Madonna\"]\n * const mentionSpec = createInlineMarkdownSpec({\n *   nodeName: 'mention',\n *   selfClosing: true,\n *   defaultAttributes: { type: 'user' },\n *   allowedAttributes: ['id', 'label'] // Only these get rendered to markdown\n * })\n *\n * // Self-closing emoji: [emoji name=\"party_popper\"]\n * const emojiSpec = createInlineMarkdownSpec({\n *   nodeName: 'emoji',\n *   selfClosing: true,\n *   allowedAttributes: ['name']\n * })\n *\n * // With content: [highlight color=\"yellow\"]text[/highlight]\n * const highlightSpec = createInlineMarkdownSpec({\n *   nodeName: 'highlight',\n *   selfClosing: false,\n *   allowedAttributes: ['color', 'style']\n * })\n *\n * // Usage in extension:\n * export const Mention = Node.create({\n *   name: 'mention', // Must match nodeName\n *   // ... other config\n *   markdown: mentionSpec\n * })\n * ```\n */\nexport function createInlineMarkdownSpec(options: InlineMarkdownSpecOptions): {\n  parseMarkdown: (token: MarkdownToken, h: MarkdownParseHelpers) => MarkdownParseResult\n  markdownTokenizer: MarkdownTokenizer\n  renderMarkdown: (node: JSONContent) => string\n} {\n  const {\n    nodeName,\n    name: shortcodeName,\n    getContent,\n    parseAttributes = parseShortcodeAttributes,\n    serializeAttributes = serializeShortcodeAttributes,\n    defaultAttributes = {},\n    selfClosing = false,\n    allowedAttributes,\n  } = options\n\n  // Use shortcodeName for markdown syntax, fallback to nodeName\n  const shortcode = shortcodeName || nodeName\n\n  // Helper function to filter attributes based on allowlist\n  const filterAttributes = (attrs: Record<string, any>) => {\n    if (!allowedAttributes) {\n      return attrs\n    }\n\n    const filtered: Record<string, any> = {}\n    allowedAttributes.forEach(attr => {\n      // Handle both string and object formats for backward compatibility\n      const attrName = typeof attr === 'string' ? attr : attr.name\n      const skipIfDefault = typeof attr === 'string' ? undefined : attr.skipIfDefault\n\n      if (attrName in attrs) {\n        const value = attrs[attrName]\n\n        // Skip if value equals the default (when skipIfDefault is specified)\n        if (skipIfDefault !== undefined && value === skipIfDefault) {\n          return\n        }\n\n        filtered[attrName] = value\n      }\n    })\n    return filtered\n  }\n\n  // Escape special regex characters in shortcode name\n  const escapedShortcode = shortcode.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n\n  return {\n    parseMarkdown: (token: MarkdownToken, h: MarkdownParseHelpers) => {\n      const attrs = { ...defaultAttributes, ...token.attributes }\n\n      if (selfClosing) {\n        // Self-closing nodes like mentions are atomic - no content\n        return h.createNode(nodeName, attrs)\n      }\n\n      // Nodes with content\n      const content = getContent ? getContent(token) : token.content || ''\n      if (content) {\n        // For inline content, create text nodes using the proper helper\n        return h.createNode(nodeName, attrs, [h.createTextNode(content)])\n      }\n      return h.createNode(nodeName, attrs, [])\n    },\n\n    markdownTokenizer: {\n      name: nodeName,\n      level: 'inline' as const,\n      start(src: string) {\n        // Create a non-global version for finding the start position\n        const startPattern = selfClosing\n          ? new RegExp(`\\\\[${escapedShortcode}\\\\s*[^\\\\]]*\\\\]`)\n          : new RegExp(`\\\\[${escapedShortcode}\\\\s*[^\\\\]]*\\\\][\\\\s\\\\S]*?\\\\[\\\\/${escapedShortcode}\\\\]`)\n\n        const match = src.match(startPattern)\n        const index = match?.index\n        return index !== undefined ? index : -1\n      },\n      tokenize(src, _tokens, _lexer) {\n        // Use non-global regex to match from the start of the string\n        const tokenPattern = selfClosing\n          ? new RegExp(`^\\\\[${escapedShortcode}\\\\s*([^\\\\]]*)\\\\]`)\n          : new RegExp(`^\\\\[${escapedShortcode}\\\\s*([^\\\\]]*)\\\\]([\\\\s\\\\S]*?)\\\\[\\\\/${escapedShortcode}\\\\]`)\n\n        const match = src.match(tokenPattern)\n\n        if (!match) {\n          return undefined\n        }\n\n        let content = ''\n        let attrString = ''\n\n        if (selfClosing) {\n          // Self-closing: [shortcode attr=\"value\"]\n          const [, attrs] = match\n          attrString = attrs\n        } else {\n          // With content: [shortcode attr=\"value\"]content[/shortcode]\n          const [, attrs, contentMatch] = match\n          attrString = attrs\n          content = contentMatch || ''\n        }\n\n        // Parse attributes from the attribute string\n        const attributes = parseAttributes(attrString.trim())\n\n        return {\n          type: nodeName,\n          raw: match[0],\n          content: content.trim(),\n          attributes,\n        }\n      },\n    },\n\n    renderMarkdown: (node: JSONContent) => {\n      let content = ''\n      if (getContent) {\n        content = getContent(node)\n      } else if (node.content && node.content.length > 0) {\n        // Extract text from content array for inline nodes\n        content = node.content\n          .filter((child: any) => child.type === 'text')\n          .map((child: any) => child.text)\n          .join('')\n      }\n\n      const filteredAttrs = filterAttributes(node.attrs || {})\n      const attrs = serializeAttributes(filteredAttrs)\n      const attrString = attrs ? ` ${attrs}` : ''\n\n      if (selfClosing) {\n        return `[${shortcode}${attrString}]`\n      }\n\n      return `[${shortcode}${attrString}]${content}[/${shortcode}]`\n    },\n  }\n}\n","/**\n * @fileoverview Utility for parsing indented markdown blocks with hierarchical nesting.\n *\n * This utility handles the complex logic of parsing markdown blocks that can contain\n * nested content based on indentation levels, maintaining proper hierarchical structure\n * for lists, task lists, and other indented block types.\n */\n\nexport interface ParsedBlock {\n  type: string\n  raw: string\n  mainContent: string\n  indentLevel: number\n  nestedContent?: string\n  nestedTokens?: any[]\n  [key: string]: any\n}\n\nexport interface BlockParserConfig {\n  /** Regex pattern to match block items */\n  itemPattern: RegExp\n  /** Function to extract data from regex match */\n  extractItemData: (match: RegExpMatchArray) => {\n    mainContent: string\n    indentLevel: number\n    [key: string]: any\n  }\n  /** Function to create the final token */\n  createToken: (data: any, nestedTokens?: any[]) => ParsedBlock\n  /** Base indentation to remove from nested content (default: 2 spaces) */\n  baseIndentSize?: number\n  /**\n   * Custom parser for nested content. If provided, this will be called instead\n   * of the default lexer.blockTokens() for parsing nested content.\n   * This allows recursive parsing of the same block type.\n   */\n  customNestedParser?: (dedentedContent: string) => any[] | undefined\n}\n\n/**\n * Parses markdown text into hierarchical indented blocks with proper nesting.\n *\n * This utility handles:\n * - Line-by-line parsing with pattern matching\n * - Hierarchical nesting based on indentation levels\n * - Nested content collection and parsing\n * - Empty line handling\n * - Content dedenting for nested blocks\n *\n * The key difference from flat parsing is that this maintains the hierarchical\n * structure where nested items become `nestedTokens` of their parent items,\n * rather than being flattened into a single array.\n *\n * @param src - The markdown source text to parse\n * @param config - Configuration object defining how to parse and create tokens\n * @param lexer - Markdown lexer for parsing nested content\n * @returns Parsed result with hierarchical items, or undefined if no matches\n *\n * @example\n * ```ts\n * const result = parseIndentedBlocks(src, {\n *   itemPattern: /^(\\s*)([-+*])\\s+\\[([ xX])\\]\\s+(.*)$/,\n *   extractItemData: (match) => ({\n *     indentLevel: match[1].length,\n *     mainContent: match[4],\n *     checked: match[3].toLowerCase() === 'x'\n *   }),\n *   createToken: (data, nestedTokens) => ({\n *     type: 'taskItem',\n *     checked: data.checked,\n *     text: data.mainContent,\n *     nestedTokens\n *   })\n * }, lexer)\n * ```\n */\nexport function parseIndentedBlocks(\n  src: string,\n  config: BlockParserConfig,\n  lexer: {\n    inlineTokens: (src: string) => any[]\n    blockTokens: (src: string) => any[]\n  },\n):\n  | {\n      items: ParsedBlock[]\n      raw: string\n    }\n  | undefined {\n  const lines = src.split('\\n')\n  const items: ParsedBlock[] = []\n  let totalRaw = ''\n  let i = 0\n  const baseIndentSize = config.baseIndentSize || 2\n\n  while (i < lines.length) {\n    const currentLine = lines[i]\n    const itemMatch = currentLine.match(config.itemPattern)\n\n    if (!itemMatch) {\n      // Not a matching item - stop if we have items, otherwise this isn't our block type\n      if (items.length > 0) {\n        break\n      } else if (currentLine.trim() === '') {\n        i += 1\n        totalRaw = `${totalRaw}${currentLine}\\n`\n        continue\n      } else {\n        return undefined\n      }\n    }\n\n    const itemData = config.extractItemData(itemMatch)\n    const { indentLevel, mainContent } = itemData\n    totalRaw = `${totalRaw}${currentLine}\\n`\n\n    // Collect content for this item (including nested items)\n    const itemContent = [mainContent] // Start with the main text\n    i += 1\n\n    // Look ahead for nested content (indented more than current item)\n    while (i < lines.length) {\n      const nextLine = lines[i]\n\n      if (nextLine.trim() === '') {\n        // Empty line - might be end of nested content\n        const nextNonEmptyIndex = lines.slice(i + 1).findIndex(l => l.trim() !== '')\n        if (nextNonEmptyIndex === -1) {\n          // No more content\n          break\n        }\n\n        const nextNonEmpty = lines[i + 1 + nextNonEmptyIndex]\n        const nextIndent = nextNonEmpty.match(/^(\\s*)/)?.[1]?.length || 0\n\n        if (nextIndent > indentLevel) {\n          // Nested content continues after empty line\n          itemContent.push(nextLine)\n          totalRaw = `${totalRaw}${nextLine}\\n`\n          i += 1\n          continue\n        } else {\n          // End of nested content\n          break\n        }\n      }\n\n      const nextIndent = nextLine.match(/^(\\s*)/)?.[1]?.length || 0\n\n      if (nextIndent > indentLevel) {\n        // This is nested content for the current item\n        itemContent.push(nextLine)\n        totalRaw = `${totalRaw}${nextLine}\\n`\n        i += 1\n      } else {\n        // Same or less indentation - this belongs to parent level\n        break\n      }\n    }\n\n    // Parse nested content if present\n    let nestedTokens: any[] | undefined\n    const nestedContent = itemContent.slice(1)\n\n    if (nestedContent.length > 0) {\n      // Remove the base indentation from nested content\n      const dedentedNested = nestedContent\n        .map(nestedLine => nestedLine.slice(indentLevel + baseIndentSize)) // Remove base indent + 2 spaces\n        .join('\\n')\n\n      if (dedentedNested.trim()) {\n        // Use custom nested parser if provided, otherwise fall back to default\n        if (config.customNestedParser) {\n          nestedTokens = config.customNestedParser(dedentedNested)\n        } else {\n          nestedTokens = lexer.blockTokens(dedentedNested)\n        }\n      }\n    }\n\n    // Create the token using the provided factory function\n    const token = config.createToken(itemData, nestedTokens)\n    items.push(token)\n  }\n\n  if (items.length === 0) {\n    return undefined\n  }\n\n  return {\n    items,\n    raw: totalRaw,\n  }\n}\n","import type { JSONContent } from '@tiptap/core'\n\n/**\n * @fileoverview Utility functions for rendering nested content in markdown.\n *\n * This module provides reusable utilities for extensions that need to render\n * content with a prefix on the main line and properly indented nested content.\n */\n\n/**\n * Utility function for rendering content with a main line prefix and nested indented content.\n *\n * This function handles the common pattern of rendering content with:\n * 1. A main line with a prefix (like \"- \" for lists, \"> \" for blockquotes, etc.)\n * 2. Nested content that gets indented properly\n *\n * @param node - The ProseMirror node representing the content\n * @param h - The markdown renderer helper\n * @param prefixOrGenerator - Either a string prefix or a function that generates the prefix from context\n * @param ctx - Optional context object (used when prefixOrGenerator is a function)\n * @returns The rendered markdown string\n *\n * @example\n * ```ts\n * // For a bullet list item with static prefix\n * return renderNestedMarkdownContent(node, h, '- ')\n *\n * // For a task item with static prefix\n * const prefix = `- [${node.attrs?.checked ? 'x' : ' '}] `\n * return renderNestedMarkdownContent(node, h, prefix)\n *\n * // For a blockquote with static prefix\n * return renderNestedMarkdownContent(node, h, '> ')\n *\n * // For content with dynamic prefix based on context\n * return renderNestedMarkdownContent(node, h, ctx => {\n *   if (ctx.parentType === 'orderedList') {\n *     return `${ctx.index + 1}. `\n *   }\n *   return '- '\n * }, ctx)\n *\n * // Custom extension example\n * const CustomContainer = Node.create({\n *   name: 'customContainer',\n *   // ... other config\n *   markdown: {\n *     render: (node, h) => {\n *       const type = node.attrs?.type || 'info'\n *       return renderNestedMarkdownContent(node, h, `[${type}] `)\n *     }\n *   }\n * })\n * ```\n */\nexport function renderNestedMarkdownContent(\n  node: JSONContent,\n  h: {\n    renderChildren: (nodes: JSONContent[]) => string\n    indent: (text: string) => string\n  },\n  prefixOrGenerator: string | ((ctx: any) => string),\n  ctx?: any,\n): string {\n  if (!node || !Array.isArray(node.content)) {\n    return ''\n  }\n\n  // Determine the prefix based on the input\n  const prefix = typeof prefixOrGenerator === 'function' ? prefixOrGenerator(ctx) : prefixOrGenerator\n\n  const [content, ...children] = node.content\n\n  // Render the main content (typically a paragraph)\n  const mainContent = h.renderChildren([content])\n  const output = [`${prefix}${mainContent}`]\n\n  // Handle nested children with proper indentation\n  if (children && children.length > 0) {\n    children.forEach(child => {\n      const childContent = h.renderChildren([child])\n      if (childContent) {\n        // Split the child content by lines and indent each line\n        const indentedChild = childContent\n          .split('\\n')\n          .map(line => (line ? h.indent(line) : ''))\n          .join('\\n')\n        output.push(indentedChild)\n      }\n    })\n  }\n\n  return output.join('\\n')\n}\n","import type { Mark } from '@tiptap/pm/model'\nimport type { ViewMutationRecord } from '@tiptap/pm/view'\n\nimport type { Editor } from './Editor.js'\nimport type { MarkViewProps, MarkViewRendererOptions } from './types.js'\nimport { isAndroid, isiOS } from './utilities/index.js'\n\nexport function updateMarkViewAttributes(checkMark: Mark, editor: Editor, attrs: Record<string, any> = {}): void {\n  const { state } = editor\n  const { doc, tr } = state\n  const thisMark = checkMark\n\n  doc.descendants((node, pos) => {\n    const from = tr.mapping.map(pos)\n    const to = tr.mapping.map(pos) + node.nodeSize\n    let foundMark: Mark | null = null\n\n    // find the mark on the current node\n    node.marks.forEach(mark => {\n      if (mark !== thisMark) {\n        return false\n      }\n\n      foundMark = mark\n    })\n\n    if (!foundMark) {\n      return\n    }\n\n    // check if we need to update given the attributes\n    let needsUpdate = false\n    Object.keys(attrs).forEach(k => {\n      if (attrs[k] !== foundMark!.attrs[k]) {\n        needsUpdate = true\n      }\n    })\n\n    if (needsUpdate) {\n      const updatedMark = checkMark.type.create({\n        ...checkMark.attrs,\n        ...attrs,\n      })\n\n      tr.removeMark(from, to, checkMark.type)\n      tr.addMark(from, to, updatedMark)\n    }\n  })\n\n  if (tr.docChanged) {\n    editor.view.dispatch(tr)\n  }\n}\n\nexport class MarkView<Component, Options extends MarkViewRendererOptions = MarkViewRendererOptions> {\n  component: Component\n  editor: Editor\n  options: Options\n  mark: MarkViewProps['mark']\n  HTMLAttributes: MarkViewProps['HTMLAttributes']\n\n  constructor(component: Component, props: MarkViewProps, options?: Partial<Options>) {\n    this.component = component\n    this.editor = props.editor\n    this.options = { ...options } as Options\n    this.mark = props.mark\n    this.HTMLAttributes = props.HTMLAttributes\n  }\n\n  get dom(): HTMLElement {\n    return this.editor.view.dom\n  }\n\n  get contentDOM(): HTMLElement | null {\n    return null\n  }\n\n  /**\n   * Update the attributes of the mark in the document.\n   * @param attrs The attributes to update.\n   */\n  updateAttributes(attrs: Record<string, any>, checkMark?: Mark): void {\n    updateMarkViewAttributes(checkMark || this.mark, this.editor, attrs)\n  }\n\n  ignoreMutation(mutation: ViewMutationRecord): boolean {\n    if (!this.dom || !this.contentDOM) {\n      return true\n    }\n\n    if (typeof this.options.ignoreMutation === 'function') {\n      return this.options.ignoreMutation({ mutation })\n    }\n\n    if (mutation.type === 'selection') {\n      return false\n    }\n\n    if (\n      this.dom.contains(mutation.target) &&\n      mutation.type === 'childList' &&\n      (isiOS() || isAndroid()) &&\n      this.editor.isFocused\n    ) {\n      const changedNodes = [...Array.from(mutation.addedNodes), ...Array.from(mutation.removedNodes)] as HTMLElement[]\n\n      if (changedNodes.every(node => node.isContentEditable)) {\n        return false\n      }\n    }\n\n    if (this.contentDOM === mutation.target && mutation.type === 'attributes') {\n      return true\n    }\n\n    if (this.contentDOM.contains(mutation.target)) {\n      return false\n    }\n\n    return true\n  }\n}\n","import type { DOMOutputSpec, Node as ProseMirrorNode, NodeSpec, NodeType } from '@tiptap/pm/model'\n\nimport type { Editor } from './Editor.js'\nimport type { ExtendableConfig } from './Extendable.js'\nimport { Extendable } from './Extendable.js'\nimport type { Attributes, NodeViewRenderer, ParentConfig } from './types.js'\n\nexport interface NodeConfig<Options = any, Storage = any>\n  extends ExtendableConfig<Options, Storage, NodeConfig<Options, Storage>, NodeType> {\n  /**\n   * Node View\n   */\n  addNodeView?:\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        editor: Editor\n        type: NodeType\n        parent: ParentConfig<NodeConfig<Options, Storage>>['addNodeView']\n      }) => NodeViewRenderer | null)\n    | null\n\n  /**\n   * Defines if this node should be a top level node (doc)\n   * @default false\n   * @example true\n   */\n  topNode?: boolean\n\n  /**\n   * The content expression for this node, as described in the [schema\n   * guide](/docs/guide/#schema.content_expressions). When not given,\n   * the node does not allow any content.\n   *\n   * You can read more about it on the Prosemirror documentation here\n   * @see https://prosemirror.net/docs/guide/#schema.content_expressions\n   * @default undefined\n   * @example content: 'block+'\n   * @example content: 'headline paragraph block*'\n   */\n  content?:\n    | NodeSpec['content']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['content']\n        editor?: Editor\n      }) => NodeSpec['content'])\n\n  /**\n   * The marks that are allowed inside of this node. May be a\n   * space-separated string referring to mark names or groups, `\"_\"`\n   * to explicitly allow all marks, or `\"\"` to disallow marks. When\n   * not given, nodes with inline content default to allowing all\n   * marks, other nodes default to not allowing marks.\n   *\n   * @example marks: 'strong em'\n   */\n  marks?:\n    | NodeSpec['marks']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['marks']\n        editor?: Editor\n      }) => NodeSpec['marks'])\n\n  /**\n   * The group or space-separated groups to which this node belongs,\n   * which can be referred to in the content expressions for the\n   * schema.\n   *\n   * By default Tiptap uses the groups 'block' and 'inline' for nodes. You\n   * can also use custom groups if you want to group specific nodes together\n   * and handle them in your schema.\n   * @example group: 'block'\n   * @example group: 'inline'\n   * @example group: 'customBlock' // this uses a custom group\n   */\n  group?:\n    | NodeSpec['group']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['group']\n        editor?: Editor\n      }) => NodeSpec['group'])\n\n  /**\n   * Should be set to true for inline nodes. (Implied for text nodes.)\n   */\n  inline?:\n    | NodeSpec['inline']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['inline']\n        editor?: Editor\n      }) => NodeSpec['inline'])\n\n  /**\n   * Can be set to true to indicate that, though this isn't a [leaf\n   * node](https://prosemirror.net/docs/ref/#model.NodeType.isLeaf), it doesn't have directly editable\n   * content and should be treated as a single unit in the view.\n   *\n   * @example atom: true\n   */\n  atom?:\n    | NodeSpec['atom']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['atom']\n        editor?: Editor\n      }) => NodeSpec['atom'])\n\n  /**\n   * Controls whether nodes of this type can be selected as a [node\n   * selection](https://prosemirror.net/docs/ref/#state.NodeSelection). Defaults to true for non-text\n   * nodes.\n   *\n   * @default true\n   * @example selectable: false\n   */\n  selectable?:\n    | NodeSpec['selectable']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['selectable']\n        editor?: Editor\n      }) => NodeSpec['selectable'])\n\n  /**\n   * Determines whether nodes of this type can be dragged without\n   * being selected. Defaults to false.\n   *\n   * @default: false\n   * @example: draggable: true\n   */\n  draggable?:\n    | NodeSpec['draggable']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['draggable']\n        editor?: Editor\n      }) => NodeSpec['draggable'])\n\n  /**\n   * Can be used to indicate that this node contains code, which\n   * causes some commands to behave differently.\n   */\n  code?:\n    | NodeSpec['code']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['code']\n        editor?: Editor\n      }) => NodeSpec['code'])\n\n  /**\n   * Controls way whitespace in this a node is parsed. The default is\n   * `\"normal\"`, which causes the [DOM parser](https://prosemirror.net/docs/ref/#model.DOMParser) to\n   * collapse whitespace in normal mode, and normalize it (replacing\n   * newlines and such with spaces) otherwise. `\"pre\"` causes the\n   * parser to preserve spaces inside the node. When this option isn't\n   * given, but [`code`](https://prosemirror.net/docs/ref/#model.NodeSpec.code) is true, `whitespace`\n   * will default to `\"pre\"`. Note that this option doesn't influence\n   * the way the node is renderedthat should be handled by `toDOM`\n   * and/or styling.\n   */\n  whitespace?:\n    | NodeSpec['whitespace']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['whitespace']\n        editor?: Editor\n      }) => NodeSpec['whitespace'])\n\n  /**\n   * Allows a **single** node to be set as linebreak equivalent (e.g. hardBreak).\n   * When converting between block types that have whitespace set to \"pre\"\n   * and don't support the linebreak node (e.g. codeBlock) and other block types\n   * that do support the linebreak node (e.g. paragraphs) - this node will be used\n   * as the linebreak instead of stripping the newline.\n   *\n   * See [linebreakReplacement](https://prosemirror.net/docs/ref/#model.NodeSpec.linebreakReplacement).\n   */\n  linebreakReplacement?:\n    | NodeSpec['linebreakReplacement']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['linebreakReplacement']\n        editor?: Editor\n      }) => NodeSpec['linebreakReplacement'])\n\n  /**\n   * When enabled, enables both\n   * [`definingAsContext`](https://prosemirror.net/docs/ref/#model.NodeSpec.definingAsContext) and\n   * [`definingForContent`](https://prosemirror.net/docs/ref/#model.NodeSpec.definingForContent).\n   *\n   * @default false\n   * @example isolating: true\n   */\n  defining?:\n    | NodeSpec['defining']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['defining']\n        editor?: Editor\n      }) => NodeSpec['defining'])\n\n  /**\n   * When enabled (default is false), the sides of nodes of this type\n   * count as boundaries that regular editing operations, like\n   * backspacing or lifting, won't cross. An example of a node that\n   * should probably have this enabled is a table cell.\n   */\n  isolating?:\n    | NodeSpec['isolating']\n    | ((this: {\n        name: string\n        options: Options\n        storage: Storage\n        parent: ParentConfig<NodeConfig<Options, Storage>>['isolating']\n        editor?: Editor\n      }) => NodeSpec['isolating'])\n\n  /**\n   * Associates DOM parser information with this node, which can be\n   * used by [`DOMParser.fromSchema`](https://prosemirror.net/docs/ref/#model.DOMParser^fromSchema) to\n   * automatically derive a parser. The `node` field in the rules is\n   * implied (the name of this node will be filled in automatically).\n   * If you supply your own parser, you do not need to also specify\n   * parsing rules in your schema.\n   *\n   * @example parseHTML: [{ tag: 'div', attrs: { 'data-id': 'my-block' } }]\n   */\n  parseHTML?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    parent: ParentConfig<NodeConfig<Options, Storage>>['parseHTML']\n    editor?: Editor\n  }) => NodeSpec['parseDOM']\n\n  /**\n   * A description of a DOM structure. Can be either a string, which is\n   * interpreted as a text node, a DOM node, which is interpreted as\n   * itself, a `{dom, contentDOM}` object, or an array.\n   *\n   * An array describes a DOM element. The first value in the array\n   * should be a stringthe name of the DOM element, optionally prefixed\n   * by a namespace URL and a space. If the second element is plain\n   * object, it is interpreted as a set of attributes for the element.\n   * Any elements after that (including the 2nd if it's not an attribute\n   * object) are interpreted as children of the DOM elements, and must\n   * either be valid `DOMOutputSpec` values, or the number zero.\n   *\n   * The number zero (pronounced hole) is used to indicate the place\n   * where a node's child nodes should be inserted. If it occurs in an\n   * output spec, it should be the only child element in its parent\n   * node.\n   *\n   * @example toDOM: ['div[data-id=\"my-block\"]', { class: 'my-block' }, 0]\n   */\n  renderHTML?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          parent: ParentConfig<NodeConfig<Options, Storage>>['renderHTML']\n          editor?: Editor\n        },\n        props: {\n          node: ProseMirrorNode\n          HTMLAttributes: Record<string, any>\n        },\n      ) => DOMOutputSpec)\n    | null\n\n  /**\n   * renders the node as text\n   * @example renderText: () => 'foo\n   */\n  renderText?:\n    | ((\n        this: {\n          name: string\n          options: Options\n          storage: Storage\n          parent: ParentConfig<NodeConfig<Options, Storage>>['renderText']\n          editor?: Editor\n        },\n        props: {\n          node: ProseMirrorNode\n          pos: number\n          parent: ProseMirrorNode\n          index: number\n        },\n      ) => string)\n    | null\n\n  /**\n   * Add attributes to the node\n   * @example addAttributes: () => ({ class: 'foo' })\n   */\n  addAttributes?: (this: {\n    name: string\n    options: Options\n    storage: Storage\n    parent: ParentConfig<NodeConfig<Options, Storage>>['addAttributes']\n    editor?: Editor\n    // eslint-disable-next-line @typescript-eslint/no-empty-object-type\n  }) => Attributes | {}\n}\n\n/**\n * The Node class is used to create custom node extensions.\n * @see https://tiptap.dev/api/extensions#create-a-new-extension\n */\nexport class Node<Options = any, Storage = any> extends Extendable<Options, Storage, NodeConfig<Options, Storage>> {\n  type = 'node'\n\n  /**\n   * Create a new Node instance\n   * @param config - Node configuration object or a function that returns a configuration object\n   */\n  static create<O = any, S = any>(config: Partial<NodeConfig<O, S>> | (() => Partial<NodeConfig<O, S>>) = {}) {\n    // If the config is a function, execute it to get the configuration object\n    const resolvedConfig = typeof config === 'function' ? config() : config\n    return new Node<O, S>(resolvedConfig)\n  }\n\n  configure(options?: Partial<Options>) {\n    return super.configure(options) as Node<Options, Storage>\n  }\n\n  extend<\n    ExtendedOptions = Options,\n    ExtendedStorage = Storage,\n    ExtendedConfig extends NodeConfig<ExtendedOptions, ExtendedStorage> = NodeConfig<ExtendedOptions, ExtendedStorage>,\n  >(\n    extendedConfig?:\n      | (() => Partial<ExtendedConfig>)\n      | (Partial<ExtendedConfig> &\n          ThisType<{\n            name: string\n            options: ExtendedOptions\n            storage: ExtendedStorage\n            editor: Editor\n            type: NodeType\n          }>),\n  ): Node<ExtendedOptions, ExtendedStorage> {\n    // If the extended config is a function, execute it to get the configuration object\n    const resolvedConfig = typeof extendedConfig === 'function' ? extendedConfig() : extendedConfig\n    return super.extend(resolvedConfig) as Node<ExtendedOptions, ExtendedStorage>\n  }\n}\n","import { NodeSelection } from '@tiptap/pm/state'\nimport type { NodeView as ProseMirrorNodeView, ViewMutationRecord } from '@tiptap/pm/view'\n\nimport type { Editor as CoreEditor } from './Editor.js'\nimport type { DecorationWithType, NodeViewRendererOptions, NodeViewRendererProps } from './types.js'\nimport { isAndroid } from './utilities/isAndroid.js'\nimport { isiOS } from './utilities/isiOS.js'\n\n/**\n * Node views are used to customize the rendered DOM structure of a node.\n * @see https://tiptap.dev/guide/node-views\n */\nexport class NodeView<\n  Component,\n  NodeEditor extends CoreEditor = CoreEditor,\n  Options extends NodeViewRendererOptions = NodeViewRendererOptions,\n> implements ProseMirrorNodeView\n{\n  component: Component\n\n  editor: NodeEditor\n\n  options: Options\n\n  extension: NodeViewRendererProps['extension']\n\n  node: NodeViewRendererProps['node']\n\n  decorations: NodeViewRendererProps['decorations']\n\n  innerDecorations: NodeViewRendererProps['innerDecorations']\n\n  view: NodeViewRendererProps['view']\n\n  getPos: NodeViewRendererProps['getPos']\n\n  HTMLAttributes: NodeViewRendererProps['HTMLAttributes']\n\n  isDragging = false\n\n  constructor(component: Component, props: NodeViewRendererProps, options?: Partial<Options>) {\n    this.component = component\n    this.editor = props.editor as NodeEditor\n    this.options = {\n      stopEvent: null,\n      ignoreMutation: null,\n      ...options,\n    } as Options\n    this.extension = props.extension\n    this.node = props.node\n    this.decorations = props.decorations as DecorationWithType[]\n    this.innerDecorations = props.innerDecorations\n    this.view = props.view\n    this.HTMLAttributes = props.HTMLAttributes\n    this.getPos = props.getPos\n    this.mount()\n  }\n\n  mount() {\n    // eslint-disable-next-line\n    return\n  }\n\n  get dom(): HTMLElement {\n    return this.editor.view.dom as HTMLElement\n  }\n\n  get contentDOM(): HTMLElement | null {\n    return null\n  }\n\n  onDragStart(event: DragEvent) {\n    const { view } = this.editor\n    const target = event.target as HTMLElement\n\n    // get the drag handle element\n    // `closest` is not available for text nodes so we may have to use its parent\n    const dragHandle =\n      target.nodeType === 3 ? target.parentElement?.closest('[data-drag-handle]') : target.closest('[data-drag-handle]')\n\n    if (!this.dom || this.contentDOM?.contains(target) || !dragHandle) {\n      return\n    }\n\n    let x = 0\n    let y = 0\n\n    // calculate offset for drag element if we use a different drag handle element\n    if (this.dom !== dragHandle) {\n      const domBox = this.dom.getBoundingClientRect()\n      const handleBox = dragHandle.getBoundingClientRect()\n\n      // In React, we have to go through nativeEvent to reach offsetX/offsetY.\n      const offsetX = event.offsetX ?? (event as any).nativeEvent?.offsetX\n      const offsetY = event.offsetY ?? (event as any).nativeEvent?.offsetY\n\n      x = handleBox.x - domBox.x + offsetX\n      y = handleBox.y - domBox.y + offsetY\n    }\n\n    const clonedNode = this.dom.cloneNode(true) as HTMLElement\n\n    // Preserve the visual size of the original when using the clone as\n    // the drag image.\n    try {\n      const domBox = this.dom.getBoundingClientRect()\n      clonedNode.style.width = `${Math.round(domBox.width)}px`\n      clonedNode.style.height = `${Math.round(domBox.height)}px`\n      clonedNode.style.boxSizing = 'border-box'\n      // Ensure the clone doesn't capture pointer events while offscreen\n      clonedNode.style.pointerEvents = 'none'\n    } catch {\n      // ignore measurement errors (e.g. if element not in DOM)\n    }\n\n    // Some browsers (notably Safari) require the element passed to\n    // setDragImage to be present in the DOM. Using a detached node can\n    // cause the drag to immediately end.\n    let dragImageWrapper: HTMLElement | null = null\n\n    try {\n      dragImageWrapper = document.createElement('div')\n      dragImageWrapper.style.position = 'absolute'\n      dragImageWrapper.style.top = '-9999px'\n      dragImageWrapper.style.left = '-9999px'\n      dragImageWrapper.style.pointerEvents = 'none'\n      dragImageWrapper.appendChild(clonedNode)\n      document.body.appendChild(dragImageWrapper)\n\n      event.dataTransfer?.setDragImage(clonedNode, x, y)\n    } finally {\n      // Remove the wrapper on the next tick so the browser can use the\n      // element as the drag image. A 0ms timeout is enough in practice.\n      if (dragImageWrapper) {\n        setTimeout(() => {\n          try {\n            dragImageWrapper?.remove()\n          } catch {\n            // ignore removal errors\n          }\n        }, 0)\n      }\n    }\n\n    const pos = this.getPos()\n\n    if (typeof pos !== 'number') {\n      return\n    }\n    // we need to tell ProseMirror that we want to move the whole node\n    // so we create a NodeSelection\n    const selection = NodeSelection.create(view.state.doc, pos)\n    const transaction = view.state.tr.setSelection(selection)\n\n    view.dispatch(transaction)\n  }\n\n  stopEvent(event: Event) {\n    if (!this.dom) {\n      return false\n    }\n\n    if (typeof this.options.stopEvent === 'function') {\n      return this.options.stopEvent({ event })\n    }\n\n    const target = event.target as HTMLElement\n    const isInElement = this.dom.contains(target) && !this.contentDOM?.contains(target)\n\n    // any event from child nodes should be handled by ProseMirror\n    if (!isInElement) {\n      return false\n    }\n\n    const isDragEvent = event.type.startsWith('drag')\n    const isDropEvent = event.type === 'drop'\n    const isInput = ['INPUT', 'BUTTON', 'SELECT', 'TEXTAREA'].includes(target.tagName) || target.isContentEditable\n\n    // any input event within node views should be ignored by ProseMirror\n    if (isInput && !isDropEvent && !isDragEvent) {\n      return true\n    }\n\n    const { isEditable } = this.editor\n    const { isDragging } = this\n    const isDraggable = !!this.node.type.spec.draggable\n    const isSelectable = NodeSelection.isSelectable(this.node)\n    const isCopyEvent = event.type === 'copy'\n    const isPasteEvent = event.type === 'paste'\n    const isCutEvent = event.type === 'cut'\n    const isClickEvent = event.type === 'mousedown'\n\n    // ProseMirror tries to drag selectable nodes\n    // even if `draggable` is set to `false`\n    // this fix prevents that\n    if (!isDraggable && isSelectable && isDragEvent && event.target === this.dom) {\n      event.preventDefault()\n    }\n\n    if (isDraggable && isDragEvent && !isDragging && event.target === this.dom) {\n      event.preventDefault()\n      return false\n    }\n\n    // we have to store that dragging started\n    if (isDraggable && isEditable && !isDragging && isClickEvent) {\n      const dragHandle = target.closest('[data-drag-handle]')\n      const isValidDragHandle = dragHandle && (this.dom === dragHandle || this.dom.contains(dragHandle))\n\n      if (isValidDragHandle) {\n        this.isDragging = true\n\n        document.addEventListener(\n          'dragend',\n          () => {\n            this.isDragging = false\n          },\n          { once: true },\n        )\n\n        document.addEventListener(\n          'drop',\n          () => {\n            this.isDragging = false\n          },\n          { once: true },\n        )\n\n        document.addEventListener(\n          'mouseup',\n          () => {\n            this.isDragging = false\n          },\n          { once: true },\n        )\n      }\n    }\n\n    // these events are handled by prosemirror\n    if (isDragging || isDropEvent || isCopyEvent || isPasteEvent || isCutEvent || (isClickEvent && isSelectable)) {\n      return false\n    }\n\n    return true\n  }\n\n  /**\n   * Called when a DOM [mutation](https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver) or a selection change happens within the view.\n   * @return `false` if the editor should re-read the selection or re-parse the range around the mutation\n   * @return `true` if it can safely be ignored.\n   */\n  ignoreMutation(mutation: ViewMutationRecord) {\n    if (!this.dom || !this.contentDOM) {\n      return true\n    }\n\n    if (typeof this.options.ignoreMutation === 'function') {\n      return this.options.ignoreMutation({ mutation })\n    }\n\n    // a leaf/atom node is like a black box for ProseMirror\n    // and should be fully handled by the node view\n    if (this.node.isLeaf || this.node.isAtom) {\n      return true\n    }\n\n    // ProseMirror should handle any selections\n    if (mutation.type === 'selection') {\n      return false\n    }\n\n    // try to prevent a bug on iOS and Android that will break node views on enter\n    // this is because ProseMirror cant preventDispatch on enter\n    // this will lead to a re-render of the node view on enter\n    // see: https://github.com/ueberdosis/tiptap/issues/1214\n    // see: https://github.com/ueberdosis/tiptap/issues/2534\n    if (\n      this.dom.contains(mutation.target) &&\n      mutation.type === 'childList' &&\n      (isiOS() || isAndroid()) &&\n      this.editor.isFocused\n    ) {\n      const changedNodes = [...Array.from(mutation.addedNodes), ...Array.from(mutation.removedNodes)] as HTMLElement[]\n\n      // well check if every changed node is contentEditable\n      // to make sure its probably mutated by ProseMirror\n      if (changedNodes.every(node => node.isContentEditable)) {\n        return false\n      }\n    }\n\n    // we will allow mutation contentDOM with attributes\n    // so we can for example adding classes within our node view\n    if (this.contentDOM === mutation.target && mutation.type === 'attributes') {\n      return true\n    }\n\n    // ProseMirror should handle any changes within contentDOM\n    if (this.contentDOM.contains(mutation.target)) {\n      return false\n    }\n\n    return true\n  }\n\n  /**\n   * Update the attributes of the prosemirror node.\n   */\n  updateAttributes(attributes: Record<string, any>): void {\n    this.editor.commands.command(({ tr }) => {\n      const pos = this.getPos()\n\n      if (typeof pos !== 'number') {\n        return false\n      }\n\n      tr.setNodeMarkup(pos, undefined, {\n        ...this.node.attrs,\n        ...attributes,\n      })\n\n      return true\n    })\n  }\n\n  /**\n   * Delete the node.\n   */\n  deleteNode(): void {\n    const from = this.getPos()\n\n    if (typeof from !== 'number') {\n      return\n    }\n    const to = from + this.node.nodeSize\n\n    this.editor.commands.deleteRange({ from, to })\n  }\n}\n","import type { MarkType } from '@tiptap/pm/model'\n\nimport { getMarksBetween } from '../helpers/getMarksBetween.js'\nimport type { PasteRuleFinder } from '../PasteRule.js'\nimport { PasteRule } from '../PasteRule.js'\nimport type { ExtendedRegExpMatchArray } from '../types.js'\nimport { callOrReturn } from '../utilities/callOrReturn.js'\n\n/**\n * Build an paste rule that adds a mark when the\n * matched text is pasted into it.\n * @see https://tiptap.dev/docs/editor/extensions/custom-extensions/extend-existing#paste-rules\n */\nexport function markPasteRule(config: {\n  find: PasteRuleFinder\n  type: MarkType\n  getAttributes?:\n    | Record<string, any>\n    | ((match: ExtendedRegExpMatchArray, event: ClipboardEvent) => Record<string, any>)\n    | false\n    | null\n}) {\n  return new PasteRule({\n    find: config.find,\n    handler: ({ state, range, match, pasteEvent }) => {\n      const attributes = callOrReturn(config.getAttributes, undefined, match, pasteEvent)\n\n      if (attributes === false || attributes === null) {\n        return null\n      }\n\n      const { tr } = state\n      const captureGroup = match[match.length - 1]\n      const fullMatch = match[0]\n      let markEnd = range.to\n\n      if (captureGroup) {\n        const startSpaces = fullMatch.search(/\\S/)\n        const textStart = range.from + fullMatch.indexOf(captureGroup)\n        const textEnd = textStart + captureGroup.length\n\n        const excludedMarks = getMarksBetween(range.from, range.to, state.doc)\n          .filter(item => {\n            // @ts-ignore\n            const excluded = item.mark.type.excluded as MarkType[]\n\n            return excluded.find(type => type === config.type && type !== item.mark.type)\n          })\n          .filter(item => item.to > textStart)\n\n        if (excludedMarks.length) {\n          return null\n        }\n\n        if (textEnd < range.to) {\n          tr.delete(textEnd, range.to)\n        }\n\n        if (textStart > range.from) {\n          tr.delete(range.from + startSpaces, textStart)\n        }\n\n        markEnd = range.from + startSpaces + captureGroup.length\n\n        tr.addMark(range.from + startSpaces, markEnd, config.type.create(attributes || {}))\n\n        tr.removeStoredMark(config.type)\n      }\n    },\n  })\n}\n","import type { NodeType } from '@tiptap/pm/model'\n\nimport type { PasteRuleFinder } from '../PasteRule.js'\nimport { PasteRule } from '../PasteRule.js'\nimport type { ExtendedRegExpMatchArray, JSONContent } from '../types.js'\nimport { callOrReturn } from '../utilities/index.js'\n\n/**\n * Build an paste rule that adds a node when the\n * matched text is pasted into it.\n * @see https://tiptap.dev/docs/editor/api/paste-rules\n */\nexport function nodePasteRule(config: {\n  find: PasteRuleFinder\n  type: NodeType\n  getAttributes?:\n    | Record<string, any>\n    | ((match: ExtendedRegExpMatchArray, event: ClipboardEvent) => Record<string, any>)\n    | false\n    | null\n  getContent?: JSONContent[] | ((attrs: Record<string, any>) => JSONContent[]) | false | null\n}) {\n  return new PasteRule({\n    find: config.find,\n    handler({ match, chain, range, pasteEvent }) {\n      const attributes = callOrReturn(config.getAttributes, undefined, match, pasteEvent)\n      const content = callOrReturn(config.getContent, undefined, attributes)\n\n      if (attributes === false || attributes === null) {\n        return null\n      }\n\n      const node = { type: config.type.name, attrs: attributes } as JSONContent\n\n      if (content) {\n        node.content = content\n      }\n\n      if (match.input) {\n        chain().deleteRange(range).insertContentAt(range.from, node)\n      }\n    },\n  })\n}\n","import type { PasteRuleFinder } from '../PasteRule.js'\nimport { PasteRule } from '../PasteRule.js'\n\n/**\n * Build an paste rule that replaces text when the\n * matched text is pasted into it.\n * @see https://tiptap.dev/docs/editor/extensions/custom-extensions/extend-existing#paste-rules\n */\nexport function textPasteRule(config: { find: PasteRuleFinder; replace: string }) {\n  return new PasteRule({\n    find: config.find,\n    handler: ({ state, range, match }) => {\n      let insert = config.replace\n      let start = range.from\n      const end = range.to\n\n      if (match[1]) {\n        const offset = match[0].lastIndexOf(match[1])\n\n        insert += match[0].slice(offset + match[1].length)\n        start += offset\n\n        const cutOff = start - end\n\n        if (cutOff > 0) {\n          insert = match[0].slice(offset - cutOff, offset) + insert\n          start = end\n        }\n      }\n\n      state.tr.insertText(insert, start, end)\n    },\n  })\n}\n","import type { Transaction } from '@tiptap/pm/state'\n\nexport interface TrackerResult {\n  position: number\n  deleted: boolean\n}\n\nexport class Tracker {\n  transaction: Transaction\n\n  currentStep: number\n\n  constructor(transaction: Transaction) {\n    this.transaction = transaction\n    this.currentStep = this.transaction.steps.length\n  }\n\n  map(position: number): TrackerResult {\n    let deleted = false\n\n    const mappedPosition = this.transaction.steps.slice(this.currentStep).reduce((newPosition, step) => {\n      const mapResult = step.getMap().mapResult(newPosition)\n\n      if (mapResult.deleted) {\n        deleted = true\n      }\n\n      return mapResult.pos\n    }, position)\n\n    return {\n      position: mappedPosition,\n      deleted,\n    }\n  }\n}\n"],"names":["command","run","TextSelection","mark","TextSelection","TextSelection","TextSelection","TextSelection","Fragment","Selection","Fragment","isTextSelection","joinPoint","originalCommand","isActive","document","Schema","style","Schema","DOMParser","DOMParser","Node","Node","node","output","range","NodeSelection","NodeSelection","TextSelection","TextSelection","NodeSelection","TextSelection","NodeSelection","TextSelection","first","Fragment","TextSelection","canSplit","Fragment","newNextTypeAttributes","nextType","TextSelection","canSplit","isActive","isActive","isActive","Fragment","Fragment","Fragment","Plugin","run","Plugin","Fragment","from","to","Plugin","Plugin","range","_a","_b","_c","Plugin","PluginKey","Plugin","PluginKey","Plugin","PluginKey","Plugin","PluginKey","Plugin","PluginKey","PluginKey","Plugin","Plugin","PluginKey","Selection","Selection","Plugin","PluginKey","tr","Plugin","PluginKey","Plugin","PluginKey","Plugin","PluginKey","Plugin","PluginKey","Plugin","PluginKey","Plugin","PluginKey","style","focus","blur","canJoin","canJoin","Fragment","constrainedWidth","constrainedHeight","NodeSelection","parseAttributes","serializeAttributes","h","parseAttributes","serializeAttributes","h","parseAttributes","serializeAttributes","h","nextIndent","h","Node","NodeSelection","NodeSelection"],"mappings":"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"}},
    {"offset": {"line": 10544, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/client/node_modules/fast-equals/dist/es/index.mjs","sources":["file:///D:/web-edra/client/node_modules/src/utils.ts","file:///D:/web-edra/client/node_modules/src/equals.ts","file:///D:/web-edra/client/node_modules/src/comparator.ts","file:///D:/web-edra/client/node_modules/src/index.ts"],"sourcesContent":["import type {\n  AnyEqualityComparator,\n  Cache,\n  CircularState,\n  Dictionary,\n  State,\n  TypeEqualityComparator,\n} from './internalTypes.js';\n\nconst { getOwnPropertyNames, getOwnPropertySymbols } = Object;\n// eslint-disable-next-line @typescript-eslint/unbound-method\nconst { hasOwnProperty } = Object.prototype;\n\n/**\n * Combine two comparators into a single comparators.\n */\nexport function combineComparators<Meta>(\n  comparatorA: AnyEqualityComparator<Meta>,\n  comparatorB: AnyEqualityComparator<Meta>,\n) {\n  return function isEqual<A, B>(a: A, b: B, state: State<Meta>) {\n    return comparatorA(a, b, state) && comparatorB(a, b, state);\n  };\n}\n\n/**\n * Wrap the provided `areItemsEqual` method to manage the circular state, allowing\n * for circular references to be safely included in the comparison without creating\n * stack overflows.\n */\nexport function createIsCircular<AreItemsEqual extends TypeEqualityComparator<any, any>>(\n  areItemsEqual: AreItemsEqual,\n): AreItemsEqual {\n  return function isCircular(a: any, b: any, state: CircularState<Cache<any, any>>) {\n    if (!a || !b || typeof a !== 'object' || typeof b !== 'object') {\n      return areItemsEqual(a, b, state);\n    }\n\n    const { cache } = state;\n\n    const cachedA = cache.get(a);\n    const cachedB = cache.get(b);\n\n    if (cachedA && cachedB) {\n      return cachedA === b && cachedB === a;\n    }\n\n    cache.set(a, b);\n    cache.set(b, a);\n\n    const result = areItemsEqual(a, b, state);\n\n    cache.delete(a);\n    cache.delete(b);\n\n    return result;\n  } as AreItemsEqual;\n}\n\n/**\n * Get the `@@toStringTag` of the value, if it exists.\n */\nexport function getShortTag(value: any): string | undefined {\n  return value != null ? (value[Symbol.toStringTag] as string) : undefined;\n}\n\n/**\n * Get the properties to strictly examine, which include both own properties that are\n * not enumerable and symbol properties.\n */\nexport function getStrictProperties(object: Dictionary): Array<string | symbol> {\n  return (getOwnPropertyNames(object) as Array<string | symbol>).concat(getOwnPropertySymbols(object));\n}\n\n/**\n * Whether the object contains the property passed as an own property.\n */\nexport const hasOwn =\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  Object.hasOwn || ((object: Dictionary, property: number | string | symbol) => hasOwnProperty.call(object, property));\n\n/**\n * Whether the values passed are strictly equal or both NaN.\n */\nexport function sameValueZeroEqual(a: any, b: any): boolean {\n  return a === b || (!a && !b && a !== a && b !== b);\n}\n","import type { Dictionary, PrimitiveWrapper, State, TypedArray } from './internalTypes.js';\nimport { getStrictProperties, hasOwn, sameValueZeroEqual } from './utils.js';\n\nconst PREACT_VNODE = '__v';\nconst PREACT_OWNER = '__o';\nconst REACT_OWNER = '_owner';\n\nconst { getOwnPropertyDescriptor, keys } = Object;\n\n/**\n * Whether the array buffers are equal in value.\n */\nexport function areArrayBuffersEqual(a: ArrayBuffer, b: ArrayBuffer): boolean {\n  return a.byteLength === b.byteLength && areTypedArraysEqual(new Uint8Array(a), new Uint8Array(b));\n}\n\n/**\n * Whether the arrays are equal in value.\n */\nexport function areArraysEqual(a: any[], b: any[], state: State<any>) {\n  let index = a.length;\n\n  if (b.length !== index) {\n    return false;\n  }\n\n  while (index-- > 0) {\n    if (!state.equals(a[index], b[index], index, index, a, b, state)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the dataviews are equal in value.\n */\nexport function areDataViewsEqual(a: DataView, b: DataView): boolean {\n  return (\n    a.byteLength === b.byteLength\n    && areTypedArraysEqual(\n      new Uint8Array(a.buffer, a.byteOffset, a.byteLength),\n      new Uint8Array(b.buffer, b.byteOffset, b.byteLength),\n    )\n  );\n}\n\n/**\n * Whether the dates passed are equal in value.\n */\nexport function areDatesEqual(a: Date, b: Date): boolean {\n  return sameValueZeroEqual(a.getTime(), b.getTime());\n}\n\n/**\n * Whether the errors passed are equal in value.\n */\nexport function areErrorsEqual(a: Error, b: Error): boolean {\n  return a.name === b.name && a.message === b.message && a.cause === b.cause && a.stack === b.stack;\n}\n\n/**\n * Whether the functions passed are equal in value.\n */\nexport function areFunctionsEqual(a: (...args: any[]) => any, b: (...args: any[]) => any): boolean {\n  return a === b;\n}\n\n/**\n * Whether the `Map`s are equal in value.\n */\nexport function areMapsEqual(a: Map<any, any>, b: Map<any, any>, state: State<any>): boolean {\n  const size = a.size;\n\n  if (size !== b.size) {\n    return false;\n  }\n\n  if (!size) {\n    return true;\n  }\n\n  const matchedIndices = new Array<true | undefined>(size);\n  const aIterable = a.entries();\n\n  let aResult: IteratorResult<[any, any]>;\n  let bResult: IteratorResult<[any, any]>;\n  let index = 0;\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  while ((aResult = aIterable.next())) {\n    if (aResult.done) {\n      break;\n    }\n\n    const bIterable = b.entries();\n\n    let hasMatch = false;\n    let matchIndex = 0;\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    while ((bResult = bIterable.next())) {\n      if (bResult.done) {\n        break;\n      }\n\n      if (matchedIndices[matchIndex]) {\n        matchIndex++;\n        continue;\n      }\n\n      const aEntry = aResult.value;\n      const bEntry = bResult.value;\n\n      if (\n        state.equals(aEntry[0], bEntry[0], index, matchIndex, a, b, state)\n        && state.equals(aEntry[1], bEntry[1], aEntry[0], bEntry[0], a, b, state)\n      ) {\n        hasMatch = matchedIndices[matchIndex] = true;\n        break;\n      }\n\n      matchIndex++;\n    }\n\n    if (!hasMatch) {\n      return false;\n    }\n\n    index++;\n  }\n\n  return true;\n}\n\n/**\n * Whether the numbers are equal in value.\n */\nexport const areNumbersEqual = sameValueZeroEqual;\n\n/**\n * Whether the objects are equal in value.\n */\nexport function areObjectsEqual(a: Dictionary, b: Dictionary, state: State<any>): boolean {\n  const properties = keys(a);\n\n  let index = properties.length;\n\n  if (keys(b).length !== index) {\n    return false;\n  }\n\n  // Decrementing `while` showed faster results than either incrementing or\n  // decrementing `for` loop and than an incrementing `while` loop. Declarative\n  // methods like `some` / `every` were not used to avoid incurring the garbage\n  // cost of anonymous callbacks.\n  while (index-- > 0) {\n    if (!isPropertyEqual(a, b, state, properties[index]!)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the objects are equal in value with strict property checking.\n */\nexport function areObjectsEqualStrict(a: Dictionary, b: Dictionary, state: State<any>): boolean {\n  const properties = getStrictProperties(a);\n\n  let index = properties.length;\n\n  if (getStrictProperties(b).length !== index) {\n    return false;\n  }\n\n  let property: string | symbol;\n  let descriptorA: ReturnType<typeof getOwnPropertyDescriptor>;\n  let descriptorB: ReturnType<typeof getOwnPropertyDescriptor>;\n\n  // Decrementing `while` showed faster results than either incrementing or\n  // decrementing `for` loop and than an incrementing `while` loop. Declarative\n  // methods like `some` / `every` were not used to avoid incurring the garbage\n  // cost of anonymous callbacks.\n  while (index-- > 0) {\n    property = properties[index]!;\n\n    if (!isPropertyEqual(a, b, state, property)) {\n      return false;\n    }\n\n    descriptorA = getOwnPropertyDescriptor(a, property);\n    descriptorB = getOwnPropertyDescriptor(b, property);\n\n    if (\n      (descriptorA || descriptorB)\n      && (!descriptorA\n        || !descriptorB\n        || descriptorA.configurable !== descriptorB.configurable\n        || descriptorA.enumerable !== descriptorB.enumerable\n        || descriptorA.writable !== descriptorB.writable)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the primitive wrappers passed are equal in value.\n */\nexport function arePrimitiveWrappersEqual(a: PrimitiveWrapper, b: PrimitiveWrapper): boolean {\n  return sameValueZeroEqual(a.valueOf(), b.valueOf());\n}\n\n/**\n * Whether the regexps passed are equal in value.\n */\nexport function areRegExpsEqual(a: RegExp, b: RegExp): boolean {\n  return a.source === b.source && a.flags === b.flags;\n}\n\n/**\n * Whether the `Set`s are equal in value.\n */\nexport function areSetsEqual(a: Set<any>, b: Set<any>, state: State<any>): boolean {\n  const size = a.size;\n\n  if (size !== b.size) {\n    return false;\n  }\n\n  if (!size) {\n    return true;\n  }\n\n  const matchedIndices = new Array<true | undefined>(size);\n  const aIterable = a.values();\n\n  let aResult: IteratorResult<any>;\n  let bResult: IteratorResult<any>;\n\n  // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n  while ((aResult = aIterable.next())) {\n    if (aResult.done) {\n      break;\n    }\n\n    const bIterable = b.values();\n\n    let hasMatch = false;\n    let matchIndex = 0;\n\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    while ((bResult = bIterable.next())) {\n      if (bResult.done) {\n        break;\n      }\n\n      if (\n        !matchedIndices[matchIndex]\n        && state.equals(aResult.value, bResult.value, aResult.value, bResult.value, a, b, state)\n      ) {\n        hasMatch = matchedIndices[matchIndex] = true;\n        break;\n      }\n\n      matchIndex++;\n    }\n\n    if (!hasMatch) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the TypedArray instances are equal in value.\n */\nexport function areTypedArraysEqual(a: TypedArray, b: TypedArray) {\n  let index = a.byteLength;\n\n  if (b.byteLength !== index || a.byteOffset !== b.byteOffset) {\n    return false;\n  }\n\n  while (index-- > 0) {\n    if (a[index] !== b[index]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Whether the URL instances are equal in value.\n */\nexport function areUrlsEqual(a: URL, b: URL): boolean {\n  return (\n    a.hostname === b.hostname\n    && a.pathname === b.pathname\n    && a.protocol === b.protocol\n    && a.port === b.port\n    && a.hash === b.hash\n    && a.username === b.username\n    && a.password === b.password\n  );\n}\n\nfunction isPropertyEqual(a: Dictionary, b: Dictionary, state: State<any>, property: string | symbol) {\n  if (\n    (property === REACT_OWNER || property === PREACT_OWNER || property === PREACT_VNODE)\n    && (a.$$typeof || b.$$typeof)\n  ) {\n    return true;\n  }\n\n  return hasOwn(b, property) && state.equals(a[property], b[property], property, property, a, b, state);\n}\n","import {\n  areArrayBuffersEqual,\n  areArraysEqual as areArraysEqualDefault,\n  areDataViewsEqual,\n  areDatesEqual as areDatesEqualDefault,\n  areErrorsEqual as areErrorsEqualDefault,\n  areFunctionsEqual as areFunctionsEqualDefault,\n  areMapsEqual as areMapsEqualDefault,\n  areNumbersEqual as areNumbersEqualDefault,\n  areObjectsEqual as areObjectsEqualDefault,\n  areObjectsEqualStrict as areObjectsEqualStrictDefault,\n  arePrimitiveWrappersEqual as arePrimitiveWrappersEqualDefault,\n  areRegExpsEqual as areRegExpsEqualDefault,\n  areSetsEqual as areSetsEqualDefault,\n  areTypedArraysEqual as areTypedArraysEqualDefault,\n  areUrlsEqual as areUrlsEqualDefault,\n} from './equals.js';\nimport type {\n  ComparatorConfig,\n  CreateState,\n  CustomEqualCreatorOptions,\n  EqualityComparator,\n  InternalEqualityComparator,\n  State,\n} from './internalTypes.js';\nimport { combineComparators, createIsCircular, getShortTag } from './utils.js';\n\nconst ARRAY_BUFFER_TAG = '[object ArrayBuffer]';\nconst ARGUMENTS_TAG = '[object Arguments]';\nconst BOOLEAN_TAG = '[object Boolean]';\nconst DATA_VIEW_TAG = '[object DataView]';\nconst DATE_TAG = '[object Date]';\nconst ERROR_TAG = '[object Error]';\nconst MAP_TAG = '[object Map]';\nconst NUMBER_TAG = '[object Number]';\nconst OBJECT_TAG = '[object Object]';\nconst REG_EXP_TAG = '[object RegExp]';\nconst SET_TAG = '[object Set]';\nconst STRING_TAG = '[object String]';\nconst TYPED_ARRAY_TAGS: Record<string, boolean> = {\n  '[object Int8Array]': true,\n  '[object Uint8Array]': true,\n  '[object Uint8ClampedArray]': true,\n  '[object Int16Array]': true,\n  '[object Uint16Array]': true,\n  '[object Int32Array]': true,\n  '[object Uint32Array]': true,\n  '[object Float16Array]': true,\n  '[object Float32Array]': true,\n  '[object Float64Array]': true,\n  '[object BigInt64Array]': true,\n  '[object BigUint64Array]': true,\n};\nconst URL_TAG = '[object URL]';\n\n// eslint-disable-next-line @typescript-eslint/unbound-method\nconst toString = Object.prototype.toString;\n\ninterface CreateIsEqualOptions<Meta> {\n  circular: boolean;\n  comparator: EqualityComparator<Meta>;\n  createState: CreateState<Meta> | undefined;\n  equals: InternalEqualityComparator<Meta>;\n  strict: boolean;\n}\n\n/**\n * Create a comparator method based on the type-specific equality comparators passed.\n */\nexport function createEqualityComparator<Meta>({\n  areArrayBuffersEqual,\n  areArraysEqual,\n  areDataViewsEqual,\n  areDatesEqual,\n  areErrorsEqual,\n  areFunctionsEqual,\n  areMapsEqual,\n  areNumbersEqual,\n  areObjectsEqual,\n  arePrimitiveWrappersEqual,\n  areRegExpsEqual,\n  areSetsEqual,\n  areTypedArraysEqual,\n  areUrlsEqual,\n  unknownTagComparators,\n}: ComparatorConfig<Meta>): EqualityComparator<Meta> {\n  /**\n   * compare the value of the two objects and return true if they are equivalent in values\n   */\n  return function comparator(a: any, b: any, state: State<Meta>): boolean {\n    // If the items are strictly equal, no need to do a value comparison.\n    if (a === b) {\n      return true;\n    }\n\n    // If either of the items are nullish and fail the strictly equal check\n    // above, then they must be unequal.\n    if (a == null || b == null) {\n      return false;\n    }\n\n    const type = typeof a;\n\n    if (type !== typeof b) {\n      return false;\n    }\n\n    if (type !== 'object') {\n      if (type === 'number') {\n        return areNumbersEqual(a, b, state);\n      }\n\n      if (type === 'function') {\n        return areFunctionsEqual(a, b, state);\n      }\n\n      // If a primitive value that is not strictly equal, it must be unequal.\n      return false;\n    }\n\n    const constructor = a.constructor;\n\n    // Checks are listed in order of commonality of use-case:\n    //   1. Common complex object types (plain object, array)\n    //   2. Common data values (date, regexp)\n    //   3. Less-common complex object types (map, set)\n    //   4. Less-common data values (promise, primitive wrappers)\n    // Inherently this is both subjective and assumptive, however\n    // when reviewing comparable libraries in the wild this order\n    // appears to be generally consistent.\n\n    // Constructors should match, otherwise there is potential for false positives\n    // between class and subclass or custom object and POJO.\n    if (constructor !== b.constructor) {\n      return false;\n    }\n\n    // `isPlainObject` only checks against the object's own realm. Cross-realm\n    // comparisons are rare, and will be handled in the ultimate fallback, so\n    // we can avoid capturing the string tag.\n    if (constructor === Object) {\n      return areObjectsEqual(a, b, state);\n    }\n\n    // `isArray()` works on subclasses and is cross-realm, so we can avoid capturing\n    // the string tag or doing an `instanceof` check.\n    if (Array.isArray(a)) {\n      return areArraysEqual(a, b, state);\n    }\n\n    // Try to fast-path equality checks for other complex object types in the\n    // same realm to avoid capturing the string tag. Strict equality is used\n    // instead of `instanceof` because it is more performant for the common\n    // use-case. If someone is subclassing a native class, it will be handled\n    // with the string tag comparison.\n\n    if (constructor === Date) {\n      return areDatesEqual(a, b, state);\n    }\n\n    if (constructor === RegExp) {\n      return areRegExpsEqual(a, b, state);\n    }\n\n    if (constructor === Map) {\n      return areMapsEqual(a, b, state);\n    }\n\n    if (constructor === Set) {\n      return areSetsEqual(a, b, state);\n    }\n\n    // Since this is a custom object, capture the string tag to determing its type.\n    // This is reasonably performant in modern environments like v8 and SpiderMonkey.\n    const tag = toString.call(a);\n\n    if (tag === DATE_TAG) {\n      return areDatesEqual(a, b, state);\n    }\n\n    // For RegExp, the properties are not enumerable, and therefore will give false positives if\n    // tested like a standard object.\n    if (tag === REG_EXP_TAG) {\n      return areRegExpsEqual(a, b, state);\n    }\n\n    if (tag === MAP_TAG) {\n      return areMapsEqual(a, b, state);\n    }\n\n    if (tag === SET_TAG) {\n      return areSetsEqual(a, b, state);\n    }\n\n    if (tag === OBJECT_TAG) {\n      // The exception for value comparison is custom `Promise`-like class instances. These should\n      // be treated the same as standard `Promise` objects, which means strict equality, and if\n      // it reaches this point then that strict equality comparison has already failed.\n      return typeof a.then !== 'function' && typeof b.then !== 'function' && areObjectsEqual(a, b, state);\n    }\n\n    // If a URL tag, it should be tested explicitly. Like RegExp, the properties are not\n    // enumerable, and therefore will give false positives if tested like a standard object.\n    if (tag === URL_TAG) {\n      return areUrlsEqual(a, b, state);\n    }\n\n    // If an error tag, it should be tested explicitly. Like RegExp, the properties are not\n    // enumerable, and therefore will give false positives if tested like a standard object.\n    if (tag === ERROR_TAG) {\n      return areErrorsEqual(a, b, state);\n    }\n\n    // If an arguments tag, it should be treated as a standard object.\n    if (tag === ARGUMENTS_TAG) {\n      return areObjectsEqual(a, b, state);\n    }\n\n    if (TYPED_ARRAY_TAGS[tag]) {\n      return areTypedArraysEqual(a, b, state);\n    }\n\n    if (tag === ARRAY_BUFFER_TAG) {\n      return areArrayBuffersEqual(a, b, state);\n    }\n\n    if (tag === DATA_VIEW_TAG) {\n      return areDataViewsEqual(a, b, state);\n    }\n\n    // As the penultimate fallback, check if the values passed are primitive wrappers. This\n    // is very rare in modern JS, which is why it is deprioritized compared to all other object\n    // types.\n    if (tag === BOOLEAN_TAG || tag === NUMBER_TAG || tag === STRING_TAG) {\n      return arePrimitiveWrappersEqual(a, b, state);\n    }\n\n    if (unknownTagComparators) {\n      let unknownTagComparator = unknownTagComparators[tag];\n\n      if (!unknownTagComparator) {\n        const shortTag = getShortTag(a);\n\n        if (shortTag) {\n          unknownTagComparator = unknownTagComparators[shortTag];\n        }\n      }\n\n      // If the custom config has an unknown tag comparator that matches the captured tag or the\n      // @@toStringTag, it is the source of truth for whether the values are equal.\n      if (unknownTagComparator) {\n        return unknownTagComparator(a, b, state);\n      }\n    }\n\n    // If not matching any tags that require a specific type of comparison, then we hard-code false because\n    // the only thing remaining is strict equality, which has already been compared. This is for a few reasons:\n    //   - Certain types that cannot be introspected (e.g., `WeakMap`). For these types, this is the only\n    //     comparison that can be made.\n    //   - For types that can be introspected, but rarely have requirements to be compared\n    //     (`ArrayBuffer`, `DataView`, etc.), the cost is avoided to prioritize the common\n    //     use-cases (may be included in a future release, if requested enough).\n    //   - For types that can be introspected but do not have an objective definition of what\n    //     equality is (`Error`, etc.), the subjective decision is to be conservative and strictly compare.\n    // In all cases, these decisions should be reevaluated based on changes to the language and\n    // common development practices.\n    return false;\n  };\n}\n\n/**\n * Create the configuration object used for building comparators.\n */\nexport function createEqualityComparatorConfig<Meta>({\n  circular,\n  createCustomConfig,\n  strict,\n}: CustomEqualCreatorOptions<Meta>): ComparatorConfig<Meta> {\n  let config = {\n    areArrayBuffersEqual,\n    areArraysEqual: strict ? areObjectsEqualStrictDefault : areArraysEqualDefault,\n    areDataViewsEqual,\n    areDatesEqual: areDatesEqualDefault,\n    areErrorsEqual: areErrorsEqualDefault,\n    areFunctionsEqual: areFunctionsEqualDefault,\n    areMapsEqual: strict ? combineComparators(areMapsEqualDefault, areObjectsEqualStrictDefault) : areMapsEqualDefault,\n    areNumbersEqual: areNumbersEqualDefault,\n    areObjectsEqual: strict ? areObjectsEqualStrictDefault : areObjectsEqualDefault,\n    arePrimitiveWrappersEqual: arePrimitiveWrappersEqualDefault,\n    areRegExpsEqual: areRegExpsEqualDefault,\n    areSetsEqual: strict ? combineComparators(areSetsEqualDefault, areObjectsEqualStrictDefault) : areSetsEqualDefault,\n    areTypedArraysEqual: strict\n      ? combineComparators(areTypedArraysEqualDefault, areObjectsEqualStrictDefault)\n      : areTypedArraysEqualDefault,\n    areUrlsEqual: areUrlsEqualDefault,\n    unknownTagComparators: undefined,\n  };\n\n  if (createCustomConfig) {\n    config = Object.assign({}, config, createCustomConfig(config));\n  }\n\n  if (circular) {\n    const areArraysEqual = createIsCircular(config.areArraysEqual);\n    const areMapsEqual = createIsCircular(config.areMapsEqual);\n    const areObjectsEqual = createIsCircular(config.areObjectsEqual);\n    const areSetsEqual = createIsCircular(config.areSetsEqual);\n\n    config = Object.assign({}, config, {\n      areArraysEqual,\n      areMapsEqual,\n      areObjectsEqual,\n      areSetsEqual,\n    });\n  }\n\n  return config;\n}\n\n/**\n * Default equality comparator pass-through, used as the standard `isEqual` creator for\n * use inside the built comparator.\n */\nexport function createInternalEqualityComparator<Meta>(\n  compare: EqualityComparator<Meta>,\n): InternalEqualityComparator<Meta> {\n  return function (\n    a: any,\n    b: any,\n    _indexOrKeyA: any,\n    _indexOrKeyB: any,\n    _parentA: any,\n    _parentB: any,\n    state: State<Meta>,\n  ) {\n    return compare(a, b, state);\n  };\n}\n\n/**\n * Create the `isEqual` function used by the consuming application.\n */\nexport function createIsEqual<Meta>({ circular, comparator, createState, equals, strict }: CreateIsEqualOptions<Meta>) {\n  if (createState) {\n    return function isEqual<A, B>(a: A, b: B): boolean {\n      const { cache = circular ? new WeakMap() : undefined, meta } = createState();\n\n      return comparator(a, b, {\n        cache,\n        equals,\n        meta,\n        strict,\n      } as State<Meta>);\n    };\n  }\n\n  if (circular) {\n    return function isEqual<A, B>(a: A, b: B): boolean {\n      return comparator(a, b, {\n        cache: new WeakMap(),\n        equals,\n        meta: undefined as Meta,\n        strict,\n      } as State<Meta>);\n    };\n  }\n\n  const state = {\n    cache: undefined,\n    equals,\n    meta: undefined,\n    strict,\n  } as State<Meta>;\n\n  return function isEqual<A, B>(a: A, b: B): boolean {\n    return comparator(a, b, state);\n  };\n}\n","import {\n  createEqualityComparatorConfig,\n  createEqualityComparator,\n  createInternalEqualityComparator,\n  createIsEqual,\n} from './comparator.js';\nimport type { CustomEqualCreatorOptions } from './internalTypes.js';\nimport { sameValueZeroEqual } from './utils.js';\n\nexport { sameValueZeroEqual };\nexport type {\n  AnyEqualityComparator,\n  Cache,\n  CircularState,\n  ComparatorConfig,\n  CreateCustomComparatorConfig,\n  CreateState,\n  CustomEqualCreatorOptions,\n  DefaultState,\n  Dictionary,\n  EqualityComparator,\n  EqualityComparatorCreator,\n  InternalEqualityComparator,\n  PrimitiveWrapper,\n  State,\n  TypeEqualityComparator,\n  TypedArray,\n} from './internalTypes.js';\n\n/**\n * Whether the items passed are deeply-equal in value.\n */\nexport const deepEqual = createCustomEqual();\n\n/**\n * Whether the items passed are deeply-equal in value based on strict comparison.\n */\nexport const strictDeepEqual = createCustomEqual({ strict: true });\n\n/**\n * Whether the items passed are deeply-equal in value, including circular references.\n */\nexport const circularDeepEqual = createCustomEqual({ circular: true });\n\n/**\n * Whether the items passed are deeply-equal in value, including circular references,\n * based on strict comparison.\n */\nexport const strictCircularDeepEqual = createCustomEqual({\n  circular: true,\n  strict: true,\n});\n\n/**\n * Whether the items passed are shallowly-equal in value.\n */\nexport const shallowEqual = createCustomEqual({\n  createInternalComparator: () => sameValueZeroEqual,\n});\n\n/**\n * Whether the items passed are shallowly-equal in value based on strict comparison\n */\nexport const strictShallowEqual = createCustomEqual({\n  strict: true,\n  createInternalComparator: () => sameValueZeroEqual,\n});\n\n/**\n * Whether the items passed are shallowly-equal in value, including circular references.\n */\nexport const circularShallowEqual = createCustomEqual({\n  circular: true,\n  createInternalComparator: () => sameValueZeroEqual,\n});\n\n/**\n * Whether the items passed are shallowly-equal in value, including circular references,\n * based on strict comparison.\n */\nexport const strictCircularShallowEqual = createCustomEqual({\n  circular: true,\n  createInternalComparator: () => sameValueZeroEqual,\n  strict: true,\n});\n\n/**\n * Create a custom equality comparison method.\n *\n * This can be done to create very targeted comparisons in extreme hot-path scenarios\n * where the standard methods are not performant enough, but can also be used to provide\n * support for legacy environments that do not support expected features like\n * `RegExp.prototype.flags` out of the box.\n */\nexport function createCustomEqual<Meta = undefined>(options: CustomEqualCreatorOptions<Meta> = {}) {\n  const {\n    circular = false,\n    createInternalComparator: createCustomInternalComparator,\n    createState,\n    strict = false,\n  } = options;\n\n  const config = createEqualityComparatorConfig<Meta>(options);\n  const comparator = createEqualityComparator(config);\n  const equals = createCustomInternalComparator\n    ? createCustomInternalComparator(comparator)\n    : createInternalEqualityComparator(comparator);\n\n  return createIsEqual({ circular, comparator, createState, equals, strict });\n}\n"],"names":["areObjectsEqualStrictDefault","areArraysEqualDefault","areDatesEqualDefault","areErrorsEqualDefault","areFunctionsEqualDefault","areMapsEqualDefault","areNumbersEqualDefault","areObjectsEqualDefault","arePrimitiveWrappersEqualDefault","areRegExpsEqualDefault","areSetsEqualDefault","areTypedArraysEqualDefault","areUrlsEqualDefault"],"mappings":"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"}},
    {"offset": {"line": 11163, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js"],"sourcesContent":["/**\n * @license React\n * use-sync-external-store-shim/with-selector.development.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\n\"production\" !== process.env.NODE_ENV &&\n  (function () {\n    function is(x, y) {\n      return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n    }\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());\n    var React = require(\"react\"),\n      shim = require(\"use-sync-external-store/shim\"),\n      objectIs = \"function\" === typeof Object.is ? Object.is : is,\n      useSyncExternalStore = shim.useSyncExternalStore,\n      useRef = React.useRef,\n      useEffect = React.useEffect,\n      useMemo = React.useMemo,\n      useDebugValue = React.useDebugValue;\n    exports.useSyncExternalStoreWithSelector = function (\n      subscribe,\n      getSnapshot,\n      getServerSnapshot,\n      selector,\n      isEqual\n    ) {\n      var instRef = useRef(null);\n      if (null === instRef.current) {\n        var inst = { hasValue: !1, value: null };\n        instRef.current = inst;\n      } else inst = instRef.current;\n      instRef = useMemo(\n        function () {\n          function memoizedSelector(nextSnapshot) {\n            if (!hasMemo) {\n              hasMemo = !0;\n              memoizedSnapshot = nextSnapshot;\n              nextSnapshot = selector(nextSnapshot);\n              if (void 0 !== isEqual && inst.hasValue) {\n                var currentSelection = inst.value;\n                if (isEqual(currentSelection, nextSnapshot))\n                  return (memoizedSelection = currentSelection);\n              }\n              return (memoizedSelection = nextSnapshot);\n            }\n            currentSelection = memoizedSelection;\n            if (objectIs(memoizedSnapshot, nextSnapshot))\n              return currentSelection;\n            var nextSelection = selector(nextSnapshot);\n            if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n              return (memoizedSnapshot = nextSnapshot), currentSelection;\n            memoizedSnapshot = nextSnapshot;\n            return (memoizedSelection = nextSelection);\n          }\n          var hasMemo = !1,\n            memoizedSnapshot,\n            memoizedSelection,\n            maybeGetServerSnapshot =\n              void 0 === getServerSnapshot ? null : getServerSnapshot;\n          return [\n            function () {\n              return memoizedSelector(getSnapshot());\n            },\n            null === maybeGetServerSnapshot\n              ? void 0\n              : function () {\n                  return memoizedSelector(maybeGetServerSnapshot());\n                }\n          ];\n        },\n        [getSnapshot, getServerSnapshot, selector, isEqual]\n      );\n      var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n      useEffect(\n        function () {\n          inst.hasValue = !0;\n          inst.value = value;\n        },\n        [value]\n      );\n      useDebugValue(value);\n      return value;\n    };\n    \"undefined\" !== typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ &&\n      \"function\" ===\n        typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop &&\n      __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error());\n  })();\n"],"names":[],"mappings":"AAWiB;AAXjB;;;;;;;;CAQC,GAED;AACA,oEACE,AAAC;IACC,SAAS,GAAG,CAAC,EAAE,CAAC;QACd,OAAO,AAAC,MAAM,KAAK,CAAC,MAAM,KAAK,IAAI,MAAM,IAAI,CAAC,KAAO,MAAM,KAAK,MAAM;IACxE;IACA,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,2BAA2B,IACnE,+BAA+B,2BAA2B,CAAC;IAC7D,IAAI,8HACF,iIACA,WAAW,eAAe,OAAO,OAAO,EAAE,GAAG,OAAO,EAAE,GAAG,IACzD,uBAAuB,KAAK,oBAAoB,EAChD,SAAS,MAAM,MAAM,EACrB,YAAY,MAAM,SAAS,EAC3B,UAAU,MAAM,OAAO,EACvB,gBAAgB,MAAM,aAAa;IACrC,QAAQ,gCAAgC,GAAG,SACzC,SAAS,EACT,WAAW,EACX,iBAAiB,EACjB,QAAQ,EACR,OAAO;QAEP,IAAI,UAAU,OAAO;QACrB,IAAI,SAAS,QAAQ,OAAO,EAAE;YAC5B,IAAI,OAAO;gBAAE,UAAU,CAAC;gBAAG,OAAO;YAAK;YACvC,QAAQ,OAAO,GAAG;QACpB,OAAO,OAAO,QAAQ,OAAO;QAC7B,UAAU,QACR;YACE,SAAS,iBAAiB,YAAY;gBACpC,IAAI,CAAC,SAAS;oBACZ,UAAU,CAAC;oBACX,mBAAmB;oBACnB,eAAe,SAAS;oBACxB,IAAI,KAAK,MAAM,WAAW,KAAK,QAAQ,EAAE;wBACvC,IAAI,mBAAmB,KAAK,KAAK;wBACjC,IAAI,QAAQ,kBAAkB,eAC5B,OAAQ,oBAAoB;oBAChC;oBACA,OAAQ,oBAAoB;gBAC9B;gBACA,mBAAmB;gBACnB,IAAI,SAAS,kBAAkB,eAC7B,OAAO;gBACT,IAAI,gBAAgB,SAAS;gBAC7B,IAAI,KAAK,MAAM,WAAW,QAAQ,kBAAkB,gBAClD,OAAO,AAAC,mBAAmB,cAAe;gBAC5C,mBAAmB;gBACnB,OAAQ,oBAAoB;YAC9B;YACA,IAAI,UAAU,CAAC,GACb,kBACA,mBACA,yBACE,KAAK,MAAM,oBAAoB,OAAO;YAC1C,OAAO;gBACL;oBACE,OAAO,iBAAiB;gBAC1B;gBACA,SAAS,yBACL,KAAK,IACL;oBACE,OAAO,iBAAiB;gBAC1B;aACL;QACH,GACA;YAAC;YAAa;YAAmB;YAAU;SAAQ;QAErD,IAAI,QAAQ,qBAAqB,WAAW,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,EAAE;QAClE,UACE;YACE,KAAK,QAAQ,GAAG,CAAC;YACjB,KAAK,KAAK,GAAG;QACf,GACA;YAAC;SAAM;QAET,cAAc;QACd,OAAO;IACT;IACA,gBAAgB,OAAO,kCACrB,eACE,OAAO,+BAA+B,0BAA0B,IAClE,+BAA+B,0BAA0B,CAAC;AAC9D","ignoreList":[0]}},
    {"offset": {"line": 11238, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/use-sync-external-store/shim/with-selector.js"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n"],"names":[],"mappings":"AAEI;AAFJ;AAEA;;KAEO;IACL,OAAO,OAAO;AAChB","ignoreList":[0]}},
    {"offset": {"line": 11249, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/react/src/Context.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/EditorContent.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/useEditor.ts","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/useEditorState.ts","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/useReactNodeView.ts","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/NodeViewContent.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/NodeViewWrapper.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/ReactMarkViewRenderer.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/ReactRenderer.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/ReactNodeViewRenderer.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/Tiptap.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/react/src/index.ts"],"sourcesContent":["import type { Editor } from '@tiptap/core'\nimport type { HTMLAttributes, ReactNode } from 'react'\nimport React, { createContext, useContext, useMemo } from 'react'\n\nimport { EditorContent } from './EditorContent.js'\nimport type { UseEditorOptions } from './useEditor.js'\nimport { useEditor } from './useEditor.js'\n\nexport type EditorContextValue = {\n  editor: Editor | null\n}\n\nexport const EditorContext = createContext<EditorContextValue>({\n  editor: null,\n})\n\nexport const EditorConsumer = EditorContext.Consumer\n\n/**\n * A hook to get the current editor instance.\n */\nexport const useCurrentEditor = () => useContext(EditorContext)\n\nexport type EditorProviderProps = {\n  children?: ReactNode\n  slotBefore?: ReactNode\n  slotAfter?: ReactNode\n  editorContainerProps?: HTMLAttributes<HTMLDivElement>\n} & UseEditorOptions\n\n/**\n * This is the provider component for the editor.\n * It allows the editor to be accessible across the entire component tree\n * with `useCurrentEditor`.\n */\nexport function EditorProvider({\n  children,\n  slotAfter,\n  slotBefore,\n  editorContainerProps = {},\n  ...editorOptions\n}: EditorProviderProps) {\n  const editor = useEditor(editorOptions)\n  const contextValue = useMemo(() => ({ editor }), [editor])\n\n  if (!editor) {\n    return null\n  }\n\n  return (\n    <EditorContext.Provider value={contextValue}>\n      {slotBefore}\n      <EditorConsumer>\n        {({ editor: currentEditor }) => <EditorContent editor={currentEditor} {...editorContainerProps} />}\n      </EditorConsumer>\n      {children}\n      {slotAfter}\n    </EditorContext.Provider>\n  )\n}\n","import type { Editor } from '@tiptap/core'\nimport type { ForwardedRef, HTMLProps, LegacyRef, MutableRefObject } from 'react'\nimport React, { forwardRef } from 'react'\nimport ReactDOM from 'react-dom'\nimport { useSyncExternalStore } from 'use-sync-external-store/shim/index.js'\n\nimport type { ContentComponent, EditorWithContentComponent } from './Editor.js'\nimport type { ReactRenderer } from './ReactRenderer.js'\n\nconst mergeRefs = <T extends HTMLDivElement>(...refs: Array<MutableRefObject<T> | LegacyRef<T> | undefined>) => {\n  return (node: T) => {\n    refs.forEach(ref => {\n      if (typeof ref === 'function') {\n        ref(node)\n      } else if (ref) {\n        ;(ref as MutableRefObject<T | null>).current = node\n      }\n    })\n  }\n}\n\n/**\n * This component renders all of the editor's node views.\n */\nconst Portals: React.FC<{ contentComponent: ContentComponent }> = ({ contentComponent }) => {\n  // For performance reasons, we render the node view portals on state changes only\n  const renderers = useSyncExternalStore(\n    contentComponent.subscribe,\n    contentComponent.getSnapshot,\n    contentComponent.getServerSnapshot,\n  )\n\n  // This allows us to directly render the portals without any additional wrapper\n  return <>{Object.values(renderers)}</>\n}\n\nexport interface EditorContentProps extends HTMLProps<HTMLDivElement> {\n  editor: Editor | null\n  innerRef?: ForwardedRef<HTMLDivElement | null>\n}\n\nfunction getInstance(): ContentComponent {\n  const subscribers = new Set<() => void>()\n  let renderers: Record<string, React.ReactPortal> = {}\n\n  return {\n    /**\n     * Subscribe to the editor instance's changes.\n     */\n    subscribe(callback: () => void) {\n      subscribers.add(callback)\n      return () => {\n        subscribers.delete(callback)\n      }\n    },\n    getSnapshot() {\n      return renderers\n    },\n    getServerSnapshot() {\n      return renderers\n    },\n    /**\n     * Adds a new NodeView Renderer to the editor.\n     */\n    setRenderer(id: string, renderer: ReactRenderer) {\n      renderers = {\n        ...renderers,\n        [id]: ReactDOM.createPortal(renderer.reactElement, renderer.element, id),\n      }\n\n      subscribers.forEach(subscriber => subscriber())\n    },\n    /**\n     * Removes a NodeView Renderer from the editor.\n     */\n    removeRenderer(id: string) {\n      const nextRenderers = { ...renderers }\n\n      delete nextRenderers[id]\n      renderers = nextRenderers\n      subscribers.forEach(subscriber => subscriber())\n    },\n  }\n}\n\nexport class PureEditorContent extends React.Component<\n  EditorContentProps,\n  { hasContentComponentInitialized: boolean }\n> {\n  editorContentRef: React.RefObject<any>\n\n  initialized: boolean\n\n  unsubscribeToContentComponent?: () => void\n\n  constructor(props: EditorContentProps) {\n    super(props)\n    this.editorContentRef = React.createRef()\n    this.initialized = false\n\n    this.state = {\n      hasContentComponentInitialized: Boolean((props.editor as EditorWithContentComponent | null)?.contentComponent),\n    }\n  }\n\n  componentDidMount() {\n    this.init()\n  }\n\n  componentDidUpdate() {\n    this.init()\n  }\n\n  init() {\n    const editor = this.props.editor as EditorWithContentComponent | null\n\n    if (editor && !editor.isDestroyed && editor.view.dom?.parentNode) {\n      if (editor.contentComponent) {\n        return\n      }\n\n      const element = this.editorContentRef.current\n\n      element.append(...editor.view.dom.parentNode.childNodes)\n\n      editor.setOptions({\n        element,\n      })\n\n      editor.contentComponent = getInstance()\n\n      // Has the content component been initialized?\n      if (!this.state.hasContentComponentInitialized) {\n        // Subscribe to the content component\n        this.unsubscribeToContentComponent = editor.contentComponent.subscribe(() => {\n          this.setState(prevState => {\n            if (!prevState.hasContentComponentInitialized) {\n              return {\n                hasContentComponentInitialized: true,\n              }\n            }\n            return prevState\n          })\n\n          // Unsubscribe to previous content component\n          if (this.unsubscribeToContentComponent) {\n            this.unsubscribeToContentComponent()\n          }\n        })\n      }\n\n      editor.createNodeViews()\n\n      this.initialized = true\n    }\n  }\n\n  componentWillUnmount() {\n    const editor = this.props.editor as EditorWithContentComponent | null\n\n    if (!editor) {\n      return\n    }\n\n    this.initialized = false\n\n    if (!editor.isDestroyed) {\n      editor.view.setProps({\n        nodeViews: {},\n      })\n    }\n\n    if (this.unsubscribeToContentComponent) {\n      this.unsubscribeToContentComponent()\n    }\n\n    editor.contentComponent = null\n\n    // try to reset the editor element\n    // may fail if this editor's view.dom was never initialized/mounted yet\n    try {\n      if (!editor.view.dom?.parentNode) {\n        return\n      }\n\n      // TODO using the new editor.mount method might allow us to remove this\n      const newElement = document.createElement('div')\n\n      newElement.append(...editor.view.dom.parentNode.childNodes)\n\n      editor.setOptions({\n        element: newElement,\n      })\n    } catch {\n      // do nothing, nothing to reset\n    }\n  }\n\n  render() {\n    const { editor, innerRef, ...rest } = this.props\n\n    return (\n      <>\n        <div ref={mergeRefs(innerRef, this.editorContentRef)} {...rest} />\n        {/* @ts-ignore */}\n        {editor?.contentComponent && <Portals contentComponent={editor.contentComponent} />}\n      </>\n    )\n  }\n}\n\n// EditorContent should be re-created whenever the Editor instance changes\nconst EditorContentWithKey = forwardRef<HTMLDivElement, EditorContentProps>(\n  (props: Omit<EditorContentProps, 'innerRef'>, ref) => {\n    const key = React.useMemo(() => {\n      return Math.floor(Math.random() * 0xffffffff).toString()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.editor])\n\n    // Can't use JSX here because it conflicts with the type definition of Vue's JSX, so use createElement\n    return React.createElement(PureEditorContent, {\n      key,\n      innerRef: ref,\n      ...props,\n    })\n  },\n)\n\nexport const EditorContent = React.memo(EditorContentWithKey)\n","import { type EditorOptions, Editor } from '@tiptap/core'\nimport type { DependencyList, MutableRefObject } from 'react'\nimport { useDebugValue, useEffect, useRef, useState } from 'react'\nimport { useSyncExternalStore } from 'use-sync-external-store/shim/index.js'\n\nimport { useEditorState } from './useEditorState.js'\n\n// @ts-ignore\nconst isDev = process.env.NODE_ENV !== 'production'\nconst isSSR = typeof window === 'undefined'\nconst isNext = isSSR || Boolean(typeof window !== 'undefined' && (window as any).next)\n\n/**\n * The options for the `useEditor` hook.\n */\nexport type UseEditorOptions = Partial<EditorOptions> & {\n  /**\n   * Whether to render the editor on the first render.\n   * If client-side rendering, set this to `true`.\n   * If server-side rendering, set this to `false`.\n   * @default true\n   */\n  immediatelyRender?: boolean\n  /**\n   * Whether to re-render the editor on each transaction.\n   * This is legacy behavior that will be removed in future versions.\n   * @default false\n   */\n  shouldRerenderOnTransaction?: boolean\n}\n\n/**\n * This class handles the creation, destruction, and re-creation of the editor instance.\n */\nclass EditorInstanceManager {\n  /**\n   * The current editor instance.\n   */\n  private editor: Editor | null = null\n\n  /**\n   * The most recent options to apply to the editor.\n   */\n  private options: MutableRefObject<UseEditorOptions>\n\n  /**\n   * The subscriptions to notify when the editor instance\n   * has been created or destroyed.\n   */\n  private subscriptions = new Set<() => void>()\n\n  /**\n   * A timeout to destroy the editor if it was not mounted within a time frame.\n   */\n  private scheduledDestructionTimeout: ReturnType<typeof setTimeout> | undefined\n\n  /**\n   * Whether the editor has been mounted.\n   */\n  private isComponentMounted = false\n\n  /**\n   * The most recent dependencies array.\n   */\n  private previousDeps: DependencyList | null = null\n\n  /**\n   * The unique instance ID. This is used to identify the editor instance. And will be re-generated for each new instance.\n   */\n  public instanceId = ''\n\n  constructor(options: MutableRefObject<UseEditorOptions>) {\n    this.options = options\n    this.subscriptions = new Set<() => void>()\n    this.setEditor(this.getInitialEditor())\n    this.scheduleDestroy()\n\n    this.getEditor = this.getEditor.bind(this)\n    this.getServerSnapshot = this.getServerSnapshot.bind(this)\n    this.subscribe = this.subscribe.bind(this)\n    this.refreshEditorInstance = this.refreshEditorInstance.bind(this)\n    this.scheduleDestroy = this.scheduleDestroy.bind(this)\n    this.onRender = this.onRender.bind(this)\n    this.createEditor = this.createEditor.bind(this)\n  }\n\n  private setEditor(editor: Editor | null) {\n    this.editor = editor\n    this.instanceId = Math.random().toString(36).slice(2, 9)\n\n    // Notify all subscribers that the editor instance has been created\n    this.subscriptions.forEach(cb => cb())\n  }\n\n  private getInitialEditor() {\n    if (this.options.current.immediatelyRender === undefined) {\n      if (isSSR || isNext) {\n        if (isDev) {\n          /**\n           * Throw an error in development, to make sure the developer is aware that tiptap cannot be SSR'd\n           * and that they need to set `immediatelyRender` to `false` to avoid hydration mismatches.\n           */\n          throw new Error(\n            'Tiptap Error: SSR has been detected, please set `immediatelyRender` explicitly to `false` to avoid hydration mismatches.',\n          )\n        }\n\n        // Best faith effort in production, run the code in the legacy mode to avoid hydration mismatches and errors in production\n        return null\n      }\n\n      // Default to immediately rendering when client-side rendering\n      return this.createEditor()\n    }\n\n    if (this.options.current.immediatelyRender && isSSR && isDev) {\n      // Warn in development, to make sure the developer is aware that tiptap cannot be SSR'd, set `immediatelyRender` to `false` to avoid hydration mismatches.\n      throw new Error(\n        'Tiptap Error: SSR has been detected, and `immediatelyRender` has been set to `true` this is an unsupported configuration that may result in errors, explicitly set `immediatelyRender` to `false` to avoid hydration mismatches.',\n      )\n    }\n\n    if (this.options.current.immediatelyRender) {\n      return this.createEditor()\n    }\n\n    return null\n  }\n\n  /**\n   * Create a new editor instance. And attach event listeners.\n   */\n  private createEditor(): Editor {\n    const optionsToApply: Partial<EditorOptions> = {\n      ...this.options.current,\n      // Always call the most recent version of the callback function by default\n      onBeforeCreate: (...args) => this.options.current.onBeforeCreate?.(...args),\n      onBlur: (...args) => this.options.current.onBlur?.(...args),\n      onCreate: (...args) => this.options.current.onCreate?.(...args),\n      onDestroy: (...args) => this.options.current.onDestroy?.(...args),\n      onFocus: (...args) => this.options.current.onFocus?.(...args),\n      onSelectionUpdate: (...args) => this.options.current.onSelectionUpdate?.(...args),\n      onTransaction: (...args) => this.options.current.onTransaction?.(...args),\n      onUpdate: (...args) => this.options.current.onUpdate?.(...args),\n      onContentError: (...args) => this.options.current.onContentError?.(...args),\n      onDrop: (...args) => this.options.current.onDrop?.(...args),\n      onPaste: (...args) => this.options.current.onPaste?.(...args),\n      onDelete: (...args) => this.options.current.onDelete?.(...args),\n    }\n    const editor = new Editor(optionsToApply)\n\n    // no need to keep track of the event listeners, they will be removed when the editor is destroyed\n\n    return editor\n  }\n\n  /**\n   * Get the current editor instance.\n   */\n  getEditor(): Editor | null {\n    return this.editor\n  }\n\n  /**\n   * Always disable the editor on the server-side.\n   */\n  getServerSnapshot(): null {\n    return null\n  }\n\n  /**\n   * Subscribe to the editor instance's changes.\n   */\n  subscribe(onStoreChange: () => void) {\n    this.subscriptions.add(onStoreChange)\n\n    return () => {\n      this.subscriptions.delete(onStoreChange)\n    }\n  }\n\n  static compareOptions(a: UseEditorOptions, b: UseEditorOptions) {\n    return (Object.keys(a) as (keyof UseEditorOptions)[]).every(key => {\n      if (\n        [\n          'onCreate',\n          'onBeforeCreate',\n          'onDestroy',\n          'onUpdate',\n          'onTransaction',\n          'onFocus',\n          'onBlur',\n          'onSelectionUpdate',\n          'onContentError',\n          'onDrop',\n          'onPaste',\n        ].includes(key)\n      ) {\n        // we don't want to compare callbacks, they are always different and only registered once\n        return true\n      }\n\n      // We often encourage putting extensions inlined in the options object, so we will do a slightly deeper comparison here\n      if (key === 'extensions' && a.extensions && b.extensions) {\n        if (a.extensions.length !== b.extensions.length) {\n          return false\n        }\n        return a.extensions.every((extension, index) => {\n          if (extension !== b.extensions?.[index]) {\n            return false\n          }\n          return true\n        })\n      }\n      if (a[key] !== b[key]) {\n        // if any of the options have changed, we should update the editor options\n        return false\n      }\n      return true\n    })\n  }\n\n  /**\n   * On each render, we will create, update, or destroy the editor instance.\n   * @param deps The dependencies to watch for changes\n   * @returns A cleanup function\n   */\n  onRender(deps: DependencyList) {\n    // The returned callback will run on each render\n    return () => {\n      this.isComponentMounted = true\n      // Cleanup any scheduled destructions, since we are currently rendering\n      clearTimeout(this.scheduledDestructionTimeout)\n\n      if (this.editor && !this.editor.isDestroyed && deps.length === 0) {\n        // if the editor does exist & deps are empty, we don't need to re-initialize the editor generally\n        if (!EditorInstanceManager.compareOptions(this.options.current, this.editor.options)) {\n          // But, the options are different, so we need to update the editor options\n          // Still, this is faster than re-creating the editor\n          this.editor.setOptions({\n            ...this.options.current,\n            editable: this.editor.isEditable,\n          })\n        }\n      } else {\n        // When the editor:\n        // - does not yet exist\n        // - is destroyed\n        // - the deps array changes\n        // We need to destroy the editor instance and re-initialize it\n        this.refreshEditorInstance(deps)\n      }\n\n      return () => {\n        this.isComponentMounted = false\n        this.scheduleDestroy()\n      }\n    }\n  }\n\n  /**\n   * Recreate the editor instance if the dependencies have changed.\n   */\n  private refreshEditorInstance(deps: DependencyList) {\n    if (this.editor && !this.editor.isDestroyed) {\n      // Editor instance already exists\n      if (this.previousDeps === null) {\n        // If lastDeps has not yet been initialized, reuse the current editor instance\n        this.previousDeps = deps\n        return\n      }\n      const depsAreEqual =\n        this.previousDeps.length === deps.length && this.previousDeps.every((dep, index) => dep === deps[index])\n\n      if (depsAreEqual) {\n        // deps exist and are equal, no need to recreate\n        return\n      }\n    }\n\n    if (this.editor && !this.editor.isDestroyed) {\n      // Destroy the editor instance if it exists\n      this.editor.destroy()\n    }\n\n    this.setEditor(this.createEditor())\n\n    // Update the lastDeps to the current deps\n    this.previousDeps = deps\n  }\n\n  /**\n   * Schedule the destruction of the editor instance.\n   * This will only destroy the editor if it was not mounted on the next tick.\n   * This is to avoid destroying the editor instance when it's actually still mounted.\n   */\n  private scheduleDestroy() {\n    const currentInstanceId = this.instanceId\n    const currentEditor = this.editor\n\n    // Wait two ticks to see if the component is still mounted\n    this.scheduledDestructionTimeout = setTimeout(() => {\n      if (this.isComponentMounted && this.instanceId === currentInstanceId) {\n        // If still mounted on the following tick, with the same instanceId, do not destroy the editor\n        if (currentEditor) {\n          // just re-apply options as they might have changed\n          currentEditor.setOptions(this.options.current)\n        }\n        return\n      }\n      if (currentEditor && !currentEditor.isDestroyed) {\n        currentEditor.destroy()\n        if (this.instanceId === currentInstanceId) {\n          this.setEditor(null)\n        }\n      }\n      // This allows the effect to run again between ticks\n      // which may save us from having to re-create the editor\n    }, 1)\n  }\n}\n\n/**\n * This hook allows you to create an editor instance.\n * @param options The editor options\n * @param deps The dependencies to watch for changes\n * @returns The editor instance\n * @example const editor = useEditor({ extensions: [...] })\n */\nexport function useEditor(\n  options: UseEditorOptions & { immediatelyRender: false },\n  deps?: DependencyList,\n): Editor | null\n\n/**\n * This hook allows you to create an editor instance.\n * @param options The editor options\n * @param deps The dependencies to watch for changes\n * @returns The editor instance\n * @example const editor = useEditor({ extensions: [...] })\n */\nexport function useEditor(options: UseEditorOptions, deps?: DependencyList): Editor\n\nexport function useEditor(options: UseEditorOptions = {}, deps: DependencyList = []): Editor | null {\n  const mostRecentOptions = useRef(options)\n\n  mostRecentOptions.current = options\n\n  const [instanceManager] = useState(() => new EditorInstanceManager(mostRecentOptions))\n\n  const editor = useSyncExternalStore(\n    instanceManager.subscribe,\n    instanceManager.getEditor,\n    instanceManager.getServerSnapshot,\n  )\n\n  useDebugValue(editor)\n\n  // This effect will handle creating/updating the editor instance\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(instanceManager.onRender(deps))\n\n  // The default behavior is to re-render on each transaction\n  // This is legacy behavior that will be removed in future versions\n  useEditorState({\n    editor,\n    selector: ({ transactionNumber }) => {\n      if (options.shouldRerenderOnTransaction === false || options.shouldRerenderOnTransaction === undefined) {\n        // This will prevent the editor from re-rendering on each transaction\n        return null\n      }\n\n      // This will avoid re-rendering on the first transaction when `immediatelyRender` is set to `true`\n      if (options.immediatelyRender && transactionNumber === 0) {\n        return 0\n      }\n      return transactionNumber + 1\n    },\n  })\n\n  return editor\n}\n","import type { Editor } from '@tiptap/core'\nimport { deepEqual } from 'fast-equals'\nimport { useDebugValue, useEffect, useLayoutEffect, useState } from 'react'\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector.js'\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect\n\nexport type EditorStateSnapshot<TEditor extends Editor | null = Editor | null> = {\n  editor: TEditor\n  transactionNumber: number\n}\n\nexport type UseEditorStateOptions<TSelectorResult, TEditor extends Editor | null = Editor | null> = {\n  /**\n   * The editor instance.\n   */\n  editor: TEditor\n  /**\n   * A selector function to determine the value to compare for re-rendering.\n   */\n  selector: (context: EditorStateSnapshot<TEditor>) => TSelectorResult\n  /**\n   * A custom equality function to determine if the editor should re-render.\n   * @default `deepEqual` from `fast-deep-equal`\n   */\n  equalityFn?: (a: TSelectorResult, b: TSelectorResult | null) => boolean\n}\n\n/**\n * To synchronize the editor instance with the component state,\n * we need to create a separate instance that is not affected by the component re-renders.\n */\nclass EditorStateManager<TEditor extends Editor | null = Editor | null> {\n  private transactionNumber = 0\n\n  private lastTransactionNumber = 0\n\n  private lastSnapshot: EditorStateSnapshot<TEditor>\n\n  private editor: TEditor\n\n  private subscribers = new Set<() => void>()\n\n  constructor(initialEditor: TEditor) {\n    this.editor = initialEditor\n    this.lastSnapshot = { editor: initialEditor, transactionNumber: 0 }\n\n    this.getSnapshot = this.getSnapshot.bind(this)\n    this.getServerSnapshot = this.getServerSnapshot.bind(this)\n    this.watch = this.watch.bind(this)\n    this.subscribe = this.subscribe.bind(this)\n  }\n\n  /**\n   * Get the current editor instance.\n   */\n  getSnapshot(): EditorStateSnapshot<TEditor> {\n    if (this.transactionNumber === this.lastTransactionNumber) {\n      return this.lastSnapshot\n    }\n    this.lastTransactionNumber = this.transactionNumber\n    this.lastSnapshot = { editor: this.editor, transactionNumber: this.transactionNumber }\n    return this.lastSnapshot\n  }\n\n  /**\n   * Always disable the editor on the server-side.\n   */\n  getServerSnapshot(): EditorStateSnapshot<null> {\n    return { editor: null, transactionNumber: 0 }\n  }\n\n  /**\n   * Subscribe to the editor instance's changes.\n   */\n  subscribe(callback: () => void): () => void {\n    this.subscribers.add(callback)\n    return () => {\n      this.subscribers.delete(callback)\n    }\n  }\n\n  /**\n   * Watch the editor instance for changes.\n   */\n  watch(nextEditor: Editor | null): undefined | (() => void) {\n    this.editor = nextEditor as TEditor\n\n    if (this.editor) {\n      /**\n       * This will force a re-render when the editor state changes.\n       * This is to support things like `editor.can().toggleBold()` in components that `useEditor`.\n       * This could be more efficient, but it's a good trade-off for now.\n       */\n      const fn = () => {\n        this.transactionNumber += 1\n        this.subscribers.forEach(callback => callback())\n      }\n\n      const currentEditor = this.editor\n\n      currentEditor.on('transaction', fn)\n      return () => {\n        currentEditor.off('transaction', fn)\n      }\n    }\n\n    return undefined\n  }\n}\n\n/**\n * This hook allows you to watch for changes on the editor instance.\n * It will allow you to select a part of the editor state and re-render the component when it changes.\n * @example\n * ```tsx\n * const editor = useEditor({...options})\n * const { currentSelection } = useEditorState({\n *  editor,\n *  selector: snapshot => ({ currentSelection: snapshot.editor.state.selection }),\n * })\n */\nexport function useEditorState<TSelectorResult>(\n  options: UseEditorStateOptions<TSelectorResult, Editor>,\n): TSelectorResult\n/**\n * This hook allows you to watch for changes on the editor instance.\n * It will allow you to select a part of the editor state and re-render the component when it changes.\n * @example\n * ```tsx\n * const editor = useEditor({...options})\n * const { currentSelection } = useEditorState({\n *  editor,\n *  selector: snapshot => ({ currentSelection: snapshot.editor.state.selection }),\n * })\n */\nexport function useEditorState<TSelectorResult>(\n  options: UseEditorStateOptions<TSelectorResult, Editor | null>,\n): TSelectorResult | null\n\n/**\n * This hook allows you to watch for changes on the editor instance.\n * It will allow you to select a part of the editor state and re-render the component when it changes.\n * @example\n * ```tsx\n * const editor = useEditor({...options})\n * const { currentSelection } = useEditorState({\n *  editor,\n *  selector: snapshot => ({ currentSelection: snapshot.editor.state.selection }),\n * })\n */\nexport function useEditorState<TSelectorResult>(\n  options: UseEditorStateOptions<TSelectorResult, Editor> | UseEditorStateOptions<TSelectorResult, Editor | null>,\n): TSelectorResult | null {\n  const [editorStateManager] = useState(() => new EditorStateManager(options.editor))\n\n  // Using the `useSyncExternalStore` hook to sync the editor instance with the component state\n  const selectedState = useSyncExternalStoreWithSelector(\n    editorStateManager.subscribe,\n    editorStateManager.getSnapshot,\n    editorStateManager.getServerSnapshot,\n    options.selector as UseEditorStateOptions<TSelectorResult, Editor | null>['selector'],\n    options.equalityFn ?? deepEqual,\n  )\n\n  useIsomorphicLayoutEffect(() => {\n    return editorStateManager.watch(options.editor)\n  }, [options.editor, editorStateManager])\n\n  useDebugValue(selectedState)\n\n  return selectedState\n}\n","import type { ReactNode } from 'react'\nimport { createContext, createElement, useContext } from 'react'\n\nexport interface ReactNodeViewContextProps {\n  onDragStart?: (event: DragEvent) => void\n  nodeViewContentRef?: (element: HTMLElement | null) => void\n  /**\n   * This allows you to add children into the NodeViewContent component.\n   * This is useful when statically rendering the content of a node view.\n   */\n  nodeViewContentChildren?: ReactNode\n}\n\nexport const ReactNodeViewContext = createContext<ReactNodeViewContextProps>({\n  onDragStart: () => {\n    // no-op\n  },\n  nodeViewContentChildren: undefined,\n  nodeViewContentRef: () => {\n    // no-op\n  },\n})\n\nexport const ReactNodeViewContentProvider = ({ children, content }: { children: ReactNode; content: ReactNode }) => {\n  return createElement(ReactNodeViewContext.Provider, { value: { nodeViewContentChildren: content } }, children)\n}\n\nexport const useReactNodeView = () => useContext(ReactNodeViewContext)\n","import type { ComponentProps } from 'react'\nimport React from 'react'\n\nimport { useReactNodeView } from './useReactNodeView.js'\n\nexport type NodeViewContentProps<T extends keyof React.JSX.IntrinsicElements = 'div'> = {\n  as?: NoInfer<T>\n} & ComponentProps<T>\n\nexport function NodeViewContent<T extends keyof React.JSX.IntrinsicElements = 'div'>({\n  as: Tag = 'div' as T,\n  ...props\n}: NodeViewContentProps<T>) {\n  const { nodeViewContentRef, nodeViewContentChildren } = useReactNodeView()\n\n  return (\n    // @ts-ignore\n    <Tag\n      {...props}\n      ref={nodeViewContentRef}\n      data-node-view-content=\"\"\n      style={{\n        whiteSpace: 'pre-wrap',\n        ...props.style,\n      }}\n    >\n      {nodeViewContentChildren}\n    </Tag>\n  )\n}\n","import React from 'react'\n\nimport { useReactNodeView } from './useReactNodeView.js'\n\nexport interface NodeViewWrapperProps {\n  [key: string]: any\n  as?: React.ElementType\n}\n\nexport const NodeViewWrapper: React.FC<NodeViewWrapperProps> = React.forwardRef((props, ref) => {\n  const { onDragStart } = useReactNodeView()\n  const Tag = props.as || 'div'\n\n  return (\n    // @ts-ignore\n    <Tag\n      {...props}\n      ref={ref}\n      data-node-view-wrapper=\"\"\n      onDragStart={onDragStart}\n      style={{\n        whiteSpace: 'normal',\n        ...props.style,\n      }}\n    />\n  )\n})\n","/* eslint-disable @typescript-eslint/no-shadow */\nimport type { MarkViewProps, MarkViewRenderer, MarkViewRendererOptions } from '@tiptap/core'\nimport { MarkView } from '@tiptap/core'\nimport React from 'react'\n\n// import { flushSync } from 'react-dom'\nimport { ReactRenderer } from './ReactRenderer.js'\n\nexport interface MarkViewContextProps {\n  markViewContentRef: (element: HTMLElement | null) => void\n}\nexport const ReactMarkViewContext = React.createContext<MarkViewContextProps>({\n  markViewContentRef: () => {\n    // do nothing\n  },\n})\n\nexport type MarkViewContentProps<T extends keyof React.JSX.IntrinsicElements = 'span'> = {\n  as?: T\n} & Omit<React.ComponentProps<T>, 'as'>\n\nexport const MarkViewContent = <T extends keyof React.JSX.IntrinsicElements = 'span'>(\n  props: MarkViewContentProps<T>,\n) => {\n  const { as: Tag = 'span', ...rest } = props\n  const { markViewContentRef } = React.useContext(ReactMarkViewContext)\n\n  return (\n    // @ts-ignore\n    <Tag {...rest} ref={markViewContentRef} data-mark-view-content=\"\" />\n  )\n}\n\nexport interface ReactMarkViewRendererOptions extends MarkViewRendererOptions {\n  /**\n   * The tag name of the element wrapping the React component.\n   */\n  as?: string\n  className?: string\n  attrs?: { [key: string]: string }\n}\n\nexport class ReactMarkView extends MarkView<React.ComponentType<MarkViewProps>, ReactMarkViewRendererOptions> {\n  renderer: ReactRenderer\n  contentDOMElement: HTMLElement\n\n  constructor(\n    component: React.ComponentType<MarkViewProps>,\n    props: MarkViewProps,\n    options?: Partial<ReactMarkViewRendererOptions>,\n  ) {\n    super(component, props, options)\n\n    const { as = 'span', attrs, className = '' } = options || {}\n    const componentProps = { ...props, updateAttributes: this.updateAttributes.bind(this) } satisfies MarkViewProps\n\n    this.contentDOMElement = document.createElement('span')\n\n    const markViewContentRef: MarkViewContextProps['markViewContentRef'] = el => {\n      if (el && !el.contains(this.contentDOMElement)) {\n        el.appendChild(this.contentDOMElement)\n      }\n    }\n    const context: MarkViewContextProps = {\n      markViewContentRef,\n    }\n\n    // For performance reasons, we memoize the provider component\n    // And all of the things it requires are declared outside of the component, so it doesn't need to re-render\n    const ReactMarkViewProvider: React.FunctionComponent<MarkViewProps> = React.memo(componentProps => {\n      return (\n        <ReactMarkViewContext.Provider value={context}>\n          {React.createElement(component, componentProps)}\n        </ReactMarkViewContext.Provider>\n      )\n    })\n\n    ReactMarkViewProvider.displayName = 'ReactMarkView'\n\n    this.renderer = new ReactRenderer(ReactMarkViewProvider, {\n      editor: props.editor,\n      props: componentProps,\n      as,\n      className: `mark-${props.mark.type.name} ${className}`.trim(),\n    })\n\n    if (attrs) {\n      this.renderer.updateAttributes(attrs)\n    }\n  }\n\n  get dom() {\n    return this.renderer.element\n  }\n\n  get contentDOM() {\n    return this.contentDOMElement\n  }\n}\n\nexport function ReactMarkViewRenderer(\n  component: React.ComponentType<MarkViewProps>,\n  options: Partial<ReactMarkViewRendererOptions> = {},\n): MarkViewRenderer {\n  return props => new ReactMarkView(component, props, options)\n}\n","import type { Editor } from '@tiptap/core'\nimport type {\n  ComponentClass,\n  ForwardRefExoticComponent,\n  FunctionComponent,\n  PropsWithoutRef,\n  ReactNode,\n  RefAttributes,\n} from 'react'\nimport { version as reactVersion } from 'react'\nimport { flushSync } from 'react-dom'\n\nimport type { EditorWithContentComponent } from './Editor.js'\n\n/**\n * Check if a component is a class component.\n * @param Component\n * @returns {boolean}\n */\nfunction isClassComponent(Component: any) {\n  return !!(typeof Component === 'function' && Component.prototype && Component.prototype.isReactComponent)\n}\n\n/**\n * Check if a component is a forward ref component.\n * @param Component\n * @returns {boolean}\n */\nfunction isForwardRefComponent(Component: any) {\n  return !!(\n    typeof Component === 'object' &&\n    Component.$$typeof &&\n    (Component.$$typeof.toString() === 'Symbol(react.forward_ref)' ||\n      Component.$$typeof.description === 'react.forward_ref')\n  )\n}\n\n/**\n * Check if a component is a memoized component.\n * @param Component\n * @returns {boolean}\n */\nfunction isMemoComponent(Component: any) {\n  return !!(\n    typeof Component === 'object' &&\n    Component.$$typeof &&\n    (Component.$$typeof.toString() === 'Symbol(react.memo)' || Component.$$typeof.description === 'react.memo')\n  )\n}\n\n/**\n * Check if a component can safely receive a ref prop.\n * This includes class components, forwardRef components, and memoized components\n * that wrap forwardRef or class components.\n * @param Component\n * @returns {boolean}\n */\nfunction canReceiveRef(Component: any) {\n  // Check if it's a class component\n  if (isClassComponent(Component)) {\n    return true\n  }\n\n  // Check if it's a forwardRef component\n  if (isForwardRefComponent(Component)) {\n    return true\n  }\n\n  // Check if it's a memoized component\n  if (isMemoComponent(Component)) {\n    // For memoized components, check the wrapped component\n    const wrappedComponent = Component.type\n    if (wrappedComponent) {\n      return isClassComponent(wrappedComponent) || isForwardRefComponent(wrappedComponent)\n    }\n  }\n\n  return false\n}\n\n/**\n * Check if we're running React 19+ by detecting if function components support ref props\n * @returns {boolean}\n */\nfunction isReact19Plus(): boolean {\n  // React 19 is detected by checking React version if available\n  // In practice, we'll use a more conservative approach and assume React 18 behavior\n  // unless we can definitively detect React 19\n  try {\n    // @ts-ignore\n    if (reactVersion) {\n      const majorVersion = parseInt(reactVersion.split('.')[0], 10)\n      return majorVersion >= 19\n    }\n  } catch {\n    // Fallback to React 18 behavior if we can't determine version\n  }\n  return false\n}\n\nexport interface ReactRendererOptions {\n  /**\n   * The editor instance.\n   * @type {Editor}\n   */\n  editor: Editor\n\n  /**\n   * The props for the component.\n   * @type {Record<string, any>}\n   * @default {}\n   */\n  props?: Record<string, any>\n\n  /**\n   * The tag name of the element.\n   * @type {string}\n   * @default 'div'\n   */\n  as?: string\n\n  /**\n   * The class name of the element.\n   * @type {string}\n   * @default ''\n   * @example 'foo bar'\n   */\n  className?: string\n}\n\ntype ComponentType<R, P> =\n  | ComponentClass<P>\n  | FunctionComponent<P>\n  | ForwardRefExoticComponent<PropsWithoutRef<P> & RefAttributes<R>>\n\n/**\n * The ReactRenderer class. It's responsible for rendering React components inside the editor.\n * @example\n * new ReactRenderer(MyComponent, {\n *   editor,\n *   props: {\n *     foo: 'bar',\n *   },\n *   as: 'span',\n * })\n */\nexport class ReactRenderer<R = unknown, P extends Record<string, any> = object> {\n  id: string\n\n  editor: Editor\n\n  component: any\n\n  element: HTMLElement\n\n  props: P\n\n  reactElement: ReactNode\n\n  ref: R | null = null\n\n  /**\n   * Flag to track if the renderer has been destroyed, preventing queued or asynchronous renders from executing after teardown.\n   */\n  destroyed = false\n\n  /**\n   * Immediately creates element and renders the provided React component.\n   */\n  constructor(\n    component: ComponentType<R, P>,\n    { editor, props = {}, as = 'div', className = '' }: ReactRendererOptions,\n  ) {\n    this.id = Math.floor(Math.random() * 0xffffffff).toString()\n    this.component = component\n    this.editor = editor as EditorWithContentComponent\n    this.props = props as P\n    this.element = document.createElement(as)\n    this.element.classList.add('react-renderer')\n\n    if (className) {\n      this.element.classList.add(...className.split(' '))\n    }\n\n    // If the editor is already initialized, we will need to\n    // synchronously render the component to ensure it renders\n    // together with Prosemirror's rendering.\n    if (this.editor.isInitialized) {\n      flushSync(() => {\n        this.render()\n      })\n    } else {\n      queueMicrotask(() => {\n        if (this.destroyed) {\n          return\n        }\n        this.render()\n      })\n    }\n  }\n\n  /**\n   * Render the React component.\n   */\n  render(): void {\n    if (this.destroyed) {\n      return\n    }\n\n    const Component = this.component\n    const props = this.props\n    const editor = this.editor as EditorWithContentComponent\n\n    // Handle ref forwarding with React 18/19 compatibility\n    const isReact19 = isReact19Plus()\n    const componentCanReceiveRef = canReceiveRef(Component)\n\n    const elementProps = { ...props }\n\n    // Always remove ref if the component cannot receive it (unless React 19+)\n    if (elementProps.ref && !(isReact19 || componentCanReceiveRef)) {\n      delete elementProps.ref\n    }\n\n    // Only assign our own ref if allowed\n    if (!elementProps.ref && (isReact19 || componentCanReceiveRef)) {\n      // @ts-ignore - Setting ref prop for compatible components\n      elementProps.ref = (ref: R) => {\n        this.ref = ref\n      }\n    }\n\n    this.reactElement = <Component {...elementProps} />\n\n    editor?.contentComponent?.setRenderer(this.id, this)\n  }\n\n  /**\n   * Re-renders the React component with new props.\n   */\n  updateProps(props: Record<string, any> = {}): void {\n    if (this.destroyed) {\n      return\n    }\n\n    this.props = {\n      ...this.props,\n      ...props,\n    }\n\n    this.render()\n  }\n\n  /**\n   * Destroy the React component.\n   */\n  destroy(): void {\n    this.destroyed = true\n    const editor = this.editor as EditorWithContentComponent\n\n    editor?.contentComponent?.removeRenderer(this.id)\n    // If the consumer appended the element to the document (for example\n    // many demos append the renderer element to document.body), make sure\n    // we remove it here to avoid leaking DOM nodes / React roots.\n    try {\n      if (this.element && this.element.parentNode) {\n        this.element.parentNode.removeChild(this.element)\n      }\n    } catch {\n      // ignore DOM removal errors\n    }\n  }\n\n  /**\n   * Update the attributes of the element that holds the React component.\n   */\n  updateAttributes(attributes: Record<string, string>): void {\n    Object.keys(attributes).forEach(key => {\n      this.element.setAttribute(key, attributes[key])\n    })\n  }\n}\n","import type {\n  DecorationWithType,\n  Editor,\n  NodeViewRenderer,\n  NodeViewRendererOptions,\n  NodeViewRendererProps,\n} from '@tiptap/core'\nimport { getRenderedAttributes, NodeView } from '@tiptap/core'\nimport type { Node, Node as ProseMirrorNode } from '@tiptap/pm/model'\nimport type { Decoration, DecorationSource, NodeView as ProseMirrorNodeView } from '@tiptap/pm/view'\nimport type { ComponentType, NamedExoticComponent } from 'react'\nimport { createElement, createRef, memo } from 'react'\n\nimport type { EditorWithContentComponent } from './Editor.js'\nimport { ReactRenderer } from './ReactRenderer.js'\nimport type { ReactNodeViewProps } from './types.js'\nimport type { ReactNodeViewContextProps } from './useReactNodeView.js'\nimport { ReactNodeViewContext } from './useReactNodeView.js'\n\nexport interface ReactNodeViewRendererOptions extends NodeViewRendererOptions {\n  /**\n   * This function is called when the node view is updated.\n   * It allows you to compare the old node with the new node and decide if the component should update.\n   */\n  update:\n    | ((props: {\n        oldNode: ProseMirrorNode\n        oldDecorations: readonly Decoration[]\n        oldInnerDecorations: DecorationSource\n        newNode: ProseMirrorNode\n        newDecorations: readonly Decoration[]\n        innerDecorations: DecorationSource\n        updateProps: () => void\n      }) => boolean)\n    | null\n  /**\n   * The tag name of the element wrapping the React component.\n   */\n  as?: string\n  /**\n   * The class name of the element wrapping the React component.\n   */\n  className?: string\n  /**\n   * Attributes that should be applied to the element wrapping the React component.\n   * If this is a function, it will be called each time the node view is updated.\n   * If this is an object, it will be applied once when the node view is mounted.\n   */\n  attrs?:\n    | Record<string, string>\n    | ((props: { node: ProseMirrorNode; HTMLAttributes: Record<string, any> }) => Record<string, string>)\n}\n\nexport class ReactNodeView<\n  T = HTMLElement,\n  Component extends ComponentType<ReactNodeViewProps<T>> = ComponentType<ReactNodeViewProps<T>>,\n  NodeEditor extends Editor = Editor,\n  Options extends ReactNodeViewRendererOptions = ReactNodeViewRendererOptions,\n> extends NodeView<Component, NodeEditor, Options> {\n  /**\n   * The renderer instance.\n   */\n  renderer!: ReactRenderer<unknown, ReactNodeViewProps<T>>\n\n  /**\n   * The element that holds the rich-text content of the node.\n   */\n  contentDOMElement!: HTMLElement | null\n\n  /**\n   * The requestAnimationFrame ID used for selection updates.\n   */\n  selectionRafId: number | null = null\n\n  constructor(component: Component, props: NodeViewRendererProps, options?: Partial<Options>) {\n    super(component, props, options)\n\n    if (!this.node.isLeaf) {\n      if (this.options.contentDOMElementTag) {\n        this.contentDOMElement = document.createElement(this.options.contentDOMElementTag)\n      } else {\n        this.contentDOMElement = document.createElement(this.node.isInline ? 'span' : 'div')\n      }\n\n      this.contentDOMElement.dataset.nodeViewContentReact = ''\n      this.contentDOMElement.dataset.nodeViewWrapper = ''\n\n      // For some reason the whiteSpace prop is not inherited properly in Chrome and Safari\n      // With this fix it seems to work fine\n      // See: https://github.com/ueberdosis/tiptap/issues/1197\n      this.contentDOMElement.style.whiteSpace = 'inherit'\n\n      const contentTarget = this.dom.querySelector('[data-node-view-content]')\n\n      if (!contentTarget) {\n        return\n      }\n\n      contentTarget.appendChild(this.contentDOMElement)\n    }\n  }\n\n  private cachedExtensionWithSyncedStorage: NodeViewRendererProps['extension'] | null = null\n\n  /**\n   * Returns a proxy of the extension that redirects storage access to the editor's mutable storage.\n   * This preserves the original prototype chain (instanceof checks, methods like configure/extend work).\n   * Cached to avoid proxy creation on every update.\n   */\n  get extensionWithSyncedStorage(): NodeViewRendererProps['extension'] {\n    if (!this.cachedExtensionWithSyncedStorage) {\n      const editor = this.editor\n      const extension = this.extension\n\n      this.cachedExtensionWithSyncedStorage = new Proxy(extension, {\n        get(target, prop, receiver) {\n          if (prop === 'storage') {\n            return editor.storage[extension.name as keyof typeof editor.storage] ?? {}\n          }\n          return Reflect.get(target, prop, receiver)\n        },\n      })\n    }\n\n    return this.cachedExtensionWithSyncedStorage\n  }\n\n  /**\n   * Setup the React component.\n   * Called on initialization.\n   */\n  mount() {\n    const props = {\n      editor: this.editor,\n      node: this.node,\n      decorations: this.decorations as DecorationWithType[],\n      innerDecorations: this.innerDecorations,\n      view: this.view,\n      selected: false,\n      extension: this.extensionWithSyncedStorage,\n      HTMLAttributes: this.HTMLAttributes,\n      getPos: () => this.getPos(),\n      updateAttributes: (attributes = {}) => this.updateAttributes(attributes),\n      deleteNode: () => this.deleteNode(),\n      ref: createRef<T>(),\n    } satisfies ReactNodeViewProps<T>\n\n    if (!(this.component as any).displayName) {\n      const capitalizeFirstChar = (string: string): string => {\n        return string.charAt(0).toUpperCase() + string.substring(1)\n      }\n\n      this.component.displayName = capitalizeFirstChar(this.extension.name)\n    }\n\n    const onDragStart = this.onDragStart.bind(this)\n    const nodeViewContentRef: ReactNodeViewContextProps['nodeViewContentRef'] = element => {\n      if (element && this.contentDOMElement && element.firstChild !== this.contentDOMElement) {\n        // remove the nodeViewWrapper attribute from the element\n        if (element.hasAttribute('data-node-view-wrapper')) {\n          element.removeAttribute('data-node-view-wrapper')\n        }\n        element.appendChild(this.contentDOMElement)\n      }\n    }\n    const context = { onDragStart, nodeViewContentRef }\n    const Component = this.component\n    // For performance reasons, we memoize the provider component\n    // And all of the things it requires are declared outside of the component, so it doesn't need to re-render\n    const ReactNodeViewProvider: NamedExoticComponent<ReactNodeViewProps<T>> = memo(componentProps => {\n      return (\n        <ReactNodeViewContext.Provider value={context}>\n          {createElement(Component, componentProps)}\n        </ReactNodeViewContext.Provider>\n      )\n    })\n\n    ReactNodeViewProvider.displayName = 'ReactNodeView'\n\n    let as = this.node.isInline ? 'span' : 'div'\n\n    if (this.options.as) {\n      as = this.options.as\n    }\n\n    const { className = '' } = this.options\n\n    this.handleSelectionUpdate = this.handleSelectionUpdate.bind(this)\n\n    this.renderer = new ReactRenderer(ReactNodeViewProvider, {\n      editor: this.editor,\n      props,\n      as,\n      className: `node-${this.node.type.name} ${className}`.trim(),\n    })\n\n    this.editor.on('selectionUpdate', this.handleSelectionUpdate)\n    this.updateElementAttributes()\n  }\n\n  /**\n   * Return the DOM element.\n   * This is the element that will be used to display the node view.\n   */\n  get dom() {\n    if (\n      this.renderer.element.firstElementChild &&\n      !this.renderer.element.firstElementChild?.hasAttribute('data-node-view-wrapper')\n    ) {\n      throw Error('Please use the NodeViewWrapper component for your node view.')\n    }\n\n    return this.renderer.element\n  }\n\n  /**\n   * Return the content DOM element.\n   * This is the element that will be used to display the rich-text content of the node.\n   */\n  get contentDOM() {\n    if (this.node.isLeaf) {\n      return null\n    }\n\n    return this.contentDOMElement\n  }\n\n  /**\n   * On editor selection update, check if the node is selected.\n   * If it is, call `selectNode`, otherwise call `deselectNode`.\n   */\n  handleSelectionUpdate() {\n    if (this.selectionRafId) {\n      cancelAnimationFrame(this.selectionRafId)\n      this.selectionRafId = null\n    }\n\n    this.selectionRafId = requestAnimationFrame(() => {\n      this.selectionRafId = null\n      const { from, to } = this.editor.state.selection\n      const pos = this.getPos()\n      if (typeof pos !== 'number') {\n        return\n      }\n\n      if (from <= pos && to >= pos + this.node.nodeSize) {\n        if (this.renderer.props.selected) {\n          return\n        }\n\n        this.selectNode()\n      } else {\n        if (!this.renderer.props.selected) {\n          return\n        }\n\n        this.deselectNode()\n      }\n    })\n  }\n\n  /**\n   * On update, update the React component.\n   * To prevent unnecessary updates, the `update` option can be used.\n   */\n  update(node: Node, decorations: readonly Decoration[], innerDecorations: DecorationSource): boolean {\n    const rerenderComponent = (props?: Record<string, any>) => {\n      this.renderer.updateProps(props)\n      if (typeof this.options.attrs === 'function') {\n        this.updateElementAttributes()\n      }\n    }\n\n    if (node.type !== this.node.type) {\n      return false\n    }\n\n    if (typeof this.options.update === 'function') {\n      const oldNode = this.node\n      const oldDecorations = this.decorations\n      const oldInnerDecorations = this.innerDecorations\n\n      this.node = node\n      this.decorations = decorations\n      this.innerDecorations = innerDecorations\n\n      return this.options.update({\n        oldNode,\n        oldDecorations,\n        newNode: node,\n        newDecorations: decorations,\n        oldInnerDecorations,\n        innerDecorations,\n        updateProps: () =>\n          rerenderComponent({ node, decorations, innerDecorations, extension: this.extensionWithSyncedStorage }),\n      })\n    }\n\n    if (node === this.node && this.decorations === decorations && this.innerDecorations === innerDecorations) {\n      return true\n    }\n\n    this.node = node\n    this.decorations = decorations\n    this.innerDecorations = innerDecorations\n\n    rerenderComponent({ node, decorations, innerDecorations, extension: this.extensionWithSyncedStorage })\n\n    return true\n  }\n\n  /**\n   * Select the node.\n   * Add the `selected` prop and the `ProseMirror-selectednode` class.\n   */\n  selectNode() {\n    this.renderer.updateProps({\n      selected: true,\n    })\n    this.renderer.element.classList.add('ProseMirror-selectednode')\n  }\n\n  /**\n   * Deselect the node.\n   * Remove the `selected` prop and the `ProseMirror-selectednode` class.\n   */\n  deselectNode() {\n    this.renderer.updateProps({\n      selected: false,\n    })\n    this.renderer.element.classList.remove('ProseMirror-selectednode')\n  }\n\n  /**\n   * Destroy the React component instance.\n   */\n  destroy() {\n    this.renderer.destroy()\n    this.editor.off('selectionUpdate', this.handleSelectionUpdate)\n    this.contentDOMElement = null\n\n    if (this.selectionRafId) {\n      cancelAnimationFrame(this.selectionRafId)\n      this.selectionRafId = null\n    }\n  }\n\n  /**\n   * Update the attributes of the top-level element that holds the React component.\n   * Applying the attributes defined in the `attrs` option.\n   */\n  updateElementAttributes() {\n    if (this.options.attrs) {\n      let attrsObj: Record<string, string> = {}\n\n      if (typeof this.options.attrs === 'function') {\n        const extensionAttributes = this.editor.extensionManager.attributes\n        const HTMLAttributes = getRenderedAttributes(this.node, extensionAttributes)\n\n        attrsObj = this.options.attrs({ node: this.node, HTMLAttributes })\n      } else {\n        attrsObj = this.options.attrs\n      }\n\n      this.renderer.updateAttributes(attrsObj)\n    }\n  }\n}\n\n/**\n * Create a React node view renderer.\n */\nexport function ReactNodeViewRenderer<T = HTMLElement>(\n  component: ComponentType<ReactNodeViewProps<T>>,\n  options?: Partial<ReactNodeViewRendererOptions>,\n): NodeViewRenderer {\n  return props => {\n    // try to get the parent component\n    // this is important for vue devtools to show the component hierarchy correctly\n    // maybe its `undefined` because <editor-content> isnt rendered yet\n    if (!(props.editor as EditorWithContentComponent).contentComponent) {\n      return {} as unknown as ProseMirrorNodeView\n    }\n\n    return new ReactNodeView<T>(component, props, options)\n  }\n}\n","import type { ReactNode } from 'react'\nimport { createContext, useContext, useMemo } from 'react'\n\nimport { EditorContext } from './Context.js'\nimport type { Editor, EditorContentProps, EditorStateSnapshot } from './index.js'\nimport { EditorContent, useEditorState } from './index.js'\n\n/**\n * The shape of the React context used by the `<Tiptap />` components.\n *\n * The editor instance is always available when using the default `useEditor`\n * configuration. For SSR scenarios where `immediatelyRender: false` is used,\n * consider using the legacy `EditorProvider` pattern instead.\n */\nexport type TiptapContextType = {\n  /** The Tiptap editor instance. */\n  editor: Editor\n}\n\n/**\n * React context that stores the current editor instance.\n *\n * Use `useTiptap()` to read from this context in child components.\n */\nexport const TiptapContext = createContext<TiptapContextType>({\n  get editor(): Editor {\n    throw new Error('useTiptap must be used within a <Tiptap> provider')\n  },\n})\n\nTiptapContext.displayName = 'TiptapContext'\n\n/**\n * Hook to read the Tiptap context and access the editor instance.\n *\n * This is a small convenience wrapper around `useContext(TiptapContext)`.\n * The editor is always available when used within a `<Tiptap>` provider.\n *\n * @returns The current `TiptapContextType` value from the provider.\n *\n * @example\n * ```tsx\n * import { useTiptap } from '@tiptap/react'\n *\n * function Toolbar() {\n *   const { editor } = useTiptap()\n *\n *   return (\n *     <button onClick={() => editor.chain().focus().toggleBold().run()}>\n *       Bold\n *     </button>\n *   )\n * }\n * ```\n */\nexport const useTiptap = () => useContext(TiptapContext)\n\n/**\n * Select a slice of the editor state using the context-provided editor.\n *\n * This is a thin wrapper around `useEditorState` that reads the `editor`\n * instance from `useTiptap()` so callers don't have to pass it manually.\n *\n * @typeParam TSelectorResult - The type returned by the selector.\n * @param selector - Function that receives the editor state snapshot and\n *                   returns the piece of state you want to subscribe to.\n * @param equalityFn - Optional function to compare previous/next selected\n *                     values and avoid unnecessary updates.\n * @returns The selected slice of the editor state.\n *\n * @example\n * ```tsx\n * function WordCount() {\n *   const wordCount = useTiptapState(state => {\n *     const text = state.editor.state.doc.textContent\n *     return text.split(/\\s+/).filter(Boolean).length\n *   })\n *\n *   return <span>{wordCount} words</span>\n * }\n * ```\n */\nexport function useTiptapState<TSelectorResult>(\n  selector: (context: EditorStateSnapshot<Editor>) => TSelectorResult,\n  equalityFn?: (a: TSelectorResult, b: TSelectorResult | null) => boolean,\n) {\n  const { editor } = useTiptap()\n\n  return useEditorState({\n    editor,\n    selector,\n    equalityFn,\n  })\n}\n\n/**\n * Props for the `Tiptap` root/provider component.\n */\nexport type TiptapWrapperProps = {\n  /**\n   * The editor instance to provide to child components.\n   * Use `useEditor()` to create this instance.\n   */\n  editor?: Editor\n\n  /**\n   * @deprecated Use `editor` instead. Will be removed in the next major version.\n   */\n  instance?: Editor\n\n  children: ReactNode\n}\n\n/**\n * Top-level provider component that makes the editor instance available via\n * React context to all child components.\n *\n * This component also provides backwards compatibility with the legacy\n * `EditorContext`, so components using `useCurrentEditor()` will work\n * inside a `<Tiptap>` provider.\n *\n * @param props - Component props.\n * @returns A context provider element wrapping `children`.\n *\n * @example\n * ```tsx\n * import { Tiptap, useEditor } from '@tiptap/react'\n *\n * function App() {\n *   const editor = useEditor({ extensions: [...] })\n *\n *   return (\n *     <Tiptap editor={editor}>\n *       <Toolbar />\n *       <Tiptap.Content />\n *     </Tiptap>\n *   )\n * }\n * ```\n */\nexport function TiptapWrapper({ editor, instance, children }: TiptapWrapperProps) {\n  const resolvedEditor = editor ?? instance\n\n  if (!resolvedEditor) {\n    throw new Error('Tiptap: An editor instance is required. Pass a non-null `editor` prop.')\n  }\n\n  const tiptapContextValue = useMemo<TiptapContextType>(() => ({ editor: resolvedEditor }), [resolvedEditor])\n\n  // Provide backwards compatibility with the legacy EditorContext\n  // so components using useCurrentEditor() work inside <Tiptap>\n  const legacyContextValue = useMemo(() => ({ editor: resolvedEditor }), [resolvedEditor])\n\n  return (\n    <EditorContext.Provider value={legacyContextValue}>\n      <TiptapContext.Provider value={tiptapContextValue}>{children}</TiptapContext.Provider>\n    </EditorContext.Provider>\n  )\n}\n\nTiptapWrapper.displayName = 'Tiptap'\n\n/**\n * Convenience component that renders `EditorContent` using the context-provided\n * editor instance. Use this instead of manually passing the `editor` prop.\n *\n * @param props - All `EditorContent` props except `editor` and `ref`.\n * @returns An `EditorContent` element bound to the context editor.\n *\n * @example\n * ```tsx\n * // inside a Tiptap provider\n * <Tiptap.Content className=\"editor\" />\n * ```\n */\nexport function TiptapContent({ ...rest }: Omit<EditorContentProps, 'editor' | 'ref'>) {\n  const { editor } = useTiptap()\n\n  return <EditorContent editor={editor} {...rest} />\n}\n\nTiptapContent.displayName = 'Tiptap.Content'\n\n/**\n * Root `Tiptap` component. Use it as the provider for all child components.\n *\n * The exported object includes the `Content` subcomponent for rendering the\n * editor content area.\n *\n * This component provides both the new `TiptapContext` (accessed via `useTiptap()`)\n * and the legacy `EditorContext` (accessed via `useCurrentEditor()`) for\n * backwards compatibility.\n *\n * For bubble menus and floating menus, import them separately from\n * `@tiptap/react/menus` to keep floating-ui as an optional dependency.\n *\n * @example\n * ```tsx\n * import { Tiptap, useEditor } from '@tiptap/react'\n * import { BubbleMenu } from '@tiptap/react/menus'\n *\n * function App() {\n *   const editor = useEditor({ extensions: [...] })\n *\n *   return (\n *     <Tiptap editor={editor}>\n *       <Tiptap.Content />\n *       <BubbleMenu>\n *         <button onClick={() => editor.chain().focus().toggleBold().run()}>Bold</button>\n *       </BubbleMenu>\n *     </Tiptap>\n *   )\n * }\n * ```\n */\nexport const Tiptap = Object.assign(TiptapWrapper, {\n  /**\n   * The Tiptap Content component that renders the EditorContent with the editor instance from the context.\n   * @see TiptapContent\n   */\n  Content: TiptapContent,\n})\n\nexport default Tiptap\n","export * from './Context.js'\nexport * from './EditorContent.js'\nexport * from './NodeViewContent.js'\nexport * from './NodeViewWrapper.js'\nexport * from './ReactMarkViewRenderer.js'\nexport * from './ReactNodeViewRenderer.js'\nexport * from './ReactRenderer.js'\nexport * from './Tiptap.js'\nexport * from './types.js'\nexport * from './useEditor.js'\nexport * from './useEditorState.js'\nexport * from './useReactNodeView.js'\nexport * from '@tiptap/core'\n"],"names":["useDebugValue","useEffect","useState","useSyncExternalStore","useState","useSyncExternalStore","useDebugValue","useEffect","jsx","jsxs","createContext","useContext","jsx","React","jsx","React","React","jsx","jsx","React","componentProps","createElement","jsx","createElement","createContext","useContext","useMemo","jsx","createContext","useContext","useMemo"],"mappings":"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"}},
    {"offset": {"line": 12715, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/core/src/jsx-runtime.ts"],"sourcesContent":["export type Attributes = Record<string, any>\n\nexport type DOMOutputSpecElement = 0 | Attributes | DOMOutputSpecArray\n/**\n * Better describes the output of a `renderHTML` function in prosemirror\n * @see https://prosemirror.net/docs/ref/#model.DOMOutputSpec\n */\nexport type DOMOutputSpecArray =\n  | [string]\n  | [string, Attributes]\n  | [string, 0]\n  | [string, Attributes, 0]\n  | [string, Attributes, DOMOutputSpecArray | 0]\n  | [string, DOMOutputSpecArray]\n\n// JSX types for Tiptap's JSX runtime\n// These types only apply when using @jsxImportSource @tiptap/core\n// eslint-disable-next-line @typescript-eslint/no-namespace\nexport namespace JSX {\n  export type Element = DOMOutputSpecArray\n  export interface IntrinsicElements {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any\n  }\n  export interface ElementChildrenAttribute {\n    children: unknown\n  }\n}\n\nexport type JSXRenderer = (\n  tag: 'slot' | string | ((props?: Attributes) => DOMOutputSpecArray | DOMOutputSpecElement),\n  props?: Attributes,\n  ...children: JSXRenderer[]\n) => DOMOutputSpecArray | DOMOutputSpecElement\n\nexport function Fragment(props: { children: JSXRenderer[] }) {\n  return props.children\n}\n\nexport const h: JSXRenderer = (tag, attributes) => {\n  // Treat the slot tag as the Prosemirror hole to render content into\n  if (tag === 'slot') {\n    return 0\n  }\n\n  // If the tag is a function, call it with the props\n  if (tag instanceof Function) {\n    return tag(attributes)\n  }\n\n  const { children, ...rest } = attributes ?? {}\n\n  if (tag === 'svg') {\n    throw new Error('SVG elements are not supported in the JSX syntax, use the array syntax instead')\n  }\n\n  // Otherwise, return the tag, attributes, and children\n  return [tag, rest, children]\n}\n\n// See\n// https://esbuild.github.io/api/#jsx-import-source\n// https://www.typescriptlang.org/tsconfig/#jsxImportSource\n\nexport { h as createElement, h as jsx, h as jsxDEV, h as jsxs }\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAmCO,SAAS,SAAS,KAAA,EAAoC;IAC3D,OAAO,MAAM,QAAA;AACf;AAEO,IAAM,IAAiB,CAAC,KAAK,eAAe;IAEjD,IAAI,QAAQ,QAAQ;QAClB,OAAO;IACT;IAGA,IAAI,eAAe,UAAU;QAC3B,OAAO,IAAI,UAAU;IACvB;IAEA,MAAM,EAAE,QAAA,EAAU,GAAG,KAAK,CAAA,GAAI,cAAA,OAAA,aAAc,CAAC;IAE7C,IAAI,QAAQ,OAAO;QACjB,MAAM,IAAI,MAAM,gFAAgF;IAClG;IAGA,OAAO;QAAC;QAAK;QAAM,QAAQ;KAAA;AAC7B"}},
    {"offset": {"line": 12756, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-blockquote/src/blockquote.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/extension-blockquote/src/index.ts"],"sourcesContent":["/** @jsxImportSource @tiptap/core */\nimport { mergeAttributes, Node, wrappingInputRule } from '@tiptap/core'\n\nexport interface BlockquoteOptions {\n  /**\n   * HTML attributes to add to the blockquote element\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    blockQuote: {\n      /**\n       * Set a blockquote node\n       */\n      setBlockquote: () => ReturnType\n      /**\n       * Toggle a blockquote node\n       */\n      toggleBlockquote: () => ReturnType\n      /**\n       * Unset a blockquote node\n       */\n      unsetBlockquote: () => ReturnType\n    }\n  }\n}\n\n/**\n * Matches a blockquote to a `>` as input.\n */\nexport const inputRegex = /^\\s*>\\s$/\n\n/**\n * This extension allows you to create blockquotes.\n * @see https://tiptap.dev/api/nodes/blockquote\n */\nexport const Blockquote = Node.create<BlockquoteOptions>({\n  name: 'blockquote',\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n    }\n  },\n\n  content: 'block+',\n\n  group: 'block',\n\n  defining: true,\n\n  parseHTML() {\n    return [{ tag: 'blockquote' }]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return (\n      <blockquote {...mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)}>\n        <slot />\n      </blockquote>\n    )\n  },\n\n  parseMarkdown: (token, helpers) => {\n    return helpers.createNode('blockquote', undefined, helpers.parseChildren(token.tokens || []))\n  },\n\n  renderMarkdown: (node, h) => {\n    if (!node.content) {\n      return ''\n    }\n\n    // Use a single '>' prefix regardless of nesting level\n    // Nested blockquotes will add their own '>' prefix recursively\n    const prefix = '>'\n    const result: string[] = []\n\n    node.content.forEach(child => {\n      // Render each child node as an array so it gets processed properly\n      const childContent = h.renderChildren([child])\n      const lines = childContent.split('\\n')\n\n      const linesWithPrefix = lines.map(line => {\n        // Don't add prefix to empty lines\n        if (line.trim() === '') {\n          return prefix\n        }\n\n        // Nested blockquotes will already have their own prefixes\n        // We just need to add our own prefix at the start\n        return `${prefix} ${line}`\n      })\n\n      result.push(linesWithPrefix.join('\\n'))\n    })\n\n    // Add separator lines between children\n    return result.join(`\\n${prefix}\\n`)\n  },\n\n  addCommands() {\n    return {\n      setBlockquote:\n        () =>\n        ({ commands }) => {\n          return commands.wrapIn(this.name)\n        },\n      toggleBlockquote:\n        () =>\n        ({ commands }) => {\n          return commands.toggleWrap(this.name)\n        },\n      unsetBlockquote:\n        () =>\n        ({ commands }) => {\n          return commands.lift(this.name)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Shift-b': () => this.editor.commands.toggleBlockquote(),\n    }\n  },\n\n  addInputRules() {\n    return [\n      wrappingInputRule({\n        find: inputRegex,\n        type: this.type,\n      }),\n    ]\n  },\n})\n","import { Blockquote } from './blockquote.jsx'\n\nexport * from './blockquote.jsx'\n\nexport default Blockquote\n"],"names":[],"mappings":";;;;;;;;;AACA,SAAS,iBAAiB,MAAM,yBAAyB;AA6DjD;;;AA5BD,IAAM,aAAa;AAMnB,IAAM,aAAa,sKAAA,CAAK,MAAA,CAA0B;IACvD,MAAM;IAEN,aAAa;QACX,OAAO;YACL,gBAAgB,CAAC;QACnB;IACF;IAEA,SAAS;IAET,OAAO;IAEP,UAAU;IAEV,YAAY;QACV,OAAO;YAAC;gBAAE,KAAK;YAAa,CAAC;SAAA;IAC/B;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OACE,aAAA,GAAA,IAAA,gMAAA,EAAC,cAAA;YAAY,OAAG,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc,CAAA;YACzE,UAAA,aAAA,GAAA,IAAA,gMAAA,EAAC,QAAA,CAAA,CAAK;QAAA,CACR;IAEJ;IAEA,eAAe,CAAC,OAAO,YAAY;QACjC,OAAO,QAAQ,UAAA,CAAW,cAAc,KAAA,GAAW,QAAQ,aAAA,CAAc,MAAM,MAAA,IAAU,CAAC,CAAC,CAAC;IAC9F;IAEA,gBAAgB,CAAC,MAAM,MAAM;QAC3B,IAAI,CAAC,KAAK,OAAA,EAAS;YACjB,OAAO;QACT;QAIA,MAAM,SAAS;QACf,MAAM,SAAmB,CAAC,CAAA;QAE1B,KAAK,OAAA,CAAQ,OAAA,CAAQ,CAAA,UAAS;YAE5B,MAAM,eAAe,EAAE,cAAA,CAAe;gBAAC,KAAK;aAAC;YAC7C,MAAM,QAAQ,aAAa,KAAA,CAAM,IAAI;YAErC,MAAM,kBAAkB,MAAM,GAAA,CAAI,CAAA,SAAQ;gBAExC,IAAI,KAAK,IAAA,CAAK,MAAM,IAAI;oBACtB,OAAO;gBACT;gBAIA,OAAO,GAAG,MAAM,CAAA,CAAA,EAAI,IAAI,EAAA;YAC1B,CAAC;YAED,OAAO,IAAA,CAAK,gBAAgB,IAAA,CAAK,IAAI,CAAC;QACxC,CAAC;QAGD,OAAO,OAAO,IAAA,CAAK,CAAA;AAAA,EAAK,MAAM,CAAA;AAAA,CAAI;IACpC;IAEA,cAAc;QACZ,OAAO;YACL,eACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,MAAA,CAAO,IAAA,CAAK,IAAI;gBAClC;YACF,kBACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,UAAA,CAAW,IAAA,CAAK,IAAI;gBACtC;YACF,iBACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,IAAA,CAAK,IAAA,CAAK,IAAI;gBAChC;QACJ;IACF;IAEA,uBAAuB;QACrB,OAAO;YACL,eAAe,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,gBAAA,CAAiB;QAC7D;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,mLAAA,EAAkB;gBAChB,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;AACF,CAAC;;ACtID,IAAO,gBAAQ"}},
    {"offset": {"line": 12854, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-bold/src/bold.tsx","file:///D:/web-edra/client/node_modules/%40tiptap/extension-bold/src/index.ts"],"sourcesContent":["/** @jsxImportSource @tiptap/core */\nimport { Mark, markInputRule, markPasteRule, mergeAttributes } from '@tiptap/core'\n\nexport interface BoldOptions {\n  /**\n   * HTML attributes to add to the bold element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    bold: {\n      /**\n       * Set a bold mark\n       */\n      setBold: () => ReturnType\n      /**\n       * Toggle a bold mark\n       */\n      toggleBold: () => ReturnType\n      /**\n       * Unset a bold mark\n       */\n      unsetBold: () => ReturnType\n    }\n  }\n}\n\n/**\n * Matches bold text via `**` as input.\n */\nexport const starInputRegex = /(?:^|\\s)(\\*\\*(?!\\s+\\*\\*)((?:[^*]+))\\*\\*(?!\\s+\\*\\*))$/\n\n/**\n * Matches bold text via `**` while pasting.\n */\nexport const starPasteRegex = /(?:^|\\s)(\\*\\*(?!\\s+\\*\\*)((?:[^*]+))\\*\\*(?!\\s+\\*\\*))/g\n\n/**\n * Matches bold text via `__` as input.\n */\nexport const underscoreInputRegex = /(?:^|\\s)(__(?!\\s+__)((?:[^_]+))__(?!\\s+__))$/\n\n/**\n * Matches bold text via `__` while pasting.\n */\nexport const underscorePasteRegex = /(?:^|\\s)(__(?!\\s+__)((?:[^_]+))__(?!\\s+__))/g\n\n/**\n * This extension allows you to mark text as bold.\n * @see https://tiptap.dev/api/marks/bold\n */\nexport const Bold = Mark.create<BoldOptions>({\n  name: 'bold',\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'strong',\n      },\n      {\n        tag: 'b',\n        getAttrs: node => (node as HTMLElement).style.fontWeight !== 'normal' && null,\n      },\n      {\n        style: 'font-weight=400',\n        clearMark: mark => mark.type.name === this.name,\n      },\n      {\n        style: 'font-weight',\n        getAttrs: value => /^(bold(er)?|[5-9]\\d{2,})$/.test(value as string) && null,\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return (\n      <strong {...mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)}>\n        <slot />\n      </strong>\n    )\n  },\n\n  markdownTokenName: 'strong',\n\n  parseMarkdown: (token, helpers) => {\n    // Convert 'strong' token to bold mark\n    return helpers.applyMark('bold', helpers.parseInline(token.tokens || []))\n  },\n\n  renderMarkdown: (node, h) => {\n    return `**${h.renderChildren(node)}**`\n  },\n\n  addCommands() {\n    return {\n      setBold:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(this.name)\n        },\n      toggleBold:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(this.name)\n        },\n      unsetBold:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(this.name)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-b': () => this.editor.commands.toggleBold(),\n      'Mod-B': () => this.editor.commands.toggleBold(),\n    }\n  },\n\n  addInputRules() {\n    return [\n      markInputRule({\n        find: starInputRegex,\n        type: this.type,\n      }),\n      markInputRule({\n        find: underscoreInputRegex,\n        type: this.type,\n      }),\n    ]\n  },\n\n  addPasteRules() {\n    return [\n      markPasteRule({\n        find: starPasteRegex,\n        type: this.type,\n      }),\n      markPasteRule({\n        find: underscorePasteRegex,\n        type: this.type,\n      }),\n    ]\n  },\n})\n","import { Bold } from './bold.jsx'\n\nexport * from './bold.jsx'\n\nexport default Bold\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AACA,SAAS,MAAM,eAAe,eAAe,uBAAuB;AAsF5D;;;AArDD,IAAM,iBAAiB;AAKvB,IAAM,iBAAiB;AAKvB,IAAM,uBAAuB;AAK7B,IAAM,uBAAuB;AAM7B,IAAM,OAAO,sKAAA,CAAK,MAAA,CAAoB;IAC3C,MAAM;IAEN,aAAa;QACX,OAAO;YACL,gBAAgB,CAAC;QACnB;IACF;IAEA,YAAY;QACV,OAAO;YACL;gBACE,KAAK;YACP;YACA;gBACE,KAAK;gBACL,UAAU,CAAA,OAAS,KAAqB,KAAA,CAAM,UAAA,KAAe,YAAY;YAC3E;YACA;gBACE,OAAO;gBACP,WAAW,CAAA,OAAQ,KAAK,IAAA,CAAK,IAAA,KAAS,IAAA,CAAK,IAAA;YAC7C;YACA;gBACE,OAAO;gBACP,UAAU,CAAA,QAAS,4BAA4B,IAAA,CAAK,KAAe,KAAK;YAC1E;SACF;IACF;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OACE,aAAA,GAAA,IAAA,gMAAA,EAAC,UAAA;YAAQ,OAAG,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc,CAAA;YACrE,UAAA,aAAA,GAAA,IAAA,gMAAA,EAAC,QAAA,CAAA,CAAK;QAAA,CACR;IAEJ;IAEA,mBAAmB;IAEnB,eAAe,CAAC,OAAO,YAAY;QAEjC,OAAO,QAAQ,SAAA,CAAU,QAAQ,QAAQ,WAAA,CAAY,MAAM,MAAA,IAAU,CAAC,CAAC,CAAC;IAC1E;IAEA,gBAAgB,CAAC,MAAM,MAAM;QAC3B,OAAO,CAAA,EAAA,EAAK,EAAE,cAAA,CAAe,IAAI,CAAC,CAAA,EAAA,CAAA;IACpC;IAEA,cAAc;QACZ,OAAO;YACL,SACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,OAAA,CAAQ,IAAA,CAAK,IAAI;gBACnC;YACF,YACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,UAAA,CAAW,IAAA,CAAK,IAAI;gBACtC;YACF,WACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,SAAA,CAAU,IAAA,CAAK,IAAI;gBACrC;QACJ;IACF;IAEA,uBAAuB;QACrB,OAAO;YACL,SAAS,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,UAAA,CAAW;YAC/C,SAAS,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,UAAA,CAAW;QACjD;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;gBACD,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;gBACD,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;AACF,CAAC;;ACvJD,IAAO,gBAAQ"}},
    {"offset": {"line": 12968, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-code/src/code.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-code/src/index.ts"],"sourcesContent":["import { Mark, markInputRule, markPasteRule, mergeAttributes } from '@tiptap/core'\n\nexport interface CodeOptions {\n  /**\n   * The HTML attributes applied to the code element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    code: {\n      /**\n       * Set a code mark\n       */\n      setCode: () => ReturnType\n      /**\n       * Toggle inline code\n       */\n      toggleCode: () => ReturnType\n      /**\n       * Unset a code mark\n       */\n      unsetCode: () => ReturnType\n    }\n  }\n}\n\n/**\n * Regular expressions to match inline code blocks enclosed in backticks.\n *  It matches:\n *     - An opening backtick, followed by\n *     - Any text that doesn't include a backtick (captured for marking), followed by\n *     - A closing backtick as the final character.\n *  This ensures that any text between backticks is formatted as code,\n *  regardless of the surrounding characters (exception being another backtick).\n */\nexport const inputRegex = /(^|[^`])`([^`]+)`(?!`)$/\n\n/**\n * Matches inline code while pasting.\n */\nexport const pasteRegex = /(^|[^`])`([^`]+)`(?!`)/g\n\n/**\n * This extension allows you to mark text as inline code.\n * @see https://tiptap.dev/api/marks/code\n */\nexport const Code = Mark.create<CodeOptions>({\n  name: 'code',\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n    }\n  },\n\n  excludes: '_',\n\n  code: true,\n\n  exitable: true,\n\n  parseHTML() {\n    return [{ tag: 'code' }]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['code', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  markdownTokenName: 'codespan',\n\n  parseMarkdown: (token, helpers) => {\n    // Convert 'codespan' token to code mark\n    // For codespan tokens, we use the raw text content, not tokens\n    return helpers.applyMark('code', [{ type: 'text', text: token.text || '' }])\n  },\n\n  renderMarkdown: (node, h) => {\n    if (!node.content) {\n      return ''\n    }\n\n    return `\\`${h.renderChildren(node.content)}\\``\n  },\n\n  addCommands() {\n    return {\n      setCode:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(this.name)\n        },\n      toggleCode:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(this.name)\n        },\n      unsetCode:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(this.name)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-e': () => this.editor.commands.toggleCode(),\n    }\n  },\n\n  addInputRules() {\n    return [\n      markInputRule({\n        find: inputRegex,\n        type: this.type,\n      }),\n    ]\n  },\n\n  addPasteRules() {\n    return [\n      markPasteRule({\n        find: pasteRegex,\n        type: this.type,\n      }),\n    ]\n  },\n})\n","import { Code } from './code.js'\n\nexport * from './code.js'\n\nexport default Code\n"],"names":[],"mappings":";;;;;;;;;;;AAAA,SAAS,MAAM,eAAe,eAAe,uBAAuB;;AAuC7D,IAAM,aAAa;AAKnB,IAAM,aAAa;AAMnB,IAAM,OAAO,sKAAA,CAAK,MAAA,CAAoB;IAC3C,MAAM;IAEN,aAAa;QACX,OAAO;YACL,gBAAgB,CAAC;QACnB;IACF;IAEA,UAAU;IAEV,MAAM;IAEN,UAAU;IAEV,YAAY;QACV,OAAO;YAAC;gBAAE,KAAK;YAAO,CAAC;SAAA;IACzB;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OAAO;YAAC;gBAAQ,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc;YAAG,CAAC;SAAA;IACjF;IAEA,mBAAmB;IAEnB,eAAe,CAAC,OAAO,YAAY;QAGjC,OAAO,QAAQ,SAAA,CAAU,QAAQ;YAAC;gBAAE,MAAM;gBAAQ,MAAM,MAAM,IAAA,IAAQ;YAAG,CAAC;SAAC;IAC7E;IAEA,gBAAgB,CAAC,MAAM,MAAM;QAC3B,IAAI,CAAC,KAAK,OAAA,EAAS;YACjB,OAAO;QACT;QAEA,OAAO,CAAA,EAAA,EAAK,EAAE,cAAA,CAAe,KAAK,OAAO,CAAC,CAAA,EAAA,CAAA;IAC5C;IAEA,cAAc;QACZ,OAAO;YACL,SACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,OAAA,CAAQ,IAAA,CAAK,IAAI;gBACnC;YACF,YACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,UAAA,CAAW,IAAA,CAAK,IAAI;gBACtC;YACF,WACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,SAAA,CAAU,IAAA,CAAK,IAAI;gBACrC;QACJ;IACF;IAEA,uBAAuB;QACrB,OAAO;YACL,SAAS,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,UAAA,CAAW;QACjD;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;AACF,CAAC;;AChID,IAAO,gBAAQ"}},
    {"offset": {"line": 13065, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-code-block/src/code-block.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-code-block/src/index.ts"],"sourcesContent":["import { mergeAttributes, Node, textblockTypeInputRule } from '@tiptap/core'\nimport { Plugin, PluginKey, Selection, TextSelection } from '@tiptap/pm/state'\n\nconst DEFAULT_TAB_SIZE = 4\n\nexport interface CodeBlockOptions {\n  /**\n   * Adds a prefix to language classes that are applied to code tags.\n   * @default 'language-'\n   */\n  languageClassPrefix: string | null | undefined\n  /**\n   * Define whether the node should be exited on triple enter.\n   * @default true\n   */\n  exitOnTripleEnter: boolean | null | undefined\n  /**\n   * Define whether the node should be exited on arrow down if there is no node after it.\n   * @default true\n   */\n  exitOnArrowDown: boolean | null | undefined\n  /**\n   * The default language.\n   * @default null\n   * @example 'js'\n   */\n  defaultLanguage: string | null | undefined\n  /**\n   * Enable tab key for indentation in code blocks.\n   * @default false\n   */\n  enableTabIndentation: boolean | null | undefined\n  /**\n   * The number of spaces to use for tab indentation.\n   * @default 4\n   */\n  tabSize: number | null | undefined\n  /**\n   * Custom HTML attributes that should be added to the rendered HTML tag.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    codeBlock: {\n      /**\n       * Set a code block\n       * @param attributes Code block attributes\n       * @example editor.commands.setCodeBlock({ language: 'javascript' })\n       */\n      setCodeBlock: (attributes?: { language: string }) => ReturnType\n      /**\n       * Toggle a code block\n       * @param attributes Code block attributes\n       * @example editor.commands.toggleCodeBlock({ language: 'javascript' })\n       */\n      toggleCodeBlock: (attributes?: { language: string }) => ReturnType\n    }\n  }\n}\n\n/**\n * Matches a code block with backticks.\n */\nexport const backtickInputRegex = /^```([a-z]+)?[\\s\\n]$/\n\n/**\n * Matches a code block with tildes.\n */\nexport const tildeInputRegex = /^~~~([a-z]+)?[\\s\\n]$/\n\n/**\n * This extension allows you to create code blocks.\n * @see https://tiptap.dev/api/nodes/code-block\n */\nexport const CodeBlock = Node.create<CodeBlockOptions>({\n  name: 'codeBlock',\n\n  addOptions() {\n    return {\n      languageClassPrefix: 'language-',\n      exitOnTripleEnter: true,\n      exitOnArrowDown: true,\n      defaultLanguage: null,\n      enableTabIndentation: false,\n      tabSize: DEFAULT_TAB_SIZE,\n      HTMLAttributes: {},\n    }\n  },\n\n  content: 'text*',\n\n  marks: '',\n\n  group: 'block',\n\n  code: true,\n\n  defining: true,\n\n  addAttributes() {\n    return {\n      language: {\n        default: this.options.defaultLanguage,\n        parseHTML: element => {\n          const { languageClassPrefix } = this.options\n\n          if (!languageClassPrefix) {\n            return null\n          }\n\n          const classNames = [...(element.firstElementChild?.classList || [])]\n          const languages = classNames\n            .filter(className => className.startsWith(languageClassPrefix))\n            .map(className => className.replace(languageClassPrefix, ''))\n          const language = languages[0]\n\n          if (!language) {\n            return null\n          }\n\n          return language\n        },\n        rendered: false,\n      },\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'pre',\n        preserveWhitespace: 'full',\n      },\n    ]\n  },\n\n  renderHTML({ node, HTMLAttributes }) {\n    return [\n      'pre',\n      mergeAttributes(this.options.HTMLAttributes, HTMLAttributes),\n      [\n        'code',\n        {\n          class: node.attrs.language ? this.options.languageClassPrefix + node.attrs.language : null,\n        },\n        0,\n      ],\n    ]\n  },\n\n  markdownTokenName: 'code',\n\n  parseMarkdown: (token, helpers) => {\n    if (token.raw?.startsWith('```') === false && token.codeBlockStyle !== 'indented') {\n      return []\n    }\n\n    return helpers.createNode(\n      'codeBlock',\n      { language: token.lang || null },\n      token.text ? [helpers.createTextNode(token.text)] : [],\n    )\n  },\n\n  renderMarkdown: (node, h) => {\n    let output = ''\n    const language = node.attrs?.language || ''\n\n    if (!node.content) {\n      output = `\\`\\`\\`${language}\\n\\n\\`\\`\\``\n    } else {\n      const lines = [`\\`\\`\\`${language}`, h.renderChildren(node.content), '```']\n      output = lines.join('\\n')\n    }\n\n    return output\n  },\n\n  addCommands() {\n    return {\n      setCodeBlock:\n        attributes =>\n        ({ commands }) => {\n          return commands.setNode(this.name, attributes)\n        },\n      toggleCodeBlock:\n        attributes =>\n        ({ commands }) => {\n          return commands.toggleNode(this.name, 'paragraph', attributes)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Alt-c': () => this.editor.commands.toggleCodeBlock(),\n\n      // remove code block when at start of document or code block is empty\n      Backspace: () => {\n        const { empty, $anchor } = this.editor.state.selection\n        const isAtStart = $anchor.pos === 1\n\n        if (!empty || $anchor.parent.type.name !== this.name) {\n          return false\n        }\n\n        if (isAtStart || !$anchor.parent.textContent.length) {\n          return this.editor.commands.clearNodes()\n        }\n\n        return false\n      },\n\n      // handle tab indentation\n      Tab: ({ editor }) => {\n        if (!this.options.enableTabIndentation) {\n          return false\n        }\n\n        const tabSize = this.options.tabSize ?? DEFAULT_TAB_SIZE\n        const { state } = editor\n        const { selection } = state\n        const { $from, empty } = selection\n\n        if ($from.parent.type !== this.type) {\n          return false\n        }\n\n        const indent = ' '.repeat(tabSize)\n\n        if (empty) {\n          return editor.commands.insertContent(indent)\n        }\n\n        return editor.commands.command(({ tr }) => {\n          const { from, to } = selection\n          const text = state.doc.textBetween(from, to, '\\n', '\\n')\n          const lines = text.split('\\n')\n          const indentedText = lines.map(line => indent + line).join('\\n')\n\n          tr.replaceWith(from, to, state.schema.text(indentedText))\n          return true\n        })\n      },\n\n      // handle shift+tab reverse indentation\n      'Shift-Tab': ({ editor }) => {\n        if (!this.options.enableTabIndentation) {\n          return false\n        }\n\n        const tabSize = this.options.tabSize ?? DEFAULT_TAB_SIZE\n        const { state } = editor\n        const { selection } = state\n        const { $from, empty } = selection\n\n        if ($from.parent.type !== this.type) {\n          return false\n        }\n\n        if (empty) {\n          return editor.commands.command(({ tr }) => {\n            const { pos } = $from\n            const codeBlockStart = $from.start()\n            const codeBlockEnd = $from.end()\n\n            const allText = state.doc.textBetween(codeBlockStart, codeBlockEnd, '\\n', '\\n')\n            const lines = allText.split('\\n')\n\n            let currentLineIndex = 0\n            let charCount = 0\n            const relativeCursorPos = pos - codeBlockStart\n\n            for (let i = 0; i < lines.length; i += 1) {\n              if (charCount + lines[i].length >= relativeCursorPos) {\n                currentLineIndex = i\n                break\n              }\n              charCount += lines[i].length + 1\n            }\n\n            const currentLine = lines[currentLineIndex]\n            const leadingSpaces = currentLine.match(/^ */)?.[0] || ''\n            const spacesToRemove = Math.min(leadingSpaces.length, tabSize)\n\n            if (spacesToRemove === 0) {\n              return true\n            }\n\n            let lineStartPos = codeBlockStart\n            for (let i = 0; i < currentLineIndex; i += 1) {\n              lineStartPos += lines[i].length + 1\n            }\n\n            tr.delete(lineStartPos, lineStartPos + spacesToRemove)\n\n            const cursorPosInLine = pos - lineStartPos\n            if (cursorPosInLine <= spacesToRemove) {\n              tr.setSelection(TextSelection.create(tr.doc, lineStartPos))\n            }\n\n            return true\n          })\n        }\n\n        return editor.commands.command(({ tr }) => {\n          const { from, to } = selection\n          const text = state.doc.textBetween(from, to, '\\n', '\\n')\n          const lines = text.split('\\n')\n          const reverseIndentText = lines\n            .map(line => {\n              const leadingSpaces = line.match(/^ */)?.[0] || ''\n              const spacesToRemove = Math.min(leadingSpaces.length, tabSize)\n              return line.slice(spacesToRemove)\n            })\n            .join('\\n')\n\n          tr.replaceWith(from, to, state.schema.text(reverseIndentText))\n          return true\n        })\n      },\n\n      // exit node on triple enter\n      Enter: ({ editor }) => {\n        if (!this.options.exitOnTripleEnter) {\n          return false\n        }\n\n        const { state } = editor\n        const { selection } = state\n        const { $from, empty } = selection\n\n        if (!empty || $from.parent.type !== this.type) {\n          return false\n        }\n\n        const isAtEnd = $from.parentOffset === $from.parent.nodeSize - 2\n        const endsWithDoubleNewline = $from.parent.textContent.endsWith('\\n\\n')\n\n        if (!isAtEnd || !endsWithDoubleNewline) {\n          return false\n        }\n\n        return editor\n          .chain()\n          .command(({ tr }) => {\n            tr.delete($from.pos - 2, $from.pos)\n\n            return true\n          })\n          .exitCode()\n          .run()\n      },\n\n      // exit node on arrow down\n      ArrowDown: ({ editor }) => {\n        if (!this.options.exitOnArrowDown) {\n          return false\n        }\n\n        const { state } = editor\n        const { selection, doc } = state\n        const { $from, empty } = selection\n\n        if (!empty || $from.parent.type !== this.type) {\n          return false\n        }\n\n        const isAtEnd = $from.parentOffset === $from.parent.nodeSize - 2\n\n        if (!isAtEnd) {\n          return false\n        }\n\n        const after = $from.after()\n\n        if (after === undefined) {\n          return false\n        }\n\n        const nodeAfter = doc.nodeAt(after)\n\n        if (nodeAfter) {\n          return editor.commands.command(({ tr }) => {\n            tr.setSelection(Selection.near(doc.resolve(after)))\n            return true\n          })\n        }\n\n        return editor.commands.exitCode()\n      },\n    }\n  },\n\n  addInputRules() {\n    return [\n      textblockTypeInputRule({\n        find: backtickInputRegex,\n        type: this.type,\n        getAttributes: match => ({\n          language: match[1],\n        }),\n      }),\n      textblockTypeInputRule({\n        find: tildeInputRegex,\n        type: this.type,\n        getAttributes: match => ({\n          language: match[1],\n        }),\n      }),\n    ]\n  },\n\n  addProseMirrorPlugins() {\n    return [\n      // this plugin creates a code block for pasted content from VS Code\n      // we can also detect the copied code language\n      new Plugin({\n        key: new PluginKey('codeBlockVSCodeHandler'),\n        props: {\n          handlePaste: (view, event) => {\n            if (!event.clipboardData) {\n              return false\n            }\n\n            // dont create a new code block within code blocks\n            if (this.editor.isActive(this.type.name)) {\n              return false\n            }\n\n            const text = event.clipboardData.getData('text/plain')\n            const vscode = event.clipboardData.getData('vscode-editor-data')\n            const vscodeData = vscode ? JSON.parse(vscode) : undefined\n            const language = vscodeData?.mode\n\n            if (!text || !language) {\n              return false\n            }\n\n            const { tr, schema } = view.state\n\n            // prepare a text node\n            // strip carriage return chars from text pasted as code\n            // see: https://github.com/ProseMirror/prosemirror-view/commit/a50a6bcceb4ce52ac8fcc6162488d8875613aacd\n            const textNode = schema.text(text.replace(/\\r\\n?/g, '\\n'))\n\n            // create a code block with the text node\n            // replace selection with the code block\n            tr.replaceSelectionWith(this.type.create({ language }, textNode))\n\n            if (tr.selection.$from.parent.type !== this.type) {\n              // put cursor inside the newly created code block\n              tr.setSelection(TextSelection.near(tr.doc.resolve(Math.max(0, tr.selection.from - 2))))\n            }\n\n            // store meta information\n            // this is useful for other plugins that depends on the paste event\n            // like the paste rule plugin\n            tr.setMeta('paste', true)\n\n            view.dispatch(tr)\n\n            return true\n          },\n        },\n      }),\n    ]\n  },\n})\n","import { CodeBlock } from './code-block.js'\n\nexport * from './code-block.js'\n\nexport default CodeBlock\n"],"names":["_a"],"mappings":"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"}},
    {"offset": {"line": 13409, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-document/src/document.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-document/src/index.ts"],"sourcesContent":["import { Node } from '@tiptap/core'\n\n/**\n * The default document node which represents the top level node of the editor.\n * @see https://tiptap.dev/api/nodes/document\n */\nexport const Document = Node.create({\n  name: 'doc',\n  topNode: true,\n  content: 'block+',\n\n  renderMarkdown: (node, h) => {\n    if (!node.content) {\n      return ''\n    }\n\n    return h.renderChildren(node.content, '\\n\\n')\n  },\n})\n","import { Document } from './document.js'\n\nexport * from './document.js'\n\nexport default Document\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,YAAY;;AAMd,IAAM,WAAW,sKAAA,CAAK,MAAA,CAAO;IAClC,MAAM;IACN,SAAS;IACT,SAAS;IAET,gBAAgB,CAAC,MAAM,MAAM;QAC3B,IAAI,CAAC,KAAK,OAAA,EAAS;YACjB,OAAO;QACT;QAEA,OAAO,EAAE,cAAA,CAAe,KAAK,OAAA,EAAS,MAAM;IAC9C;AACF,CAAC;;ACdD,IAAO,gBAAQ"}},
    {"offset": {"line": 13437, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-hard-break/src/hard-break.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-hard-break/src/index.ts"],"sourcesContent":["import { mergeAttributes, Node } from '@tiptap/core'\n\nexport interface HardBreakOptions {\n  /**\n   * Controls if marks should be kept after being split by a hard break.\n   * @default true\n   * @example false\n   */\n  keepMarks: boolean\n\n  /**\n   * HTML attributes to add to the hard break element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    hardBreak: {\n      /**\n       * Add a hard break\n       * @example editor.commands.setHardBreak()\n       */\n      setHardBreak: () => ReturnType\n    }\n  }\n}\n\n/**\n * This extension allows you to insert hard breaks.\n * @see https://www.tiptap.dev/api/nodes/hard-break\n */\nexport const HardBreak = Node.create<HardBreakOptions>({\n  name: 'hardBreak',\n\n  markdownTokenName: 'br',\n\n  addOptions() {\n    return {\n      keepMarks: true,\n      HTMLAttributes: {},\n    }\n  },\n\n  inline: true,\n\n  group: 'inline',\n\n  selectable: false,\n\n  linebreakReplacement: true,\n\n  parseHTML() {\n    return [{ tag: 'br' }]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['br', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)]\n  },\n\n  renderText() {\n    return '\\n'\n  },\n\n  renderMarkdown: () => `  \\n`,\n\n  parseMarkdown: () => {\n    return {\n      type: 'hardBreak',\n    }\n  },\n\n  addCommands() {\n    return {\n      setHardBreak:\n        () =>\n        ({ commands, chain, state, editor }) => {\n          return commands.first([\n            () => commands.exitCode(),\n            () =>\n              commands.command(() => {\n                const { selection, storedMarks } = state\n\n                if (selection.$from.parent.type.spec.isolating) {\n                  return false\n                }\n\n                const { keepMarks } = this.options\n                const { splittableMarks } = editor.extensionManager\n                const marks = storedMarks || (selection.$to.parentOffset && selection.$from.marks())\n\n                return chain()\n                  .insertContent({ type: this.name })\n                  .command(({ tr, dispatch }) => {\n                    if (dispatch && marks && keepMarks) {\n                      const filteredMarks = marks.filter(mark => splittableMarks.includes(mark.type.name))\n\n                      tr.ensureMarks(filteredMarks)\n                    }\n\n                    return true\n                  })\n                  .run()\n              }),\n          ])\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Enter': () => this.editor.commands.setHardBreak(),\n      'Shift-Enter': () => this.editor.commands.setHardBreak(),\n    }\n  },\n})\n","import { HardBreak } from './hard-break.js'\n\nexport * from './hard-break.js'\n\nexport default HardBreak\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,iBAAiB,YAAY;;AAkC/B,IAAM,YAAY,sKAAA,CAAK,MAAA,CAAyB;IACrD,MAAM;IAEN,mBAAmB;IAEnB,aAAa;QACX,OAAO;YACL,WAAW;YACX,gBAAgB,CAAC;QACnB;IACF;IAEA,QAAQ;IAER,OAAO;IAEP,YAAY;IAEZ,sBAAsB;IAEtB,YAAY;QACV,OAAO;YAAC;gBAAE,KAAK;YAAK,CAAC;SAAA;IACvB;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OAAO;YAAC;gBAAM,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc,CAAC;SAAA;IAC5E;IAEA,aAAa;QACX,OAAO;IACT;IAEA,gBAAgB,IAAM,CAAA;AAAA,CAAA;IAEtB,eAAe,MAAM;QACnB,OAAO;YACL,MAAM;QACR;IACF;IAEA,cAAc;QACZ,OAAO;YACL,cACE,IACA,CAAC,EAAE,QAAA,EAAU,KAAA,EAAO,KAAA,EAAO,MAAA,CAAO,CAAA,KAAM;oBACtC,OAAO,SAAS,KAAA,CAAM;wBACpB,IAAM,SAAS,QAAA,CAAS;wBACxB,IACE,SAAS,OAAA,CAAQ,MAAM;gCACrB,MAAM,EAAE,SAAA,EAAW,WAAA,CAAY,CAAA,GAAI;gCAEnC,IAAI,UAAU,KAAA,CAAM,MAAA,CAAO,IAAA,CAAK,IAAA,CAAK,SAAA,EAAW;oCAC9C,OAAO;gCACT;gCAEA,MAAM,EAAE,SAAA,CAAU,CAAA,GAAI,IAAA,CAAK,OAAA;gCAC3B,MAAM,EAAE,eAAA,CAAgB,CAAA,GAAI,OAAO,gBAAA;gCACnC,MAAM,QAAQ,eAAgB,UAAU,GAAA,CAAI,YAAA,IAAgB,UAAU,KAAA,CAAM,KAAA,CAAM;gCAElF,OAAO,MAAM,EACV,aAAA,CAAc;oCAAE,MAAM,IAAA,CAAK,IAAA;gCAAK,CAAC,EACjC,OAAA,CAAQ,CAAC,EAAE,EAAA,EAAI,QAAA,CAAS,CAAA,KAAM;oCAC7B,IAAI,YAAY,SAAS,WAAW;wCAClC,MAAM,gBAAgB,MAAM,MAAA,CAAO,CAAA,OAAQ,gBAAgB,QAAA,CAAS,KAAK,IAAA,CAAK,IAAI,CAAC;wCAEnF,GAAG,WAAA,CAAY,aAAa;oCAC9B;oCAEA,OAAO;gCACT,CAAC,EACA,GAAA,CAAI;4BACT,CAAC;qBACJ;gBACH;QACJ;IACF;IAEA,uBAAuB;QACrB,OAAO;YACL,aAAa,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,YAAA,CAAa;YACrD,eAAe,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,YAAA,CAAa;QACzD;IACF;AACF,CAAC;;ACjHD,IAAO,gBAAQ"}},
    {"offset": {"line": 13524, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-heading/src/heading.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-heading/src/index.ts"],"sourcesContent":["import { mergeAttributes, Node, textblockTypeInputRule } from '@tiptap/core'\n\n/**\n * The heading level options.\n */\nexport type Level = 1 | 2 | 3 | 4 | 5 | 6\n\nexport interface HeadingOptions {\n  /**\n   * The available heading levels.\n   * @default [1, 2, 3, 4, 5, 6]\n   * @example [1, 2, 3]\n   */\n  levels: Level[]\n\n  /**\n   * The HTML attributes for a heading node.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    heading: {\n      /**\n       * Set a heading node\n       * @param attributes The heading attributes\n       * @example editor.commands.setHeading({ level: 1 })\n       */\n      setHeading: (attributes: { level: Level }) => ReturnType\n      /**\n       * Toggle a heading node\n       * @param attributes The heading attributes\n       * @example editor.commands.toggleHeading({ level: 1 })\n       */\n      toggleHeading: (attributes: { level: Level }) => ReturnType\n    }\n  }\n}\n\n/**\n * This extension allows you to create headings.\n * @see https://www.tiptap.dev/api/nodes/heading\n */\nexport const Heading = Node.create<HeadingOptions>({\n  name: 'heading',\n\n  addOptions() {\n    return {\n      levels: [1, 2, 3, 4, 5, 6],\n      HTMLAttributes: {},\n    }\n  },\n\n  content: 'inline*',\n\n  group: 'block',\n\n  defining: true,\n\n  addAttributes() {\n    return {\n      level: {\n        default: 1,\n        rendered: false,\n      },\n    }\n  },\n\n  parseHTML() {\n    return this.options.levels.map((level: Level) => ({\n      tag: `h${level}`,\n      attrs: { level },\n    }))\n  },\n\n  renderHTML({ node, HTMLAttributes }) {\n    const hasLevel = this.options.levels.includes(node.attrs.level)\n    const level = hasLevel ? node.attrs.level : this.options.levels[0]\n\n    return [`h${level}`, mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  parseMarkdown: (token, helpers) => {\n    // Convert 'heading' token to heading node\n    // marked provides 'depth' property (1-6) for heading level\n    return helpers.createNode('heading', { level: token.depth || 1 }, helpers.parseInline(token.tokens || []))\n  },\n\n  renderMarkdown: (node, h) => {\n    const level = node.attrs?.level ? parseInt(node.attrs.level as string, 10) : 1\n    const headingChars = '#'.repeat(level)\n\n    if (!node.content) {\n      return ''\n    }\n\n    // Use current context for proper joining/spacing\n    return `${headingChars} ${h.renderChildren(node.content)}`\n  },\n\n  addCommands() {\n    return {\n      setHeading:\n        attributes =>\n        ({ commands }) => {\n          if (!this.options.levels.includes(attributes.level)) {\n            return false\n          }\n\n          return commands.setNode(this.name, attributes)\n        },\n      toggleHeading:\n        attributes =>\n        ({ commands }) => {\n          if (!this.options.levels.includes(attributes.level)) {\n            return false\n          }\n\n          return commands.toggleNode(this.name, 'paragraph', attributes)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return this.options.levels.reduce(\n      (items, level) => ({\n        ...items,\n        ...{\n          [`Mod-Alt-${level}`]: () => this.editor.commands.toggleHeading({ level }),\n        },\n      }),\n      {},\n    )\n  },\n\n  addInputRules() {\n    return this.options.levels.map(level => {\n      return textblockTypeInputRule({\n        find: new RegExp(`^(#{${Math.min(...this.options.levels)},${level}})\\\\s$`),\n        type: this.type,\n        getAttributes: {\n          level,\n        },\n      })\n    })\n  },\n})\n","import { Heading } from './heading.js'\n\nexport * from './heading.js'\n\nexport default Heading\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 13636, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-horizontal-rule/src/horizontal-rule.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-horizontal-rule/src/index.ts"],"sourcesContent":["import { canInsertNode, isNodeSelection, mergeAttributes, Node, nodeInputRule } from '@tiptap/core'\nimport { NodeSelection, TextSelection } from '@tiptap/pm/state'\n\nexport interface HorizontalRuleOptions {\n  /**\n   * The HTML attributes for a horizontal rule node.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n  /**\n   * The default type to insert after the horizontal rule.\n   * @default \"paragraph\"\n   * @example \"heading\"\n   */\n  nextNodeType: string\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    horizontalRule: {\n      /**\n       * Add a horizontal rule\n       * @example editor.commands.setHorizontalRule()\n       */\n      setHorizontalRule: () => ReturnType\n    }\n  }\n}\n\n/**\n * This extension allows you to insert horizontal rules.\n * @see https://www.tiptap.dev/api/nodes/horizontal-rule\n */\nexport const HorizontalRule = Node.create<HorizontalRuleOptions>({\n  name: 'horizontalRule',\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n      nextNodeType: 'paragraph',\n    }\n  },\n\n  group: 'block',\n\n  parseHTML() {\n    return [{ tag: 'hr' }]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['hr', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)]\n  },\n\n  markdownTokenName: 'hr',\n\n  parseMarkdown: (token, helpers) => {\n    return helpers.createNode('horizontalRule')\n  },\n\n  renderMarkdown: () => {\n    return '---'\n  },\n\n  addCommands() {\n    return {\n      setHorizontalRule:\n        () =>\n        ({ chain, state }) => {\n          // Check if we can insert the node at the current selection\n          if (!canInsertNode(state, state.schema.nodes[this.name])) {\n            return false\n          }\n\n          const { selection } = state\n          const { $to: $originTo } = selection\n\n          const currentChain = chain()\n\n          if (isNodeSelection(selection)) {\n            currentChain.insertContentAt($originTo.pos, {\n              type: this.name,\n            })\n          } else {\n            currentChain.insertContent({ type: this.name })\n          }\n\n          return (\n            currentChain\n              // set cursor after horizontal rule\n              .command(({ state: chainState, tr, dispatch }) => {\n                if (dispatch) {\n                  const { $to } = tr.selection\n                  const posAfter = $to.end()\n\n                  if ($to.nodeAfter) {\n                    if ($to.nodeAfter.isTextblock) {\n                      tr.setSelection(TextSelection.create(tr.doc, $to.pos + 1))\n                    } else if ($to.nodeAfter.isBlock) {\n                      tr.setSelection(NodeSelection.create(tr.doc, $to.pos))\n                    } else {\n                      tr.setSelection(TextSelection.create(tr.doc, $to.pos))\n                    }\n                  } else {\n                    // add node after horizontal rule if its the end of the document\n                    const nodeType =\n                      chainState.schema.nodes[this.options.nextNodeType] || $to.parent.type.contentMatch.defaultType\n                    const node = nodeType?.create()\n\n                    if (node) {\n                      tr.insert(posAfter, node)\n                      tr.setSelection(TextSelection.create(tr.doc, posAfter + 1))\n                    }\n                  }\n\n                  tr.scrollIntoView()\n                }\n\n                return true\n              })\n              .run()\n          )\n        },\n    }\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: /^(?:---|-|___\\s|\\*\\*\\*\\s)$/,\n        type: this.type,\n      }),\n    ]\n  },\n})\n","import { HorizontalRule } from './horizontal-rule.js'\n\nexport * from './horizontal-rule.js'\n\nexport default HorizontalRule\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,eAAe,iBAAiB,iBAAiB,MAAM,qBAAqB;;;;;;;;AAkC9E,IAAM,iBAAiB,sKAAA,CAAK,MAAA,CAA8B;IAC/D,MAAM;IAEN,aAAa;QACX,OAAO;YACL,gBAAgB,CAAC;YACjB,cAAc;QAChB;IACF;IAEA,OAAO;IAEP,YAAY;QACV,OAAO;YAAC;gBAAE,KAAK;YAAK,CAAC;SAAA;IACvB;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OAAO;YAAC;gBAAM,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc,CAAC;SAAA;IAC5E;IAEA,mBAAmB;IAEnB,eAAe,CAAC,OAAO,YAAY;QACjC,OAAO,QAAQ,UAAA,CAAW,gBAAgB;IAC5C;IAEA,gBAAgB,MAAM;QACpB,OAAO;IACT;IAEA,cAAc;QACZ,OAAO;YACL,mBACE,IACA,CAAC,EAAE,KAAA,EAAO,KAAA,CAAM,CAAA,KAAM;oBAEpB,IAAI,KAAC,+KAAA,EAAc,OAAO,MAAM,MAAA,CAAO,KAAA,CAAM,IAAA,CAAK,IAAI,CAAC,GAAG;wBACxD,OAAO;oBACT;oBAEA,MAAM,EAAE,SAAA,CAAU,CAAA,GAAI;oBACtB,MAAM,EAAE,KAAK,SAAA,CAAU,CAAA,GAAI;oBAE3B,MAAM,eAAe,MAAM;oBAE3B,QAAI,iLAAA,EAAgB,SAAS,GAAG;wBAC9B,aAAa,eAAA,CAAgB,UAAU,GAAA,EAAK;4BAC1C,MAAM,IAAA,CAAK,IAAA;wBACb,CAAC;oBACH,OAAO;wBACL,aAAa,aAAA,CAAc;4BAAE,MAAM,IAAA,CAAK,IAAA;wBAAK,CAAC;oBAChD;oBAEA,OACE,aAEG,OAAA,CAAQ,CAAC,EAAE,OAAO,UAAA,EAAY,EAAA,EAAI,QAAA,CAAS,CAAA,KAAM;wBAChD,IAAI,UAAU;4BACZ,MAAM,EAAE,GAAA,CAAI,CAAA,GAAI,GAAG,SAAA;4BACnB,MAAM,WAAW,IAAI,GAAA,CAAI;4BAEzB,IAAI,IAAI,SAAA,EAAW;gCACjB,IAAI,IAAI,SAAA,CAAU,WAAA,EAAa;oCAC7B,GAAG,YAAA,CAAa,cAAc,MAAA,CAAO,GAAG,GAAA,EAAK,IAAI,GAAA,GAAM,CAAC,CAAC;gCAC3D,OAAA,IAAW,IAAI,SAAA,CAAU,OAAA,EAAS;oCAChC,GAAG,YAAA,CAAa,cAAc,MAAA,CAAO,GAAG,GAAA,EAAK,IAAI,GAAG,CAAC;gCACvD,OAAO;oCACL,GAAG,YAAA,CAAa,cAAc,MAAA,CAAO,GAAG,GAAA,EAAK,IAAI,GAAG,CAAC;gCACvD;4BACF,OAAO;gCAEL,MAAM,WACJ,WAAW,MAAA,CAAO,KAAA,CAAM,IAAA,CAAK,OAAA,CAAQ,YAAY,CAAA,IAAK,IAAI,MAAA,CAAO,IAAA,CAAK,YAAA,CAAa,WAAA;gCACrF,MAAM,OAAO,YAAA,OAAA,KAAA,IAAA,SAAU,MAAA;gCAEvB,IAAI,MAAM;oCACR,GAAG,MAAA,CAAO,UAAU,IAAI;oCACxB,GAAG,YAAA,CAAa,cAAc,MAAA,CAAO,GAAG,GAAA,EAAK,WAAW,CAAC,CAAC;gCAC5D;4BACF;4BAEA,GAAG,cAAA,CAAe;wBACpB;wBAEA,OAAO;oBACT,CAAC,EACA,GAAA,CAAI;gBAEX;QACJ;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;AACF,CAAC;;AClID,IAAO,gBAAQ"}},
    {"offset": {"line": 13742, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-italic/src/italic.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-italic/src/index.ts"],"sourcesContent":["import { Mark, markInputRule, markPasteRule, mergeAttributes } from '@tiptap/core'\n\nexport interface ItalicOptions {\n  /**\n   * HTML attributes to add to the italic element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    italic: {\n      /**\n       * Set an italic mark\n       * @example editor.commands.setItalic()\n       */\n      setItalic: () => ReturnType\n      /**\n       * Toggle an italic mark\n       * @example editor.commands.toggleItalic()\n       */\n      toggleItalic: () => ReturnType\n      /**\n       * Unset an italic mark\n       * @example editor.commands.unsetItalic()\n       */\n      unsetItalic: () => ReturnType\n    }\n  }\n}\n\n/**\n * Matches an italic to a *italic* on input.\n */\nexport const starInputRegex = /(?:^|\\s)(\\*(?!\\s+\\*)((?:[^*]+))\\*(?!\\s+\\*))$/\n\n/**\n * Matches an italic to a *italic* on paste.\n */\nexport const starPasteRegex = /(?:^|\\s)(\\*(?!\\s+\\*)((?:[^*]+))\\*(?!\\s+\\*))/g\n\n/**\n * Matches an italic to a _italic_ on input.\n */\nexport const underscoreInputRegex = /(?:^|\\s)(_(?!\\s+_)((?:[^_]+))_(?!\\s+_))$/\n\n/**\n * Matches an italic to a _italic_ on paste.\n */\nexport const underscorePasteRegex = /(?:^|\\s)(_(?!\\s+_)((?:[^_]+))_(?!\\s+_))/g\n\n/**\n * This extension allows you to create italic text.\n * @see https://www.tiptap.dev/api/marks/italic\n */\nexport const Italic = Mark.create<ItalicOptions>({\n  name: 'italic',\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'em',\n      },\n      {\n        tag: 'i',\n        getAttrs: node => (node as HTMLElement).style.fontStyle !== 'normal' && null,\n      },\n      {\n        style: 'font-style=normal',\n        clearMark: mark => mark.type.name === this.name,\n      },\n      {\n        style: 'font-style=italic',\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['em', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  addCommands() {\n    return {\n      setItalic:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(this.name)\n        },\n      toggleItalic:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(this.name)\n        },\n      unsetItalic:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(this.name)\n        },\n    }\n  },\n\n  markdownTokenName: 'em',\n\n  parseMarkdown: (token, helpers) => {\n    // Convert 'em' token to italic mark\n    return helpers.applyMark('italic', helpers.parseInline(token.tokens || []))\n  },\n\n  renderMarkdown: (node, h) => {\n    return `*${h.renderChildren(node)}*`\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-i': () => this.editor.commands.toggleItalic(),\n      'Mod-I': () => this.editor.commands.toggleItalic(),\n    }\n  },\n\n  addInputRules() {\n    return [\n      markInputRule({\n        find: starInputRegex,\n        type: this.type,\n      }),\n      markInputRule({\n        find: underscoreInputRegex,\n        type: this.type,\n      }),\n    ]\n  },\n\n  addPasteRules() {\n    return [\n      markPasteRule({\n        find: starPasteRegex,\n        type: this.type,\n      }),\n      markPasteRule({\n        find: underscorePasteRegex,\n        type: this.type,\n      }),\n    ]\n  },\n})\n","import { Italic } from './italic.js'\n\nexport * from './italic.js'\n\nexport default Italic\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,SAAS,MAAM,eAAe,eAAe,uBAAuB;;AAoC7D,IAAM,iBAAiB;AAKvB,IAAM,iBAAiB;AAKvB,IAAM,uBAAuB;AAK7B,IAAM,uBAAuB;AAM7B,IAAM,SAAS,sKAAA,CAAK,MAAA,CAAsB;IAC/C,MAAM;IAEN,aAAa;QACX,OAAO;YACL,gBAAgB,CAAC;QACnB;IACF;IAEA,YAAY;QACV,OAAO;YACL;gBACE,KAAK;YACP;YACA;gBACE,KAAK;gBACL,UAAU,CAAA,OAAS,KAAqB,KAAA,CAAM,SAAA,KAAc,YAAY;YAC1E;YACA;gBACE,OAAO;gBACP,WAAW,CAAA,OAAQ,KAAK,IAAA,CAAK,IAAA,KAAS,IAAA,CAAK,IAAA;YAC7C;YACA;gBACE,OAAO;YACT;SACF;IACF;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OAAO;YAAC;gBAAM,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc;YAAG,CAAC;SAAA;IAC/E;IAEA,cAAc;QACZ,OAAO;YACL,WACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,OAAA,CAAQ,IAAA,CAAK,IAAI;gBACnC;YACF,cACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,UAAA,CAAW,IAAA,CAAK,IAAI;gBACtC;YACF,aACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,SAAA,CAAU,IAAA,CAAK,IAAI;gBACrC;QACJ;IACF;IAEA,mBAAmB;IAEnB,eAAe,CAAC,OAAO,YAAY;QAEjC,OAAO,QAAQ,SAAA,CAAU,UAAU,QAAQ,WAAA,CAAY,MAAM,MAAA,IAAU,CAAC,CAAC,CAAC;IAC5E;IAEA,gBAAgB,CAAC,MAAM,MAAM;QAC3B,OAAO,CAAA,CAAA,EAAI,EAAE,cAAA,CAAe,IAAI,CAAC,CAAA,CAAA,CAAA;IACnC;IAEA,uBAAuB;QACrB,OAAO;YACL,SAAS,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,YAAA,CAAa;YACjD,SAAS,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,YAAA,CAAa;QACnD;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;gBACD,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;gBACD,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;AACF,CAAC;;ACpJD,IAAO,gBAAQ"}},
    {"offset": {"line": 13854, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/linkifyjs/dist/linkify.mjs"],"sourcesContent":["// THIS FILE IS AUTOMATICALLY GENERATED DO NOT EDIT DIRECTLY\n// See update-tlds.js for encoding/decoding format\n// https://data.iana.org/TLD/tlds-alpha-by-domain.txt\nconst encodedTlds = 'aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2';\n// Internationalized domain names containing non-ASCII\nconst encodedUtlds = '121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222';\n\n/**\n * Finite State Machine generation utilities\n */\n\n/**\n * @template T\n * @typedef {{ [group: string]: T[] }} Collections\n */\n\n/**\n * @typedef {{ [group: string]: true }} Flags\n */\n\n// Keys in scanner Collections instances\nconst numeric = 'numeric';\nconst ascii = 'ascii';\nconst alpha = 'alpha';\nconst asciinumeric = 'asciinumeric';\nconst alphanumeric = 'alphanumeric';\nconst domain = 'domain';\nconst emoji = 'emoji';\nconst scheme = 'scheme';\nconst slashscheme = 'slashscheme';\nconst whitespace = 'whitespace';\n\n/**\n * @template T\n * @param {string} name\n * @param {Collections<T>} groups to register in\n * @returns {T[]} Current list of tokens in the given collection\n */\nfunction registerGroup(name, groups) {\n  if (!(name in groups)) {\n    groups[name] = [];\n  }\n  return groups[name];\n}\n\n/**\n * @template T\n * @param {T} t token to add\n * @param {Collections<T>} groups\n * @param {Flags} flags\n */\nfunction addToGroups(t, flags, groups) {\n  if (flags[numeric]) {\n    flags[asciinumeric] = true;\n    flags[alphanumeric] = true;\n  }\n  if (flags[ascii]) {\n    flags[asciinumeric] = true;\n    flags[alpha] = true;\n  }\n  if (flags[asciinumeric]) {\n    flags[alphanumeric] = true;\n  }\n  if (flags[alpha]) {\n    flags[alphanumeric] = true;\n  }\n  if (flags[alphanumeric]) {\n    flags[domain] = true;\n  }\n  if (flags[emoji]) {\n    flags[domain] = true;\n  }\n  for (const k in flags) {\n    const group = registerGroup(k, groups);\n    if (group.indexOf(t) < 0) {\n      group.push(t);\n    }\n  }\n}\n\n/**\n * @template T\n * @param {T} t token to check\n * @param {Collections<T>} groups\n * @returns {Flags} group flags that contain this token\n */\nfunction flagsForToken(t, groups) {\n  const result = {};\n  for (const c in groups) {\n    if (groups[c].indexOf(t) >= 0) {\n      result[c] = true;\n    }\n  }\n  return result;\n}\n\n/**\n * @template T\n * @typedef {null | T } Transition\n */\n\n/**\n * Define a basic state machine state. j is the list of character transitions,\n * jr is the list of regex-match transitions, jd is the default state to\n * transition to t is the accepting token type, if any. If this is the terminal\n * state, then it does not emit a token.\n *\n * The template type T represents the type of the token this state accepts. This\n * should be a string (such as of the token exports in `text.js`) or a\n * MultiToken subclass (from `multi.js`)\n *\n * @template T\n * @param {T} [token] Token that this state emits\n */\nfunction State(token = null) {\n  // this.n = null; // DEBUG: State name\n  /** @type {{ [input: string]: State<T> }} j */\n  this.j = {}; // IMPLEMENTATION 1\n  // this.j = []; // IMPLEMENTATION 2\n  /** @type {[RegExp, State<T>][]} jr */\n  this.jr = [];\n  /** @type {?State<T>} jd */\n  this.jd = null;\n  /** @type {?T} t */\n  this.t = token;\n}\n\n/**\n * Scanner token groups\n * @type Collections<string>\n */\nState.groups = {};\nState.prototype = {\n  accepts() {\n    return !!this.t;\n  },\n  /**\n   * Follow an existing transition from the given input to the next state.\n   * Does not mutate.\n   * @param {string} input character or token type to transition on\n   * @returns {?State<T>} the next state, if any\n   */\n  go(input) {\n    const state = this;\n    const nextState = state.j[input];\n    if (nextState) {\n      return nextState;\n    }\n    for (let i = 0; i < state.jr.length; i++) {\n      const regex = state.jr[i][0];\n      const nextState = state.jr[i][1]; // note: might be empty to prevent default jump\n      if (nextState && regex.test(input)) {\n        return nextState;\n      }\n    }\n    // Nowhere left to jump! Return default, if any\n    return state.jd;\n  },\n  /**\n   * Whether the state has a transition for the given input. Set the second\n   * argument to true to only look for an exact match (and not a default or\n   * regular-expression-based transition)\n   * @param {string} input\n   * @param {boolean} exactOnly\n   */\n  has(input, exactOnly = false) {\n    return exactOnly ? input in this.j : !!this.go(input);\n  },\n  /**\n   * Short for \"transition all\"; create a transition from the array of items\n   * in the given list to the same final resulting state.\n   * @param {string | string[]} inputs Group of inputs to transition on\n   * @param {Transition<T> | State<T>} [next] Transition options\n   * @param {Flags} [flags] Collections flags to add token to\n   * @param {Collections<T>} [groups] Master list of token groups\n   */\n  ta(inputs, next, flags, groups) {\n    for (let i = 0; i < inputs.length; i++) {\n      this.tt(inputs[i], next, flags, groups);\n    }\n  },\n  /**\n   * Short for \"take regexp transition\"; defines a transition for this state\n   * when it encounters a token which matches the given regular expression\n   * @param {RegExp} regexp Regular expression transition (populate first)\n   * @param {T | State<T>} [next] Transition options\n   * @param {Flags} [flags] Collections flags to add token to\n   * @param {Collections<T>} [groups] Master list of token groups\n   * @returns {State<T>} taken after the given input\n   */\n  tr(regexp, next, flags, groups) {\n    groups = groups || State.groups;\n    let nextState;\n    if (next && next.j) {\n      nextState = next;\n    } else {\n      // Token with maybe token groups\n      nextState = new State(next);\n      if (flags && groups) {\n        addToGroups(next, flags, groups);\n      }\n    }\n    this.jr.push([regexp, nextState]);\n    return nextState;\n  },\n  /**\n   * Short for \"take transitions\", will take as many sequential transitions as\n   * the length of the given input and returns the\n   * resulting final state.\n   * @param {string | string[]} input\n   * @param {T | State<T>} [next] Transition options\n   * @param {Flags} [flags] Collections flags to add token to\n   * @param {Collections<T>} [groups] Master list of token groups\n   * @returns {State<T>} taken after the given input\n   */\n  ts(input, next, flags, groups) {\n    let state = this;\n    const len = input.length;\n    if (!len) {\n      return state;\n    }\n    for (let i = 0; i < len - 1; i++) {\n      state = state.tt(input[i]);\n    }\n    return state.tt(input[len - 1], next, flags, groups);\n  },\n  /**\n   * Short for \"take transition\", this is a method for building/working with\n   * state machines.\n   *\n   * If a state already exists for the given input, returns it.\n   *\n   * If a token is specified, that state will emit that token when reached by\n   * the linkify engine.\n   *\n   * If no state exists, it will be initialized with some default transitions\n   * that resemble existing default transitions.\n   *\n   * If a state is given for the second argument, that state will be\n   * transitioned to on the given input regardless of what that input\n   * previously did.\n   *\n   * Specify a token group flags to define groups that this token belongs to.\n   * The token will be added to corresponding entires in the given groups\n   * object.\n   *\n   * @param {string} input character, token type to transition on\n   * @param {T | State<T>} [next] Transition options\n   * @param {Flags} [flags] Collections flags to add token to\n   * @param {Collections<T>} [groups] Master list of groups\n   * @returns {State<T>} taken after the given input\n   */\n  tt(input, next, flags, groups) {\n    groups = groups || State.groups;\n    const state = this;\n\n    // Check if existing state given, just a basic transition\n    if (next && next.j) {\n      state.j[input] = next;\n      return next;\n    }\n    const t = next;\n\n    // Take the transition with the usual default mechanisms and use that as\n    // a template for creating the next state\n    let nextState,\n      templateState = state.go(input);\n    if (templateState) {\n      nextState = new State();\n      Object.assign(nextState.j, templateState.j);\n      nextState.jr.push.apply(nextState.jr, templateState.jr);\n      nextState.jd = templateState.jd;\n      nextState.t = templateState.t;\n    } else {\n      nextState = new State();\n    }\n    if (t) {\n      // Ensure newly token is in the same groups as the old token\n      if (groups) {\n        if (nextState.t && typeof nextState.t === 'string') {\n          const allFlags = Object.assign(flagsForToken(nextState.t, groups), flags);\n          addToGroups(t, allFlags, groups);\n        } else if (flags) {\n          addToGroups(t, flags, groups);\n        }\n      }\n      nextState.t = t; // overwrite anything that was previously there\n    }\n    state.j[input] = nextState;\n    return nextState;\n  }\n};\n\n// Helper functions to improve minification (not exported outside linkifyjs module)\n\n/**\n * @template T\n * @param {State<T>} state\n * @param {string | string[]} input\n * @param {Flags} [flags]\n * @param {Collections<T>} [groups]\n */\nconst ta = (state, input, next, flags, groups) => state.ta(input, next, flags, groups);\n\n/**\n * @template T\n * @param {State<T>} state\n * @param {RegExp} regexp\n * @param {T | State<T>} [next]\n * @param {Flags} [flags]\n * @param {Collections<T>} [groups]\n */\nconst tr = (state, regexp, next, flags, groups) => state.tr(regexp, next, flags, groups);\n\n/**\n * @template T\n * @param {State<T>} state\n * @param {string | string[]} input\n * @param {T | State<T>} [next]\n * @param {Flags} [flags]\n * @param {Collections<T>} [groups]\n */\nconst ts = (state, input, next, flags, groups) => state.ts(input, next, flags, groups);\n\n/**\n * @template T\n * @param {State<T>} state\n * @param {string} input\n * @param {T | State<T>} [next]\n * @param {Collections<T>} [groups]\n * @param {Flags} [flags]\n */\nconst tt = (state, input, next, flags, groups) => state.tt(input, next, flags, groups);\n\n/******************************************************************************\nText Tokens\nIdentifiers for token outputs from the regexp scanner\n******************************************************************************/\n\n// A valid web domain token\nconst WORD = 'WORD'; // only contains a-z\nconst UWORD = 'UWORD'; // contains letters other than a-z, used for IDN\nconst ASCIINUMERICAL = 'ASCIINUMERICAL'; // contains a-z, 0-9\nconst ALPHANUMERICAL = 'ALPHANUMERICAL'; // contains numbers and letters other than a-z, used for IDN\n\n// Special case of word\nconst LOCALHOST = 'LOCALHOST';\n\n// Valid top-level domain, special case of WORD (see tlds.js)\nconst TLD = 'TLD';\n\n// Valid IDN TLD, special case of UWORD (see tlds.js)\nconst UTLD = 'UTLD';\n\n// The scheme portion of a web URI protocol. Supported types include: `mailto`,\n// `file`, and user-defined custom protocols. Limited to schemes that contain\n// only letters\nconst SCHEME = 'SCHEME';\n\n// Similar to SCHEME, except makes distinction for schemes that must always be\n// followed by `://`, not just `:`. Supported types include `http`, `https`,\n// `ftp`, `ftps`\nconst SLASH_SCHEME = 'SLASH_SCHEME';\n\n// Any sequence of digits 0-9\nconst NUM = 'NUM';\n\n// Any number of consecutive whitespace characters that are not newline\nconst WS = 'WS';\n\n// New line (unix style)\nconst NL = 'NL'; // \\n\n\n// Opening/closing bracket classes\n// TODO: Rename OPEN -> LEFT and CLOSE -> RIGHT in v5 to fit with Unicode names\n// Also rename angle brackes to LESSTHAN and GREATER THAN\nconst OPENBRACE = 'OPENBRACE'; // {\nconst CLOSEBRACE = 'CLOSEBRACE'; // }\nconst OPENBRACKET = 'OPENBRACKET'; // [\nconst CLOSEBRACKET = 'CLOSEBRACKET'; // ]\nconst OPENPAREN = 'OPENPAREN'; // (\nconst CLOSEPAREN = 'CLOSEPAREN'; // )\nconst OPENANGLEBRACKET = 'OPENANGLEBRACKET'; // <\nconst CLOSEANGLEBRACKET = 'CLOSEANGLEBRACKET'; // >\nconst FULLWIDTHLEFTPAREN = 'FULLWIDTHLEFTPAREN'; // \nconst FULLWIDTHRIGHTPAREN = 'FULLWIDTHRIGHTPAREN'; // \nconst LEFTCORNERBRACKET = 'LEFTCORNERBRACKET'; // \nconst RIGHTCORNERBRACKET = 'RIGHTCORNERBRACKET'; // \nconst LEFTWHITECORNERBRACKET = 'LEFTWHITECORNERBRACKET'; // \nconst RIGHTWHITECORNERBRACKET = 'RIGHTWHITECORNERBRACKET'; // \nconst FULLWIDTHLESSTHAN = 'FULLWIDTHLESSTHAN'; // \nconst FULLWIDTHGREATERTHAN = 'FULLWIDTHGREATERTHAN'; // \n\n// Various symbols\nconst AMPERSAND = 'AMPERSAND'; // &\nconst APOSTROPHE = 'APOSTROPHE'; // '\nconst ASTERISK = 'ASTERISK'; // *\nconst AT = 'AT'; // @\nconst BACKSLASH = 'BACKSLASH'; // \\\nconst BACKTICK = 'BACKTICK'; // `\nconst CARET = 'CARET'; // ^\nconst COLON = 'COLON'; // :\nconst COMMA = 'COMMA'; // ,\nconst DOLLAR = 'DOLLAR'; // $\nconst DOT = 'DOT'; // .\nconst EQUALS = 'EQUALS'; // =\nconst EXCLAMATION = 'EXCLAMATION'; // !\nconst HYPHEN = 'HYPHEN'; // -\nconst PERCENT = 'PERCENT'; // %\nconst PIPE = 'PIPE'; // |\nconst PLUS = 'PLUS'; // +\nconst POUND = 'POUND'; // #\nconst QUERY = 'QUERY'; // ?\nconst QUOTE = 'QUOTE'; // \"\nconst FULLWIDTHMIDDLEDOT = 'FULLWIDTHMIDDLEDOT'; // \n\nconst SEMI = 'SEMI'; // ;\nconst SLASH = 'SLASH'; // /\nconst TILDE = 'TILDE'; // ~\nconst UNDERSCORE = 'UNDERSCORE'; // _\n\n// Emoji symbol\nconst EMOJI$1 = 'EMOJI';\n\n// Default token - anything that is not one of the above\nconst SYM = 'SYM';\n\nvar tk = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tALPHANUMERICAL: ALPHANUMERICAL,\n\tAMPERSAND: AMPERSAND,\n\tAPOSTROPHE: APOSTROPHE,\n\tASCIINUMERICAL: ASCIINUMERICAL,\n\tASTERISK: ASTERISK,\n\tAT: AT,\n\tBACKSLASH: BACKSLASH,\n\tBACKTICK: BACKTICK,\n\tCARET: CARET,\n\tCLOSEANGLEBRACKET: CLOSEANGLEBRACKET,\n\tCLOSEBRACE: CLOSEBRACE,\n\tCLOSEBRACKET: CLOSEBRACKET,\n\tCLOSEPAREN: CLOSEPAREN,\n\tCOLON: COLON,\n\tCOMMA: COMMA,\n\tDOLLAR: DOLLAR,\n\tDOT: DOT,\n\tEMOJI: EMOJI$1,\n\tEQUALS: EQUALS,\n\tEXCLAMATION: EXCLAMATION,\n\tFULLWIDTHGREATERTHAN: FULLWIDTHGREATERTHAN,\n\tFULLWIDTHLEFTPAREN: FULLWIDTHLEFTPAREN,\n\tFULLWIDTHLESSTHAN: FULLWIDTHLESSTHAN,\n\tFULLWIDTHMIDDLEDOT: FULLWIDTHMIDDLEDOT,\n\tFULLWIDTHRIGHTPAREN: FULLWIDTHRIGHTPAREN,\n\tHYPHEN: HYPHEN,\n\tLEFTCORNERBRACKET: LEFTCORNERBRACKET,\n\tLEFTWHITECORNERBRACKET: LEFTWHITECORNERBRACKET,\n\tLOCALHOST: LOCALHOST,\n\tNL: NL,\n\tNUM: NUM,\n\tOPENANGLEBRACKET: OPENANGLEBRACKET,\n\tOPENBRACE: OPENBRACE,\n\tOPENBRACKET: OPENBRACKET,\n\tOPENPAREN: OPENPAREN,\n\tPERCENT: PERCENT,\n\tPIPE: PIPE,\n\tPLUS: PLUS,\n\tPOUND: POUND,\n\tQUERY: QUERY,\n\tQUOTE: QUOTE,\n\tRIGHTCORNERBRACKET: RIGHTCORNERBRACKET,\n\tRIGHTWHITECORNERBRACKET: RIGHTWHITECORNERBRACKET,\n\tSCHEME: SCHEME,\n\tSEMI: SEMI,\n\tSLASH: SLASH,\n\tSLASH_SCHEME: SLASH_SCHEME,\n\tSYM: SYM,\n\tTILDE: TILDE,\n\tTLD: TLD,\n\tUNDERSCORE: UNDERSCORE,\n\tUTLD: UTLD,\n\tUWORD: UWORD,\n\tWORD: WORD,\n\tWS: WS\n});\n\n// Note that these two Unicode ones expand into a really big one with Babel\nconst ASCII_LETTER = /[a-z]/;\nconst LETTER = /\\p{L}/u; // Any Unicode character with letter data type\nconst EMOJI = /\\p{Emoji}/u; // Any Unicode emoji character\nconst EMOJI_VARIATION$1 = /\\ufe0f/;\nconst DIGIT = /\\d/;\nconst SPACE = /\\s/;\n\nvar regexp = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tASCII_LETTER: ASCII_LETTER,\n\tDIGIT: DIGIT,\n\tEMOJI: EMOJI,\n\tEMOJI_VARIATION: EMOJI_VARIATION$1,\n\tLETTER: LETTER,\n\tSPACE: SPACE\n});\n\n/**\n\tThe scanner provides an interface that takes a string of text as input, and\n\toutputs an array of tokens instances that can be used for easy URL parsing.\n*/\n\nconst CR = '\\r'; // carriage-return character\nconst LF = '\\n'; // line-feed character\nconst EMOJI_VARIATION = '\\ufe0f'; // Variation selector, follows heart and others\nconst EMOJI_JOINER = '\\u200d'; // zero-width joiner\nconst OBJECT_REPLACEMENT = '\\ufffc'; // whitespace placeholder that sometimes appears in rich text editors\n\nlet tlds = null,\n  utlds = null; // don't change so only have to be computed once\n\n/**\n * Scanner output token:\n * - `t` is the token name (e.g., 'NUM', 'EMOJI', 'TLD')\n * - `v` is the value of the token (e.g., '123', '', 'com')\n * - `s` is the start index of the token in the original string\n * - `e` is the end index of the token in the original string\n * @typedef {{t: string, v: string, s: number, e: number}} Token\n */\n\n/**\n * @template T\n * @typedef {{ [collection: string]: T[] }} Collections\n */\n\n/**\n * Initialize the scanner character-based state machine for the given start\n * state\n * @param {[string, boolean][]} customSchemes List of custom schemes, where each\n * item is a length-2 tuple with the first element set to the string scheme, and\n * the second element set to `true` if the `://` after the scheme is optional\n */\nfunction init$2(customSchemes = []) {\n  // Frequently used states (name argument removed during minification)\n  /** @type Collections<string> */\n  const groups = {}; // of tokens\n  State.groups = groups;\n  /** @type State<string> */\n  const Start = new State();\n  if (tlds == null) {\n    tlds = decodeTlds(encodedTlds);\n  }\n  if (utlds == null) {\n    utlds = decodeTlds(encodedUtlds);\n  }\n\n  // States for special URL symbols that accept immediately after start\n  tt(Start, \"'\", APOSTROPHE);\n  tt(Start, '{', OPENBRACE);\n  tt(Start, '}', CLOSEBRACE);\n  tt(Start, '[', OPENBRACKET);\n  tt(Start, ']', CLOSEBRACKET);\n  tt(Start, '(', OPENPAREN);\n  tt(Start, ')', CLOSEPAREN);\n  tt(Start, '<', OPENANGLEBRACKET);\n  tt(Start, '>', CLOSEANGLEBRACKET);\n  tt(Start, '', FULLWIDTHLEFTPAREN);\n  tt(Start, '', FULLWIDTHRIGHTPAREN);\n  tt(Start, '', LEFTCORNERBRACKET);\n  tt(Start, '', RIGHTCORNERBRACKET);\n  tt(Start, '', LEFTWHITECORNERBRACKET);\n  tt(Start, '', RIGHTWHITECORNERBRACKET);\n  tt(Start, '', FULLWIDTHLESSTHAN);\n  tt(Start, '', FULLWIDTHGREATERTHAN);\n  tt(Start, '&', AMPERSAND);\n  tt(Start, '*', ASTERISK);\n  tt(Start, '@', AT);\n  tt(Start, '`', BACKTICK);\n  tt(Start, '^', CARET);\n  tt(Start, ':', COLON);\n  tt(Start, ',', COMMA);\n  tt(Start, '$', DOLLAR);\n  tt(Start, '.', DOT);\n  tt(Start, '=', EQUALS);\n  tt(Start, '!', EXCLAMATION);\n  tt(Start, '-', HYPHEN);\n  tt(Start, '%', PERCENT);\n  tt(Start, '|', PIPE);\n  tt(Start, '+', PLUS);\n  tt(Start, '#', POUND);\n  tt(Start, '?', QUERY);\n  tt(Start, '\"', QUOTE);\n  tt(Start, '/', SLASH);\n  tt(Start, ';', SEMI);\n  tt(Start, '~', TILDE);\n  tt(Start, '_', UNDERSCORE);\n  tt(Start, '\\\\', BACKSLASH);\n  tt(Start, '', FULLWIDTHMIDDLEDOT);\n  const Num = tr(Start, DIGIT, NUM, {\n    [numeric]: true\n  });\n  tr(Num, DIGIT, Num);\n  const Asciinumeric = tr(Num, ASCII_LETTER, ASCIINUMERICAL, {\n    [asciinumeric]: true\n  });\n  const Alphanumeric = tr(Num, LETTER, ALPHANUMERICAL, {\n    [alphanumeric]: true\n  });\n\n  // State which emits a word token\n  const Word = tr(Start, ASCII_LETTER, WORD, {\n    [ascii]: true\n  });\n  tr(Word, DIGIT, Asciinumeric);\n  tr(Word, ASCII_LETTER, Word);\n  tr(Asciinumeric, DIGIT, Asciinumeric);\n  tr(Asciinumeric, ASCII_LETTER, Asciinumeric);\n\n  // Same as previous, but specific to non-fsm.ascii alphabet words\n  const UWord = tr(Start, LETTER, UWORD, {\n    [alpha]: true\n  });\n  tr(UWord, ASCII_LETTER); // Non-accepting\n  tr(UWord, DIGIT, Alphanumeric);\n  tr(UWord, LETTER, UWord);\n  tr(Alphanumeric, DIGIT, Alphanumeric);\n  tr(Alphanumeric, ASCII_LETTER); // Non-accepting\n  tr(Alphanumeric, LETTER, Alphanumeric); // Non-accepting\n\n  // Whitespace jumps\n  // Tokens of only non-newline whitespace are arbitrarily long\n  // If any whitespace except newline, more whitespace!\n  const Nl = tt(Start, LF, NL, {\n    [whitespace]: true\n  });\n  const Cr = tt(Start, CR, WS, {\n    [whitespace]: true\n  });\n  const Ws = tr(Start, SPACE, WS, {\n    [whitespace]: true\n  });\n  tt(Start, OBJECT_REPLACEMENT, Ws);\n  tt(Cr, LF, Nl); // \\r\\n\n  tt(Cr, OBJECT_REPLACEMENT, Ws);\n  tr(Cr, SPACE, Ws);\n  tt(Ws, CR); // non-accepting state to avoid mixing whitespaces\n  tt(Ws, LF); // non-accepting state to avoid mixing whitespaces\n  tr(Ws, SPACE, Ws);\n  tt(Ws, OBJECT_REPLACEMENT, Ws);\n\n  // Emoji tokens. They are not grouped by the scanner except in cases where a\n  // zero-width joiner is present\n  const Emoji = tr(Start, EMOJI, EMOJI$1, {\n    [emoji]: true\n  });\n  tt(Emoji, '#'); // no transition, emoji regex seems to match #\n  tr(Emoji, EMOJI, Emoji);\n  tt(Emoji, EMOJI_VARIATION, Emoji);\n  // tt(Start, EMOJI_VARIATION, Emoji); // This one is sketchy\n\n  const EmojiJoiner = tt(Emoji, EMOJI_JOINER);\n  tt(EmojiJoiner, '#');\n  tr(EmojiJoiner, EMOJI, Emoji);\n  // tt(EmojiJoiner, EMOJI_VARIATION, Emoji); // also sketchy\n\n  // Generates states for top-level domains\n  // Note that this is most accurate when tlds are in alphabetical order\n  const wordjr = [[ASCII_LETTER, Word], [DIGIT, Asciinumeric]];\n  const uwordjr = [[ASCII_LETTER, null], [LETTER, UWord], [DIGIT, Alphanumeric]];\n  for (let i = 0; i < tlds.length; i++) {\n    fastts(Start, tlds[i], TLD, WORD, wordjr);\n  }\n  for (let i = 0; i < utlds.length; i++) {\n    fastts(Start, utlds[i], UTLD, UWORD, uwordjr);\n  }\n  addToGroups(TLD, {\n    tld: true,\n    ascii: true\n  }, groups);\n  addToGroups(UTLD, {\n    utld: true,\n    alpha: true\n  }, groups);\n\n  // Collect the states generated by different protocols. NOTE: If any new TLDs\n  // get added that are also protocols, set the token to be the same as the\n  // protocol to ensure parsing works as expected.\n  fastts(Start, 'file', SCHEME, WORD, wordjr);\n  fastts(Start, 'mailto', SCHEME, WORD, wordjr);\n  fastts(Start, 'http', SLASH_SCHEME, WORD, wordjr);\n  fastts(Start, 'https', SLASH_SCHEME, WORD, wordjr);\n  fastts(Start, 'ftp', SLASH_SCHEME, WORD, wordjr);\n  fastts(Start, 'ftps', SLASH_SCHEME, WORD, wordjr);\n  addToGroups(SCHEME, {\n    scheme: true,\n    ascii: true\n  }, groups);\n  addToGroups(SLASH_SCHEME, {\n    slashscheme: true,\n    ascii: true\n  }, groups);\n\n  // Register custom schemes. Assumes each scheme is asciinumeric with hyphens\n  customSchemes = customSchemes.sort((a, b) => a[0] > b[0] ? 1 : -1);\n  for (let i = 0; i < customSchemes.length; i++) {\n    const sch = customSchemes[i][0];\n    const optionalSlashSlash = customSchemes[i][1];\n    const flags = optionalSlashSlash ? {\n      [scheme]: true\n    } : {\n      [slashscheme]: true\n    };\n    if (sch.indexOf('-') >= 0) {\n      flags[domain] = true;\n    } else if (!ASCII_LETTER.test(sch)) {\n      flags[numeric] = true; // numbers only\n    } else if (DIGIT.test(sch)) {\n      flags[asciinumeric] = true;\n    } else {\n      flags[ascii] = true;\n    }\n    ts(Start, sch, sch, flags);\n  }\n\n  // Localhost token\n  ts(Start, 'localhost', LOCALHOST, {\n    ascii: true\n  });\n\n  // Set default transition for start state (some symbol)\n  Start.jd = new State(SYM);\n  return {\n    start: Start,\n    tokens: Object.assign({\n      groups\n    }, tk)\n  };\n}\n\n/**\n\tGiven a string, returns an array of TOKEN instances representing the\n\tcomposition of that string.\n\n\t@method run\n\t@param {State<string>} start scanner starting state\n\t@param {string} str input string to scan\n\t@return {Token[]} list of tokens, each with a type and value\n*/\nfunction run$1(start, str) {\n  // State machine is not case sensitive, so input is tokenized in lowercased\n  // form (still returns regular case). Uses selective `toLowerCase` because\n  // lowercasing the entire string causes the length and character position to\n  // vary in some non-English strings with V8-based runtimes.\n  const iterable = stringToArray(str.replace(/[A-Z]/g, c => c.toLowerCase()));\n  const charCount = iterable.length; // <= len if there are emojis, etc\n  const tokens = []; // return value\n\n  // cursor through the string itself, accounting for characters that have\n  // width with length 2 such as emojis\n  let cursor = 0;\n\n  // Cursor through the array-representation of the string\n  let charCursor = 0;\n\n  // Tokenize the string\n  while (charCursor < charCount) {\n    let state = start;\n    let nextState = null;\n    let tokenLength = 0;\n    let latestAccepting = null;\n    let sinceAccepts = -1;\n    let charsSinceAccepts = -1;\n    while (charCursor < charCount && (nextState = state.go(iterable[charCursor]))) {\n      state = nextState;\n\n      // Keep track of the latest accepting state\n      if (state.accepts()) {\n        sinceAccepts = 0;\n        charsSinceAccepts = 0;\n        latestAccepting = state;\n      } else if (sinceAccepts >= 0) {\n        sinceAccepts += iterable[charCursor].length;\n        charsSinceAccepts++;\n      }\n      tokenLength += iterable[charCursor].length;\n      cursor += iterable[charCursor].length;\n      charCursor++;\n    }\n\n    // Roll back to the latest accepting state\n    cursor -= sinceAccepts;\n    charCursor -= charsSinceAccepts;\n    tokenLength -= sinceAccepts;\n\n    // No more jumps, just make a new token from the last accepting one\n    tokens.push({\n      t: latestAccepting.t,\n      // token type/name\n      v: str.slice(cursor - tokenLength, cursor),\n      // string value\n      s: cursor - tokenLength,\n      // start index\n      e: cursor // end index (excluding)\n    });\n  }\n  return tokens;\n}\n\n/**\n * Convert a String to an Array of characters, taking into account that some\n * characters like emojis take up two string indexes.\n *\n * Adapted from core-js (MIT license)\n * https://github.com/zloirock/core-js/blob/2d69cf5f99ab3ea3463c395df81e5a15b68f49d9/packages/core-js/internals/string-multibyte.js\n *\n * @function stringToArray\n * @param {string} str\n * @returns {string[]}\n */\nfunction stringToArray(str) {\n  const result = [];\n  const len = str.length;\n  let index = 0;\n  while (index < len) {\n    let first = str.charCodeAt(index);\n    let second;\n    let char = first < 0xd800 || first > 0xdbff || index + 1 === len || (second = str.charCodeAt(index + 1)) < 0xdc00 || second > 0xdfff ? str[index] // single character\n    : str.slice(index, index + 2); // two-index characters\n    result.push(char);\n    index += char.length;\n  }\n  return result;\n}\n\n/**\n * Fast version of ts function for when transition defaults are well known\n * @param {State<string>} state\n * @param {string} input\n * @param {string} t\n * @param {string} defaultt\n * @param {[RegExp, State<string>][]} jr\n * @returns {State<string>}\n */\nfunction fastts(state, input, t, defaultt, jr) {\n  let next;\n  const len = input.length;\n  for (let i = 0; i < len - 1; i++) {\n    const char = input[i];\n    if (state.j[char]) {\n      next = state.j[char];\n    } else {\n      next = new State(defaultt);\n      next.jr = jr.slice();\n      state.j[char] = next;\n    }\n    state = next;\n  }\n  next = new State(t);\n  next.jr = jr.slice();\n  state.j[input[len - 1]] = next;\n  return next;\n}\n\n/**\n * Converts a string of Top-Level Domain names encoded in update-tlds.js back\n * into a list of strings.\n * @param {str} encoded encoded TLDs string\n * @returns {str[]} original TLDs list\n */\nfunction decodeTlds(encoded) {\n  const words = [];\n  const stack = [];\n  let i = 0;\n  let digits = '0123456789';\n  while (i < encoded.length) {\n    let popDigitCount = 0;\n    while (digits.indexOf(encoded[i + popDigitCount]) >= 0) {\n      popDigitCount++; // encountered some digits, have to pop to go one level up trie\n    }\n    if (popDigitCount > 0) {\n      words.push(stack.join('')); // whatever preceded the pop digits must be a word\n      for (let popCount = parseInt(encoded.substring(i, i + popDigitCount), 10); popCount > 0; popCount--) {\n        stack.pop();\n      }\n      i += popDigitCount;\n    } else {\n      stack.push(encoded[i]); // drop down a level into the trie\n      i++;\n    }\n  }\n  return words;\n}\n\n/**\n * An object where each key is a valid DOM Event Name such as `click` or `focus`\n * and each value is an event handler function.\n *\n * https://developer.mozilla.org/en-US/docs/Web/API/Element#events\n * @typedef {?{ [event: string]: Function }} EventListeners\n */\n\n/**\n * All formatted properties required to render a link, including `tagName`,\n * `attributes`, `content` and `eventListeners`.\n * @typedef {{ tagName: any, attributes: {[attr: string]: any}, content: string,\n * eventListeners: EventListeners }} IntermediateRepresentation\n */\n\n/**\n * Specify either an object described by the template type `O` or a function.\n *\n * The function takes a string value (usually the link's href attribute), the\n * link type (`'url'`, `'hashtag`', etc.) and an internal token representation\n * of the link. It should return an object of the template type `O`\n * @template O\n * @typedef {O | ((value: string, type: string, token: MultiToken) => O)} OptObj\n */\n\n/**\n * Specify either a function described by template type `F` or an object.\n *\n * Each key in the object should be a link type (`'url'`, `'hashtag`', etc.). Each\n * value should be a function with template type `F` that is called when the\n * corresponding link type is encountered.\n * @template F\n * @typedef {F | { [type: string]: F}} OptFn\n */\n\n/**\n * Specify either a value with template type `V`, a function that returns `V` or\n * an object where each value resolves to `V`.\n *\n * The function takes a string value (usually the link's href attribute), the\n * link type (`'url'`, `'hashtag`', etc.) and an internal token representation\n * of the link. It should return an object of the template type `V`\n *\n * For the object, each key should be a link type (`'url'`, `'hashtag`', etc.).\n * Each value should either have type `V` or a function that returns V. This\n * function similarly takes a string value and a token.\n *\n * Example valid types for `Opt<string>`:\n *\n * ```js\n * 'hello'\n * (value, type, token) => 'world'\n * { url: 'hello', email: (value, token) => 'world'}\n * ```\n * @template V\n * @typedef {V | ((value: string, type: string, token: MultiToken) => V) | { [type: string]: V | ((value: string, token: MultiToken) => V) }} Opt\n */\n\n/**\n * See available options: https://linkify.js.org/docs/options.html\n * @typedef {{\n * \tdefaultProtocol?: string,\n *  events?: OptObj<EventListeners>,\n * \tformat?: Opt<string>,\n * \tformatHref?: Opt<string>,\n * \tnl2br?: boolean,\n * \ttagName?: Opt<any>,\n * \ttarget?: Opt<string>,\n * \trel?: Opt<string>,\n * \tvalidate?: Opt<boolean>,\n * \ttruncate?: Opt<number>,\n * \tclassName?: Opt<string>,\n * \tattributes?: OptObj<({ [attr: string]: any })>,\n *  ignoreTags?: string[],\n * \trender?: OptFn<((ir: IntermediateRepresentation) => any)>\n * }} Opts\n */\n\n/**\n * @type Required<Opts>\n */\nconst defaults = {\n  defaultProtocol: 'http',\n  events: null,\n  format: noop,\n  formatHref: noop,\n  nl2br: false,\n  tagName: 'a',\n  target: null,\n  rel: null,\n  validate: true,\n  truncate: Infinity,\n  className: null,\n  attributes: null,\n  ignoreTags: [],\n  render: null\n};\n\n/**\n * Utility class for linkify interfaces to apply specified\n * {@link Opts formatting and rendering options}.\n *\n * @param {Opts | Options} [opts] Option value overrides.\n * @param {(ir: IntermediateRepresentation) => any} [defaultRender] (For\n *   internal use) default render function that determines how to generate an\n *   HTML element based on a link token's derived tagName, attributes and HTML.\n *   Similar to render option\n */\nfunction Options(opts, defaultRender = null) {\n  let o = Object.assign({}, defaults);\n  if (opts) {\n    o = Object.assign(o, opts instanceof Options ? opts.o : opts);\n  }\n\n  // Ensure all ignored tags are uppercase\n  const ignoredTags = o.ignoreTags;\n  const uppercaseIgnoredTags = [];\n  for (let i = 0; i < ignoredTags.length; i++) {\n    uppercaseIgnoredTags.push(ignoredTags[i].toUpperCase());\n  }\n  /** @protected */\n  this.o = o;\n  if (defaultRender) {\n    this.defaultRender = defaultRender;\n  }\n  this.ignoreTags = uppercaseIgnoredTags;\n}\nOptions.prototype = {\n  o: defaults,\n  /**\n   * @type string[]\n   */\n  ignoreTags: [],\n  /**\n   * @param {IntermediateRepresentation} ir\n   * @returns {any}\n   */\n  defaultRender(ir) {\n    return ir;\n  },\n  /**\n   * Returns true or false based on whether a token should be displayed as a\n   * link based on the user options.\n   * @param {MultiToken} token\n   * @returns {boolean}\n   */\n  check(token) {\n    return this.get('validate', token.toString(), token);\n  },\n  // Private methods\n\n  /**\n   * Resolve an option's value based on the value of the option and the given\n   * params. If operator and token are specified and the target option is\n   * callable, automatically calls the function with the given argument.\n   * @template {keyof Opts} K\n   * @param {K} key Name of option to use\n   * @param {string} [operator] will be passed to the target option if it's a\n   * function. If not specified, RAW function value gets returned\n   * @param {MultiToken} [token] The token from linkify.tokenize\n   * @returns {Opts[K] | any}\n   */\n  get(key, operator, token) {\n    const isCallable = operator != null;\n    let option = this.o[key];\n    if (!option) {\n      return option;\n    }\n    if (typeof option === 'object') {\n      option = token.t in option ? option[token.t] : defaults[key];\n      if (typeof option === 'function' && isCallable) {\n        option = option(operator, token);\n      }\n    } else if (typeof option === 'function' && isCallable) {\n      option = option(operator, token.t, token);\n    }\n    return option;\n  },\n  /**\n   * @template {keyof Opts} L\n   * @param {L} key Name of options object to use\n   * @param {string} [operator]\n   * @param {MultiToken} [token]\n   * @returns {Opts[L] | any}\n   */\n  getObj(key, operator, token) {\n    let obj = this.o[key];\n    if (typeof obj === 'function' && operator != null) {\n      obj = obj(operator, token.t, token);\n    }\n    return obj;\n  },\n  /**\n   * Convert the given token to a rendered element that may be added to the\n   * calling-interface's DOM\n   * @param {MultiToken} token Token to render to an HTML element\n   * @returns {any} Render result; e.g., HTML string, DOM element, React\n   *   Component, etc.\n   */\n  render(token) {\n    const ir = token.render(this); // intermediate representation\n    const renderFn = this.get('render', null, token) || this.defaultRender;\n    return renderFn(ir, token.t, token);\n  }\n};\nfunction noop(val) {\n  return val;\n}\n\nvar options = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tOptions: Options,\n\tdefaults: defaults\n});\n\n/******************************************************************************\n\tMulti-Tokens\n\tTokens composed of arrays of TextTokens\n******************************************************************************/\n\n/**\n * @param {string} value\n * @param {Token[]} tokens\n */\nfunction MultiToken(value, tokens) {\n  this.t = 'token';\n  this.v = value;\n  this.tk = tokens;\n}\n\n/**\n * Abstract class used for manufacturing tokens of text tokens. That is rather\n * than the value for a token being a small string of text, it's value an array\n * of text tokens.\n *\n * Used for grouping together URLs, emails, hashtags, and other potential\n * creations.\n * @class MultiToken\n * @property {string} t\n * @property {string} v\n * @property {Token[]} tk\n * @abstract\n */\nMultiToken.prototype = {\n  isLink: false,\n  /**\n   * Return the string this token represents.\n   * @return {string}\n   */\n  toString() {\n    return this.v;\n  },\n  /**\n   * What should the value for this token be in the `href` HTML attribute?\n   * Returns the `.toString` value by default.\n   * @param {string} [scheme]\n   * @return {string}\n   */\n  toHref(scheme) {\n    return this.toString();\n  },\n  /**\n   * @param {Options} options Formatting options\n   * @returns {string}\n   */\n  toFormattedString(options) {\n    const val = this.toString();\n    const truncate = options.get('truncate', val, this);\n    const formatted = options.get('format', val, this);\n    return truncate && formatted.length > truncate ? formatted.substring(0, truncate) + '' : formatted;\n  },\n  /**\n   *\n   * @param {Options} options\n   * @returns {string}\n   */\n  toFormattedHref(options) {\n    return options.get('formatHref', this.toHref(options.get('defaultProtocol')), this);\n  },\n  /**\n   * The start index of this token in the original input string\n   * @returns {number}\n   */\n  startIndex() {\n    return this.tk[0].s;\n  },\n  /**\n   * The end index of this token in the original input string (up to this\n   * index but not including it)\n   * @returns {number}\n   */\n  endIndex() {\n    return this.tk[this.tk.length - 1].e;\n  },\n  /**\n  \tReturns an object  of relevant values for this token, which includes keys\n  \t* type - Kind of token ('url', 'email', etc.)\n  \t* value - Original text\n  \t* href - The value that should be added to the anchor tag's href\n  \t\tattribute\n  \t\t@method toObject\n  \t@param {string} [protocol] `'http'` by default\n  */\n  toObject(protocol = defaults.defaultProtocol) {\n    return {\n      type: this.t,\n      value: this.toString(),\n      isLink: this.isLink,\n      href: this.toHref(protocol),\n      start: this.startIndex(),\n      end: this.endIndex()\n    };\n  },\n  /**\n   *\n   * @param {Options} options Formatting option\n   */\n  toFormattedObject(options) {\n    return {\n      type: this.t,\n      value: this.toFormattedString(options),\n      isLink: this.isLink,\n      href: this.toFormattedHref(options),\n      start: this.startIndex(),\n      end: this.endIndex()\n    };\n  },\n  /**\n   * Whether this token should be rendered as a link according to the given options\n   * @param {Options} options\n   * @returns {boolean}\n   */\n  validate(options) {\n    return options.get('validate', this.toString(), this);\n  },\n  /**\n   * Return an object that represents how this link should be rendered.\n   * @param {Options} options Formattinng options\n   */\n  render(options) {\n    const token = this;\n    const href = this.toHref(options.get('defaultProtocol'));\n    const formattedHref = options.get('formatHref', href, this);\n    const tagName = options.get('tagName', href, token);\n    const content = this.toFormattedString(options);\n    const attributes = {};\n    const className = options.get('className', href, token);\n    const target = options.get('target', href, token);\n    const rel = options.get('rel', href, token);\n    const attrs = options.getObj('attributes', href, token);\n    const eventListeners = options.getObj('events', href, token);\n    attributes.href = formattedHref;\n    if (className) {\n      attributes.class = className;\n    }\n    if (target) {\n      attributes.target = target;\n    }\n    if (rel) {\n      attributes.rel = rel;\n    }\n    if (attrs) {\n      Object.assign(attributes, attrs);\n    }\n    return {\n      tagName,\n      attributes,\n      content,\n      eventListeners\n    };\n  }\n};\n\n/**\n * Create a new token that can be emitted by the parser state machine\n * @param {string} type readable type of the token\n * @param {object} props properties to assign or override, including isLink = true or false\n * @returns {new (value: string, tokens: Token[]) => MultiToken} new token class\n */\nfunction createTokenClass(type, props) {\n  class Token extends MultiToken {\n    constructor(value, tokens) {\n      super(value, tokens);\n      this.t = type;\n    }\n  }\n  for (const p in props) {\n    Token.prototype[p] = props[p];\n  }\n  Token.t = type;\n  return Token;\n}\n\n/**\n\tRepresents a list of tokens making up a valid email address\n*/\nconst Email = createTokenClass('email', {\n  isLink: true,\n  toHref() {\n    return 'mailto:' + this.toString();\n  }\n});\n\n/**\n\tRepresents some plain text\n*/\nconst Text = createTokenClass('text');\n\n/**\n\tMulti-linebreak token - represents a line break\n\t@class Nl\n*/\nconst Nl = createTokenClass('nl');\n\n/**\n\tRepresents a list of text tokens making up a valid URL\n\t@class Url\n*/\nconst Url = createTokenClass('url', {\n  isLink: true,\n  /**\n  \tLowercases relevant parts of the domain and adds the protocol if\n  \trequired. Note that this will not escape unsafe HTML characters in the\n  \tURL.\n  \t\t@param {string} [scheme] default scheme (e.g., 'https')\n  \t@return {string} the full href\n  */\n  toHref(scheme = defaults.defaultProtocol) {\n    // Check if already has a prefix scheme\n    return this.hasProtocol() ? this.v : `${scheme}://${this.v}`;\n  },\n  /**\n   * Check whether this URL token has a protocol\n   * @return {boolean}\n   */\n  hasProtocol() {\n    const tokens = this.tk;\n    return tokens.length >= 2 && tokens[0].t !== LOCALHOST && tokens[1].t === COLON;\n  }\n});\n\nvar multi = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tBase: MultiToken,\n\tEmail: Email,\n\tMultiToken: MultiToken,\n\tNl: Nl,\n\tText: Text,\n\tUrl: Url,\n\tcreateTokenClass: createTokenClass\n});\n\n/**\n\tNot exactly parser, more like the second-stage scanner (although we can\n\ttheoretically hotswap the code here with a real parser in the future... but\n\tfor a little URL-finding utility abstract syntax trees may be a little\n\toverkill).\n\n\tURL format: http://en.wikipedia.org/wiki/URI_scheme\n\tEmail format: http://en.wikipedia.org/wiki/EmailAddress (links to RFC in\n\treference)\n\n\t@module linkify\n\t@submodule parser\n\t@main run\n*/\n\nconst makeState = arg => new State(arg);\n\n/**\n * Generate the parser multi token-based state machine\n * @param {{ groups: Collections<string> }} tokens\n */\nfunction init$1({\n  groups\n}) {\n  // Types of characters the URL can definitely end in\n  const qsAccepting = groups.domain.concat([AMPERSAND, ASTERISK, AT, BACKSLASH, BACKTICK, CARET, DOLLAR, EQUALS, HYPHEN, NUM, PERCENT, PIPE, PLUS, POUND, SLASH, SYM, TILDE, UNDERSCORE]);\n\n  // Types of tokens that can follow a URL and be part of the query string\n  // but cannot be the very last characters\n  // Characters that cannot appear in the URL at all should be excluded\n  const qsNonAccepting = [APOSTROPHE, COLON, COMMA, DOT, EXCLAMATION, PERCENT, QUERY, QUOTE, SEMI, OPENANGLEBRACKET, CLOSEANGLEBRACKET, OPENBRACE, CLOSEBRACE, CLOSEBRACKET, OPENBRACKET, OPENPAREN, CLOSEPAREN, FULLWIDTHLEFTPAREN, FULLWIDTHRIGHTPAREN, LEFTCORNERBRACKET, RIGHTCORNERBRACKET, LEFTWHITECORNERBRACKET, RIGHTWHITECORNERBRACKET, FULLWIDTHLESSTHAN, FULLWIDTHGREATERTHAN];\n\n  // For addresses without the mailto prefix\n  // Tokens allowed in the localpart of the email\n  const localpartAccepting = [AMPERSAND, APOSTROPHE, ASTERISK, BACKSLASH, BACKTICK, CARET, DOLLAR, EQUALS, HYPHEN, OPENBRACE, CLOSEBRACE, PERCENT, PIPE, PLUS, POUND, QUERY, SLASH, SYM, TILDE, UNDERSCORE];\n\n  // The universal starting state.\n  /**\n   * @type State<Token>\n   */\n  const Start = makeState();\n  const Localpart = tt(Start, TILDE); // Local part of the email address\n  ta(Localpart, localpartAccepting, Localpart);\n  ta(Localpart, groups.domain, Localpart);\n  const Domain = makeState(),\n    Scheme = makeState(),\n    SlashScheme = makeState();\n  ta(Start, groups.domain, Domain); // parsed string ends with a potential domain name (A)\n  ta(Start, groups.scheme, Scheme); // e.g., 'mailto'\n  ta(Start, groups.slashscheme, SlashScheme); // e.g., 'http'\n\n  ta(Domain, localpartAccepting, Localpart);\n  ta(Domain, groups.domain, Domain);\n  const LocalpartAt = tt(Domain, AT); // Local part of the email address plus @\n\n  tt(Localpart, AT, LocalpartAt); // close to an email address now\n\n  // Local part of an email address can be e.g. 'http' or 'mailto'\n  tt(Scheme, AT, LocalpartAt);\n  tt(SlashScheme, AT, LocalpartAt);\n  const LocalpartDot = tt(Localpart, DOT); // Local part of the email address plus '.' (localpart cannot end in .)\n  ta(LocalpartDot, localpartAccepting, Localpart);\n  ta(LocalpartDot, groups.domain, Localpart);\n  const EmailDomain = makeState();\n  ta(LocalpartAt, groups.domain, EmailDomain); // parsed string starts with local email info + @ with a potential domain name\n  ta(EmailDomain, groups.domain, EmailDomain);\n  const EmailDomainDot = tt(EmailDomain, DOT); // domain followed by DOT\n  ta(EmailDomainDot, groups.domain, EmailDomain);\n  const Email$1 = makeState(Email); // Possible email address (could have more tlds)\n  ta(EmailDomainDot, groups.tld, Email$1);\n  ta(EmailDomainDot, groups.utld, Email$1);\n  tt(LocalpartAt, LOCALHOST, Email$1);\n\n  // Hyphen can jump back to a domain name\n  const EmailDomainHyphen = tt(EmailDomain, HYPHEN); // parsed string starts with local email info + @ with a potential domain name\n  tt(EmailDomainHyphen, HYPHEN, EmailDomainHyphen);\n  ta(EmailDomainHyphen, groups.domain, EmailDomain);\n  ta(Email$1, groups.domain, EmailDomain);\n  tt(Email$1, DOT, EmailDomainDot);\n  tt(Email$1, HYPHEN, EmailDomainHyphen);\n\n  // Final possible email states\n  const EmailColon = tt(Email$1, COLON); // URL followed by colon (potential port number here)\n  /*const EmailColonPort = */\n  ta(EmailColon, groups.numeric, Email); // URL followed by colon and port number\n\n  // Account for dots and hyphens. Hyphens are usually parts of domain names\n  // (but not TLDs)\n  const DomainHyphen = tt(Domain, HYPHEN); // domain followed by hyphen\n  const DomainDot = tt(Domain, DOT); // domain followed by DOT\n  tt(DomainHyphen, HYPHEN, DomainHyphen);\n  ta(DomainHyphen, groups.domain, Domain);\n  ta(DomainDot, localpartAccepting, Localpart);\n  ta(DomainDot, groups.domain, Domain);\n  const DomainDotTld = makeState(Url); // Simplest possible URL with no query string\n  ta(DomainDot, groups.tld, DomainDotTld);\n  ta(DomainDot, groups.utld, DomainDotTld);\n  ta(DomainDotTld, groups.domain, Domain);\n  ta(DomainDotTld, localpartAccepting, Localpart);\n  tt(DomainDotTld, DOT, DomainDot);\n  tt(DomainDotTld, HYPHEN, DomainHyphen);\n  tt(DomainDotTld, AT, LocalpartAt);\n  const DomainDotTldColon = tt(DomainDotTld, COLON); // URL followed by colon (potential port number here)\n  const DomainDotTldColonPort = makeState(Url); // TLD followed by a port number\n  ta(DomainDotTldColon, groups.numeric, DomainDotTldColonPort);\n\n  // Long URL with optional port and maybe query string\n  const Url$1 = makeState(Url);\n\n  // URL with extra symbols at the end, followed by an opening bracket\n  const UrlNonaccept = makeState(); // URL followed by some symbols (will not be part of the final URL)\n\n  // Query strings\n  ta(Url$1, qsAccepting, Url$1);\n  ta(Url$1, qsNonAccepting, UrlNonaccept);\n  ta(UrlNonaccept, qsAccepting, Url$1);\n  ta(UrlNonaccept, qsNonAccepting, UrlNonaccept);\n\n  // Become real URLs after `SLASH` or `COLON NUM SLASH`\n  // Here works with or without scheme:// prefix\n  tt(DomainDotTld, SLASH, Url$1);\n  tt(DomainDotTldColonPort, SLASH, Url$1);\n\n  // Note that domains that begin with schemes are treated slighly differently\n  const SchemeColon = tt(Scheme, COLON); // e.g., 'mailto:'\n  const SlashSchemeColon = tt(SlashScheme, COLON); // e.g., 'http:'\n  const SlashSchemeColonSlash = tt(SlashSchemeColon, SLASH); // e.g., 'http:/'\n\n  const UriPrefix = tt(SlashSchemeColonSlash, SLASH); // e.g., 'http://'\n\n  // Scheme states can transition to domain states\n  ta(Scheme, groups.domain, Domain);\n  tt(Scheme, DOT, DomainDot);\n  tt(Scheme, HYPHEN, DomainHyphen);\n  ta(SlashScheme, groups.domain, Domain);\n  tt(SlashScheme, DOT, DomainDot);\n  tt(SlashScheme, HYPHEN, DomainHyphen);\n\n  // Force URL with scheme prefix followed by anything sane\n  ta(SchemeColon, groups.domain, Url$1);\n  tt(SchemeColon, SLASH, Url$1);\n  tt(SchemeColon, QUERY, Url$1);\n  ta(UriPrefix, groups.domain, Url$1);\n  ta(UriPrefix, qsAccepting, Url$1);\n  tt(UriPrefix, SLASH, Url$1);\n  const bracketPairs = [[OPENBRACE, CLOSEBRACE],\n  // {}\n  [OPENBRACKET, CLOSEBRACKET],\n  // []\n  [OPENPAREN, CLOSEPAREN],\n  // ()\n  [OPENANGLEBRACKET, CLOSEANGLEBRACKET],\n  // <>\n  [FULLWIDTHLEFTPAREN, FULLWIDTHRIGHTPAREN],\n  // \n  [LEFTCORNERBRACKET, RIGHTCORNERBRACKET],\n  // \n  [LEFTWHITECORNERBRACKET, RIGHTWHITECORNERBRACKET],\n  // \n  [FULLWIDTHLESSTHAN, FULLWIDTHGREATERTHAN] // \n  ];\n  for (let i = 0; i < bracketPairs.length; i++) {\n    const [OPEN, CLOSE] = bracketPairs[i];\n    const UrlOpen = tt(Url$1, OPEN); // URL followed by open bracket\n\n    // Continue not accepting for open brackets\n    tt(UrlNonaccept, OPEN, UrlOpen);\n\n    // Closing bracket component. This character WILL be included in the URL\n    tt(UrlOpen, CLOSE, Url$1);\n\n    // URL that beings with an opening bracket, followed by a symbols.\n    // Note that the final state can still be `UrlOpen` (if the URL has a\n    // single opening bracket for some reason).\n    const UrlOpenQ = makeState(Url);\n    ta(UrlOpen, qsAccepting, UrlOpenQ);\n    const UrlOpenSyms = makeState(); // UrlOpen followed by some symbols it cannot end it\n    ta(UrlOpen, qsNonAccepting);\n\n    // URL that begins with an opening bracket, followed by some symbols\n    ta(UrlOpenQ, qsAccepting, UrlOpenQ);\n    ta(UrlOpenQ, qsNonAccepting, UrlOpenSyms);\n    ta(UrlOpenSyms, qsAccepting, UrlOpenQ);\n    ta(UrlOpenSyms, qsNonAccepting, UrlOpenSyms);\n\n    // Close brace/bracket to become regular URL\n    tt(UrlOpenQ, CLOSE, Url$1);\n    tt(UrlOpenSyms, CLOSE, Url$1);\n  }\n  tt(Start, LOCALHOST, DomainDotTld); // localhost is a valid URL state\n  tt(Start, NL, Nl); // single new line\n\n  return {\n    start: Start,\n    tokens: tk\n  };\n}\n\n/**\n * Run the parser state machine on a list of scanned string-based tokens to\n * create a list of multi tokens, each of which represents a URL, email address,\n * plain text, etc.\n *\n * @param {State<MultiToken>} start parser start state\n * @param {string} input the original input used to generate the given tokens\n * @param {Token[]} tokens list of scanned tokens\n * @returns {MultiToken[]}\n */\nfunction run(start, input, tokens) {\n  let len = tokens.length;\n  let cursor = 0;\n  let multis = [];\n  let textTokens = [];\n  while (cursor < len) {\n    let state = start;\n    let secondState = null;\n    let nextState = null;\n    let multiLength = 0;\n    let latestAccepting = null;\n    let sinceAccepts = -1;\n    while (cursor < len && !(secondState = state.go(tokens[cursor].t))) {\n      // Starting tokens with nowhere to jump to.\n      // Consider these to be just plain text\n      textTokens.push(tokens[cursor++]);\n    }\n    while (cursor < len && (nextState = secondState || state.go(tokens[cursor].t))) {\n      // Get the next state\n      secondState = null;\n      state = nextState;\n\n      // Keep track of the latest accepting state\n      if (state.accepts()) {\n        sinceAccepts = 0;\n        latestAccepting = state;\n      } else if (sinceAccepts >= 0) {\n        sinceAccepts++;\n      }\n      cursor++;\n      multiLength++;\n    }\n    if (sinceAccepts < 0) {\n      // No accepting state was found, part of a regular text token add\n      // the first text token to the text tokens array and try again from\n      // the next\n      cursor -= multiLength;\n      if (cursor < len) {\n        textTokens.push(tokens[cursor]);\n        cursor++;\n      }\n    } else {\n      // Accepting state!\n      // First close off the textTokens (if available)\n      if (textTokens.length > 0) {\n        multis.push(initMultiToken(Text, input, textTokens));\n        textTokens = [];\n      }\n\n      // Roll back to the latest accepting state\n      cursor -= sinceAccepts;\n      multiLength -= sinceAccepts;\n\n      // Create a new multitoken\n      const Multi = latestAccepting.t;\n      const subtokens = tokens.slice(cursor - multiLength, cursor);\n      multis.push(initMultiToken(Multi, input, subtokens));\n    }\n  }\n\n  // Finally close off the textTokens (if available)\n  if (textTokens.length > 0) {\n    multis.push(initMultiToken(Text, input, textTokens));\n  }\n  return multis;\n}\n\n/**\n * Utility function for instantiating a new multitoken with all the relevant\n * fields during parsing.\n * @param {new (value: string, tokens: Token[]) => MultiToken} Multi class to instantiate\n * @param {string} input original input string\n * @param {Token[]} tokens consecutive tokens scanned from input string\n * @returns {MultiToken}\n */\nfunction initMultiToken(Multi, input, tokens) {\n  const startIdx = tokens[0].s;\n  const endIdx = tokens[tokens.length - 1].e;\n  const value = input.slice(startIdx, endIdx);\n  return new Multi(value, tokens);\n}\n\nconst warn = typeof console !== 'undefined' && console && console.warn || (() => {});\nconst warnAdvice = 'until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.';\n\n// Side-effect initialization state\nconst INIT = {\n  scanner: null,\n  parser: null,\n  tokenQueue: [],\n  pluginQueue: [],\n  customSchemes: [],\n  initialized: false\n};\n\n/**\n * @typedef {{\n * \tstart: State<string>,\n * \ttokens: { groups: Collections<string> } & typeof tk\n * }} ScannerInit\n */\n\n/**\n * @typedef {{\n * \tstart: State<MultiToken>,\n * \ttokens: typeof multi\n * }} ParserInit\n */\n\n/**\n * @typedef {(arg: { scanner: ScannerInit }) => void} TokenPlugin\n */\n\n/**\n * @typedef {(arg: { scanner: ScannerInit, parser: ParserInit }) => void} Plugin\n */\n\n/**\n * De-register all plugins and reset the internal state-machine. Used for\n * testing; not required in practice.\n * @private\n */\nfunction reset() {\n  State.groups = {};\n  INIT.scanner = null;\n  INIT.parser = null;\n  INIT.tokenQueue = [];\n  INIT.pluginQueue = [];\n  INIT.customSchemes = [];\n  INIT.initialized = false;\n  return INIT;\n}\n\n/**\n * Register a token plugin to allow the scanner to recognize additional token\n * types before the parser state machine is constructed from the results.\n * @param {string} name of plugin to register\n * @param {TokenPlugin} plugin function that accepts the scanner state machine\n * and available scanner tokens and collections and extends the state machine to\n * recognize additional tokens or groups.\n */\nfunction registerTokenPlugin(name, plugin) {\n  if (typeof plugin !== 'function') {\n    throw new Error(`linkifyjs: Invalid token plugin ${plugin} (expects function)`);\n  }\n  for (let i = 0; i < INIT.tokenQueue.length; i++) {\n    if (name === INIT.tokenQueue[i][0]) {\n      warn(`linkifyjs: token plugin \"${name}\" already registered - will be overwritten`);\n      INIT.tokenQueue[i] = [name, plugin];\n      return;\n    }\n  }\n  INIT.tokenQueue.push([name, plugin]);\n  if (INIT.initialized) {\n    warn(`linkifyjs: already initialized - will not register token plugin \"${name}\" ${warnAdvice}`);\n  }\n}\n\n/**\n * Register a linkify plugin\n * @param {string} name of plugin to register\n * @param {Plugin} plugin function that accepts the parser state machine and\n * extends the parser to recognize additional link types\n */\nfunction registerPlugin(name, plugin) {\n  if (typeof plugin !== 'function') {\n    throw new Error(`linkifyjs: Invalid plugin ${plugin} (expects function)`);\n  }\n  for (let i = 0; i < INIT.pluginQueue.length; i++) {\n    if (name === INIT.pluginQueue[i][0]) {\n      warn(`linkifyjs: plugin \"${name}\" already registered - will be overwritten`);\n      INIT.pluginQueue[i] = [name, plugin];\n      return;\n    }\n  }\n  INIT.pluginQueue.push([name, plugin]);\n  if (INIT.initialized) {\n    warn(`linkifyjs: already initialized - will not register plugin \"${name}\" ${warnAdvice}`);\n  }\n}\n\n/**\n * Detect URLs with the following additional protocol. Anything with format\n * \"protocol://...\" will be considered a link. If `optionalSlashSlash` is set to\n * `true`, anything with format \"protocol:...\" will be considered a link.\n * @param {string} scheme\n * @param {boolean} [optionalSlashSlash]\n */\nfunction registerCustomProtocol(scheme, optionalSlashSlash = false) {\n  if (INIT.initialized) {\n    warn(`linkifyjs: already initialized - will not register custom scheme \"${scheme}\" ${warnAdvice}`);\n  }\n  if (!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(scheme)) {\n    throw new Error(`linkifyjs: incorrect scheme format.\n1. Must only contain digits, lowercase ASCII letters or \"-\"\n2. Cannot start or end with \"-\"\n3. \"-\" cannot repeat`);\n  }\n  INIT.customSchemes.push([scheme, optionalSlashSlash]);\n}\n\n/**\n * Initialize the linkify state machine. Called automatically the first time\n * linkify is called on a string, but may be called manually as well.\n */\nfunction init() {\n  // Initialize scanner state machine and plugins\n  INIT.scanner = init$2(INIT.customSchemes);\n  for (let i = 0; i < INIT.tokenQueue.length; i++) {\n    INIT.tokenQueue[i][1]({\n      scanner: INIT.scanner\n    });\n  }\n\n  // Initialize parser state machine and plugins\n  INIT.parser = init$1(INIT.scanner.tokens);\n  for (let i = 0; i < INIT.pluginQueue.length; i++) {\n    INIT.pluginQueue[i][1]({\n      scanner: INIT.scanner,\n      parser: INIT.parser\n    });\n  }\n  INIT.initialized = true;\n  return INIT;\n}\n\n/**\n * Parse a string into tokens that represent linkable and non-linkable sub-components\n * @param {string} str\n * @return {MultiToken[]} tokens\n */\nfunction tokenize(str) {\n  if (!INIT.initialized) {\n    init();\n  }\n  return run(INIT.parser.start, str, run$1(INIT.scanner.start, str));\n}\ntokenize.scan = run$1; // for testing\n\n/**\n * Find a list of linkable items in the given string.\n * @param {string} str string to find links in\n * @param {string | Opts} [type] either formatting options or specific type of\n * links to find, e.g., 'url' or 'email'\n * @param {Opts} [opts] formatting options for final output. Cannot be specified\n * if opts already provided in `type` argument\n */\nfunction find(str, type = null, opts = null) {\n  if (type && typeof type === 'object') {\n    if (opts) {\n      throw Error(`linkifyjs: Invalid link type ${type}; must be a string`);\n    }\n    opts = type;\n    type = null;\n  }\n  const options = new Options(opts);\n  const tokens = tokenize(str);\n  const filtered = [];\n  for (let i = 0; i < tokens.length; i++) {\n    const token = tokens[i];\n    if (token.isLink && (!type || token.t === type) && options.check(token)) {\n      filtered.push(token.toFormattedObject(options));\n    }\n  }\n  return filtered;\n}\n\n/**\n * Is the given string valid linkable text of some sort. Note that this does not\n * trim the text for you.\n *\n * Optionally pass in a second `type` param, which is the type of link to test\n * for.\n *\n * For example,\n *\n *     linkify.test(str, 'email');\n *\n * Returns `true` if str is a valid email.\n * @param {string} str string to test for links\n * @param {string} [type] optional specific link type to look for\n * @returns boolean true/false\n */\nfunction test(str, type = null) {\n  const tokens = tokenize(str);\n  return tokens.length === 1 && tokens[0].isLink && (!type || tokens[0].t === type);\n}\n\nexport { MultiToken, Options, State, createTokenClass, find, init, multi, options, regexp, registerCustomProtocol, registerPlugin, registerTokenPlugin, reset, stringToArray, test, multi as text, tokenize };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15641, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-link/src/link.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-link/src/helpers/autolink.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-link/src/helpers/whitespace.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-link/src/helpers/clickHandler.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-link/src/helpers/pasteHandler.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-link/src/index.ts"],"sourcesContent":["import type { PasteRuleMatch } from '@tiptap/core'\nimport { Mark, markPasteRule, mergeAttributes } from '@tiptap/core'\nimport type { Plugin } from '@tiptap/pm/state'\nimport { find, registerCustomProtocol, reset } from 'linkifyjs'\n\nimport { autolink } from './helpers/autolink.js'\nimport { clickHandler } from './helpers/clickHandler.js'\nimport { pasteHandler } from './helpers/pasteHandler.js'\nimport { UNICODE_WHITESPACE_REGEX_GLOBAL } from './helpers/whitespace.js'\n\nexport interface LinkProtocolOptions {\n  /**\n   * The protocol scheme to be registered.\n   * @default '''\n   * @example 'ftp'\n   * @example 'git'\n   */\n  scheme: string\n\n  /**\n   * If enabled, it allows optional slashes after the protocol.\n   * @default false\n   * @example true\n   */\n  optionalSlashes?: boolean\n}\n\nexport const pasteRegex =\n  /https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z]{2,}\\b(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)(?:[-a-zA-Z0-9@:%._+~#=?!&/]*)/gi\n\n/**\n * @deprecated The default behavior is now to open links when the editor is not editable.\n */\ntype DeprecatedOpenWhenNotEditable = 'whenNotEditable'\n\nexport interface LinkOptions {\n  /**\n   * If enabled, the extension will automatically add links as you type.\n   * @default true\n   * @example false\n   */\n  autolink: boolean\n\n  /**\n   * An array of custom protocols to be registered with linkifyjs.\n   * @default []\n   * @example ['ftp', 'git']\n   */\n  protocols: Array<LinkProtocolOptions | string>\n\n  /**\n   * Default protocol to use when no protocol is specified.\n   * @default 'http'\n   */\n  defaultProtocol: string\n  /**\n   * If enabled, links will be opened on click.\n   * @default true\n   * @example false\n   */\n  openOnClick: boolean | DeprecatedOpenWhenNotEditable\n  /**\n   * If enabled, the link will be selected when clicked.\n   * @default false\n   * @example true\n   */\n  enableClickSelection: boolean\n  /**\n   * Adds a link to the current selection if the pasted content only contains an url.\n   * @default true\n   * @example false\n   */\n  linkOnPaste: boolean\n\n  /**\n   * HTML attributes to add to the link element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n\n  /**\n   * @deprecated Use the `shouldAutoLink` option instead.\n   * A validation function that modifies link verification for the auto linker.\n   * @param url - The url to be validated.\n   * @returns - True if the url is valid, false otherwise.\n   */\n  validate: (url: string) => boolean\n\n  /**\n   * A validation function which is used for configuring link verification for preventing XSS attacks.\n   * Only modify this if you know what you're doing.\n   *\n   * @returns {boolean} `true` if the URL is valid, `false` otherwise.\n   *\n   * @example\n   * isAllowedUri: (url, { defaultValidate, protocols, defaultProtocol }) => {\n   * return url.startsWith('./') || defaultValidate(url)\n   * }\n   */\n  isAllowedUri: (\n    /**\n     * The URL to be validated.\n     */\n    url: string,\n    ctx: {\n      /**\n       * The default validation function.\n       */\n      defaultValidate: (url: string) => boolean\n      /**\n       * An array of allowed protocols for the URL (e.g., \"http\", \"https\"). As defined in the `protocols` option.\n       */\n      protocols: Array<LinkProtocolOptions | string>\n      /**\n       * A string that represents the default protocol (e.g., 'http'). As defined in the `defaultProtocol` option.\n       */\n      defaultProtocol: string\n    },\n  ) => boolean\n\n  /**\n   * Determines whether a valid link should be automatically linked in the content.\n   *\n   * @param {string} url - The URL that has already been validated.\n   * @returns {boolean} - True if the link should be auto-linked; false if it should not be auto-linked.\n   */\n  shouldAutoLink: (url: string) => boolean\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    link: {\n      /**\n       * Set a link mark\n       * @param attributes The link attributes\n       * @example editor.commands.setLink({ href: 'https://tiptap.dev' })\n       */\n      setLink: (attributes: {\n        href: string\n        target?: string | null\n        rel?: string | null\n        class?: string | null\n        title?: string | null\n      }) => ReturnType\n      /**\n       * Toggle a link mark\n       * @param attributes The link attributes\n       * @example editor.commands.toggleLink({ href: 'https://tiptap.dev' })\n       */\n      toggleLink: (attributes?: {\n        href: string\n        target?: string | null\n        rel?: string | null\n        class?: string | null\n        title?: string | null\n      }) => ReturnType\n      /**\n       * Unset a link mark\n       * @example editor.commands.unsetLink()\n       */\n      unsetLink: () => ReturnType\n    }\n  }\n}\n\nexport function isAllowedUri(uri: string | undefined, protocols?: LinkOptions['protocols']) {\n  const allowedProtocols: string[] = ['http', 'https', 'ftp', 'ftps', 'mailto', 'tel', 'callto', 'sms', 'cid', 'xmpp']\n\n  if (protocols) {\n    protocols.forEach(protocol => {\n      const nextProtocol = typeof protocol === 'string' ? protocol : protocol.scheme\n\n      if (nextProtocol) {\n        allowedProtocols.push(nextProtocol)\n      }\n    })\n  }\n\n  return (\n    !uri ||\n    uri.replace(UNICODE_WHITESPACE_REGEX_GLOBAL, '').match(\n      new RegExp(\n        // eslint-disable-next-line no-useless-escape\n        `^(?:(?:${allowedProtocols.join('|')}):|[^a-z]|[a-z0-9+.\\-]+(?:[^a-z+.\\-:]|$))`,\n        'i',\n      ),\n    )\n  )\n}\n\n/**\n * This extension allows you to create links.\n * @see https://www.tiptap.dev/api/marks/link\n */\nexport const Link = Mark.create<LinkOptions>({\n  name: 'link',\n\n  priority: 1000,\n\n  keepOnSplit: false,\n\n  exitable: true,\n\n  onCreate() {\n    // TODO: v4 - remove validate option\n    if (this.options.validate && !this.options.shouldAutoLink) {\n      // Copy the validate function to the shouldAutoLink option\n      this.options.shouldAutoLink = this.options.validate\n      console.warn('The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.')\n    }\n    this.options.protocols.forEach(protocol => {\n      if (typeof protocol === 'string') {\n        registerCustomProtocol(protocol)\n        return\n      }\n      registerCustomProtocol(protocol.scheme, protocol.optionalSlashes)\n    })\n  },\n\n  onDestroy() {\n    reset()\n  },\n\n  inclusive() {\n    return this.options.autolink\n  },\n\n  addOptions() {\n    return {\n      openOnClick: true,\n      enableClickSelection: false,\n      linkOnPaste: true,\n      autolink: true,\n      protocols: [],\n      defaultProtocol: 'http',\n      HTMLAttributes: {\n        target: '_blank',\n        rel: 'noopener noreferrer nofollow',\n        class: null,\n      },\n      isAllowedUri: (url, ctx) => !!isAllowedUri(url, ctx.protocols),\n      validate: url => !!url,\n      shouldAutoLink: url => {\n        // URLs with explicit protocols (e.g., https://) should be auto-linked\n        // But not if @ appears before :// (that would be userinfo like user:pass@host)\n        const hasProtocol = /^[a-z][a-z0-9+.-]*:\\/\\//i.test(url)\n        const hasMaybeProtocol = /^[a-z][a-z0-9+.-]*:/i.test(url)\n\n        if (hasProtocol || (hasMaybeProtocol && !url.includes('@'))) {\n          return true\n        }\n        // Strip userinfo (user:pass@) if present, then extract hostname\n        const urlWithoutUserinfo = url.includes('@') ? url.split('@').pop()! : url\n        const hostname = urlWithoutUserinfo.split(/[/?#:]/)[0]\n\n        // Don't auto-link IP addresses without protocol\n        if (/^\\d{1,3}(\\.\\d{1,3}){3}$/.test(hostname)) {\n          return false\n        }\n        // Don't auto-link single-word hostnames without TLD (e.g., \"localhost\")\n        if (!/\\./.test(hostname)) {\n          return false\n        }\n        return true\n      },\n    }\n  },\n\n  addAttributes() {\n    return {\n      href: {\n        default: null,\n        parseHTML(element) {\n          return element.getAttribute('href')\n        },\n      },\n      target: {\n        default: this.options.HTMLAttributes.target,\n      },\n      rel: {\n        default: this.options.HTMLAttributes.rel,\n      },\n      class: {\n        default: this.options.HTMLAttributes.class,\n      },\n      title: {\n        default: null,\n      },\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'a[href]',\n        getAttrs: dom => {\n          const href = (dom as HTMLElement).getAttribute('href')\n\n          // prevent XSS attacks\n          if (\n            !href ||\n            !this.options.isAllowedUri(href, {\n              defaultValidate: url => !!isAllowedUri(url, this.options.protocols),\n              protocols: this.options.protocols,\n              defaultProtocol: this.options.defaultProtocol,\n            })\n          ) {\n            return false\n          }\n          return null\n        },\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    // prevent XSS attacks\n    if (\n      !this.options.isAllowedUri(HTMLAttributes.href, {\n        defaultValidate: href => !!isAllowedUri(href, this.options.protocols),\n        protocols: this.options.protocols,\n        defaultProtocol: this.options.defaultProtocol,\n      })\n    ) {\n      // strip out the href\n      return ['a', mergeAttributes(this.options.HTMLAttributes, { ...HTMLAttributes, href: '' }), 0]\n    }\n\n    return ['a', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  markdownTokenName: 'link',\n\n  parseMarkdown: (token, helpers) => {\n    return helpers.applyMark('link', helpers.parseInline(token.tokens || []), {\n      href: token.href,\n      title: token.title || null,\n    })\n  },\n\n  renderMarkdown: (node, h) => {\n    const href = node.attrs?.href ?? ''\n    const title = node.attrs?.title ?? ''\n    const text = h.renderChildren(node)\n\n    return title ? `[${text}](${href} \"${title}\")` : `[${text}](${href})`\n  },\n\n  addCommands() {\n    return {\n      setLink:\n        attributes =>\n        ({ chain }) => {\n          const { href } = attributes\n\n          if (\n            !this.options.isAllowedUri(href, {\n              defaultValidate: url => !!isAllowedUri(url, this.options.protocols),\n              protocols: this.options.protocols,\n              defaultProtocol: this.options.defaultProtocol,\n            })\n          ) {\n            return false\n          }\n\n          return chain().setMark(this.name, attributes).setMeta('preventAutolink', true).run()\n        },\n\n      toggleLink:\n        attributes =>\n        ({ chain }) => {\n          const { href } = attributes || {}\n\n          if (\n            href &&\n            !this.options.isAllowedUri(href, {\n              defaultValidate: url => !!isAllowedUri(url, this.options.protocols),\n              protocols: this.options.protocols,\n              defaultProtocol: this.options.defaultProtocol,\n            })\n          ) {\n            return false\n          }\n\n          return chain()\n            .toggleMark(this.name, attributes, { extendEmptyMarkRange: true })\n            .setMeta('preventAutolink', true)\n            .run()\n        },\n\n      unsetLink:\n        () =>\n        ({ chain }) => {\n          return chain().unsetMark(this.name, { extendEmptyMarkRange: true }).setMeta('preventAutolink', true).run()\n        },\n    }\n  },\n\n  addPasteRules() {\n    return [\n      markPasteRule({\n        find: text => {\n          const foundLinks: PasteRuleMatch[] = []\n\n          if (text) {\n            const { protocols, defaultProtocol } = this.options\n            const links = find(text).filter(\n              item =>\n                item.isLink &&\n                this.options.isAllowedUri(item.value, {\n                  defaultValidate: href => !!isAllowedUri(href, protocols),\n                  protocols,\n                  defaultProtocol,\n                }),\n            )\n\n            if (links.length) {\n              links.forEach(link => {\n                if (!this.options.shouldAutoLink(link.value)) {\n                  return\n                }\n\n                foundLinks.push({\n                  text: link.value,\n                  data: {\n                    href: link.href,\n                  },\n                  index: link.start,\n                })\n              })\n            }\n          }\n\n          return foundLinks\n        },\n        type: this.type,\n        getAttributes: match => {\n          return {\n            href: match.data?.href,\n          }\n        },\n      }),\n    ]\n  },\n\n  addProseMirrorPlugins() {\n    const plugins: Plugin[] = []\n    const { protocols, defaultProtocol } = this.options\n\n    if (this.options.autolink) {\n      plugins.push(\n        autolink({\n          type: this.type,\n          defaultProtocol: this.options.defaultProtocol,\n          validate: url =>\n            this.options.isAllowedUri(url, {\n              defaultValidate: href => !!isAllowedUri(href, protocols),\n              protocols,\n              defaultProtocol,\n            }),\n          shouldAutoLink: this.options.shouldAutoLink,\n        }),\n      )\n    }\n\n    plugins.push(\n      clickHandler({\n        type: this.type,\n        editor: this.editor,\n        openOnClick: this.options.openOnClick === 'whenNotEditable' ? true : this.options.openOnClick,\n        enableClickSelection: this.options.enableClickSelection,\n      }),\n    )\n\n    if (this.options.linkOnPaste) {\n      plugins.push(\n        pasteHandler({\n          editor: this.editor,\n          defaultProtocol: this.options.defaultProtocol,\n          type: this.type,\n          shouldAutoLink: this.options.shouldAutoLink,\n        }),\n      )\n    }\n\n    return plugins\n  },\n})\n","import type { NodeWithPos } from '@tiptap/core'\nimport { combineTransactionSteps, findChildrenInRange, getChangedRanges, getMarksBetween } from '@tiptap/core'\nimport type { MarkType } from '@tiptap/pm/model'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\nimport type { MultiToken } from 'linkifyjs'\nimport { tokenize } from 'linkifyjs'\n\nimport { UNICODE_WHITESPACE_REGEX, UNICODE_WHITESPACE_REGEX_END } from './whitespace.js'\n\n/**\n * Check if the provided tokens form a valid link structure, which can either be a single link token\n * or a link token surrounded by parentheses or square brackets.\n *\n * This ensures that only complete and valid text is hyperlinked, preventing cases where a valid\n * top-level domain (TLD) is immediately followed by an invalid character, like a number. For\n * example, with the `find` method from Linkify, entering `example.com1` would result in\n * `example.com` being linked and the trailing `1` left as plain text. By using the `tokenize`\n * method, we can perform more comprehensive validation on the input text.\n */\nfunction isValidLinkStructure(tokens: Array<ReturnType<MultiToken['toObject']>>) {\n  if (tokens.length === 1) {\n    return tokens[0].isLink\n  }\n\n  if (tokens.length === 3 && tokens[1].isLink) {\n    return ['()', '[]'].includes(tokens[0].value + tokens[2].value)\n  }\n\n  return false\n}\n\ntype AutolinkOptions = {\n  type: MarkType\n  defaultProtocol: string\n  validate: (url: string) => boolean\n  shouldAutoLink: (url: string) => boolean\n}\n\n/**\n * This plugin allows you to automatically add links to your editor.\n * @param options The plugin options\n * @returns The plugin instance\n */\nexport function autolink(options: AutolinkOptions): Plugin {\n  return new Plugin({\n    key: new PluginKey('autolink'),\n    appendTransaction: (transactions, oldState, newState) => {\n      /**\n       * Does the transaction change the document?\n       */\n      const docChanges = transactions.some(transaction => transaction.docChanged) && !oldState.doc.eq(newState.doc)\n\n      /**\n       * Prevent autolink if the transaction is not a document change or if the transaction has the meta `preventAutolink`.\n       */\n      const preventAutolink = transactions.some(transaction => transaction.getMeta('preventAutolink'))\n\n      /**\n       * Prevent autolink if the transaction is not a document change\n       * or if the transaction has the meta `preventAutolink`.\n       */\n      if (!docChanges || preventAutolink) {\n        return\n      }\n\n      const { tr } = newState\n      const transform = combineTransactionSteps(oldState.doc, [...transactions])\n      const changes = getChangedRanges(transform)\n\n      changes.forEach(({ newRange }) => {\n        // Now lets see if we can add new links.\n        const nodesInChangedRanges = findChildrenInRange(newState.doc, newRange, node => node.isTextblock)\n\n        let textBlock: NodeWithPos | undefined\n        let textBeforeWhitespace: string | undefined\n\n        if (nodesInChangedRanges.length > 1) {\n          // Grab the first node within the changed ranges (ex. the first of two paragraphs when hitting enter).\n          textBlock = nodesInChangedRanges[0]\n          textBeforeWhitespace = newState.doc.textBetween(\n            textBlock.pos,\n            textBlock.pos + textBlock.node.nodeSize,\n            undefined,\n            ' ',\n          )\n        } else if (nodesInChangedRanges.length) {\n          const endText = newState.doc.textBetween(newRange.from, newRange.to, ' ', ' ')\n          if (!UNICODE_WHITESPACE_REGEX_END.test(endText)) {\n            return\n          }\n          textBlock = nodesInChangedRanges[0]\n          textBeforeWhitespace = newState.doc.textBetween(textBlock.pos, newRange.to, undefined, ' ')\n        }\n\n        if (textBlock && textBeforeWhitespace) {\n          const wordsBeforeWhitespace = textBeforeWhitespace.split(UNICODE_WHITESPACE_REGEX).filter(Boolean)\n\n          if (wordsBeforeWhitespace.length <= 0) {\n            return false\n          }\n\n          const lastWordBeforeSpace = wordsBeforeWhitespace[wordsBeforeWhitespace.length - 1]\n          const lastWordAndBlockOffset = textBlock.pos + textBeforeWhitespace.lastIndexOf(lastWordBeforeSpace)\n\n          if (!lastWordBeforeSpace) {\n            return false\n          }\n\n          const linksBeforeSpace = tokenize(lastWordBeforeSpace).map(t => t.toObject(options.defaultProtocol))\n\n          if (!isValidLinkStructure(linksBeforeSpace)) {\n            return false\n          }\n\n          linksBeforeSpace\n            .filter(link => link.isLink)\n            // Calculate link position.\n            .map(link => ({\n              ...link,\n              from: lastWordAndBlockOffset + link.start + 1,\n              to: lastWordAndBlockOffset + link.end + 1,\n            }))\n            // ignore link inside code mark\n            .filter(link => {\n              if (!newState.schema.marks.code) {\n                return true\n              }\n\n              return !newState.doc.rangeHasMark(link.from, link.to, newState.schema.marks.code)\n            })\n            // validate link\n            .filter(link => options.validate(link.value))\n            // check whether should autolink\n            .filter(link => options.shouldAutoLink(link.value))\n            // Add link mark.\n            .forEach(link => {\n              if (getMarksBetween(link.from, link.to, newState.doc).some(item => item.mark.type === options.type)) {\n                return\n              }\n\n              tr.addMark(\n                link.from,\n                link.to,\n                options.type.create({\n                  href: link.href,\n                }),\n              )\n            })\n        }\n      })\n\n      if (!tr.steps.length) {\n        return\n      }\n\n      return tr\n    },\n  })\n}\n","// From DOMPurify\n// https://github.com/cure53/DOMPurify/blob/main/src/regexp.ts\nexport const UNICODE_WHITESPACE_PATTERN = '[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]'\n\nexport const UNICODE_WHITESPACE_REGEX = new RegExp(UNICODE_WHITESPACE_PATTERN)\nexport const UNICODE_WHITESPACE_REGEX_END = new RegExp(`${UNICODE_WHITESPACE_PATTERN}$`)\nexport const UNICODE_WHITESPACE_REGEX_GLOBAL = new RegExp(UNICODE_WHITESPACE_PATTERN, 'g')\n","import type { Editor } from '@tiptap/core'\nimport { getAttributes } from '@tiptap/core'\nimport type { MarkType } from '@tiptap/pm/model'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\n\ntype ClickHandlerOptions = {\n  type: MarkType\n  editor: Editor\n  openOnClick?: boolean\n  enableClickSelection?: boolean\n}\n\nexport function clickHandler(options: ClickHandlerOptions): Plugin {\n  return new Plugin({\n    key: new PluginKey('handleClickLink'),\n    props: {\n      handleClick: (view, pos, event) => {\n        if (event.button !== 0) {\n          return false\n        }\n\n        if (!view.editable) {\n          return false\n        }\n\n        let link: HTMLAnchorElement | null = null\n\n        if (event.target instanceof HTMLAnchorElement) {\n          link = event.target\n        } else {\n          const target = event.target as HTMLElement | null\n          if (!target) {\n            return false\n          }\n\n          const root = options.editor.view.dom\n\n          // Tntentionally limit the lookup to the editor root.\n          // Using tag names like DIV as boundaries breaks with custom NodeViews,\n          link = target.closest<HTMLAnchorElement>('a')\n\n          if (link && !root.contains(link)) {\n            link = null\n          }\n        }\n\n        if (!link) {\n          return false\n        }\n\n        let handled = false\n\n        if (options.enableClickSelection) {\n          const commandResult = options.editor.commands.extendMarkRange(options.type.name)\n          handled = commandResult\n        }\n\n        if (options.openOnClick) {\n          const attrs = getAttributes(view.state, options.type.name)\n          const href = link.href ?? attrs.href\n          const target = link.target ?? attrs.target\n\n          if (href) {\n            window.open(href, target)\n            handled = true\n          }\n        }\n\n        return handled\n      },\n    },\n  })\n}\n","import type { Editor } from '@tiptap/core'\nimport type { MarkType } from '@tiptap/pm/model'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\nimport { find } from 'linkifyjs'\n\nimport type { LinkOptions } from '../link.js'\n\ntype PasteHandlerOptions = {\n  editor: Editor\n  defaultProtocol: string\n  type: MarkType\n  shouldAutoLink?: LinkOptions['shouldAutoLink']\n}\n\nexport function pasteHandler(options: PasteHandlerOptions): Plugin {\n  return new Plugin({\n    key: new PluginKey('handlePasteLink'),\n    props: {\n      handlePaste: (view, _event, slice) => {\n        const { shouldAutoLink } = options\n        const { state } = view\n        const { selection } = state\n        const { empty } = selection\n\n        if (empty) {\n          return false\n        }\n\n        let textContent = ''\n\n        slice.content.forEach(node => {\n          textContent += node.textContent\n        })\n\n        const link = find(textContent, { defaultProtocol: options.defaultProtocol }).find(\n          item => item.isLink && item.value === textContent,\n        )\n\n        if (!textContent || !link || (shouldAutoLink !== undefined && !shouldAutoLink(link.value))) {\n          return false\n        }\n\n        return options.editor.commands.setMark(options.type, {\n          href: link.href,\n        })\n      },\n    },\n  })\n}\n","import { Link } from './link.js'\n\nexport * from './link.js'\n\nexport default Link\n"],"names":["find","Plugin","PluginKey","Plugin","PluginKey","find"],"mappings":"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"}},
    {"offset": {"line": 16102, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/bullet-list/bullet-list.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/item/list-item.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/list-keymap.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/index.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/findListItemPos.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/getNextListDepth.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/handleBackspace.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/hasListBefore.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/hasListItemBefore.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/listItemHasSubList.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/handleDelete.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/nextListIsDeeper.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/nextListIsHigher.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/keymap/listHelpers/hasListItemAfter.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/kit/index.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/ordered-list/ordered-list.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/ordered-list/utils.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/task-item/task-item.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-list/src/task-list/task-list.ts"],"sourcesContent":["import { mergeAttributes, Node, wrappingInputRule } from '@tiptap/core'\n\nconst ListItemName = 'listItem'\nconst TextStyleName = 'textStyle'\n\nexport interface BulletListOptions {\n  /**\n   * The node name for the list items\n   * @default 'listItem'\n   * @example 'paragraph'\n   */\n  itemTypeName: string\n\n  /**\n   * HTML attributes to add to the bullet list element\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n\n  /**\n   * Keep the marks when splitting the list\n   * @default false\n   * @example true\n   */\n  keepMarks: boolean\n\n  /**\n   * Keep the attributes when splitting the list\n   * @default false\n   * @example true\n   */\n  keepAttributes: boolean\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    bulletList: {\n      /**\n       * Toggle a bullet list\n       */\n      toggleBulletList: () => ReturnType\n    }\n  }\n}\n\n/**\n * Matches a bullet list to a dash or asterisk.\n */\nexport const bulletListInputRegex = /^\\s*([-+*])\\s$/\n\n/**\n * This extension allows you to create bullet lists.\n * This requires the ListItem extension\n * @see https://tiptap.dev/api/nodes/bullet-list\n * @see https://tiptap.dev/api/nodes/list-item.\n */\nexport const BulletList = Node.create<BulletListOptions>({\n  name: 'bulletList',\n\n  addOptions() {\n    return {\n      itemTypeName: 'listItem',\n      HTMLAttributes: {},\n      keepMarks: false,\n      keepAttributes: false,\n    }\n  },\n\n  group: 'block list',\n\n  content() {\n    return `${this.options.itemTypeName}+`\n  },\n\n  parseHTML() {\n    return [{ tag: 'ul' }]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['ul', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  markdownTokenName: 'list',\n\n  parseMarkdown: (token, helpers) => {\n    if (token.type !== 'list' || (token as any).ordered) {\n      return []\n    }\n\n    return {\n      type: 'bulletList',\n      content: token.items ? helpers.parseChildren(token.items) : [],\n    }\n  },\n\n  renderMarkdown: (node, h) => {\n    if (!node.content) {\n      return ''\n    }\n\n    return h.renderChildren(node.content, '\\n')\n  },\n\n  markdownOptions: {\n    indentsContent: true,\n  },\n\n  addCommands() {\n    return {\n      toggleBulletList:\n        () =>\n        ({ commands, chain }) => {\n          if (this.options.keepAttributes) {\n            return chain()\n              .toggleList(this.name, this.options.itemTypeName, this.options.keepMarks)\n              .updateAttributes(ListItemName, this.editor.getAttributes(TextStyleName))\n              .run()\n          }\n          return commands.toggleList(this.name, this.options.itemTypeName, this.options.keepMarks)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Shift-8': () => this.editor.commands.toggleBulletList(),\n    }\n  },\n\n  addInputRules() {\n    let inputRule = wrappingInputRule({\n      find: bulletListInputRegex,\n      type: this.type,\n    })\n\n    if (this.options.keepMarks || this.options.keepAttributes) {\n      inputRule = wrappingInputRule({\n        find: bulletListInputRegex,\n        type: this.type,\n        keepMarks: this.options.keepMarks,\n        keepAttributes: this.options.keepAttributes,\n        getAttributes: () => {\n          return this.editor.getAttributes(TextStyleName)\n        },\n        editor: this.editor,\n      })\n    }\n    return [inputRule]\n  },\n})\n","import { mergeAttributes, Node, renderNestedMarkdownContent } from '@tiptap/core'\n\nexport interface ListItemOptions {\n  /**\n   * The HTML attributes for a list item node.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n\n  /**\n   * The node type for bulletList nodes\n   * @default 'bulletList'\n   * @example 'myCustomBulletList'\n   */\n  bulletListTypeName: string\n\n  /**\n   * The node type for orderedList nodes\n   * @default 'orderedList'\n   * @example 'myCustomOrderedList'\n   */\n  orderedListTypeName: string\n}\n\n/**\n * This extension allows you to create list items.\n * @see https://www.tiptap.dev/api/nodes/list-item\n */\nexport const ListItem = Node.create<ListItemOptions>({\n  name: 'listItem',\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n      bulletListTypeName: 'bulletList',\n      orderedListTypeName: 'orderedList',\n    }\n  },\n\n  content: 'paragraph block*',\n\n  defining: true,\n\n  parseHTML() {\n    return [\n      {\n        tag: 'li',\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['li', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  markdownTokenName: 'list_item',\n\n  parseMarkdown: (token, helpers) => {\n    if (token.type !== 'list_item') {\n      return []\n    }\n\n    let content: any[] = []\n\n    if (token.tokens && token.tokens.length > 0) {\n      // Check if we have paragraph tokens (complex list items)\n      const hasParagraphTokens = token.tokens.some(t => t.type === 'paragraph')\n\n      if (hasParagraphTokens) {\n        // If we have paragraph tokens, parse them as block elements\n        content = helpers.parseChildren(token.tokens)\n      } else {\n        // Check if the first token is a text token with nested inline tokens\n        const firstToken = token.tokens[0]\n\n        if (firstToken && firstToken.type === 'text' && firstToken.tokens && firstToken.tokens.length > 0) {\n          // Parse the inline content from the text token\n          const inlineContent = helpers.parseInline(firstToken.tokens)\n\n          // Start with the paragraph containing the inline content\n          content = [\n            {\n              type: 'paragraph',\n              content: inlineContent,\n            },\n          ]\n\n          // If there are additional tokens after the first text token (like nested lists),\n          // parse them as block elements and add them\n          if (token.tokens.length > 1) {\n            const remainingTokens = token.tokens.slice(1)\n            const additionalContent = helpers.parseChildren(remainingTokens)\n            content.push(...additionalContent)\n          }\n        } else {\n          // Fallback: parse all tokens as block elements\n          content = helpers.parseChildren(token.tokens)\n        }\n      }\n    }\n\n    // Ensure we always have at least an empty paragraph\n    if (content.length === 0) {\n      content = [\n        {\n          type: 'paragraph',\n          content: [],\n        },\n      ]\n    }\n\n    return {\n      type: 'listItem',\n      content,\n    }\n  },\n\n  renderMarkdown: (node, h, ctx) => {\n    return renderNestedMarkdownContent(\n      node,\n      h,\n      (context: any) => {\n        if (context.parentType === 'bulletList') {\n          return '- '\n        }\n        if (context.parentType === 'orderedList') {\n          const start = context.meta?.parentAttrs?.start || 1\n          return `${start + context.index}. `\n        }\n        // Fallback to bullet list for unknown parent types\n        return '- '\n      },\n      ctx,\n    )\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      Enter: () => this.editor.commands.splitListItem(this.name),\n      Tab: () => this.editor.commands.sinkListItem(this.name),\n      'Shift-Tab': () => this.editor.commands.liftListItem(this.name),\n    }\n  },\n})\n","import { Extension } from '@tiptap/core'\n\nimport { handleBackspace, handleDelete } from './listHelpers/index.js'\n\nexport type ListKeymapOptions = {\n  /**\n   * An array of list types. This is used for item and wrapper list matching.\n   * @default []\n   * @example [{ itemName: 'listItem', wrapperNames: ['bulletList', 'orderedList'] }]\n   */\n  listTypes: Array<{\n    itemName: string\n    wrapperNames: string[]\n  }>\n}\n\n/**\n * This extension registers custom keymaps to change the behaviour of the backspace and delete keys.\n * By default Prosemirror keyhandling will always lift or sink items so paragraphs are joined into\n * the adjacent or previous list item. This extension will prevent this behaviour and instead will\n * try to join paragraphs from two list items into a single list item.\n * @see https://www.tiptap.dev/api/extensions/list-keymap\n */\nexport const ListKeymap = Extension.create<ListKeymapOptions>({\n  name: 'listKeymap',\n\n  addOptions() {\n    return {\n      listTypes: [\n        {\n          itemName: 'listItem',\n          wrapperNames: ['bulletList', 'orderedList'],\n        },\n        {\n          itemName: 'taskItem',\n          wrapperNames: ['taskList'],\n        },\n      ],\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      Delete: ({ editor }) => {\n        let handled = false\n\n        this.options.listTypes.forEach(({ itemName }) => {\n          if (editor.state.schema.nodes[itemName] === undefined) {\n            return\n          }\n\n          if (handleDelete(editor, itemName)) {\n            handled = true\n          }\n        })\n\n        return handled\n      },\n      'Mod-Delete': ({ editor }) => {\n        let handled = false\n\n        this.options.listTypes.forEach(({ itemName }) => {\n          if (editor.state.schema.nodes[itemName] === undefined) {\n            return\n          }\n\n          if (handleDelete(editor, itemName)) {\n            handled = true\n          }\n        })\n\n        return handled\n      },\n      Backspace: ({ editor }) => {\n        let handled = false\n\n        this.options.listTypes.forEach(({ itemName, wrapperNames }) => {\n          if (editor.state.schema.nodes[itemName] === undefined) {\n            return\n          }\n\n          if (handleBackspace(editor, itemName, wrapperNames)) {\n            handled = true\n          }\n        })\n\n        return handled\n      },\n      'Mod-Backspace': ({ editor }) => {\n        let handled = false\n\n        this.options.listTypes.forEach(({ itemName, wrapperNames }) => {\n          if (editor.state.schema.nodes[itemName] === undefined) {\n            return\n          }\n\n          if (handleBackspace(editor, itemName, wrapperNames)) {\n            handled = true\n          }\n        })\n\n        return handled\n      },\n    }\n  },\n})\n","export * from './findListItemPos.js'\nexport * from './getNextListDepth.js'\nexport * from './handleBackspace.js'\nexport * from './handleDelete.js'\nexport * from './hasListBefore.js'\nexport * from './hasListItemAfter.js'\nexport * from './hasListItemBefore.js'\nexport * from './listItemHasSubList.js'\nexport * from './nextListIsDeeper.js'\nexport * from './nextListIsHigher.js'\n","import { getNodeType } from '@tiptap/core'\nimport type { NodeType } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\n\nexport const findListItemPos = (typeOrName: string | NodeType, state: EditorState) => {\n  const { $from } = state.selection\n  const nodeType = getNodeType(typeOrName, state.schema)\n\n  let currentNode = null\n  let currentDepth = $from.depth\n  let currentPos = $from.pos\n  let targetDepth: number | null = null\n\n  while (currentDepth > 0 && targetDepth === null) {\n    currentNode = $from.node(currentDepth)\n\n    if (currentNode.type === nodeType) {\n      targetDepth = currentDepth\n    } else {\n      currentDepth -= 1\n      currentPos -= 1\n    }\n  }\n\n  if (targetDepth === null) {\n    return null\n  }\n\n  return { $pos: state.doc.resolve(currentPos), depth: targetDepth }\n}\n","import { getNodeAtPosition } from '@tiptap/core'\nimport type { EditorState } from '@tiptap/pm/state'\n\nimport { findListItemPos } from './findListItemPos.js'\n\nexport const getNextListDepth = (typeOrName: string, state: EditorState) => {\n  const listItemPos = findListItemPos(typeOrName, state)\n\n  if (!listItemPos) {\n    return false\n  }\n\n  const [, depth] = getNodeAtPosition(state, typeOrName, listItemPos.$pos.pos + 4)\n\n  return depth\n}\n","import type { Editor } from '@tiptap/core'\nimport { isAtStartOfNode, isNodeActive } from '@tiptap/core'\nimport type { Node } from '@tiptap/pm/model'\n\nimport { findListItemPos } from './findListItemPos.js'\nimport { hasListBefore } from './hasListBefore.js'\nimport { hasListItemBefore } from './hasListItemBefore.js'\nimport { listItemHasSubList } from './listItemHasSubList.js'\n\nexport const handleBackspace = (editor: Editor, name: string, parentListTypes: string[]) => {\n  // this is required to still handle the undo handling\n  if (editor.commands.undoInputRule()) {\n    return true\n  }\n\n  // if the selection is not collapsed\n  // we can rely on the default backspace behavior\n  if (editor.state.selection.from !== editor.state.selection.to) {\n    return false\n  }\n\n  // if the current item is NOT inside a list item &\n  // the previous item is a list (orderedList or bulletList)\n  // move the cursor into the list and delete the current item\n  if (!isNodeActive(editor.state, name) && hasListBefore(editor.state, name, parentListTypes)) {\n    const { $anchor } = editor.state.selection\n\n    const $listPos = editor.state.doc.resolve($anchor.before() - 1)\n\n    const listDescendants: Array<{ node: Node; pos: number }> = []\n\n    $listPos.node().descendants((node, pos) => {\n      if (node.type.name === name) {\n        listDescendants.push({ node, pos })\n      }\n    })\n\n    const lastItem = listDescendants.at(-1)\n\n    if (!lastItem) {\n      return false\n    }\n\n    const $lastItemPos = editor.state.doc.resolve($listPos.start() + lastItem.pos + 1)\n\n    return editor\n      .chain()\n      .cut({ from: $anchor.start() - 1, to: $anchor.end() + 1 }, $lastItemPos.end())\n      .joinForward()\n      .run()\n  }\n\n  // if the cursor is not inside the current node type\n  // do nothing and proceed\n  if (!isNodeActive(editor.state, name)) {\n    return false\n  }\n\n  // if the cursor is not at the start of a node\n  // do nothing and proceed\n  if (!isAtStartOfNode(editor.state)) {\n    return false\n  }\n\n  const listItemPos = findListItemPos(name, editor.state)\n\n  if (!listItemPos) {\n    return false\n  }\n\n  const $prev = editor.state.doc.resolve(listItemPos.$pos.pos - 2)\n  const prevNode = $prev.node(listItemPos.depth)\n\n  const previousListItemHasSubList = listItemHasSubList(name, editor.state, prevNode)\n\n  // if the previous item is a list item and doesn't have a sublist, join the list items\n  if (hasListItemBefore(name, editor.state) && !previousListItemHasSubList) {\n    return editor.commands.joinItemBackward()\n  }\n\n  // otherwise in the end, a backspace should\n  // always just lift the list item if\n  // joining / merging is not possible\n  return editor.chain().liftListItem(name).run()\n}\n","import type { EditorState } from '@tiptap/pm/state'\n\nexport const hasListBefore = (editorState: EditorState, name: string, parentListTypes: string[]) => {\n  const { $anchor } = editorState.selection\n\n  const previousNodePos = Math.max(0, $anchor.pos - 2)\n\n  const previousNode = editorState.doc.resolve(previousNodePos).node()\n\n  if (!previousNode || !parentListTypes.includes(previousNode.type.name)) {\n    return false\n  }\n\n  return true\n}\n","import type { EditorState } from '@tiptap/pm/state'\n\nexport const hasListItemBefore = (typeOrName: string, state: EditorState): boolean => {\n  const { $anchor } = state.selection\n\n  const $targetPos = state.doc.resolve($anchor.pos - 2)\n\n  if ($targetPos.index() === 0) {\n    return false\n  }\n\n  if ($targetPos.nodeBefore?.type.name !== typeOrName) {\n    return false\n  }\n\n  return true\n}\n","import { getNodeType } from '@tiptap/core'\nimport type { Node } from '@tiptap/pm/model'\nimport type { EditorState } from '@tiptap/pm/state'\n\nexport const listItemHasSubList = (typeOrName: string, state: EditorState, node?: Node) => {\n  if (!node) {\n    return false\n  }\n\n  const nodeType = getNodeType(typeOrName, state.schema)\n\n  let hasSubList = false\n\n  node.descendants(child => {\n    if (child.type === nodeType) {\n      hasSubList = true\n    }\n  })\n\n  return hasSubList\n}\n","import type { Editor } from '@tiptap/core'\nimport { isAtEndOfNode, isNodeActive } from '@tiptap/core'\n\nimport { nextListIsDeeper } from './nextListIsDeeper.js'\nimport { nextListIsHigher } from './nextListIsHigher.js'\n\nexport const handleDelete = (editor: Editor, name: string) => {\n  // if the cursor is not inside the current node type\n  // do nothing and proceed\n  if (!isNodeActive(editor.state, name)) {\n    return false\n  }\n\n  // if the cursor is not at the end of a node\n  // do nothing and proceed\n  if (!isAtEndOfNode(editor.state, name)) {\n    return false\n  }\n\n  // if the selection is not collapsed, or not within a single node\n  // do nothing and proceed\n  const { selection } = editor.state\n  const { $from, $to } = selection\n\n  if (!selection.empty && $from.sameParent($to)) {\n    return false\n  }\n\n  // check if the next node is a list with a deeper depth\n  if (nextListIsDeeper(name, editor.state)) {\n    return editor\n      .chain()\n      .focus(editor.state.selection.from + 4)\n      .lift(name)\n      .joinBackward()\n      .run()\n  }\n\n  if (nextListIsHigher(name, editor.state)) {\n    return editor.chain().joinForward().joinBackward().run()\n  }\n\n  return editor.commands.joinItemForward()\n}\n","import type { EditorState } from '@tiptap/pm/state'\n\nimport { findListItemPos } from './findListItemPos.js'\nimport { getNextListDepth } from './getNextListDepth.js'\n\nexport const nextListIsDeeper = (typeOrName: string, state: EditorState) => {\n  const listDepth = getNextListDepth(typeOrName, state)\n  const listItemPos = findListItemPos(typeOrName, state)\n\n  if (!listItemPos || !listDepth) {\n    return false\n  }\n\n  if (listDepth > listItemPos.depth) {\n    return true\n  }\n\n  return false\n}\n","import type { EditorState } from '@tiptap/pm/state'\n\nimport { findListItemPos } from './findListItemPos.js'\nimport { getNextListDepth } from './getNextListDepth.js'\n\nexport const nextListIsHigher = (typeOrName: string, state: EditorState) => {\n  const listDepth = getNextListDepth(typeOrName, state)\n  const listItemPos = findListItemPos(typeOrName, state)\n\n  if (!listItemPos || !listDepth) {\n    return false\n  }\n\n  if (listDepth < listItemPos.depth) {\n    return true\n  }\n\n  return false\n}\n","import type { EditorState } from '@tiptap/pm/state'\n\nexport const hasListItemAfter = (typeOrName: string, state: EditorState): boolean => {\n  const { $anchor } = state.selection\n\n  const $targetPos = state.doc.resolve($anchor.pos - $anchor.parentOffset - 2)\n\n  if ($targetPos.index() === $targetPos.parent.childCount - 1) {\n    return false\n  }\n\n  if ($targetPos.nodeAfter?.type.name !== typeOrName) {\n    return false\n  }\n\n  return true\n}\n","import { Extension } from '@tiptap/core'\n\nimport type { BulletListOptions } from '../bullet-list/index.js'\nimport { BulletList } from '../bullet-list/index.js'\nimport type { ListItemOptions } from '../item/index.js'\nimport { ListItem } from '../item/index.js'\nimport type { ListKeymapOptions } from '../keymap/index.js'\nimport { ListKeymap } from '../keymap/index.js'\nimport type { OrderedListOptions } from '../ordered-list/index.js'\nimport { OrderedList } from '../ordered-list/index.js'\nimport type { TaskItemOptions } from '../task-item/index.js'\nimport { TaskItem } from '../task-item/index.js'\nimport type { TaskListOptions } from '../task-list/index.js'\nimport { TaskList } from '../task-list/index.js'\n\nexport interface ListKitOptions {\n  /**\n   * If set to false, the bulletList extension will not be registered\n   * @example table: false\n   */\n  bulletList: Partial<BulletListOptions> | false\n  /**\n   * If set to false, the listItem extension will not be registered\n   */\n  listItem: Partial<ListItemOptions> | false\n  /**\n   * If set to false, the listKeymap extension will not be registered\n   */\n  listKeymap: Partial<ListKeymapOptions> | false\n  /**\n   * If set to false, the orderedList extension will not be registered\n   */\n  orderedList: Partial<OrderedListOptions> | false\n  /**\n   * If set to false, the taskItem extension will not be registered\n   */\n  taskItem: Partial<TaskItemOptions> | false\n  /**\n   * If set to false, the taskList extension will not be registered\n   */\n  taskList: Partial<TaskListOptions> | false\n}\n\n/**\n * The table kit is a collection of table editor extensions.\n *\n * Its a good starting point for building your own table in Tiptap.\n */\nexport const ListKit = Extension.create<ListKitOptions>({\n  name: 'listKit',\n\n  addExtensions() {\n    const extensions = []\n\n    if (this.options.bulletList !== false) {\n      extensions.push(BulletList.configure(this.options.bulletList))\n    }\n\n    if (this.options.listItem !== false) {\n      extensions.push(ListItem.configure(this.options.listItem))\n    }\n\n    if (this.options.listKeymap !== false) {\n      extensions.push(ListKeymap.configure(this.options.listKeymap))\n    }\n\n    if (this.options.orderedList !== false) {\n      extensions.push(OrderedList.configure(this.options.orderedList))\n    }\n\n    if (this.options.taskItem !== false) {\n      extensions.push(TaskItem.configure(this.options.taskItem))\n    }\n\n    if (this.options.taskList !== false) {\n      extensions.push(TaskList.configure(this.options.taskList))\n    }\n\n    return extensions\n  },\n})\n","import { mergeAttributes, Node, wrappingInputRule } from '@tiptap/core'\n\nimport { buildNestedStructure, collectOrderedListItems, parseListItems } from './utils.js'\n\nconst ListItemName = 'listItem'\nconst TextStyleName = 'textStyle'\n\nexport interface OrderedListOptions {\n  /**\n   * The node type name for list items.\n   * @default 'listItem'\n   * @example 'myListItem'\n   */\n  itemTypeName: string\n\n  /**\n   * The HTML attributes for an ordered list node.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n\n  /**\n   * Keep the marks when splitting a list item.\n   * @default false\n   * @example true\n   */\n  keepMarks: boolean\n\n  /**\n   * Keep the attributes when splitting a list item.\n   * @default false\n   * @example true\n   */\n  keepAttributes: boolean\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    orderedList: {\n      /**\n       * Toggle an ordered list\n       * @example editor.commands.toggleOrderedList()\n       */\n      toggleOrderedList: () => ReturnType\n    }\n  }\n}\n\n/**\n * Matches an ordered list to a 1. on input (or any number followed by a dot).\n */\nexport const orderedListInputRegex = /^(\\d+)\\.\\s$/\n\n/**\n * This extension allows you to create ordered lists.\n * This requires the ListItem extension\n * @see https://www.tiptap.dev/api/nodes/ordered-list\n * @see https://www.tiptap.dev/api/nodes/list-item\n */\nexport const OrderedList = Node.create<OrderedListOptions>({\n  name: 'orderedList',\n\n  addOptions() {\n    return {\n      itemTypeName: 'listItem',\n      HTMLAttributes: {},\n      keepMarks: false,\n      keepAttributes: false,\n    }\n  },\n\n  group: 'block list',\n\n  content() {\n    return `${this.options.itemTypeName}+`\n  },\n\n  addAttributes() {\n    return {\n      start: {\n        default: 1,\n        parseHTML: element => {\n          return element.hasAttribute('start') ? parseInt(element.getAttribute('start') || '', 10) : 1\n        },\n      },\n      type: {\n        default: null,\n        parseHTML: element => element.getAttribute('type'),\n      },\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'ol',\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    const { start, ...attributesWithoutStart } = HTMLAttributes\n\n    return start === 1\n      ? ['ol', mergeAttributes(this.options.HTMLAttributes, attributesWithoutStart), 0]\n      : ['ol', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  markdownTokenName: 'list',\n\n  parseMarkdown: (token, helpers) => {\n    if (token.type !== 'list' || !token.ordered) {\n      return []\n    }\n\n    const startValue = token.start || 1\n    const content = token.items ? parseListItems(token.items, helpers) : []\n\n    if (startValue !== 1) {\n      return {\n        type: 'orderedList',\n        attrs: { start: startValue },\n        content,\n      }\n    }\n\n    return {\n      type: 'orderedList',\n      content,\n    }\n  },\n\n  renderMarkdown: (node, h) => {\n    if (!node.content) {\n      return ''\n    }\n\n    return h.renderChildren(node.content, '\\n')\n  },\n\n  markdownTokenizer: {\n    name: 'orderedList',\n    level: 'block',\n    start: (src: string) => {\n      const match = src.match(/^(\\s*)(\\d+)\\.\\s+/)\n      const index = match?.index\n      return index !== undefined ? index : -1\n    },\n    tokenize: (src: string, _tokens, lexer) => {\n      const lines = src.split('\\n')\n      const [listItems, consumed] = collectOrderedListItems(lines)\n\n      if (listItems.length === 0) {\n        return undefined\n      }\n\n      const items = buildNestedStructure(listItems, 0, lexer)\n\n      if (items.length === 0) {\n        return undefined\n      }\n\n      const startValue = listItems[0]?.number || 1\n\n      return {\n        type: 'list',\n        ordered: true,\n        start: startValue,\n        items,\n        raw: lines.slice(0, consumed).join('\\n'),\n      } as unknown as object\n    },\n  },\n\n  markdownOptions: {\n    indentsContent: true,\n  },\n\n  addCommands() {\n    return {\n      toggleOrderedList:\n        () =>\n        ({ commands, chain }) => {\n          if (this.options.keepAttributes) {\n            return chain()\n              .toggleList(this.name, this.options.itemTypeName, this.options.keepMarks)\n              .updateAttributes(ListItemName, this.editor.getAttributes(TextStyleName))\n              .run()\n          }\n          return commands.toggleList(this.name, this.options.itemTypeName, this.options.keepMarks)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Shift-7': () => this.editor.commands.toggleOrderedList(),\n    }\n  },\n\n  addInputRules() {\n    let inputRule = wrappingInputRule({\n      find: orderedListInputRegex,\n      type: this.type,\n      getAttributes: match => ({ start: +match[1] }),\n      joinPredicate: (match, node) => node.childCount + node.attrs.start === +match[1],\n    })\n\n    if (this.options.keepMarks || this.options.keepAttributes) {\n      inputRule = wrappingInputRule({\n        find: orderedListInputRegex,\n        type: this.type,\n        keepMarks: this.options.keepMarks,\n        keepAttributes: this.options.keepAttributes,\n        getAttributes: match => ({ start: +match[1], ...this.editor.getAttributes(TextStyleName) }),\n        joinPredicate: (match, node) => node.childCount + node.attrs.start === +match[1],\n        editor: this.editor,\n      })\n    }\n    return [inputRule]\n  },\n})\n","import type { JSONContent, MarkdownLexerConfiguration, MarkdownParseHelpers, MarkdownToken } from '@tiptap/core'\n\n/**\n * Matches an ordered list item line with optional leading whitespace.\n * Captures: (1) indentation spaces, (2) item number, (3) content after marker\n * Example matches: \"1. Item\", \"  2. Nested item\", \"    3. Deeply nested\"\n */\nconst ORDERED_LIST_ITEM_REGEX = /^(\\s*)(\\d+)\\.\\s+(.*)$/\n\n/**\n * Matches any line that starts with whitespace (indented content).\n * Used to identify continuation content that belongs to a list item.\n */\nconst INDENTED_LINE_REGEX = /^\\s/\n\n/**\n * Represents a parsed ordered list item with indentation information\n */\nexport interface OrderedListItem {\n  indent: number\n  number: number\n  content: string\n  raw: string\n}\n\n/**\n * Collects all ordered list items from lines, parsing them into a flat array\n * with indentation information. Stops collecting continuation content when\n * encountering nested list items, allowing them to be processed separately.\n *\n * @param lines - Array of source lines to parse\n * @returns Tuple of [listItems array, number of lines consumed]\n */\nexport function collectOrderedListItems(lines: string[]): [OrderedListItem[], number] {\n  const listItems: OrderedListItem[] = []\n  let currentLineIndex = 0\n  let consumed = 0\n\n  while (currentLineIndex < lines.length) {\n    const line = lines[currentLineIndex]\n    const match = line.match(ORDERED_LIST_ITEM_REGEX)\n\n    if (!match) {\n      break\n    }\n\n    const [, indent, number, content] = match\n    const indentLevel = indent.length\n    let itemContent = content\n    let nextLineIndex = currentLineIndex + 1\n    const itemLines = [line]\n\n    // Collect continuation lines for this item (but NOT nested list items)\n    while (nextLineIndex < lines.length) {\n      const nextLine = lines[nextLineIndex]\n      const nextMatch = nextLine.match(ORDERED_LIST_ITEM_REGEX)\n\n      // If it's another list item (nested or not), stop collecting\n      if (nextMatch) {\n        break\n      }\n\n      // Check for continuation content (non-list content)\n      if (nextLine.trim() === '') {\n        // Empty line\n        itemLines.push(nextLine)\n        itemContent += '\\n'\n        nextLineIndex += 1\n      } else if (nextLine.match(INDENTED_LINE_REGEX)) {\n        // Indented content - part of this item (but not a list item)\n        itemLines.push(nextLine)\n        itemContent += `\\n${nextLine.slice(indentLevel + 2)}` // Remove list marker indent\n        nextLineIndex += 1\n      } else {\n        // Non-indented line means end of list\n        break\n      }\n    }\n\n    listItems.push({\n      indent: indentLevel,\n      number: parseInt(number, 10),\n      content: itemContent.trim(),\n      raw: itemLines.join('\\n'),\n    })\n\n    consumed = nextLineIndex\n    currentLineIndex = nextLineIndex\n  }\n\n  return [listItems, consumed]\n}\n\n/**\n * Recursively builds a nested structure from a flat array of list items\n * based on their indentation levels. Creates proper markdown tokens with\n * nested lists where appropriate.\n *\n * @param items - Flat array of list items with indentation info\n * @param baseIndent - The indentation level to process at this recursion level\n * @param lexer - Markdown lexer for parsing inline and block content\n * @returns Array of list_item tokens with proper nesting\n */\nexport function buildNestedStructure(\n  items: OrderedListItem[],\n  baseIndent: number,\n  lexer: MarkdownLexerConfiguration,\n): unknown[] {\n  const result: unknown[] = []\n  let currentIndex = 0\n\n  while (currentIndex < items.length) {\n    const item = items[currentIndex]\n\n    if (item.indent === baseIndent) {\n      // This item belongs at the current level\n      const contentLines = item.content.split('\\n')\n      const mainText = contentLines[0]?.trim() || ''\n\n      const tokens = []\n\n      // Always wrap the main text in a paragraph token\n      if (mainText) {\n        tokens.push({\n          type: 'paragraph',\n          raw: mainText,\n          tokens: lexer.inlineTokens(mainText),\n        })\n      }\n\n      // Handle additional content after the main text\n      const additionalContent = contentLines.slice(1).join('\\n').trim()\n      if (additionalContent) {\n        // Parse as block tokens (handles mixed unordered lists, etc.)\n        const blockTokens = lexer.blockTokens(additionalContent)\n        tokens.push(...blockTokens)\n      }\n\n      // Look ahead to find nested items at deeper indent levels\n      let lookAheadIndex = currentIndex + 1\n      const nestedItems = []\n\n      while (lookAheadIndex < items.length && items[lookAheadIndex].indent > baseIndent) {\n        nestedItems.push(items[lookAheadIndex])\n        lookAheadIndex += 1\n      }\n\n      // If we have nested items, recursively build their structure\n      if (nestedItems.length > 0) {\n        // Find the next indent level (immediate children)\n        const nextIndent = Math.min(...nestedItems.map(nestedItem => nestedItem.indent))\n\n        // Build the nested list recursively with all nested items\n        // The recursive call will handle further nesting\n        const nestedListItems = buildNestedStructure(nestedItems, nextIndent, lexer)\n\n        // Create a nested list token\n        tokens.push({\n          type: 'list',\n          ordered: true,\n          start: nestedItems[0].number,\n          items: nestedListItems,\n          raw: nestedItems.map(nestedItem => nestedItem.raw).join('\\n'),\n        })\n      }\n\n      result.push({\n        type: 'list_item',\n        raw: item.raw,\n        tokens,\n      })\n\n      // Skip the nested items we just processed\n      currentIndex = lookAheadIndex\n    } else {\n      // This item has deeper indent than we're currently processing\n      // It should be handled by a recursive call\n      currentIndex += 1\n    }\n  }\n\n  return result\n}\n\n/**\n * Parses markdown list item tokens into Tiptap JSONContent structure,\n * ensuring text content is properly wrapped in paragraph nodes.\n *\n * @param items - Array of markdown tokens representing list items\n * @param helpers - Markdown parse helpers for recursive parsing\n * @returns Array of listItem JSONContent nodes\n */\nexport function parseListItems(items: MarkdownToken[], helpers: MarkdownParseHelpers): JSONContent[] {\n  return items.map(item => {\n    if (item.type !== 'list_item') {\n      return helpers.parseChildren([item])[0]\n    }\n\n    // Parse the tokens within the list item\n    const content: JSONContent[] = []\n\n    if (item.tokens && item.tokens.length > 0) {\n      item.tokens.forEach(itemToken => {\n        // If it's already a proper block node (paragraph, list, etc.), parse it directly\n        if (\n          itemToken.type === 'paragraph' ||\n          itemToken.type === 'list' ||\n          itemToken.type === 'blockquote' ||\n          itemToken.type === 'code'\n        ) {\n          content.push(...helpers.parseChildren([itemToken]))\n        } else if (itemToken.type === 'text' && itemToken.tokens) {\n          // If it's inline text tokens, wrap them in a paragraph\n          const inlineContent = helpers.parseChildren([itemToken])\n          content.push({\n            type: 'paragraph',\n            content: inlineContent,\n          })\n        } else {\n          // For any other content, try to parse it\n          const parsed = helpers.parseChildren([itemToken])\n          if (parsed.length > 0) {\n            content.push(...parsed)\n          }\n        }\n      })\n    }\n\n    return {\n      type: 'listItem',\n      content,\n    }\n  })\n}\n","import type { KeyboardShortcutCommand } from '@tiptap/core'\nimport {\n  getRenderedAttributes,\n  mergeAttributes,\n  Node,\n  renderNestedMarkdownContent,\n  wrappingInputRule,\n} from '@tiptap/core'\nimport type { Node as ProseMirrorNode } from '@tiptap/pm/model'\n\nexport interface TaskItemOptions {\n  /**\n   * A callback function that is called when the checkbox is clicked while the editor is in readonly mode.\n   * @param node The prosemirror node of the task item\n   * @param checked The new checked state\n   * @returns boolean\n   */\n  onReadOnlyChecked?: (node: ProseMirrorNode, checked: boolean) => boolean\n\n  /**\n   * Controls whether the task items can be nested or not.\n   * @default false\n   * @example true\n   */\n  nested: boolean\n\n  /**\n   * HTML attributes to add to the task item element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n\n  /**\n   * The node type for taskList nodes\n   * @default 'taskList'\n   * @example 'myCustomTaskList'\n   */\n  taskListTypeName: string\n\n  /**\n   * Accessibility options for the task item.\n   * @default {}\n   * @example\n   * ```js\n   * {\n   *   checkboxLabel: (node) => `Task item: ${node.textContent || 'empty task item'}`\n   * }\n   */\n  a11y?: {\n    checkboxLabel?: (node: ProseMirrorNode, checked: boolean) => string\n  }\n}\n\n/**\n * Matches a task item to a - [ ] on input.\n */\nexport const inputRegex = /^\\s*(\\[([( |x])?\\])\\s$/\n\n/**\n * This extension allows you to create task items.\n * @see https://www.tiptap.dev/api/nodes/task-item\n */\nexport const TaskItem = Node.create<TaskItemOptions>({\n  name: 'taskItem',\n\n  addOptions() {\n    return {\n      nested: false,\n      HTMLAttributes: {},\n      taskListTypeName: 'taskList',\n      a11y: undefined,\n    }\n  },\n\n  content() {\n    return this.options.nested ? 'paragraph block*' : 'paragraph+'\n  },\n\n  defining: true,\n\n  addAttributes() {\n    return {\n      checked: {\n        default: false,\n        keepOnSplit: false,\n        parseHTML: element => {\n          const dataChecked = element.getAttribute('data-checked')\n\n          return dataChecked === '' || dataChecked === 'true'\n        },\n        renderHTML: attributes => ({\n          'data-checked': attributes.checked,\n        }),\n      },\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: `li[data-type=\"${this.name}\"]`,\n        priority: 51,\n      },\n    ]\n  },\n\n  renderHTML({ node, HTMLAttributes }) {\n    return [\n      'li',\n      mergeAttributes(this.options.HTMLAttributes, HTMLAttributes, {\n        'data-type': this.name,\n      }),\n      [\n        'label',\n        [\n          'input',\n          {\n            type: 'checkbox',\n            checked: node.attrs.checked ? 'checked' : null,\n          },\n        ],\n        ['span'],\n      ],\n      ['div', 0],\n    ]\n  },\n\n  parseMarkdown: (token, h) => {\n    // Parse the task item's text content into paragraph content\n    const content = []\n\n    // First, add the main paragraph content\n    if (token.tokens && token.tokens.length > 0) {\n      // If we have tokens, create a paragraph with the inline content\n      content.push(h.createNode('paragraph', {}, h.parseInline(token.tokens)))\n    } else if (token.text) {\n      // If we have raw text, create a paragraph with text node\n      content.push(h.createNode('paragraph', {}, [h.createNode('text', { text: token.text })]))\n    } else {\n      // Fallback: empty paragraph\n      content.push(h.createNode('paragraph', {}, []))\n    }\n\n    // Then, add any nested content (like nested task lists)\n    if (token.nestedTokens && token.nestedTokens.length > 0) {\n      const nestedContent = h.parseChildren(token.nestedTokens)\n      content.push(...nestedContent)\n    }\n\n    return h.createNode('taskItem', { checked: token.checked || false }, content)\n  },\n\n  renderMarkdown: (node, h) => {\n    const checkedChar = node.attrs?.checked ? 'x' : ' '\n    const prefix = `- [${checkedChar}] `\n\n    return renderNestedMarkdownContent(node, h, prefix)\n  },\n\n  addKeyboardShortcuts() {\n    const shortcuts: {\n      [key: string]: KeyboardShortcutCommand\n    } = {\n      Enter: () => this.editor.commands.splitListItem(this.name),\n      'Shift-Tab': () => this.editor.commands.liftListItem(this.name),\n    }\n\n    if (!this.options.nested) {\n      return shortcuts\n    }\n\n    return {\n      ...shortcuts,\n      Tab: () => this.editor.commands.sinkListItem(this.name),\n    }\n  },\n\n  addNodeView() {\n    return ({ node, HTMLAttributes, getPos, editor }) => {\n      const listItem = document.createElement('li')\n      const checkboxWrapper = document.createElement('label')\n      const checkboxStyler = document.createElement('span')\n      const checkbox = document.createElement('input')\n      const content = document.createElement('div')\n\n      const updateA11Y = (currentNode: ProseMirrorNode) => {\n        checkbox.ariaLabel =\n          this.options.a11y?.checkboxLabel?.(currentNode, checkbox.checked) ||\n          `Task item checkbox for ${currentNode.textContent || 'empty task item'}`\n      }\n\n      updateA11Y(node)\n\n      checkboxWrapper.contentEditable = 'false'\n      checkbox.type = 'checkbox'\n      checkbox.addEventListener('mousedown', event => event.preventDefault())\n      checkbox.addEventListener('change', event => {\n        // if the editor isnt editable and we don't have a handler for\n        // readonly checks we have to undo the latest change\n        if (!editor.isEditable && !this.options.onReadOnlyChecked) {\n          checkbox.checked = !checkbox.checked\n\n          return\n        }\n\n        const { checked } = event.target as any\n\n        if (editor.isEditable && typeof getPos === 'function') {\n          editor\n            .chain()\n            .focus(undefined, { scrollIntoView: false })\n            .command(({ tr }) => {\n              const position = getPos()\n\n              if (typeof position !== 'number') {\n                return false\n              }\n              const currentNode = tr.doc.nodeAt(position)\n\n              tr.setNodeMarkup(position, undefined, {\n                ...currentNode?.attrs,\n                checked,\n              })\n\n              return true\n            })\n            .run()\n        }\n        if (!editor.isEditable && this.options.onReadOnlyChecked) {\n          // Reset state if onReadOnlyChecked returns false\n          if (!this.options.onReadOnlyChecked(node, checked)) {\n            checkbox.checked = !checkbox.checked\n          }\n        }\n      })\n\n      Object.entries(this.options.HTMLAttributes).forEach(([key, value]) => {\n        listItem.setAttribute(key, value)\n      })\n\n      listItem.dataset.checked = node.attrs.checked\n      checkbox.checked = node.attrs.checked\n\n      checkboxWrapper.append(checkbox, checkboxStyler)\n      listItem.append(checkboxWrapper, content)\n\n      Object.entries(HTMLAttributes).forEach(([key, value]) => {\n        listItem.setAttribute(key, value)\n      })\n\n      // Track the keys of previously rendered HTML attributes for proper removal\n      let prevRenderedAttributeKeys = new Set(Object.keys(HTMLAttributes))\n\n      return {\n        dom: listItem,\n        contentDOM: content,\n        update: updatedNode => {\n          if (updatedNode.type !== this.type) {\n            return false\n          }\n\n          listItem.dataset.checked = updatedNode.attrs.checked\n          checkbox.checked = updatedNode.attrs.checked\n          updateA11Y(updatedNode)\n\n          // Sync all HTML attributes from the updated node\n          const extensionAttributes = editor.extensionManager.attributes\n          const newHTMLAttributes = getRenderedAttributes(updatedNode, extensionAttributes)\n          const newKeys = new Set(Object.keys(newHTMLAttributes))\n\n          // Remove attributes that were previously rendered but are no longer present\n          // If the attribute exists in static options, restore it instead of removing\n          const staticAttrs = this.options.HTMLAttributes\n\n          prevRenderedAttributeKeys.forEach(key => {\n            if (!newKeys.has(key)) {\n              if (key in staticAttrs) {\n                listItem.setAttribute(key, staticAttrs[key])\n              } else {\n                listItem.removeAttribute(key)\n              }\n            }\n          })\n\n          // Update or add new attributes\n          Object.entries(newHTMLAttributes).forEach(([key, value]) => {\n            if (value === null || value === undefined) {\n              // If the attribute exists in static options, restore it instead of removing\n              if (key in staticAttrs) {\n                listItem.setAttribute(key, staticAttrs[key])\n              } else {\n                listItem.removeAttribute(key)\n              }\n            } else {\n              listItem.setAttribute(key, value)\n            }\n          })\n\n          // Update the tracked keys for next update\n          prevRenderedAttributeKeys = newKeys\n\n          return true\n        },\n      }\n    }\n  },\n\n  addInputRules() {\n    return [\n      wrappingInputRule({\n        find: inputRegex,\n        type: this.type,\n        getAttributes: match => ({\n          checked: match[match.length - 1] === 'x',\n        }),\n      }),\n    ]\n  },\n})\n","import { mergeAttributes, Node, parseIndentedBlocks } from '@tiptap/core'\n\nexport interface TaskListOptions {\n  /**\n   * The node type name for a task item.\n   * @default 'taskItem'\n   * @example 'myCustomTaskItem'\n   */\n  itemTypeName: string\n\n  /**\n   * The HTML attributes for a task list node.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    taskList: {\n      /**\n       * Toggle a task list\n       * @example editor.commands.toggleTaskList()\n       */\n      toggleTaskList: () => ReturnType\n    }\n  }\n}\n\n/**\n * This extension allows you to create task lists.\n * @see https://www.tiptap.dev/api/nodes/task-list\n */\nexport const TaskList = Node.create<TaskListOptions>({\n  name: 'taskList',\n\n  addOptions() {\n    return {\n      itemTypeName: 'taskItem',\n      HTMLAttributes: {},\n    }\n  },\n\n  group: 'block list',\n\n  content() {\n    return `${this.options.itemTypeName}+`\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: `ul[data-type=\"${this.name}\"]`,\n        priority: 51,\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['ul', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes, { 'data-type': this.name }), 0]\n  },\n\n  parseMarkdown: (token, h) => {\n    return h.createNode('taskList', {}, h.parseChildren(token.items || []))\n  },\n\n  renderMarkdown: (node, h) => {\n    if (!node.content) {\n      return ''\n    }\n\n    return h.renderChildren(node.content, '\\n')\n  },\n\n  markdownTokenizer: {\n    name: 'taskList',\n    level: 'block',\n    start(src) {\n      // Look for the start of a task list item\n      const index = src.match(/^\\s*[-+*]\\s+\\[([ xX])\\]\\s+/)?.index\n      return index !== undefined ? index : -1\n    },\n    tokenize(src, tokens, lexer) {\n      // Helper function to recursively parse task lists\n      const parseTaskListContent = (content: string): any[] | undefined => {\n        const nestedResult = parseIndentedBlocks(\n          content,\n          {\n            itemPattern: /^(\\s*)([-+*])\\s+\\[([ xX])\\]\\s+(.*)$/,\n            extractItemData: match => ({\n              indentLevel: match[1].length,\n              mainContent: match[4],\n              checked: match[3].toLowerCase() === 'x',\n            }),\n            createToken: (data, nestedTokens) => ({\n              type: 'taskItem',\n              raw: '',\n              mainContent: data.mainContent,\n              indentLevel: data.indentLevel,\n              checked: data.checked,\n              text: data.mainContent,\n              tokens: lexer.inlineTokens(data.mainContent),\n              nestedTokens,\n            }),\n            // Allow recursive nesting\n            customNestedParser: parseTaskListContent,\n          },\n          lexer,\n        )\n\n        if (nestedResult) {\n          // Return as task list token\n          return [\n            {\n              type: 'taskList',\n              raw: nestedResult.raw,\n              items: nestedResult.items,\n            },\n          ]\n        }\n\n        // Fall back to regular markdown parsing if not a task list\n        return lexer.blockTokens(content)\n      }\n\n      const result = parseIndentedBlocks(\n        src,\n        {\n          itemPattern: /^(\\s*)([-+*])\\s+\\[([ xX])\\]\\s+(.*)$/,\n          extractItemData: match => ({\n            indentLevel: match[1].length,\n            mainContent: match[4],\n            checked: match[3].toLowerCase() === 'x',\n          }),\n          createToken: (data, nestedTokens) => ({\n            type: 'taskItem',\n            raw: '',\n            mainContent: data.mainContent,\n            indentLevel: data.indentLevel,\n            checked: data.checked,\n            text: data.mainContent,\n            tokens: lexer.inlineTokens(data.mainContent),\n            nestedTokens,\n          }),\n          // Use the recursive parser for nested content\n          customNestedParser: parseTaskListContent,\n        },\n        lexer,\n      )\n\n      if (!result) {\n        return undefined\n      }\n\n      return {\n        type: 'taskList',\n        raw: result.raw,\n        items: result.items,\n      }\n    },\n  },\n\n  markdownOptions: {\n    indentsContent: true,\n  },\n\n  addCommands() {\n    return {\n      toggleTaskList:\n        () =>\n        ({ commands }) => {\n          return commands.toggleList(this.name, this.options.itemTypeName)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Shift-9': () => this.editor.commands.toggleTaskList(),\n    }\n  },\n})\n"],"names":["mergeAttributes","Node","getNodeType","isNodeActive","isNodeActive","Extension","mergeAttributes","Node","wrappingInputRule","ListItemName","TextStyleName","Node","mergeAttributes","wrappingInputRule","mergeAttributes","Node","renderNestedMarkdownContent","wrappingInputRule","mergeAttributes","Node","Extension"],"mappings":"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"}},
    {"offset": {"line": 17247, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-paragraph/src/paragraph.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-paragraph/src/index.ts"],"sourcesContent":["import { mergeAttributes, Node } from '@tiptap/core'\n\nexport interface ParagraphOptions {\n  /**\n   * The HTML attributes for a paragraph node.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    paragraph: {\n      /**\n       * Toggle a paragraph\n       * @example editor.commands.toggleParagraph()\n       */\n      setParagraph: () => ReturnType\n    }\n  }\n}\n\n/**\n * Markdown marker for empty paragraphs to preserve blank lines.\n * Using &nbsp; (non-breaking space HTML entity) ensures the paragraph\n * is not collapsed by markdown parsers while remaining human-readable.\n */\nconst EMPTY_PARAGRAPH_MARKDOWN = '&nbsp;'\n\n/**\n * Unicode character for non-breaking space (U+00A0).\n * Some markdown parsers may convert &nbsp; entities to this literal character.\n */\nconst NBSP_CHAR = '\\u00A0'\n\n/**\n * This extension allows you to create paragraphs.\n * @see https://www.tiptap.dev/api/nodes/paragraph\n */\nexport const Paragraph = Node.create<ParagraphOptions>({\n  name: 'paragraph',\n\n  priority: 1000,\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n    }\n  },\n\n  group: 'block',\n\n  content: 'inline*',\n\n  parseHTML() {\n    return [{ tag: 'p' }]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['p', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  parseMarkdown: (token, helpers) => {\n    const tokens = token.tokens || []\n\n    // Special case: if paragraph contains only a single image token,\n    // unwrap it to avoid nesting block elements incorrectly\n    if (tokens.length === 1 && tokens[0].type === 'image') {\n      // Parse the image token directly as a block element\n      return helpers.parseChildren([tokens[0]])\n    }\n\n    // Parse the inline tokens\n    const content = helpers.parseInline(tokens)\n\n    // Special case: if paragraph contains only &nbsp; (non-breaking space),\n    // treat it as an empty paragraph to preserve blank lines\n    if (\n      content.length === 1 &&\n      content[0].type === 'text' &&\n      (content[0].text === EMPTY_PARAGRAPH_MARKDOWN || content[0].text === NBSP_CHAR)\n    ) {\n      return helpers.createNode('paragraph', undefined, [])\n    }\n\n    // Convert 'paragraph' token to paragraph node\n    return helpers.createNode('paragraph', undefined, content)\n  },\n\n  renderMarkdown: (node, h) => {\n    if (!node) {\n      return ''\n    }\n\n    // Normalize content: treat undefined/null as empty array\n    const content = Array.isArray(node.content) ? node.content : []\n\n    // If the paragraph is empty, render a non-breaking space to preserve blank lines\n    if (content.length === 0) {\n      return EMPTY_PARAGRAPH_MARKDOWN\n    }\n\n    return h.renderChildren(content)\n  },\n\n  addCommands() {\n    return {\n      setParagraph:\n        () =>\n        ({ commands }) => {\n          return commands.setNode(this.name)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Alt-0': () => this.editor.commands.setParagraph(),\n    }\n  },\n})\n","import { Paragraph } from './paragraph.js'\n\nexport * from './paragraph.js'\n\nexport default Paragraph\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,iBAAiB,YAAY;;AA4BtC,IAAM,2BAA2B;AAMjC,IAAM,YAAY;AAMX,IAAM,YAAY,sKAAA,CAAK,MAAA,CAAyB;IACrD,MAAM;IAEN,UAAU;IAEV,aAAa;QACX,OAAO;YACL,gBAAgB,CAAC;QACnB;IACF;IAEA,OAAO;IAEP,SAAS;IAET,YAAY;QACV,OAAO;YAAC;gBAAE,KAAK;YAAI,CAAC;SAAA;IACtB;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OAAO;YAAC;gBAAK,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc;YAAG,CAAC;SAAA;IAC9E;IAEA,eAAe,CAAC,OAAO,YAAY;QACjC,MAAM,SAAS,MAAM,MAAA,IAAU,CAAC,CAAA;QAIhC,IAAI,OAAO,MAAA,KAAW,KAAK,MAAA,CAAO,CAAC,CAAA,CAAE,IAAA,KAAS,SAAS;YAErD,OAAO,QAAQ,aAAA,CAAc;gBAAC,MAAA,CAAO,CAAC,CAAC;aAAC;QAC1C;QAGA,MAAM,UAAU,QAAQ,WAAA,CAAY,MAAM;QAI1C,IACE,QAAQ,MAAA,KAAW,KACnB,OAAA,CAAQ,CAAC,CAAA,CAAE,IAAA,KAAS,UAAA,CACnB,OAAA,CAAQ,CAAC,CAAA,CAAE,IAAA,KAAS,4BAA4B,OAAA,CAAQ,CAAC,CAAA,CAAE,IAAA,KAAS,SAAA,GACrE;YACA,OAAO,QAAQ,UAAA,CAAW,aAAa,KAAA,GAAW,CAAC,CAAC;QACtD;QAGA,OAAO,QAAQ,UAAA,CAAW,aAAa,KAAA,GAAW,OAAO;IAC3D;IAEA,gBAAgB,CAAC,MAAM,MAAM;QAC3B,IAAI,CAAC,MAAM;YACT,OAAO;QACT;QAGA,MAAM,UAAU,MAAM,OAAA,CAAQ,KAAK,OAAO,IAAI,KAAK,OAAA,GAAU,CAAC,CAAA;QAG9D,IAAI,QAAQ,MAAA,KAAW,GAAG;YACxB,OAAO;QACT;QAEA,OAAO,EAAE,cAAA,CAAe,OAAO;IACjC;IAEA,cAAc;QACZ,OAAO;YACL,cACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,OAAA,CAAQ,IAAA,CAAK,IAAI;gBACnC;QACJ;IACF;IAEA,uBAAuB;QACrB,OAAO;YACL,aAAa,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,YAAA,CAAa;QACvD;IACF;AACF,CAAC;;ACrHD,IAAO,gBAAQ"}},
    {"offset": {"line": 17326, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-strike/src/strike.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-strike/src/index.ts"],"sourcesContent":["import { Mark, markInputRule, markPasteRule, mergeAttributes } from '@tiptap/core'\n\nexport interface StrikeOptions {\n  /**\n   * HTML attributes to add to the strike element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    strike: {\n      /**\n       * Set a strike mark\n       * @example editor.commands.setStrike()\n       */\n      setStrike: () => ReturnType\n      /**\n       * Toggle a strike mark\n       * @example editor.commands.toggleStrike()\n       */\n      toggleStrike: () => ReturnType\n      /**\n       * Unset a strike mark\n       * @example editor.commands.unsetStrike()\n       */\n      unsetStrike: () => ReturnType\n    }\n  }\n}\n\n/**\n * Matches a strike to a ~~strike~~ on input.\n */\nexport const inputRegex = /(?:^|\\s)(~~(?!\\s+~~)((?:[^~]+))~~(?!\\s+~~))$/\n\n/**\n * Matches a strike to a ~~strike~~ on paste.\n */\nexport const pasteRegex = /(?:^|\\s)(~~(?!\\s+~~)((?:[^~]+))~~(?!\\s+~~))/g\n\n/**\n * This extension allows you to create strike text.\n * @see https://www.tiptap.dev/api/marks/strike\n */\nexport const Strike = Mark.create<StrikeOptions>({\n  name: 'strike',\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 's',\n      },\n      {\n        tag: 'del',\n      },\n      {\n        tag: 'strike',\n      },\n      {\n        style: 'text-decoration',\n        consuming: false,\n        getAttrs: style => ((style as string).includes('line-through') ? {} : false),\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['s', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  markdownTokenName: 'del',\n\n  parseMarkdown: (token, helpers) => {\n    // Convert 'del' token to strike mark\n    return helpers.applyMark('strike', helpers.parseInline(token.tokens || []))\n  },\n\n  renderMarkdown: (node, h) => {\n    return `~~${h.renderChildren(node)}~~`\n  },\n\n  addCommands() {\n    return {\n      setStrike:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(this.name)\n        },\n      toggleStrike:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(this.name)\n        },\n      unsetStrike:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(this.name)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-Shift-s': () => this.editor.commands.toggleStrike(),\n    }\n  },\n\n  addInputRules() {\n    return [\n      markInputRule({\n        find: inputRegex,\n        type: this.type,\n      }),\n    ]\n  },\n\n  addPasteRules() {\n    return [\n      markPasteRule({\n        find: pasteRegex,\n        type: this.type,\n      }),\n    ]\n  },\n})\n","import { Strike } from './strike.js'\n\nexport * from './strike.js'\n\nexport default Strike\n"],"names":[],"mappings":";;;;;;;;;;;AAAA,SAAS,MAAM,eAAe,eAAe,uBAAuB;;AAoC7D,IAAM,aAAa;AAKnB,IAAM,aAAa;AAMnB,IAAM,SAAS,sKAAA,CAAK,MAAA,CAAsB;IAC/C,MAAM;IAEN,aAAa;QACX,OAAO;YACL,gBAAgB,CAAC;QACnB;IACF;IAEA,YAAY;QACV,OAAO;YACL;gBACE,KAAK;YACP;YACA;gBACE,KAAK;YACP;YACA;gBACE,KAAK;YACP;YACA;gBACE,OAAO;gBACP,WAAW;gBACX,UAAU,CAAA,QAAW,MAAiB,QAAA,CAAS,cAAc,IAAI,CAAC,IAAI;YACxE;SACF;IACF;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OAAO;YAAC;gBAAK,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc;YAAG,CAAC;SAAA;IAC9E;IAEA,mBAAmB;IAEnB,eAAe,CAAC,OAAO,YAAY;QAEjC,OAAO,QAAQ,SAAA,CAAU,UAAU,QAAQ,WAAA,CAAY,MAAM,MAAA,IAAU,CAAC,CAAC,CAAC;IAC5E;IAEA,gBAAgB,CAAC,MAAM,MAAM;QAC3B,OAAO,CAAA,EAAA,EAAK,EAAE,cAAA,CAAe,IAAI,CAAC,CAAA,EAAA,CAAA;IACpC;IAEA,cAAc;QACZ,OAAO;YACL,WACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,OAAA,CAAQ,IAAA,CAAK,IAAI;gBACnC;YACF,cACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,UAAA,CAAW,IAAA,CAAK,IAAI;gBACtC;YACF,aACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,SAAA,CAAU,IAAA,CAAK,IAAI;gBACrC;QACJ;IACF;IAEA,uBAAuB;QACrB,OAAO;YACL,eAAe,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,YAAA,CAAa;QACzD;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;YACb,CAAC;SACH;IACF;AACF,CAAC;;ACjID,IAAO,gBAAQ"}},
    {"offset": {"line": 17423, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-text/src/text.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-text/src/index.ts"],"sourcesContent":["import { Node } from '@tiptap/core'\n\n/**\n * This extension allows you to create text nodes.\n * @see https://www.tiptap.dev/api/nodes/text\n */\nexport const Text = Node.create({\n  name: 'text',\n  group: 'inline',\n\n  parseMarkdown: token => {\n    // Convert 'text' token to text node - text nodes are special as they store text directly\n    return {\n      type: 'text',\n      text: token.text || '',\n    }\n  },\n\n  renderMarkdown: node => node.text || '',\n})\n","import { Text } from './text.js'\n\nexport * from './text.js'\n\nexport default Text\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,YAAY;;AAMd,IAAM,OAAO,sKAAA,CAAK,MAAA,CAAO;IAC9B,MAAM;IACN,OAAO;IAEP,eAAe,CAAA,UAAS;QAEtB,OAAO;YACL,MAAM;YACN,MAAM,MAAM,IAAA,IAAQ;QACtB;IACF;IAEA,gBAAgB,CAAA,OAAQ,KAAK,IAAA,IAAQ;AACvC,CAAC;;ACfD,IAAO,gBAAQ"}},
    {"offset": {"line": 17451, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-underline/src/underline.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-underline/src/index.ts"],"sourcesContent":["import { Mark, mergeAttributes } from '@tiptap/core'\n\nexport interface UnderlineOptions {\n  /**\n   * HTML attributes to add to the underline element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    underline: {\n      /**\n       * Set an underline mark\n       * @example editor.commands.setUnderline()\n       */\n      setUnderline: () => ReturnType\n      /**\n       * Toggle an underline mark\n       * @example editor.commands.toggleUnderline()\n       */\n      toggleUnderline: () => ReturnType\n      /**\n       * Unset an underline mark\n       * @example editor.commands.unsetUnderline()\n       */\n      unsetUnderline: () => ReturnType\n    }\n  }\n}\n\n/**\n * This extension allows you to create underline text.\n * @see https://www.tiptap.dev/api/marks/underline\n */\nexport const Underline = Mark.create<UnderlineOptions>({\n  name: 'underline',\n\n  addOptions() {\n    return {\n      HTMLAttributes: {},\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: 'u',\n      },\n      {\n        style: 'text-decoration',\n        consuming: false,\n        getAttrs: style => ((style as string).includes('underline') ? {} : false),\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['u', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes), 0]\n  },\n\n  parseMarkdown(token, helpers) {\n    return helpers.applyMark(this.name || 'underline', helpers.parseInline(token.tokens || []))\n  },\n\n  renderMarkdown(node, helpers) {\n    return `++${helpers.renderChildren(node)}++`\n  },\n\n  markdownTokenizer: {\n    name: 'underline',\n    level: 'inline',\n    start(src) {\n      return src.indexOf('++')\n    },\n    tokenize(src, _tokens, lexer) {\n      const rule = /^(\\+\\+)([\\s\\S]+?)(\\+\\+)/\n      const match = rule.exec(src)\n\n      if (!match) {\n        return undefined\n      }\n\n      const innerContent = match[2].trim()\n\n      return {\n        type: 'underline',\n        raw: match[0],\n        text: innerContent,\n        tokens: lexer.inlineTokens(innerContent),\n      }\n    },\n  },\n\n  addCommands() {\n    return {\n      setUnderline:\n        () =>\n        ({ commands }) => {\n          return commands.setMark(this.name)\n        },\n      toggleUnderline:\n        () =>\n        ({ commands }) => {\n          return commands.toggleMark(this.name)\n        },\n      unsetUnderline:\n        () =>\n        ({ commands }) => {\n          return commands.unsetMark(this.name)\n        },\n    }\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-u': () => this.editor.commands.toggleUnderline(),\n      'Mod-U': () => this.editor.commands.toggleUnderline(),\n    }\n  },\n})\n","import { Underline } from './underline.js'\n\nexport * from './underline.js'\n\nexport default Underline\n"],"names":[],"mappings":";;;;;;;AAAA,SAAS,MAAM,uBAAuB;;AAqC/B,IAAM,YAAY,sKAAA,CAAK,MAAA,CAAyB;IACrD,MAAM;IAEN,aAAa;QACX,OAAO;YACL,gBAAgB,CAAC;QACnB;IACF;IAEA,YAAY;QACV,OAAO;YACL;gBACE,KAAK;YACP;YACA;gBACE,OAAO;gBACP,WAAW;gBACX,UAAU,CAAA,QAAW,MAAiB,QAAA,CAAS,WAAW,IAAI,CAAC,IAAI;YACrE;SACF;IACF;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OAAO;YAAC;gBAAK,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc;YAAG,CAAC;SAAA;IAC9E;IAEA,eAAc,KAAA,EAAO,OAAA,EAAS;QAC5B,OAAO,QAAQ,SAAA,CAAU,IAAA,CAAK,IAAA,IAAQ,aAAa,QAAQ,WAAA,CAAY,MAAM,MAAA,IAAU,CAAC,CAAC,CAAC;IAC5F;IAEA,gBAAe,IAAA,EAAM,OAAA,EAAS;QAC5B,OAAO,CAAA,EAAA,EAAK,QAAQ,cAAA,CAAe,IAAI,CAAC,CAAA,EAAA,CAAA;IAC1C;IAEA,mBAAmB;QACjB,MAAM;QACN,OAAO;QACP,OAAM,GAAA,EAAK;YACT,OAAO,IAAI,OAAA,CAAQ,IAAI;QACzB;QACA,UAAS,GAAA,EAAK,OAAA,EAAS,KAAA,EAAO;YAC5B,MAAM,OAAO;YACb,MAAM,QAAQ,KAAK,IAAA,CAAK,GAAG;YAE3B,IAAI,CAAC,OAAO;gBACV,OAAO,KAAA;YACT;YAEA,MAAM,eAAe,KAAA,CAAM,CAAC,CAAA,CAAE,IAAA,CAAK;YAEnC,OAAO;gBACL,MAAM;gBACN,KAAK,KAAA,CAAM,CAAC,CAAA;gBACZ,MAAM;gBACN,QAAQ,MAAM,YAAA,CAAa,YAAY;YACzC;QACF;IACF;IAEA,cAAc;QACZ,OAAO;YACL,cACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,OAAA,CAAQ,IAAA,CAAK,IAAI;gBACnC;YACF,iBACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,UAAA,CAAW,IAAA,CAAK,IAAI;gBACtC;YACF,gBACE,IACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,SAAA,CAAU,IAAA,CAAK,IAAI;gBACrC;QACJ;IACF;IAEA,uBAAuB;QACrB,OAAO;YACL,SAAS,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,eAAA,CAAgB;YACpD,SAAS,IAAM,IAAA,CAAK,MAAA,CAAO,QAAA,CAAS,eAAA,CAAgB;QACtD;IACF;AACF,CAAC;;ACtHD,IAAO,gBAAQ"}},
    {"offset": {"line": 17541, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extensions/src/character-count/character-count.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extensions/src/drop-cursor/drop-cursor.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extensions/src/focus/focus.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extensions/src/gap-cursor/gap-cursor.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extensions/src/placeholder/placeholder.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extensions/src/selection/selection.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extensions/src/trailing-node/trailing-node.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extensions/src/undo-redo/undo-redo.ts"],"sourcesContent":["import { Extension } from '@tiptap/core'\nimport type { Node as ProseMirrorNode } from '@tiptap/pm/model'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\n\nexport interface CharacterCountOptions {\n  /**\n   * The maximum number of characters that should be allowed. Defaults to `0`.\n   * @default null\n   * @example 180\n   */\n  limit: number | null | undefined\n  /**\n   * The mode by which the size is calculated. If set to `textSize`, the textContent of the document is used.\n   * If set to `nodeSize`, the nodeSize of the document is used.\n   * @default 'textSize'\n   * @example 'textSize'\n   */\n  mode: 'textSize' | 'nodeSize'\n  /**\n   * The text counter function to use. Defaults to a simple character count.\n   * @default (text) => text.length\n   * @example (text) => [...new Intl.Segmenter().segment(text)].length\n   */\n  textCounter: (text: string) => number\n  /**\n   * The word counter function to use. Defaults to a simple word count.\n   * @default (text) => text.split(' ').filter(word => word !== '').length\n   * @example (text) => text.split(/\\s+/).filter(word => word !== '').length\n   */\n  wordCounter: (text: string) => number\n}\n\nexport interface CharacterCountStorage {\n  /**\n   * Get the number of characters for the current document.\n   * @param options The options for the character count. (optional)\n   * @param options.node The node to get the characters from. Defaults to the current document.\n   * @param options.mode The mode by which the size is calculated. If set to `textSize`, the textContent of the document is used.\n   */\n  characters: (options?: { node?: ProseMirrorNode; mode?: 'textSize' | 'nodeSize' }) => number\n\n  /**\n   * Get the number of words for the current document.\n   * @param options The options for the character count. (optional)\n   * @param options.node The node to get the words from. Defaults to the current document.\n   */\n  words: (options?: { node?: ProseMirrorNode }) => number\n}\n\ndeclare module '@tiptap/core' {\n  interface Storage {\n    characterCount: CharacterCountStorage\n  }\n}\n\n/**\n * This extension allows you to count the characters and words of your document.\n * @see https://tiptap.dev/api/extensions/character-count\n */\nexport const CharacterCount = Extension.create<CharacterCountOptions, CharacterCountStorage>({\n  name: 'characterCount',\n\n  addOptions() {\n    return {\n      limit: null,\n      mode: 'textSize',\n      textCounter: text => text.length,\n      wordCounter: text => text.split(' ').filter(word => word !== '').length,\n    }\n  },\n\n  addStorage() {\n    return {\n      characters: () => 0,\n      words: () => 0,\n    }\n  },\n\n  onBeforeCreate() {\n    this.storage.characters = options => {\n      const node = options?.node || this.editor.state.doc\n      const mode = options?.mode || this.options.mode\n\n      if (mode === 'textSize') {\n        const text = node.textBetween(0, node.content.size, undefined, ' ')\n\n        return this.options.textCounter(text)\n      }\n\n      return node.nodeSize\n    }\n\n    this.storage.words = options => {\n      const node = options?.node || this.editor.state.doc\n      const text = node.textBetween(0, node.content.size, ' ', ' ')\n\n      return this.options.wordCounter(text)\n    }\n  },\n\n  addProseMirrorPlugins() {\n    let initialEvaluationDone = false\n\n    return [\n      new Plugin({\n        key: new PluginKey('characterCount'),\n        appendTransaction: (transactions, oldState, newState) => {\n          if (initialEvaluationDone) {\n            return\n          }\n\n          const limit = this.options.limit\n\n          if (limit === null || limit === undefined || limit === 0) {\n            initialEvaluationDone = true\n            return\n          }\n\n          const initialContentSize = this.storage.characters({ node: newState.doc })\n\n          if (initialContentSize > limit) {\n            const over = initialContentSize - limit\n            const from = 0\n            const to = over\n\n            console.warn(\n              `[CharacterCount] Initial content exceeded limit of ${limit} characters. Content was automatically trimmed.`,\n            )\n            const tr = newState.tr.deleteRange(from, to)\n\n            initialEvaluationDone = true\n            return tr\n          }\n\n          initialEvaluationDone = true\n        },\n        filterTransaction: (transaction, state) => {\n          const limit = this.options.limit\n\n          // Nothing has changed or no limit is defined. Ignore it.\n          if (!transaction.docChanged || limit === 0 || limit === null || limit === undefined) {\n            return true\n          }\n\n          const oldSize = this.storage.characters({ node: state.doc })\n          const newSize = this.storage.characters({ node: transaction.doc })\n\n          // Everything is in the limit. Good.\n          if (newSize <= limit) {\n            return true\n          }\n\n          // The limit has already been exceeded but will be reduced.\n          if (oldSize > limit && newSize > limit && newSize <= oldSize) {\n            return true\n          }\n\n          // The limit has already been exceeded and will be increased further.\n          if (oldSize > limit && newSize > limit && newSize > oldSize) {\n            return false\n          }\n\n          const isPaste = transaction.getMeta('paste')\n\n          // Block all exceeding transactions that were not pasted.\n          if (!isPaste) {\n            return false\n          }\n\n          // For pasted content, we try to remove the exceeding content.\n          const pos = transaction.selection.$head.pos\n          const over = newSize - limit\n          const from = pos - over\n          const to = pos\n\n          // Its probably a bad idea to mutate transactions within `filterTransaction`\n          // but for now this is working fine.\n          transaction.deleteRange(from, to)\n\n          // In some situations, the limit will continue to be exceeded after trimming.\n          // This happens e.g. when truncating within a complex node (e.g. table)\n          // and ProseMirror has to close this node again.\n          // If this is the case, we prevent the transaction completely.\n          const updatedSize = this.storage.characters({ node: transaction.doc })\n\n          if (updatedSize > limit) {\n            return false\n          }\n\n          return true\n        },\n      }),\n    ]\n  },\n})\n","import { Extension } from '@tiptap/core'\nimport { dropCursor } from '@tiptap/pm/dropcursor'\n\nexport interface DropcursorOptions {\n  /**\n   * The color of the drop cursor. Use `false` to apply no color and rely only on class.\n   * @default 'currentColor'\n   * @example 'red'\n   */\n  color?: string | false\n\n  /**\n   * The width of the drop cursor\n   * @default 1\n   * @example 2\n   */\n  width: number | undefined\n\n  /**\n   * The class of the drop cursor\n   * @default undefined\n   * @example 'drop-cursor'\n   */\n  class: string | undefined\n}\n\n/**\n * This extension allows you to add a drop cursor to your editor.\n * A drop cursor is a line that appears when you drag and drop content\n * in-between nodes.\n * @see https://tiptap.dev/api/extensions/dropcursor\n */\nexport const Dropcursor = Extension.create<DropcursorOptions>({\n  name: 'dropCursor',\n\n  addOptions() {\n    return {\n      color: 'currentColor',\n      width: 1,\n      class: undefined,\n    }\n  },\n\n  addProseMirrorPlugins() {\n    return [dropCursor(this.options)]\n  },\n})\n","import { Extension } from '@tiptap/core'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\nimport { Decoration, DecorationSet } from '@tiptap/pm/view'\n\nexport interface FocusOptions {\n  /**\n   * The class name that should be added to the focused node.\n   * @default 'has-focus'\n   * @example 'is-focused'\n   */\n  className: string\n\n  /**\n   * The mode by which the focused node is determined.\n   * - All: All nodes are marked as focused.\n   * - Deepest: Only the deepest node is marked as focused.\n   * - Shallowest: Only the shallowest node is marked as focused.\n   *\n   * @default 'all'\n   * @example 'deepest'\n   * @example 'shallowest'\n   */\n  mode: 'all' | 'deepest' | 'shallowest'\n}\n\n/**\n * This extension allows you to add a class to the focused node.\n * @see https://www.tiptap.dev/api/extensions/focus\n */\nexport const Focus = Extension.create<FocusOptions>({\n  name: 'focus',\n\n  addOptions() {\n    return {\n      className: 'has-focus',\n      mode: 'all',\n    }\n  },\n\n  addProseMirrorPlugins() {\n    return [\n      new Plugin({\n        key: new PluginKey('focus'),\n        props: {\n          decorations: ({ doc, selection }) => {\n            const { isEditable, isFocused } = this.editor\n            const { anchor } = selection\n            const decorations: Decoration[] = []\n\n            if (!isEditable || !isFocused) {\n              return DecorationSet.create(doc, [])\n            }\n\n            // Maximum Levels\n            let maxLevels = 0\n\n            if (this.options.mode === 'deepest') {\n              doc.descendants((node, pos) => {\n                if (node.isText) {\n                  return\n                }\n\n                const isCurrent = anchor >= pos && anchor <= pos + node.nodeSize - 1\n\n                if (!isCurrent) {\n                  return false\n                }\n\n                maxLevels += 1\n              })\n            }\n\n            // Loop through current\n            let currentLevel = 0\n\n            doc.descendants((node, pos) => {\n              if (node.isText) {\n                return false\n              }\n\n              const isCurrent = anchor >= pos && anchor <= pos + node.nodeSize - 1\n\n              if (!isCurrent) {\n                return false\n              }\n\n              currentLevel += 1\n\n              const outOfScope =\n                (this.options.mode === 'deepest' && maxLevels - currentLevel > 0) ||\n                (this.options.mode === 'shallowest' && currentLevel > 1)\n\n              if (outOfScope) {\n                return this.options.mode === 'deepest'\n              }\n\n              decorations.push(\n                Decoration.node(pos, pos + node.nodeSize, {\n                  class: this.options.className,\n                }),\n              )\n            })\n\n            return DecorationSet.create(doc, decorations)\n          },\n        },\n      }),\n    ]\n  },\n})\n","import type { ParentConfig } from '@tiptap/core'\nimport { callOrReturn, Extension, getExtensionField } from '@tiptap/core'\nimport { gapCursor } from '@tiptap/pm/gapcursor'\n\ndeclare module '@tiptap/core' {\n  interface NodeConfig<Options, Storage> {\n    /**\n     * A function to determine whether the gap cursor is allowed at the current position. Must return `true` or `false`.\n     * @default null\n     */\n    allowGapCursor?:\n      | boolean\n      | null\n      | ((this: {\n          name: string\n          options: Options\n          storage: Storage\n          parent: ParentConfig<NodeConfig<Options>>['allowGapCursor']\n        }) => boolean | null)\n  }\n}\n\n/**\n * This extension allows you to add a gap cursor to your editor.\n * A gap cursor is a cursor that appears when you click on a place\n * where no content is present, for example inbetween nodes.\n * @see https://tiptap.dev/api/extensions/gapcursor\n */\nexport const Gapcursor = Extension.create({\n  name: 'gapCursor',\n\n  addProseMirrorPlugins() {\n    return [gapCursor()]\n  },\n\n  extendNodeSchema(extension) {\n    const context = {\n      name: extension.name,\n      options: extension.options,\n      storage: extension.storage,\n    }\n\n    return {\n      allowGapCursor: callOrReturn(getExtensionField(extension, 'allowGapCursor', context)) ?? null,\n    }\n  },\n})\n","import type { Editor } from '@tiptap/core'\nimport { Extension, isNodeEmpty } from '@tiptap/core'\nimport type { Node as ProsemirrorNode } from '@tiptap/pm/model'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\nimport { Decoration, DecorationSet } from '@tiptap/pm/view'\n\n/**\n * The default data attribute label\n */\nconst DEFAULT_DATA_ATTRIBUTE = 'placeholder'\n\n/**\n * Prepares the placeholder attribute by ensuring it is properly formatted.\n * @param attr - The placeholder attribute string.\n * @returns The prepared placeholder attribute string.\n */\nexport function preparePlaceholderAttribute(attr: string): string {\n  return (\n    attr\n      // replace whitespace with dashes\n      .replace(/\\s+/g, '-')\n      // replace non-alphanumeric  characters\n      // or special chars like $, %, &, etc.\n      // but not dashes\n      .replace(/[^a-zA-Z0-9-]/g, '')\n      // and replace any numeric character at the start\n      .replace(/^[0-9-]+/, '')\n      // and finally replace any stray, leading dashes\n      .replace(/^-+/, '')\n      .toLowerCase()\n  )\n}\n\nexport interface PlaceholderOptions {\n  /**\n   * **The class name for the empty editor**\n   * @default 'is-editor-empty'\n   */\n  emptyEditorClass: string\n\n  /**\n   * **The class name for empty nodes**\n   * @default 'is-empty'\n   */\n  emptyNodeClass: string\n\n  /**\n   * **The data-attribute used for the placeholder label**\n   * Will be prepended with `data-` and converted to kebab-case and cleaned of special characters.\n   * @default 'placeholder'\n   */\n  dataAttribute: string\n\n  /**\n   * **The placeholder content**\n   *\n   * You can use a function to return a dynamic placeholder or a string.\n   * @default 'Write something '\n   */\n  placeholder:\n    | ((PlaceholderProps: { editor: Editor; node: ProsemirrorNode; pos: number; hasAnchor: boolean }) => string)\n    | string\n\n  /**\n   * **Checks if the placeholder should be only shown when the editor is editable.**\n   *\n   * If true, the placeholder will only be shown when the editor is editable.\n   * If false, the placeholder will always be shown.\n   * @default true\n   */\n  showOnlyWhenEditable: boolean\n\n  /**\n   * **Checks if the placeholder should be only shown when the current node is empty.**\n   *\n   * If true, the placeholder will only be shown when the current node is empty.\n   * If false, the placeholder will be shown when any node is empty.\n   * @default true\n   */\n  showOnlyCurrent: boolean\n\n  /**\n   * **Controls if the placeholder should be shown for all descendents.**\n   *\n   * If true, the placeholder will be shown for all descendents.\n   * If false, the placeholder will only be shown for the current node.\n   * @default false\n   */\n  includeChildren: boolean\n}\n\n/**\n * This extension allows you to add a placeholder to your editor.\n * A placeholder is a text that appears when the editor or a node is empty.\n * @see https://www.tiptap.dev/api/extensions/placeholder\n */\nexport const Placeholder = Extension.create<PlaceholderOptions>({\n  name: 'placeholder',\n\n  addOptions() {\n    return {\n      emptyEditorClass: 'is-editor-empty',\n      emptyNodeClass: 'is-empty',\n      dataAttribute: DEFAULT_DATA_ATTRIBUTE,\n      placeholder: 'Write something ',\n      showOnlyWhenEditable: true,\n      showOnlyCurrent: true,\n      includeChildren: false,\n    }\n  },\n\n  addProseMirrorPlugins() {\n    const dataAttribute = this.options.dataAttribute\n      ? `data-${preparePlaceholderAttribute(this.options.dataAttribute)}`\n      : `data-${DEFAULT_DATA_ATTRIBUTE}`\n\n    return [\n      new Plugin({\n        key: new PluginKey('placeholder'),\n        props: {\n          decorations: ({ doc, selection }) => {\n            const active = this.editor.isEditable || !this.options.showOnlyWhenEditable\n            const { anchor } = selection\n            const decorations: Decoration[] = []\n\n            if (!active) {\n              return null\n            }\n\n            const isEmptyDoc = this.editor.isEmpty\n\n            doc.descendants((node, pos) => {\n              const hasAnchor = anchor >= pos && anchor <= pos + node.nodeSize\n              const isEmpty = !node.isLeaf && isNodeEmpty(node)\n\n              if ((hasAnchor || !this.options.showOnlyCurrent) && isEmpty) {\n                const classes = [this.options.emptyNodeClass]\n\n                if (isEmptyDoc) {\n                  classes.push(this.options.emptyEditorClass)\n                }\n\n                const decoration = Decoration.node(pos, pos + node.nodeSize, {\n                  class: classes.join(' '),\n                  [dataAttribute]:\n                    typeof this.options.placeholder === 'function'\n                      ? this.options.placeholder({\n                          editor: this.editor,\n                          node,\n                          pos,\n                          hasAnchor,\n                        })\n                      : this.options.placeholder,\n                })\n\n                decorations.push(decoration)\n              }\n\n              return this.options.includeChildren\n            })\n\n            return DecorationSet.create(doc, decorations)\n          },\n        },\n      }),\n    ]\n  },\n})\n","import { Extension, isNodeSelection } from '@tiptap/core'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\nimport { Decoration, DecorationSet } from '@tiptap/pm/view'\n\nexport type SelectionOptions = {\n  /**\n   * The class name that should be added to the selected text.\n   * @default 'selection'\n   * @example 'is-selected'\n   */\n  className: string\n}\n\n/**\n * This extension allows you to add a class to the selected text.\n * @see https://www.tiptap.dev/api/extensions/selection\n */\nexport const Selection = Extension.create<SelectionOptions>({\n  name: 'selection',\n\n  addOptions() {\n    return {\n      className: 'selection',\n    }\n  },\n\n  addProseMirrorPlugins() {\n    const { editor, options } = this\n\n    return [\n      new Plugin({\n        key: new PluginKey('selection'),\n        props: {\n          decorations(state) {\n            if (\n              state.selection.empty ||\n              editor.isFocused ||\n              !editor.isEditable ||\n              isNodeSelection(state.selection) ||\n              editor.view.dragging\n            ) {\n              return null\n            }\n\n            return DecorationSet.create(state.doc, [\n              Decoration.inline(state.selection.from, state.selection.to, {\n                class: options.className,\n              }),\n            ])\n          },\n        },\n      }),\n    ]\n  },\n})\n\nexport default Selection\n","import { Extension } from '@tiptap/core'\nimport type { Node, NodeType } from '@tiptap/pm/model'\nimport { Plugin, PluginKey } from '@tiptap/pm/state'\n\nfunction nodeEqualsType({ types, node }: { types: NodeType | NodeType[]; node: Node | null | undefined }) {\n  return (node && Array.isArray(types) && types.includes(node.type)) || node?.type === types\n}\n\n/**\n * Extension based on:\n * - https://github.com/ueberdosis/tiptap/blob/v1/packages/tiptap-extensions/src/extensions/TrailingNode.js\n * - https://github.com/remirror/remirror/blob/e0f1bec4a1e8073ce8f5500d62193e52321155b9/packages/prosemirror-trailing-node/src/trailing-node-plugin.ts\n */\n\nexport interface TrailingNodeOptions {\n  /**\n   * The node type that should be inserted at the end of the document.\n   * @note the node will always be added to the `notAfter` lists to\n   * prevent an infinite loop.\n   * @default undefined\n   */\n  node?: string\n  /**\n   * The node types after which the trailing node should not be inserted.\n   * @default ['paragraph']\n   */\n  notAfter?: string | string[]\n}\n\n/**\n * This extension allows you to add an extra node at the end of the document.\n * @see https://www.tiptap.dev/api/extensions/trailing-node\n */\nexport const TrailingNode = Extension.create<TrailingNodeOptions>({\n  name: 'trailingNode',\n\n  addOptions() {\n    return {\n      node: undefined,\n      notAfter: [],\n    }\n  },\n\n  addProseMirrorPlugins() {\n    const plugin = new PluginKey(this.name)\n    const defaultNode =\n      this.options.node || this.editor.schema.topNodeType.contentMatch.defaultType?.name || 'paragraph'\n\n    const disabledNodes = Object.entries(this.editor.schema.nodes)\n      .map(([, value]) => value)\n      .filter(node => (this.options.notAfter || []).concat(defaultNode).includes(node.name))\n\n    return [\n      new Plugin({\n        key: plugin,\n        appendTransaction: (_, __, state) => {\n          const { doc, tr, schema } = state\n          const shouldInsertNodeAtEnd = plugin.getState(state)\n          const endPosition = doc.content.size\n          const type = schema.nodes[defaultNode]\n\n          if (!shouldInsertNodeAtEnd) {\n            return\n          }\n\n          return tr.insert(endPosition, type.create())\n        },\n        state: {\n          init: (_, state) => {\n            const lastNode = state.tr.doc.lastChild\n\n            return !nodeEqualsType({ node: lastNode, types: disabledNodes })\n          },\n          apply: (tr, value) => {\n            if (!tr.docChanged) {\n              return value\n            }\n\n            // Ignore transactions from UniqueID extension to prevent infinite loops\n            // when UniqueID adds IDs to newly inserted trailing nodes\n            if (tr.getMeta('__uniqueIDTransaction')) {\n              return value\n            }\n\n            const lastNode = tr.doc.lastChild\n\n            return !nodeEqualsType({ node: lastNode, types: disabledNodes })\n          },\n        },\n      }),\n    ]\n  },\n})\n","import { Extension } from '@tiptap/core'\nimport { history, redo, undo } from '@tiptap/pm/history'\n\nexport interface UndoRedoOptions {\n  /**\n   * The amount of history events that are collected before the oldest events are discarded.\n   * @default 100\n   * @example 50\n   */\n  depth: number\n\n  /**\n   * The delay (in milliseconds) between changes after which a new group should be started.\n   * @default 500\n   * @example 1000\n   */\n  newGroupDelay: number\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    undoRedo: {\n      /**\n       * Undo recent changes\n       * @example editor.commands.undo()\n       */\n      undo: () => ReturnType\n      /**\n       * Reapply reverted changes\n       * @example editor.commands.redo()\n       */\n      redo: () => ReturnType\n    }\n  }\n}\n\n/**\n * This extension allows you to undo and redo recent changes.\n * @see https://www.tiptap.dev/api/extensions/undo-redo\n *\n * **Important**: If the `@tiptap/extension-collaboration` package is used, make sure to remove\n * the `undo-redo` extension, as it is not compatible with the `collaboration` extension.\n *\n * `@tiptap/extension-collaboration` uses its own history implementation.\n */\nexport const UndoRedo = Extension.create<UndoRedoOptions>({\n  name: 'undoRedo',\n\n  addOptions() {\n    return {\n      depth: 100,\n      newGroupDelay: 500,\n    }\n  },\n\n  addCommands() {\n    return {\n      undo:\n        () =>\n        ({ state, dispatch }) => {\n          return undo(state, dispatch)\n        },\n      redo:\n        () =>\n        ({ state, dispatch }) => {\n          return redo(state, dispatch)\n        },\n    }\n  },\n\n  addProseMirrorPlugins() {\n    return [history(this.options)]\n  },\n\n  addKeyboardShortcuts() {\n    return {\n      'Mod-z': () => this.editor.commands.undo(),\n      'Shift-Mod-z': () => this.editor.commands.redo(),\n      'Mod-y': () => this.editor.commands.redo(),\n\n      // Russian keyboard layouts\n      'Mod-': () => this.editor.commands.undo(),\n      'Shift-Mod-': () => this.editor.commands.redo(),\n    }\n  },\n})\n"],"names":["Extension","Extension","Plugin","PluginKey","Extension","Extension","Plugin","PluginKey","Decoration","DecorationSet","Extension","Plugin","PluginKey","Decoration","DecorationSet","Extension","Plugin","PluginKey","Extension"],"mappings":"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"}},
    {"offset": {"line": 17984, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/starter-kit/src/starter-kit.ts","file:///D:/web-edra/client/node_modules/%40tiptap/starter-kit/src/index.ts"],"sourcesContent":["import { Extension } from '@tiptap/core'\nimport type { BlockquoteOptions } from '@tiptap/extension-blockquote'\nimport { Blockquote } from '@tiptap/extension-blockquote'\nimport type { BoldOptions } from '@tiptap/extension-bold'\nimport { Bold } from '@tiptap/extension-bold'\nimport type { CodeOptions } from '@tiptap/extension-code'\nimport { Code } from '@tiptap/extension-code'\nimport type { CodeBlockOptions } from '@tiptap/extension-code-block'\nimport { CodeBlock } from '@tiptap/extension-code-block'\nimport { Document } from '@tiptap/extension-document'\nimport type { HardBreakOptions } from '@tiptap/extension-hard-break'\nimport { HardBreak } from '@tiptap/extension-hard-break'\nimport type { HeadingOptions } from '@tiptap/extension-heading'\nimport { Heading } from '@tiptap/extension-heading'\nimport type { HorizontalRuleOptions } from '@tiptap/extension-horizontal-rule'\nimport { HorizontalRule } from '@tiptap/extension-horizontal-rule'\nimport type { ItalicOptions } from '@tiptap/extension-italic'\nimport { Italic } from '@tiptap/extension-italic'\nimport type { LinkOptions } from '@tiptap/extension-link'\nimport { Link } from '@tiptap/extension-link'\nimport type { BulletListOptions, ListItemOptions, ListKeymapOptions, OrderedListOptions } from '@tiptap/extension-list'\nimport { BulletList, ListItem, ListKeymap, OrderedList } from '@tiptap/extension-list'\nimport type { ParagraphOptions } from '@tiptap/extension-paragraph'\nimport { Paragraph } from '@tiptap/extension-paragraph'\nimport type { StrikeOptions } from '@tiptap/extension-strike'\nimport { Strike } from '@tiptap/extension-strike'\nimport { Text } from '@tiptap/extension-text'\nimport type { UnderlineOptions } from '@tiptap/extension-underline'\nimport { Underline } from '@tiptap/extension-underline'\nimport type { DropcursorOptions, TrailingNodeOptions, UndoRedoOptions } from '@tiptap/extensions'\nimport { Dropcursor, Gapcursor, TrailingNode, UndoRedo } from '@tiptap/extensions'\n\nexport interface StarterKitOptions {\n  /**\n   * If set to false, the blockquote extension will not be registered\n   * @example blockquote: false\n   */\n  blockquote: Partial<BlockquoteOptions> | false\n\n  /**\n   * If set to false, the bold extension will not be registered\n   * @example bold: false\n   */\n  bold: Partial<BoldOptions> | false\n\n  /**\n   * If set to false, the bulletList extension will not be registered\n   * @example bulletList: false\n   */\n  bulletList: Partial<BulletListOptions> | false\n\n  /**\n   * If set to false, the code extension will not be registered\n   * @example code: false\n   */\n  code: Partial<CodeOptions> | false\n\n  /**\n   * If set to false, the codeBlock extension will not be registered\n   * @example codeBlock: false\n   */\n  codeBlock: Partial<CodeBlockOptions> | false\n\n  /**\n   * If set to false, the document extension will not be registered\n   * @example document: false\n   */\n  document: false\n\n  /**\n   * If set to false, the dropcursor extension will not be registered\n   * @example dropcursor: false\n   */\n  dropcursor: Partial<DropcursorOptions> | false\n\n  /**\n   * If set to false, the gapcursor extension will not be registered\n   * @example gapcursor: false\n   */\n  gapcursor: false\n\n  /**\n   * If set to false, the hardBreak extension will not be registered\n   * @example hardBreak: false\n   */\n  hardBreak: Partial<HardBreakOptions> | false\n\n  /**\n   * If set to false, the heading extension will not be registered\n   * @example heading: false\n   */\n  heading: Partial<HeadingOptions> | false\n\n  /**\n   * If set to false, the undo-redo extension will not be registered\n   * @example undoRedo: false\n   */\n  undoRedo: Partial<UndoRedoOptions> | false\n\n  /**\n   * If set to false, the horizontalRule extension will not be registered\n   * @example horizontalRule: false\n   */\n  horizontalRule: Partial<HorizontalRuleOptions> | false\n\n  /**\n   * If set to false, the italic extension will not be registered\n   * @example italic: false\n   */\n  italic: Partial<ItalicOptions> | false\n\n  /**\n   * If set to false, the listItem extension will not be registered\n   * @example listItem: false\n   */\n  listItem: Partial<ListItemOptions> | false\n\n  /**\n   * If set to false, the listItemKeymap extension will not be registered\n   * @example listKeymap: false\n   */\n  listKeymap: Partial<ListKeymapOptions> | false\n\n  /**\n   * If set to false, the link extension will not be registered\n   * @example link: false\n   */\n  link: Partial<LinkOptions> | false\n\n  /**\n   * If set to false, the orderedList extension will not be registered\n   * @example orderedList: false\n   */\n  orderedList: Partial<OrderedListOptions> | false\n\n  /**\n   * If set to false, the paragraph extension will not be registered\n   * @example paragraph: false\n   */\n  paragraph: Partial<ParagraphOptions> | false\n\n  /**\n   * If set to false, the strike extension will not be registered\n   * @example strike: false\n   */\n  strike: Partial<StrikeOptions> | false\n\n  /**\n   * If set to false, the text extension will not be registered\n   * @example text: false\n   */\n  text: false\n\n  /**\n   * If set to false, the underline extension will not be registered\n   * @example underline: false\n   */\n  underline: Partial<UnderlineOptions> | false\n\n  /**\n   * If set to false, the trailingNode extension will not be registered\n   * @example trailingNode: false\n   */\n  trailingNode: Partial<TrailingNodeOptions> | false\n}\n\n/**\n * The starter kit is a collection of essential editor extensions.\n *\n * Its a good starting point for building your own editor.\n */\nexport const StarterKit = Extension.create<StarterKitOptions>({\n  name: 'starterKit',\n\n  addExtensions() {\n    const extensions = []\n\n    if (this.options.bold !== false) {\n      extensions.push(Bold.configure(this.options.bold))\n    }\n\n    if (this.options.blockquote !== false) {\n      extensions.push(Blockquote.configure(this.options.blockquote))\n    }\n\n    if (this.options.bulletList !== false) {\n      extensions.push(BulletList.configure(this.options.bulletList))\n    }\n\n    if (this.options.code !== false) {\n      extensions.push(Code.configure(this.options.code))\n    }\n\n    if (this.options.codeBlock !== false) {\n      extensions.push(CodeBlock.configure(this.options.codeBlock))\n    }\n\n    if (this.options.document !== false) {\n      extensions.push(Document.configure(this.options.document))\n    }\n\n    if (this.options.dropcursor !== false) {\n      extensions.push(Dropcursor.configure(this.options.dropcursor))\n    }\n\n    if (this.options.gapcursor !== false) {\n      extensions.push(Gapcursor.configure(this.options.gapcursor))\n    }\n\n    if (this.options.hardBreak !== false) {\n      extensions.push(HardBreak.configure(this.options.hardBreak))\n    }\n\n    if (this.options.heading !== false) {\n      extensions.push(Heading.configure(this.options.heading))\n    }\n\n    if (this.options.undoRedo !== false) {\n      extensions.push(UndoRedo.configure(this.options.undoRedo))\n    }\n\n    if (this.options.horizontalRule !== false) {\n      extensions.push(HorizontalRule.configure(this.options.horizontalRule))\n    }\n\n    if (this.options.italic !== false) {\n      extensions.push(Italic.configure(this.options.italic))\n    }\n\n    if (this.options.listItem !== false) {\n      extensions.push(ListItem.configure(this.options.listItem))\n    }\n\n    if (this.options.listKeymap !== false) {\n      extensions.push(ListKeymap.configure(this.options?.listKeymap))\n    }\n\n    if (this.options.link !== false) {\n      extensions.push(Link.configure(this.options?.link))\n    }\n\n    if (this.options.orderedList !== false) {\n      extensions.push(OrderedList.configure(this.options.orderedList))\n    }\n\n    if (this.options.paragraph !== false) {\n      extensions.push(Paragraph.configure(this.options.paragraph))\n    }\n\n    if (this.options.strike !== false) {\n      extensions.push(Strike.configure(this.options.strike))\n    }\n\n    if (this.options.text !== false) {\n      extensions.push(Text.configure(this.options.text))\n    }\n\n    if (this.options.underline !== false) {\n      extensions.push(Underline.configure(this.options?.underline))\n    }\n\n    if (this.options.trailingNode !== false) {\n      extensions.push(TrailingNode.configure(this.options?.trailingNode))\n    }\n\n    return extensions\n  },\n})\n","import { StarterKit } from './starter-kit.js'\n\nexport type { StarterKitOptions } from './starter-kit.js'\nexport * from './starter-kit.js'\n\nexport default StarterKit\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 18107, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-placeholder/src/index.ts"],"sourcesContent":["import { Placeholder } from '@tiptap/extensions'\n\nexport type { PlaceholderOptions } from '@tiptap/extensions'\nexport { Placeholder } from '@tiptap/extensions'\n\nexport default Placeholder\n"],"names":["Placeholder"],"mappings":";;;;;AAAA,SAAS,mBAAmB;;;AAK5B,IAAO,gBAAQ,mLAAA"}},
    {"offset": {"line": 18122, "column": 0}, "map": {"version":3,"sources":["file:///D:/web-edra/client/node_modules/%40tiptap/extension-image/src/image.ts","file:///D:/web-edra/client/node_modules/%40tiptap/extension-image/src/index.ts"],"sourcesContent":["import type { ResizableNodeViewDirection } from '@tiptap/core'\nimport { mergeAttributes, Node, nodeInputRule, ResizableNodeView } from '@tiptap/core'\n\nexport interface ImageOptions {\n  /**\n   * Controls if the image node should be inline or not.\n   * @default false\n   * @example true\n   */\n  inline: boolean\n\n  /**\n   * Controls if base64 images are allowed. Enable this if you want to allow\n   * base64 image urls in the `src` attribute.\n   * @default false\n   * @example true\n   */\n  allowBase64: boolean\n\n  /**\n   * HTML attributes to add to the image element.\n   * @default {}\n   * @example { class: 'foo' }\n   */\n  HTMLAttributes: Record<string, any>\n\n  /**\n   * Controls if the image should be resizable and how the resize is configured.\n   * @default false\n   * @example { directions: { top: true, right: true, bottom: true, left: true, topLeft: true, topRight: true, bottomLeft: true, bottomRight: true }, minWidth: 100, minHeight: 100 }\n   */\n  resize:\n    | {\n        enabled: boolean\n        directions?: ResizableNodeViewDirection[]\n        minWidth?: number\n        minHeight?: number\n        alwaysPreserveAspectRatio?: boolean\n      }\n    | false\n}\n\nexport interface SetImageOptions {\n  src: string\n  alt?: string\n  title?: string\n  width?: number\n  height?: number\n}\n\ndeclare module '@tiptap/core' {\n  interface Commands<ReturnType> {\n    image: {\n      /**\n       * Add an image\n       * @param options The image attributes\n       * @example\n       * editor\n       *   .commands\n       *   .setImage({ src: 'https://tiptap.dev/logo.png', alt: 'tiptap', title: 'tiptap logo' })\n       */\n      setImage: (options: SetImageOptions) => ReturnType\n    }\n  }\n}\n\n/**\n * Matches an image to a ![image](src \"title\") on input.\n */\nexport const inputRegex = /(?:^|\\s)(!\\[(.+|:?)]\\((\\S+)(?:(?:\\s+)[\"'](\\S+)[\"'])?\\))$/\n\n/**\n * This extension allows you to insert images.\n * @see https://www.tiptap.dev/api/nodes/image\n */\nexport const Image = Node.create<ImageOptions>({\n  name: 'image',\n\n  addOptions() {\n    return {\n      inline: false,\n      allowBase64: false,\n      HTMLAttributes: {},\n      resize: false,\n    }\n  },\n\n  inline() {\n    return this.options.inline\n  },\n\n  group() {\n    return this.options.inline ? 'inline' : 'block'\n  },\n\n  draggable: true,\n\n  addAttributes() {\n    return {\n      src: {\n        default: null,\n      },\n      alt: {\n        default: null,\n      },\n      title: {\n        default: null,\n      },\n      width: {\n        default: null,\n      },\n      height: {\n        default: null,\n      },\n    }\n  },\n\n  parseHTML() {\n    return [\n      {\n        tag: this.options.allowBase64 ? 'img[src]' : 'img[src]:not([src^=\"data:\"])',\n      },\n    ]\n  },\n\n  renderHTML({ HTMLAttributes }) {\n    return ['img', mergeAttributes(this.options.HTMLAttributes, HTMLAttributes)]\n  },\n\n  parseMarkdown: (token, helpers) => {\n    return helpers.createNode('image', {\n      src: token.href,\n      title: token.title,\n      alt: token.text,\n    })\n  },\n\n  renderMarkdown: node => {\n    const src = node.attrs?.src ?? ''\n    const alt = node.attrs?.alt ?? ''\n    const title = node.attrs?.title ?? ''\n\n    return title ? `![${alt}](${src} \"${title}\")` : `![${alt}](${src})`\n  },\n\n  addNodeView() {\n    if (!this.options.resize || !this.options.resize.enabled || typeof document === 'undefined') {\n      return null\n    }\n\n    const { directions, minWidth, minHeight, alwaysPreserveAspectRatio } = this.options.resize\n\n    return ({ node, getPos, HTMLAttributes, editor }) => {\n      const el = document.createElement('img')\n\n      Object.entries(HTMLAttributes).forEach(([key, value]) => {\n        if (value != null) {\n          switch (key) {\n            case 'width':\n            case 'height':\n              break\n            default:\n              el.setAttribute(key, value)\n              break\n          }\n        }\n      })\n\n      el.src = HTMLAttributes.src\n\n      const nodeView = new ResizableNodeView({\n        element: el,\n        editor,\n        node,\n        getPos,\n        onResize: (width, height) => {\n          el.style.width = `${width}px`\n          el.style.height = `${height}px`\n        },\n        onCommit: (width, height) => {\n          const pos = getPos()\n          if (pos === undefined) {\n            return\n          }\n\n          this.editor\n            .chain()\n            .setNodeSelection(pos)\n            .updateAttributes(this.name, {\n              width,\n              height,\n            })\n            .run()\n        },\n        onUpdate: (updatedNode, _decorations, _innerDecorations) => {\n          if (updatedNode.type !== node.type) {\n            return false\n          }\n\n          return true\n        },\n        options: {\n          directions,\n          min: {\n            width: minWidth,\n            height: minHeight,\n          },\n          preserveAspectRatio: alwaysPreserveAspectRatio === true,\n        },\n      })\n\n      const dom = nodeView.dom as HTMLElement\n\n      // when image is loaded, show the node view to get the correct dimensions\n      dom.style.visibility = 'hidden'\n      dom.style.pointerEvents = 'none'\n      el.onload = () => {\n        dom.style.visibility = ''\n        dom.style.pointerEvents = ''\n      }\n\n      return nodeView\n    }\n  },\n\n  addCommands() {\n    return {\n      setImage:\n        options =>\n        ({ commands }) => {\n          return commands.insertContent({\n            type: this.name,\n            attrs: options,\n          })\n        },\n    }\n  },\n\n  addInputRules() {\n    return [\n      nodeInputRule({\n        find: inputRegex,\n        type: this.type,\n        getAttributes: match => {\n          const [, , alt, src, title] = match\n\n          return { src, alt, title }\n        },\n      }),\n    ]\n  },\n})\n","import { Image } from './image.js'\n\nexport * from './image.js'\n\nexport default Image\n"],"names":[],"mappings":";;;;;;;;;AACA,SAAS,iBAAiB,MAAM,eAAe,yBAAyB;;AAoEjE,IAAM,aAAa;AAMnB,IAAM,QAAQ,sKAAA,CAAK,MAAA,CAAqB;IAC7C,MAAM;IAEN,aAAa;QACX,OAAO;YACL,QAAQ;YACR,aAAa;YACb,gBAAgB,CAAC;YACjB,QAAQ;QACV;IACF;IAEA,SAAS;QACP,OAAO,IAAA,CAAK,OAAA,CAAQ,MAAA;IACtB;IAEA,QAAQ;QACN,OAAO,IAAA,CAAK,OAAA,CAAQ,MAAA,GAAS,WAAW;IAC1C;IAEA,WAAW;IAEX,gBAAgB;QACd,OAAO;YACL,KAAK;gBACH,SAAS;YACX;YACA,KAAK;gBACH,SAAS;YACX;YACA,OAAO;gBACL,SAAS;YACX;YACA,OAAO;gBACL,SAAS;YACX;YACA,QAAQ;gBACN,SAAS;YACX;QACF;IACF;IAEA,YAAY;QACV,OAAO;YACL;gBACE,KAAK,IAAA,CAAK,OAAA,CAAQ,WAAA,GAAc,aAAa;YAC/C;SACF;IACF;IAEA,YAAW,EAAE,cAAA,CAAe,CAAA,EAAG;QAC7B,OAAO;YAAC;gBAAO,iLAAA,EAAgB,IAAA,CAAK,OAAA,CAAQ,cAAA,EAAgB,cAAc,CAAC;SAAA;IAC7E;IAEA,eAAe,CAAC,OAAO,YAAY;QACjC,OAAO,QAAQ,UAAA,CAAW,SAAS;YACjC,KAAK,MAAM,IAAA;YACX,OAAO,MAAM,KAAA;YACb,KAAK,MAAM,IAAA;QACb,CAAC;IACH;IAEA,gBAAgB,CAAA,SAAQ;QAzI1B,IAAA,IAAA,IAAA,IAAA,IAAA,IAAA;QA0II,MAAM,MAAA,CAAM,KAAA,CAAA,KAAA,KAAK,KAAA,KAAL,OAAA,KAAA,IAAA,GAAY,GAAA,KAAZ,OAAA,KAAmB;QAC/B,MAAM,MAAA,CAAM,KAAA,CAAA,KAAA,KAAK,KAAA,KAAL,OAAA,KAAA,IAAA,GAAY,GAAA,KAAZ,OAAA,KAAmB;QAC/B,MAAM,QAAA,CAAQ,KAAA,CAAA,KAAA,KAAK,KAAA,KAAL,OAAA,KAAA,IAAA,GAAY,KAAA,KAAZ,OAAA,KAAqB;QAEnC,OAAO,QAAQ,CAAA,EAAA,EAAK,GAAG,CAAA,EAAA,EAAK,GAAG,CAAA,EAAA,EAAK,KAAK,CAAA,EAAA,CAAA,GAAO,CAAA,EAAA,EAAK,GAAG,CAAA,EAAA,EAAK,GAAG,CAAA,CAAA,CAAA;IAClE;IAEA,cAAc;QACZ,IAAI,CAAC,IAAA,CAAK,OAAA,CAAQ,MAAA,IAAU,CAAC,IAAA,CAAK,OAAA,CAAQ,MAAA,CAAO,OAAA,IAAW,OAAO,aAAa,aAAa;YAC3F,OAAO;QACT;QAEA,MAAM,EAAE,UAAA,EAAY,QAAA,EAAU,SAAA,EAAW,yBAAA,CAA0B,CAAA,GAAI,IAAA,CAAK,OAAA,CAAQ,MAAA;QAEpF,OAAO,CAAC,EAAE,IAAA,EAAM,MAAA,EAAQ,cAAA,EAAgB,MAAA,CAAO,CAAA,KAAM;YACnD,MAAM,KAAK,SAAS,aAAA,CAAc,KAAK;YAEvC,OAAO,OAAA,CAAQ,cAAc,EAAE,OAAA,CAAQ,CAAC,CAAC,KAAK,KAAK,CAAA,KAAM;gBACvD,IAAI,SAAS,MAAM;oBACjB,OAAQ,KAAK;wBACX,KAAK;wBACL,KAAK;4BACH;wBACF;4BACE,GAAG,YAAA,CAAa,KAAK,KAAK;4BAC1B;oBACJ;gBACF;YACF,CAAC;YAED,GAAG,GAAA,GAAM,eAAe,GAAA;YAExB,MAAM,WAAW,IAAI,mLAAA,CAAkB;gBACrC,SAAS;gBACT;gBACA;gBACA;gBACA,UAAU,CAAC,OAAO,WAAW;oBAC3B,GAAG,KAAA,CAAM,KAAA,GAAQ,GAAG,KAAK,CAAA,EAAA,CAAA;oBACzB,GAAG,KAAA,CAAM,MAAA,GAAS,GAAG,MAAM,CAAA,EAAA,CAAA;gBAC7B;gBACA,UAAU,CAAC,OAAO,WAAW;oBAC3B,MAAM,MAAM,OAAO;oBACnB,IAAI,QAAQ,KAAA,GAAW;wBACrB;oBACF;oBAEA,IAAA,CAAK,MAAA,CACF,KAAA,CAAM,EACN,gBAAA,CAAiB,GAAG,EACpB,gBAAA,CAAiB,IAAA,CAAK,IAAA,EAAM;wBAC3B;wBACA;oBACF,CAAC,EACA,GAAA,CAAI;gBACT;gBACA,UAAU,CAAC,aAAa,cAAc,sBAAsB;oBAC1D,IAAI,YAAY,IAAA,KAAS,KAAK,IAAA,EAAM;wBAClC,OAAO;oBACT;oBAEA,OAAO;gBACT;gBACA,SAAS;oBACP;oBACA,KAAK;wBACH,OAAO;wBACP,QAAQ;oBACV;oBACA,qBAAqB,8BAA8B;gBACrD;YACF,CAAC;YAED,MAAM,MAAM,SAAS,GAAA;YAGrB,IAAI,KAAA,CAAM,UAAA,GAAa;YACvB,IAAI,KAAA,CAAM,aAAA,GAAgB;YAC1B,GAAG,MAAA,GAAS,MAAM;gBAChB,IAAI,KAAA,CAAM,UAAA,GAAa;gBACvB,IAAI,KAAA,CAAM,aAAA,GAAgB;YAC5B;YAEA,OAAO;QACT;IACF;IAEA,cAAc;QACZ,OAAO;YACL,UACE,CAAA,UACA,CAAC,EAAE,QAAA,CAAS,CAAA,KAAM;oBAChB,OAAO,SAAS,aAAA,CAAc;wBAC5B,MAAM,IAAA,CAAK,IAAA;wBACX,OAAO;oBACT,CAAC;gBACH;QACJ;IACF;IAEA,gBAAgB;QACd,OAAO;gBACL,+KAAA,EAAc;gBACZ,MAAM;gBACN,MAAM,IAAA,CAAK,IAAA;gBACX,eAAe,CAAA,UAAS;oBACtB,MAAM,CAAC,EAAE,EAAE,KAAK,KAAK,KAAK,CAAA,GAAI;oBAE9B,OAAO;wBAAE;wBAAK;wBAAK;oBAAM;gBAC3B;YACF,CAAC;SACH;IACF;AACF,CAAC;;ACvPD,IAAO,gBAAQ"}}]
}